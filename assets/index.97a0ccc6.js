var NH=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var xTe=NH((ETe,sF)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Zv(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const RH="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",PH=Zv(RH),IH="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",jH=Zv(IH);function ZR(e){return!!e||e===""}function bd(e){if(Ee(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=Kt(r)?BH(r):bd(r);if(i)for(const o in i)t[o]=i[o]}return t}else{if(Kt(e))return e;if(Nt(e))return e}}const LH=/;(?![^(]*\))/g,zH=/:(.+)/;function BH(e){const t={};return e.split(LH).forEach(n=>{if(n){const r=n.split(zH);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Ya(e){let t="";if(Kt(e))t=e;else if(Ee(e))for(let n=0;n<e.length;n++){const r=Ya(e[n]);r&&(t+=r+" ")}else if(Nt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function UH(e){if(!e)return null;let{class:t,style:n}=e;return t&&!Kt(t)&&(e.class=Ya(t)),n&&(e.style=bd(n)),e}function HH(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=sl(e[r],t[r]);return n}function sl(e,t){if(e===t)return!0;let n=bF(e),r=bF(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=Tg(e),r=Tg(t),n||r)return e===t;if(n=Ee(e),r=Ee(t),n||r)return n&&r?HH(e,t):!1;if(n=Nt(e),r=Nt(t),n||r){if(!n||!r)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const s in e){const a=e.hasOwnProperty(s),l=t.hasOwnProperty(s);if(a&&!l||!a&&l||!sl(e[s],t[s]))return!1}}return String(e)===String(t)}function Qv(e,t){return e.findIndex(n=>sl(n,t))}const mf=e=>Kt(e)?e:e==null?"":Ee(e)||Nt(e)&&(e.toString===eP||!We(e.toString))?JSON.stringify(e,QR,2):String(e),QR=(e,t)=>t&&t.__v_isRef?QR(e,t.value):vf(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:xc(t)?{[`Set(${t.size})`]:[...t.values()]}:Nt(t)&&!Ee(t)&&!tP(t)?String(t):t,Ot={},yf=[],go=()=>{},WH=()=>!1,GH=/^on[^a-z]/,dp=e=>GH.test(e),eO=e=>e.startsWith("onUpdate:"),sn=Object.assign,tO=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},VH=Object.prototype.hasOwnProperty,dt=(e,t)=>VH.call(e,t),Ee=Array.isArray,vf=e=>hp(e)==="[object Map]",xc=e=>hp(e)==="[object Set]",bF=e=>hp(e)==="[object Date]",We=e=>typeof e=="function",Kt=e=>typeof e=="string",Tg=e=>typeof e=="symbol",Nt=e=>e!==null&&typeof e=="object",nO=e=>Nt(e)&&We(e.then)&&We(e.catch),eP=Object.prototype.toString,hp=e=>eP.call(e),YH=e=>hp(e).slice(8,-1),tP=e=>hp(e)==="[object Object]",rO=e=>Kt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Qh=Zv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),e1=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},XH=/-(\w)/g,hi=e1(e=>e.replace(XH,(t,n)=>n?n.toUpperCase():"")),qH=/\B([A-Z])/g,Xo=e1(e=>e.replace(qH,"-$1").toLowerCase()),gp=e1(e=>e.charAt(0).toUpperCase()+e.slice(1)),eg=e1(e=>e?`on${gp(e)}`:""),$f=(e,t)=>!Object.is(e,t),bf=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},ty=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},al=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let xF;const KH=()=>xF||(xF=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let ti;class iO{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&ti&&(this.parent=ti,this.index=(ti.scopes||(ti.scopes=[])).push(this)-1)}run(t){if(this.active){const n=ti;try{return ti=this,t()}finally{ti=n}}}on(){ti=this}off(){ti=this.parent}stop(t){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function JH(e){return new iO(e)}function nP(e,t=ti){t&&t.active&&t.effects.push(e)}function ZH(){return ti}function QH(e){ti&&ti.cleanups.push(e)}const oO=e=>{const t=new Set(e);return t.w=0,t.n=0,t},rP=e=>(e.w&ll)>0,iP=e=>(e.n&ll)>0,eW=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=ll},tW=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];rP(i)&&!iP(i)?i.delete(e):t[n++]=i,i.w&=~ll,i.n&=~ll}t.length=n}},lw=new WeakMap;let Oh=0,ll=1;const uw=30;let no;const $u=Symbol(""),cw=Symbol("");class pp{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,nP(this,r)}run(){if(!this.active)return this.fn();let t=no,n=Xa;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=no,no=this,Xa=!0,ll=1<<++Oh,Oh<=uw?eW(this):wF(this),this.fn()}finally{Oh<=uw&&tW(this),ll=1<<--Oh,no=this.parent,Xa=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){no===this?this.deferStop=!0:this.active&&(wF(this),this.onStop&&this.onStop(),this.active=!1)}}function wF(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}function nW(e,t){e.effect&&(e=e.effect.fn);const n=new pp(e);t&&(sn(n,t),t.scope&&nP(n,t.scope)),(!t||!t.lazy)&&n.run();const r=n.run.bind(n);return r.effect=n,r}function rW(e){e.effect.stop()}let Xa=!0;const oP=[];function wc(){oP.push(Xa),Xa=!1}function Ec(){const e=oP.pop();Xa=e===void 0?!0:e}function gi(e,t,n){if(Xa&&no){let r=lw.get(e);r||lw.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=oO()),sP(i)}}function sP(e,t){let n=!1;Oh<=uw?iP(e)||(e.n|=ll,n=!rP(e)):n=!e.has(no),n&&(e.add(no),no.deps.push(e))}function Zs(e,t,n,r,i,o){const s=lw.get(e);if(!s)return;let a=[];if(t==="clear")a=[...s.values()];else if(n==="length"&&Ee(e))s.forEach((l,u)=>{(u==="length"||u>=r)&&a.push(l)});else switch(n!==void 0&&a.push(s.get(n)),t){case"add":Ee(e)?rO(n)&&a.push(s.get("length")):(a.push(s.get($u)),vf(e)&&a.push(s.get(cw)));break;case"delete":Ee(e)||(a.push(s.get($u)),vf(e)&&a.push(s.get(cw)));break;case"set":vf(e)&&a.push(s.get($u));break}if(a.length===1)a[0]&&fw(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);fw(oO(l))}}function fw(e,t){const n=Ee(e)?e:[...e];for(const r of n)r.computed&&EF(r);for(const r of n)r.computed||EF(r)}function EF(e,t){(e!==no||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const iW=Zv("__proto__,__v_isRef,__isVue"),aP=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Tg)),oW=t1(),sW=t1(!1,!0),aW=t1(!0),lW=t1(!0,!0),SF=uW();function uW(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=at(this);for(let o=0,s=this.length;o<s;o++)gi(r,"get",o+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map(at)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){wc();const r=at(this)[t].apply(this,n);return Ec(),r}}),e}function t1(e=!1,t=!1){return function(r,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?gP:hP:t?dP:fP).get(r))return r;const s=Ee(r);if(!e&&s&&dt(SF,i))return Reflect.get(SF,i,o);const a=Reflect.get(r,i,o);return(Tg(i)?aP.has(i):iW(i))||(e||gi(r,"get",i),t)?a:mn(a)?s&&rO(i)?a:a.value:Nt(a)?e?aO(a):i1(a):a}}const cW=lP(),fW=lP(!0);function lP(e=!1){return function(n,r,i,o){let s=n[r];if(Xu(s)&&mn(s)&&!mn(i))return!1;if(!e&&(!kg(i)&&!Xu(i)&&(s=at(s),i=at(i)),!Ee(n)&&mn(s)&&!mn(i)))return s.value=i,!0;const a=Ee(n)&&rO(r)?Number(r)<n.length:dt(n,r),l=Reflect.set(n,r,i,o);return n===at(o)&&(a?$f(i,s)&&Zs(n,"set",r,i):Zs(n,"add",r,i)),l}}function dW(e,t){const n=dt(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Zs(e,"delete",t,void 0),r}function hW(e,t){const n=Reflect.has(e,t);return(!Tg(t)||!aP.has(t))&&gi(e,"has",t),n}function gW(e){return gi(e,"iterate",Ee(e)?"length":$u),Reflect.ownKeys(e)}const uP={get:oW,set:cW,deleteProperty:dW,has:hW,ownKeys:gW},cP={get:aW,set(e,t){return!0},deleteProperty(e,t){return!0}},pW=sn({},uP,{get:sW,set:fW}),mW=sn({},cP,{get:lW}),sO=e=>e,n1=e=>Reflect.getPrototypeOf(e);function pm(e,t,n=!1,r=!1){e=e.__v_raw;const i=at(e),o=at(t);n||(t!==o&&gi(i,"get",t),gi(i,"get",o));const{has:s}=n1(i),a=r?sO:n?cO:Fg;if(s.call(i,t))return a(e.get(t));if(s.call(i,o))return a(e.get(o));e!==i&&e.get(t)}function mm(e,t=!1){const n=this.__v_raw,r=at(n),i=at(e);return t||(e!==i&&gi(r,"has",e),gi(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function ym(e,t=!1){return e=e.__v_raw,!t&&gi(at(e),"iterate",$u),Reflect.get(e,"size",e)}function OF(e){e=at(e);const t=at(this);return n1(t).has.call(t,e)||(t.add(e),Zs(t,"add",e,e)),this}function _F(e,t){t=at(t);const n=at(this),{has:r,get:i}=n1(n);let o=r.call(n,e);o||(e=at(e),o=r.call(n,e));const s=i.call(n,e);return n.set(e,t),o?$f(t,s)&&Zs(n,"set",e,t):Zs(n,"add",e,t),this}function AF(e){const t=at(this),{has:n,get:r}=n1(t);let i=n.call(t,e);i||(e=at(e),i=n.call(t,e)),r&&r.call(t,e);const o=t.delete(e);return i&&Zs(t,"delete",e,void 0),o}function CF(){const e=at(this),t=e.size!==0,n=e.clear();return t&&Zs(e,"clear",void 0,void 0),n}function vm(e,t){return function(r,i){const o=this,s=o.__v_raw,a=at(s),l=t?sO:e?cO:Fg;return!e&&gi(a,"iterate",$u),s.forEach((u,c)=>r.call(i,l(u),l(c),o))}}function bm(e,t,n){return function(...r){const i=this.__v_raw,o=at(i),s=vf(o),a=e==="entries"||e===Symbol.iterator&&s,l=e==="keys"&&s,u=i[e](...r),c=n?sO:t?cO:Fg;return!t&&gi(o,"iterate",l?cw:$u),{next(){const{value:f,done:d}=u.next();return d?{value:f,done:d}:{value:a?[c(f[0]),c(f[1])]:c(f),done:d}},[Symbol.iterator](){return this}}}}function pa(e){return function(...t){return e==="delete"?!1:this}}function yW(){const e={get(o){return pm(this,o)},get size(){return ym(this)},has:mm,add:OF,set:_F,delete:AF,clear:CF,forEach:vm(!1,!1)},t={get(o){return pm(this,o,!1,!0)},get size(){return ym(this)},has:mm,add:OF,set:_F,delete:AF,clear:CF,forEach:vm(!1,!0)},n={get(o){return pm(this,o,!0)},get size(){return ym(this,!0)},has(o){return mm.call(this,o,!0)},add:pa("add"),set:pa("set"),delete:pa("delete"),clear:pa("clear"),forEach:vm(!0,!1)},r={get(o){return pm(this,o,!0,!0)},get size(){return ym(this,!0)},has(o){return mm.call(this,o,!0)},add:pa("add"),set:pa("set"),delete:pa("delete"),clear:pa("clear"),forEach:vm(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=bm(o,!1,!1),n[o]=bm(o,!0,!1),t[o]=bm(o,!1,!0),r[o]=bm(o,!0,!0)}),[e,n,t,r]}const[vW,bW,xW,wW]=yW();function r1(e,t){const n=t?e?wW:xW:e?bW:vW;return(r,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(dt(n,i)&&i in r?n:r,i,o)}const EW={get:r1(!1,!1)},SW={get:r1(!1,!0)},OW={get:r1(!0,!1)},_W={get:r1(!0,!0)},fP=new WeakMap,dP=new WeakMap,hP=new WeakMap,gP=new WeakMap;function AW(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function CW(e){return e.__v_skip||!Object.isExtensible(e)?0:AW(YH(e))}function i1(e){return Xu(e)?e:o1(e,!1,uP,EW,fP)}function pP(e){return o1(e,!1,pW,SW,dP)}function aO(e){return o1(e,!0,cP,OW,hP)}function TW(e){return o1(e,!0,mW,_W,gP)}function o1(e,t,n,r,i){if(!Nt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const s=CW(e);if(s===0)return e;const a=new Proxy(e,s===2?r:n);return i.set(e,a),a}function Nu(e){return Xu(e)?Nu(e.__v_raw):!!(e&&e.__v_isReactive)}function Xu(e){return!!(e&&e.__v_isReadonly)}function kg(e){return!!(e&&e.__v_isShallow)}function lO(e){return Nu(e)||Xu(e)}function at(e){const t=e&&e.__v_raw;return t?at(t):e}function uO(e){return ty(e,"__v_skip",!0),e}const Fg=e=>Nt(e)?i1(e):e,cO=e=>Nt(e)?aO(e):e;function fO(e){Xa&&no&&(e=at(e),sP(e.dep||(e.dep=oO())))}function s1(e,t){e=at(e),e.dep&&fw(e.dep)}function mn(e){return!!(e&&e.__v_isRef===!0)}function w0(e){return mP(e,!1)}function kW(e){return mP(e,!0)}function mP(e,t){return mn(e)?e:new FW(e,t)}class FW{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:at(t),this._value=n?t:Fg(t)}get value(){return fO(this),this._value}set value(t){const n=this.__v_isShallow||kg(t)||Xu(t);t=n?t:at(t),$f(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:Fg(t),s1(this))}}function DW(e){s1(e)}function yP(e){return mn(e)?e.value:e}const MW={get:(e,t,n)=>yP(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return mn(i)&&!mn(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function dO(e){return Nu(e)?e:new Proxy(e,MW)}class $W{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=t(()=>fO(this),()=>s1(this));this._get=n,this._set=r}get value(){return this._get()}set value(t){this._set(t)}}function NW(e){return new $W(e)}function RW(e){const t=Ee(e)?new Array(e.length):{};for(const n in e)t[n]=vP(e,n);return t}class PW{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function vP(e,t,n){const r=e[t];return mn(r)?r:new PW(e,t,n)}var bP;class IW{constructor(t,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[bP]=!1,this._dirty=!0,this.effect=new pp(t,()=>{this._dirty||(this._dirty=!0,s1(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=at(this);return fO(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}bP="__v_isReadonly";function jW(e,t,n=!1){let r,i;const o=We(e);return o?(r=e,i=go):(r=e.get,i=e.set),new IW(r,i,o||!i,n)}const tg=[];function xP(e,...t){wc();const n=tg.length?tg[tg.length-1].component:null,r=n&&n.appContext.config.warnHandler,i=LW();if(r)qo(r,n,11,[e+t.join(""),n&&n.proxy,i.map(({vnode:o})=>`at <${cI(n,o.type)}>`).join(`
`),i]);else{const o=[`[Vue warn]: ${e}`,...t];i.length&&o.push(`
`,...zW(i)),console.warn(...o)}Ec()}function LW(){let e=tg[tg.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const r=e.component&&e.component.parent;e=r&&r.vnode}return t}function zW(e){const t=[];return e.forEach((n,r)=>{t.push(...r===0?[]:[`
`],...BW(n))}),t}function BW({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",r=e.component?e.component.parent==null:!1,i=` at <${cI(e.component,e.type,r)}`,o=">"+n;return e.props?[i,...UW(e.props),o]:[i+o]}function UW(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach(r=>{t.push(...wP(r,e[r]))}),n.length>3&&t.push(" ..."),t}function wP(e,t,n){return Kt(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:mn(t)?(t=wP(e,at(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):We(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=at(t),n?t:[`${e}=`,t])}function qo(e,t,n,r){let i;try{i=r?e(...r):e()}catch(o){Sc(o,t,n)}return i}function ci(e,t,n,r){if(We(e)){const o=qo(e,t,n,r);return o&&nO(o)&&o.catch(s=>{Sc(s,t,n)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(ci(e[o],t,n,r));return i}function Sc(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const s=t.proxy,a=n;for(;o;){const u=o.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,s,a)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){qo(l,null,10,[e,s,a]);return}}HW(e,n,i,r)}function HW(e,t,n,r=!0){console.error(e)}let Dg=!1,dw=!1;const Xn=[];let jo=0;const xf=[];let Ds=null,mu=0;const EP=Promise.resolve();let hO=null;function gO(e){const t=hO||EP;return e?t.then(this?e.bind(this):e):t}function WW(e){let t=jo+1,n=Xn.length;for(;t<n;){const r=t+n>>>1;Mg(Xn[r])<e?t=r+1:n=r}return t}function a1(e){(!Xn.length||!Xn.includes(e,Dg&&e.allowRecurse?jo+1:jo))&&(e.id==null?Xn.push(e):Xn.splice(WW(e.id),0,e),SP())}function SP(){!Dg&&!dw&&(dw=!0,hO=EP.then(OP))}function GW(e){const t=Xn.indexOf(e);t>jo&&Xn.splice(t,1)}function pO(e){Ee(e)?xf.push(...e):(!Ds||!Ds.includes(e,e.allowRecurse?mu+1:mu))&&xf.push(e),SP()}function TF(e,t=Dg?jo+1:0){for(;t<Xn.length;t++){const n=Xn[t];n&&n.pre&&(Xn.splice(t,1),t--,n())}}function ny(e){if(xf.length){const t=[...new Set(xf)];if(xf.length=0,Ds){Ds.push(...t);return}for(Ds=t,Ds.sort((n,r)=>Mg(n)-Mg(r)),mu=0;mu<Ds.length;mu++)Ds[mu]();Ds=null,mu=0}}const Mg=e=>e.id==null?1/0:e.id,VW=(e,t)=>{const n=Mg(e)-Mg(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function OP(e){dw=!1,Dg=!0,Xn.sort(VW);const t=go;try{for(jo=0;jo<Xn.length;jo++){const n=Xn[jo];n&&n.active!==!1&&qo(n,null,14)}}finally{jo=0,Xn.length=0,ny(),Dg=!1,hO=null,(Xn.length||xf.length)&&OP()}}let rf,xm=[];function _P(e,t){var n,r;rf=e,rf?(rf.enabled=!0,xm.forEach(({event:i,args:o})=>rf.emit(i,...o)),xm=[]):typeof window<"u"&&window.HTMLElement&&!(!((r=(n=window.navigator)===null||n===void 0?void 0:n.userAgent)===null||r===void 0)&&r.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(o=>{_P(o,t)}),setTimeout(()=>{rf||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,xm=[])},3e3)):xm=[]}function YW(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Ot;let i=n;const o=t.startsWith("update:"),s=o&&t.slice(7);if(s&&s in r){const c=`${s==="modelValue"?"model":s}Modifiers`,{number:f,trim:d}=r[c]||Ot;d&&(i=n.map(h=>h.trim())),f&&(i=n.map(al))}let a,l=r[a=eg(t)]||r[a=eg(hi(t))];!l&&o&&(l=r[a=eg(Xo(t))]),l&&ci(l,e,6,i);const u=r[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,ci(u,e,6,i)}}function AP(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const o=e.emits;let s={},a=!1;if(!We(e)){const l=u=>{const c=AP(u,t,!0);c&&(a=!0,sn(s,c))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(Nt(e)&&r.set(e,null),null):(Ee(o)?o.forEach(l=>s[l]=null):sn(s,o),Nt(e)&&r.set(e,s),s)}function l1(e,t){return!e||!dp(t)?!1:(t=t.slice(2).replace(/Once$/,""),dt(e,t[0].toLowerCase()+t.slice(1))||dt(e,Xo(t))||dt(e,t))}let Jn=null,u1=null;function $g(e){const t=Jn;return Jn=e,u1=e&&e.type.__scopeId||null,t}function mO(e){u1=e}function yO(){u1=null}const XW=e=>c1;function c1(e,t=Jn,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&bw(-1);const o=$g(t),s=e(...i);return $g(o),r._d&&bw(1),s};return r._n=!0,r._c=!0,r._d=!0,r}function E0(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[s],slots:a,attrs:l,emit:u,render:c,renderCache:f,data:d,setupState:h,ctx:g,inheritAttrs:p}=e;let m,y;const v=$g(e);try{if(n.shapeFlag&4){const x=i||r;m=ii(c.call(x,x,f,o,h,d,g)),y=l}else{const x=t;m=ii(x.length>1?x(o,{attrs:l,slots:a,emit:u}):x(o,null)),y=t.props?l:KW(l)}}catch(x){og.length=0,Sc(x,e,1),m=mt(tr)}let b=m;if(y&&p!==!1){const x=Object.keys(y),{shapeFlag:w}=b;x.length&&w&7&&(s&&x.some(eO)&&(y=JW(y,s)),b=rs(b,y))}return n.dirs&&(b=rs(b),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&(b.transition=n.transition),m=b,$g(v),m}function qW(e){let t;for(let n=0;n<e.length;n++){const r=e[n];if(cl(r)){if(r.type!==tr||r.children==="v-if"){if(t)return;t=r}}else return}return t}const KW=e=>{let t;for(const n in e)(n==="class"||n==="style"||dp(n))&&((t||(t={}))[n]=e[n]);return t},JW=(e,t)=>{const n={};for(const r in e)(!eO(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function ZW(e,t,n){const{props:r,children:i,component:o}=e,{props:s,children:a,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?kF(r,s,u):!!s;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const d=c[f];if(s[d]!==r[d]&&!l1(u,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===s?!1:r?s?kF(r,s,u):!0:!!s;return!1}function kF(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!l1(n,o))return!0}return!1}function vO({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const CP=e=>e.__isSuspense,QW={name:"Suspense",__isSuspense:!0,process(e,t,n,r,i,o,s,a,l,u){e==null?tG(t,n,r,i,o,s,a,l,u):nG(e,t,n,r,i,s,a,l,u)},hydrate:rG,create:bO,normalize:iG},eG=QW;function Ng(e,t){const n=e.props&&e.props[t];We(n)&&n()}function tG(e,t,n,r,i,o,s,a,l){const{p:u,o:{createElement:c}}=l,f=c("div"),d=e.suspense=bO(e,i,r,t,f,n,o,s,a,l);u(null,d.pendingBranch=e.ssContent,f,null,r,d,o,s),d.deps>0?(Ng(e,"onPending"),Ng(e,"onFallback"),u(null,e.ssFallback,t,n,r,null,o,s),wf(d,e.ssFallback)):d.resolve()}function nG(e,t,n,r,i,o,s,a,{p:l,um:u,o:{createElement:c}}){const f=t.suspense=e.suspense;f.vnode=t,t.el=e.el;const d=t.ssContent,h=t.ssFallback,{activeBranch:g,pendingBranch:p,isInFallback:m,isHydrating:y}=f;if(p)f.pendingBranch=d,Lo(d,p)?(l(p,d,f.hiddenContainer,null,i,f,o,s,a),f.deps<=0?f.resolve():m&&(l(g,h,n,r,i,null,o,s,a),wf(f,h))):(f.pendingId++,y?(f.isHydrating=!1,f.activeBranch=p):u(p,i,f),f.deps=0,f.effects.length=0,f.hiddenContainer=c("div"),m?(l(null,d,f.hiddenContainer,null,i,f,o,s,a),f.deps<=0?f.resolve():(l(g,h,n,r,i,null,o,s,a),wf(f,h))):g&&Lo(d,g)?(l(g,d,n,r,i,f,o,s,a),f.resolve(!0)):(l(null,d,f.hiddenContainer,null,i,f,o,s,a),f.deps<=0&&f.resolve()));else if(g&&Lo(d,g))l(g,d,n,r,i,f,o,s,a),wf(f,d);else if(Ng(t,"onPending"),f.pendingBranch=d,f.pendingId++,l(null,d,f.hiddenContainer,null,i,f,o,s,a),f.deps<=0)f.resolve();else{const{timeout:v,pendingId:b}=f;v>0?setTimeout(()=>{f.pendingId===b&&f.fallback(h)},v):v===0&&f.fallback(h)}}function bO(e,t,n,r,i,o,s,a,l,u,c=!1){const{p:f,m:d,um:h,n:g,o:{parentNode:p,remove:m}}=u,y=al(e.props&&e.props.timeout),v={vnode:e,parent:t,parentComponent:n,isSVG:s,container:r,hiddenContainer:i,anchor:o,deps:0,pendingId:0,timeout:typeof y=="number"?y:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:c,isUnmounted:!1,effects:[],resolve(b=!1){const{vnode:x,activeBranch:w,pendingBranch:S,pendingId:E,effects:O,parentComponent:A,container:C}=v;if(v.isHydrating)v.isHydrating=!1;else if(!b){const k=w&&S.transition&&S.transition.mode==="out-in";k&&(w.transition.afterLeave=()=>{E===v.pendingId&&d(S,C,D,0)});let{anchor:D}=v;w&&(D=g(w),h(w,A,v,!0)),k||d(S,C,D,0)}wf(v,S),v.pendingBranch=null,v.isInFallback=!1;let _=v.parent,T=!1;for(;_;){if(_.pendingBranch){_.effects.push(...O),T=!0;break}_=_.parent}T||pO(O),v.effects=[],Ng(x,"onResolve")},fallback(b){if(!v.pendingBranch)return;const{vnode:x,activeBranch:w,parentComponent:S,container:E,isSVG:O}=v;Ng(x,"onFallback");const A=g(w),C=()=>{!v.isInFallback||(f(null,b,E,A,S,null,O,a,l),wf(v,b))},_=b.transition&&b.transition.mode==="out-in";_&&(w.transition.afterLeave=C),v.isInFallback=!0,h(w,S,null,!0),_||C()},move(b,x,w){v.activeBranch&&d(v.activeBranch,b,x,w),v.container=b},next(){return v.activeBranch&&g(v.activeBranch)},registerDep(b,x){const w=!!v.pendingBranch;w&&v.deps++;const S=b.vnode.el;b.asyncDep.catch(E=>{Sc(E,b,0)}).then(E=>{if(b.isUnmounted||v.isUnmounted||v.pendingId!==b.suspenseId)return;b.asyncResolved=!0;const{vnode:O}=b;xw(b,E,!1),S&&(O.el=S);const A=!S&&b.subTree.el;x(b,O,p(S||b.subTree.el),S?null:g(b.subTree),v,s,l),A&&m(A),vO(b,O.el),w&&--v.deps===0&&v.resolve()})},unmount(b,x){v.isUnmounted=!0,v.activeBranch&&h(v.activeBranch,n,b,x),v.pendingBranch&&h(v.pendingBranch,n,b,x)}};return v}function rG(e,t,n,r,i,o,s,a,l){const u=t.suspense=bO(t,r,n,e.parentNode,document.createElement("div"),null,i,o,s,a,!0),c=l(e,u.pendingBranch=t.ssContent,n,u,o,s);return u.deps===0&&u.resolve(),c}function iG(e){const{shapeFlag:t,children:n}=e,r=t&32;e.ssContent=FF(r?n.default:n),e.ssFallback=r?FF(n.fallback):mt(tr)}function FF(e){let t;if(We(e)){const n=Ku&&e._c;n&&(e._d=!1,bo()),e=e(),n&&(e._d=!0,t=jr,eI())}return Ee(e)&&(e=qW(e)),e=ii(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(n=>n!==e)),e}function TP(e,t){t&&t.pendingBranch?Ee(e)?t.effects.push(...e):t.effects.push(e):pO(e)}function wf(e,t){e.activeBranch=t;const{vnode:n,parentComponent:r}=e,i=n.el=t.el;r&&r.subTree===n&&(r.vnode.el=i,vO(r,i))}function kP(e,t){if(pn){let n=pn.provides;const r=pn.parent&&pn.parent.provides;r===n&&(n=pn.provides=Object.create(r)),n[e]=t}}function ng(e,t,n=!1){const r=pn||Jn;if(r){const i=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&We(t)?t.call(r.proxy):t}}function oG(e,t){return mp(e,null,t)}function FP(e,t){return mp(e,null,{flush:"post"})}function sG(e,t){return mp(e,null,{flush:"sync"})}const DF={};function rg(e,t,n){return mp(e,t,n)}function mp(e,t,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:s}=Ot){const a=pn;let l,u=!1,c=!1;if(mn(e)?(l=()=>e.value,u=kg(e)):Nu(e)?(l=()=>e,r=!0):Ee(e)?(c=!0,u=e.some(y=>Nu(y)||kg(y)),l=()=>e.map(y=>{if(mn(y))return y.value;if(Nu(y))return Ou(y);if(We(y))return qo(y,a,2)})):We(e)?t?l=()=>qo(e,a,2):l=()=>{if(!(a&&a.isUnmounted))return f&&f(),ci(e,a,3,[d])}:l=go,t&&r){const y=l;l=()=>Ou(y())}let f,d=y=>{f=m.onStop=()=>{qo(y,a,4)}};if(Pf)return d=go,t?n&&ci(t,a,3,[l(),c?[]:void 0,d]):l(),go;let h=c?[]:DF;const g=()=>{if(!!m.active)if(t){const y=m.run();(r||u||(c?y.some((v,b)=>$f(v,h[b])):$f(y,h)))&&(f&&f(),ci(t,a,3,[y,h===DF?void 0:h,d]),h=y)}else m.run()};g.allowRecurse=!!t;let p;i==="sync"?p=g:i==="post"?p=()=>Pn(g,a&&a.suspense):(g.pre=!0,a&&(g.id=a.uid),p=()=>a1(g));const m=new pp(l,p);return t?n?g():h=m.run():i==="post"?Pn(m.run.bind(m),a&&a.suspense):m.run(),()=>{m.stop(),a&&a.scope&&tO(a.scope.effects,m)}}function aG(e,t,n){const r=this.proxy,i=Kt(e)?e.includes(".")?DP(r,e):()=>r[e]:e.bind(r,r);let o;We(t)?o=t:(o=t.handler,n=t);const s=pn;fl(this);const a=mp(i,o.bind(r),n);return s?fl(s):qa(),a}function DP(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Ou(e,t){if(!Nt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),mn(e))Ou(e.value,t);else if(Ee(e))for(let n=0;n<e.length;n++)Ou(e[n],t);else if(xc(e)||vf(e))e.forEach(n=>{Ou(n,t)});else if(tP(e))for(const n in e)Ou(e[n],t);return e}function xO(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return vp(()=>{e.isMounted=!0}),g1(()=>{e.isUnmounting=!0}),e}const xi=[Function,Array],lG={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:xi,onEnter:xi,onAfterEnter:xi,onEnterCancelled:xi,onBeforeLeave:xi,onLeave:xi,onAfterLeave:xi,onLeaveCancelled:xi,onBeforeAppear:xi,onAppear:xi,onAfterAppear:xi,onAppearCancelled:xi},setup(e,{slots:t}){const n=Ml(),r=xO();let i;return()=>{const o=t.default&&f1(t.default(),!0);if(!o||!o.length)return;let s=o[0];if(o.length>1){for(const p of o)if(p.type!==tr){s=p;break}}const a=at(e),{mode:l}=a;if(r.isLeaving)return bx(s);const u=MF(s);if(!u)return bx(s);const c=Nf(u,a,r,n);qu(u,c);const f=n.subTree,d=f&&MF(f);let h=!1;const{getTransitionKey:g}=u.type;if(g){const p=g();i===void 0?i=p:p!==i&&(i=p,h=!0)}if(d&&d.type!==tr&&(!Lo(u,d)||h)){const p=Nf(d,a,r,n);if(qu(d,p),l==="out-in")return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,n.update()},bx(s);l==="in-out"&&u.type!==tr&&(p.delayLeave=(m,y,v)=>{const b=MP(r,d);b[String(d.key)]=d,m._leaveCb=()=>{y(),m._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=v})}return s}}},wO=lG;function MP(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Nf(e,t,n,r){const{appear:i,mode:o,persisted:s=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:f,onLeave:d,onAfterLeave:h,onLeaveCancelled:g,onBeforeAppear:p,onAppear:m,onAfterAppear:y,onAppearCancelled:v}=t,b=String(e.key),x=MP(n,e),w=(O,A)=>{O&&ci(O,r,9,A)},S=(O,A)=>{const C=A[1];w(O,A),Ee(O)?O.every(_=>_.length<=1)&&C():O.length<=1&&C()},E={mode:o,persisted:s,beforeEnter(O){let A=a;if(!n.isMounted)if(i)A=p||a;else return;O._leaveCb&&O._leaveCb(!0);const C=x[b];C&&Lo(e,C)&&C.el._leaveCb&&C.el._leaveCb(),w(A,[O])},enter(O){let A=l,C=u,_=c;if(!n.isMounted)if(i)A=m||l,C=y||u,_=v||c;else return;let T=!1;const k=O._enterCb=D=>{T||(T=!0,D?w(_,[O]):w(C,[O]),E.delayedLeave&&E.delayedLeave(),O._enterCb=void 0)};A?S(A,[O,k]):k()},leave(O,A){const C=String(e.key);if(O._enterCb&&O._enterCb(!0),n.isUnmounting)return A();w(f,[O]);let _=!1;const T=O._leaveCb=k=>{_||(_=!0,A(),k?w(g,[O]):w(h,[O]),O._leaveCb=void 0,x[C]===e&&delete x[C])};x[C]=e,d?S(d,[O,T]):T()},clone(O){return Nf(O,t,n,r)}};return E}function bx(e){if(yp(e))return e=rs(e),e.children=null,e}function MF(e){return yp(e)?e.children?e.children[0]:void 0:e}function qu(e,t){e.shapeFlag&6&&e.component?qu(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function f1(e,t=!1,n){let r=[],i=0;for(let o=0;o<e.length;o++){let s=e[o];const a=n==null?s.key:String(n)+String(s.key!=null?s.key:o);s.type===hn?(s.patchFlag&128&&i++,r=r.concat(f1(s.children,t,a))):(t||s.type!==tr)&&r.push(a!=null?rs(s,{key:a}):s)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}function EO(e){return We(e)?{setup:e,name:e.name}:e}const Ru=e=>!!e.type.__asyncLoader;function uG(e){We(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:r,delay:i=200,timeout:o,suspensible:s=!0,onError:a}=e;let l=null,u,c=0;const f=()=>(c++,l=null,d()),d=()=>{let h;return l||(h=l=t().catch(g=>{if(g=g instanceof Error?g:new Error(String(g)),a)return new Promise((p,m)=>{a(g,()=>p(f()),()=>m(g),c+1)});throw g}).then(g=>h!==l&&l?l:(g&&(g.__esModule||g[Symbol.toStringTag]==="Module")&&(g=g.default),u=g,g)))};return EO({name:"AsyncComponentWrapper",__asyncLoader:d,get __asyncResolved(){return u},setup(){const h=pn;if(u)return()=>xx(u,h);const g=v=>{l=null,Sc(v,h,13,!r)};if(s&&h.suspense||Pf)return d().then(v=>()=>xx(v,h)).catch(v=>(g(v),()=>r?mt(r,{error:v}):null));const p=w0(!1),m=w0(),y=w0(!!i);return i&&setTimeout(()=>{y.value=!1},i),o!=null&&setTimeout(()=>{if(!p.value&&!m.value){const v=new Error(`Async component timed out after ${o}ms.`);g(v),m.value=v}},o),d().then(()=>{p.value=!0,h.parent&&yp(h.parent.vnode)&&a1(h.parent.update)}).catch(v=>{g(v),m.value=v}),()=>{if(p.value&&u)return xx(u,h);if(m.value&&r)return mt(r,{error:m.value});if(n&&!y.value)return mt(n)}}})}function xx(e,{vnode:{ref:t,props:n,children:r,shapeFlag:i},parent:o}){const s=mt(e,n,r);return s.ref=t,s}const yp=e=>e.type.__isKeepAlive,cG={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=Ml(),r=n.ctx;if(!r.renderer)return()=>{const v=t.default&&t.default();return v&&v.length===1?v[0]:v};const i=new Map,o=new Set;let s=null;const a=n.suspense,{renderer:{p:l,m:u,um:c,o:{createElement:f}}}=r,d=f("div");r.activate=(v,b,x,w,S)=>{const E=v.component;u(v,b,x,0,a),l(E.vnode,v,b,x,E,a,w,v.slotScopeIds,S),Pn(()=>{E.isDeactivated=!1,E.a&&bf(E.a);const O=v.props&&v.props.onVnodeMounted;O&&Mr(O,E.parent,v)},a)},r.deactivate=v=>{const b=v.component;u(v,d,null,1,a),Pn(()=>{b.da&&bf(b.da);const x=v.props&&v.props.onVnodeUnmounted;x&&Mr(x,b.parent,v),b.isDeactivated=!0},a)};function h(v){wx(v),c(v,n,a,!0)}function g(v){i.forEach((b,x)=>{const w=ay(b.type);w&&(!v||!v(w))&&p(x)})}function p(v){const b=i.get(v);!s||b.type!==s.type?h(b):s&&wx(s),i.delete(v),o.delete(v)}rg(()=>[e.include,e.exclude],([v,b])=>{v&&g(x=>_h(v,x)),b&&g(x=>!_h(b,x))},{flush:"post",deep:!0});let m=null;const y=()=>{m!=null&&i.set(m,Ex(n.subTree))};return vp(y),h1(y),g1(()=>{i.forEach(v=>{const{subTree:b,suspense:x}=n,w=Ex(b);if(v.type===w.type){wx(w);const S=w.component.da;S&&Pn(S,x);return}h(v)})}),()=>{if(m=null,!t.default)return null;const v=t.default(),b=v[0];if(v.length>1)return s=null,v;if(!cl(b)||!(b.shapeFlag&4)&&!(b.shapeFlag&128))return s=null,b;let x=Ex(b);const w=x.type,S=ay(Ru(x)?x.type.__asyncResolved||{}:w),{include:E,exclude:O,max:A}=e;if(E&&(!S||!_h(E,S))||O&&S&&_h(O,S))return s=x,b;const C=x.key==null?w:x.key,_=i.get(C);return x.el&&(x=rs(x),b.shapeFlag&128&&(b.ssContent=x)),m=C,_?(x.el=_.el,x.component=_.component,x.transition&&qu(x,x.transition),x.shapeFlag|=512,o.delete(C),o.add(C)):(o.add(C),A&&o.size>parseInt(A,10)&&p(o.values().next().value)),x.shapeFlag|=256,s=x,CP(b.type)?b:x}}},fG=cG;function _h(e,t){return Ee(e)?e.some(n=>_h(n,t)):Kt(e)?e.split(",").includes(t):e.test?e.test(t):!1}function $P(e,t){RP(e,"a",t)}function NP(e,t){RP(e,"da",t)}function RP(e,t,n=pn){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(d1(t,r,n),n){let i=n.parent;for(;i&&i.parent;)yp(i.parent.vnode)&&dG(r,t,n,i),i=i.parent}}function dG(e,t,n,r){const i=d1(t,e,r,!0);p1(()=>{tO(r[t],i)},n)}function wx(e){let t=e.shapeFlag;t&256&&(t-=256),t&512&&(t-=512),e.shapeFlag=t}function Ex(e){return e.shapeFlag&128?e.ssContent:e}function d1(e,t,n=pn,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...s)=>{if(n.isUnmounted)return;wc(),fl(n);const a=ci(t,n,e,s);return qa(),Ec(),a});return r?i.unshift(o):i.push(o),o}}const na=e=>(t,n=pn)=>(!Pf||e==="sp")&&d1(e,(...r)=>t(...r),n),PP=na("bm"),vp=na("m"),IP=na("bu"),h1=na("u"),g1=na("bum"),p1=na("um"),jP=na("sp"),LP=na("rtg"),zP=na("rtc");function BP(e,t=pn){d1("ec",e,t)}function Oi(e,t){const n=Jn;if(n===null)return e;const r=y1(n)||n.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[s,a,l,u=Ot]=t[o];We(s)&&(s={mounted:s,updated:s}),s.deep&&Ou(a),i.push({dir:s,instance:r,value:a,oldValue:void 0,arg:l,modifiers:u})}return e}function No(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);let l=a.dir[r];l&&(wc(),ci(l,n,8,[e.el,a,e,t]),Ec())}}const SO="components",hG="directives";function _u(e,t){return OO(SO,e,!0,t)||e}const UP=Symbol();function gG(e){return Kt(e)?OO(SO,e,!1)||e:e||UP}function pG(e){return OO(hG,e)}function OO(e,t,n=!0,r=!1){const i=Jn||pn;if(i){const o=i.type;if(e===SO){const a=ay(o,!1);if(a&&(a===t||a===hi(t)||a===gp(hi(t))))return o}const s=$F(i[e]||o[e],t)||$F(i.appContext[e],t);return!s&&r?o:s}}function $F(e,t){return e&&(e[t]||e[hi(t)]||e[gp(hi(t))])}function mG(e,t,n,r){let i;const o=n&&n[r];if(Ee(e)||Kt(e)){i=new Array(e.length);for(let s=0,a=e.length;s<a;s++)i[s]=t(e[s],s,void 0,o&&o[s])}else if(typeof e=="number"){i=new Array(e);for(let s=0;s<e;s++)i[s]=t(s+1,s,void 0,o&&o[s])}else if(Nt(e))if(e[Symbol.iterator])i=Array.from(e,(s,a)=>t(s,a,void 0,o&&o[a]));else{const s=Object.keys(e);i=new Array(s.length);for(let a=0,l=s.length;a<l;a++){const u=s[a];i[a]=t(e[u],u,a,o&&o[a])}}else i=[];return n&&(n[r]=i),i}function yG(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(Ee(r))for(let i=0;i<r.length;i++)e[r[i].name]=r[i].fn;else r&&(e[r.name]=r.key?(...i)=>{const o=r.fn(...i);return o&&(o.key=r.key),o}:r.fn)}return e}function vG(e,t,n={},r,i){if(Jn.isCE||Jn.parent&&Ru(Jn.parent)&&Jn.parent.isCE)return mt("slot",t==="default"?null:{name:t},r&&r());let o=e[t];o&&o._c&&(o._d=!1),bo();const s=o&&HP(o(n)),a=TO(hn,{key:n.key||s&&s.key||`_${t}`},s||(r?r():[]),s&&e._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function HP(e){return e.some(t=>cl(t)?!(t.type===tr||t.type===hn&&!HP(t.children)):!0)?e:null}function bG(e,t){const n={};for(const r in e)n[t&&/[A-Z]/.test(r)?`on:${r}`:eg(r)]=e[r];return n}const hw=e=>e?sI(e)?y1(e)||e.proxy:hw(e.parent):null,ry=sn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>hw(e.parent),$root:e=>hw(e.root),$emit:e=>e.emit,$options:e=>_O(e),$forceUpdate:e=>e.f||(e.f=()=>a1(e.update)),$nextTick:e=>e.n||(e.n=gO.bind(e.proxy)),$watch:e=>aG.bind(e)}),gw={get({_:e},t){const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const h=s[t];if(h!==void 0)switch(h){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return o[t]}else{if(r!==Ot&&dt(r,t))return s[t]=1,r[t];if(i!==Ot&&dt(i,t))return s[t]=2,i[t];if((u=e.propsOptions[0])&&dt(u,t))return s[t]=3,o[t];if(n!==Ot&&dt(n,t))return s[t]=4,n[t];pw&&(s[t]=0)}}const c=ry[t];let f,d;if(c)return t==="$attrs"&&gi(e,"get",t),c(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==Ot&&dt(n,t))return s[t]=4,n[t];if(d=l.config.globalProperties,dt(d,t))return d[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:o}=e;return i!==Ot&&dt(i,t)?(i[t]=n,!0):r!==Ot&&dt(r,t)?(r[t]=n,!0):dt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let a;return!!n[s]||e!==Ot&&dt(e,s)||t!==Ot&&dt(t,s)||(a=o[0])&&dt(a,s)||dt(r,s)||dt(ry,s)||dt(i.config.globalProperties,s)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:dt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}},xG=sn({},gw,{get(e,t){if(t!==Symbol.unscopables)return gw.get(e,t,e)},has(e,t){return t[0]!=="_"&&!PH(t)}});let pw=!0;function wG(e){const t=_O(e),n=e.proxy,r=e.ctx;pw=!1,t.beforeCreate&&NF(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:s,watch:a,provide:l,inject:u,created:c,beforeMount:f,mounted:d,beforeUpdate:h,updated:g,activated:p,deactivated:m,beforeDestroy:y,beforeUnmount:v,destroyed:b,unmounted:x,render:w,renderTracked:S,renderTriggered:E,errorCaptured:O,serverPrefetch:A,expose:C,inheritAttrs:_,components:T,directives:k,filters:D}=t;if(u&&EG(u,r,null,e.appContext.config.unwrapInjectedRef),s)for(const N in s){const P=s[N];We(P)&&(r[N]=P.bind(n))}if(i){const N=i.call(n,n);Nt(N)&&(e.data=i1(N))}if(pw=!0,o)for(const N in o){const P=o[N],H=We(P)?P.bind(n,n):We(P.get)?P.get.bind(n,n):go,ie=!We(P)&&We(P.set)?P.set.bind(n):go,ge=fI({get:H,set:ie});Object.defineProperty(r,N,{enumerable:!0,configurable:!0,get:()=>ge.value,set:be=>ge.value=be})}if(a)for(const N in a)WP(a[N],r,n,N);if(l){const N=We(l)?l.call(n):l;Reflect.ownKeys(N).forEach(P=>{kP(P,N[P])})}c&&NF(c,e,"c");function $(N,P){Ee(P)?P.forEach(H=>N(H.bind(n))):P&&N(P.bind(n))}if($(PP,f),$(vp,d),$(IP,h),$(h1,g),$($P,p),$(NP,m),$(BP,O),$(zP,S),$(LP,E),$(g1,v),$(p1,x),$(jP,A),Ee(C))if(C.length){const N=e.exposed||(e.exposed={});C.forEach(P=>{Object.defineProperty(N,P,{get:()=>n[P],set:H=>n[P]=H})})}else e.exposed||(e.exposed={});w&&e.render===go&&(e.render=w),_!=null&&(e.inheritAttrs=_),T&&(e.components=T),k&&(e.directives=k)}function EG(e,t,n=go,r=!1){Ee(e)&&(e=mw(e));for(const i in e){const o=e[i];let s;Nt(o)?"default"in o?s=ng(o.from||i,o.default,!0):s=ng(o.from||i):s=ng(o),mn(s)&&r?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[i]=s}}function NF(e,t,n){ci(Ee(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function WP(e,t,n,r){const i=r.includes(".")?DP(n,r):()=>n[r];if(Kt(e)){const o=t[e];We(o)&&rg(i,o)}else if(We(e))rg(i,e.bind(n));else if(Nt(e))if(Ee(e))e.forEach(o=>WP(o,t,n,r));else{const o=We(e.handler)?e.handler.bind(n):t[e.handler];We(o)&&rg(i,o,e)}}function _O(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=e.appContext,a=o.get(t);let l;return a?l=a:!i.length&&!n&&!r?l=t:(l={},i.length&&i.forEach(u=>iy(l,u,s,!0)),iy(l,t,s)),Nt(t)&&o.set(t,l),l}function iy(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&iy(e,o,n,!0),i&&i.forEach(s=>iy(e,s,n,!0));for(const s in t)if(!(r&&s==="expose")){const a=SG[s]||n&&n[s];e[s]=a?a(e[s],t[s]):t[s]}return e}const SG={data:RF,props:fu,emits:fu,methods:fu,computed:fu,beforeCreate:dr,created:dr,beforeMount:dr,mounted:dr,beforeUpdate:dr,updated:dr,beforeDestroy:dr,beforeUnmount:dr,destroyed:dr,unmounted:dr,activated:dr,deactivated:dr,errorCaptured:dr,serverPrefetch:dr,components:fu,directives:fu,watch:_G,provide:RF,inject:OG};function RF(e,t){return t?e?function(){return sn(We(e)?e.call(this,this):e,We(t)?t.call(this,this):t)}:t:e}function OG(e,t){return fu(mw(e),mw(t))}function mw(e){if(Ee(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function dr(e,t){return e?[...new Set([].concat(e,t))]:t}function fu(e,t){return e?sn(sn(Object.create(null),e),t):t}function _G(e,t){if(!e)return t;if(!t)return e;const n=sn(Object.create(null),e);for(const r in t)n[r]=dr(e[r],t[r]);return n}function AG(e,t,n,r=!1){const i={},o={};ty(o,m1,1),e.propsDefaults=Object.create(null),GP(e,t,i,o);for(const s in e.propsOptions[0])s in i||(i[s]=void 0);n?e.props=r?i:pP(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function CG(e,t,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=e,a=at(i),[l]=e.propsOptions;let u=!1;if((r||s>0)&&!(s&16)){if(s&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let d=c[f];if(l1(e.emitsOptions,d))continue;const h=t[d];if(l)if(dt(o,d))h!==o[d]&&(o[d]=h,u=!0);else{const g=hi(d);i[g]=yw(l,a,g,h,e,!1)}else h!==o[d]&&(o[d]=h,u=!0)}}}else{GP(e,t,i,o)&&(u=!0);let c;for(const f in a)(!t||!dt(t,f)&&((c=Xo(f))===f||!dt(t,c)))&&(l?n&&(n[f]!==void 0||n[c]!==void 0)&&(i[f]=yw(l,a,f,void 0,e,!0)):delete i[f]);if(o!==a)for(const f in o)(!t||!dt(t,f)&&!0)&&(delete o[f],u=!0)}u&&Zs(e,"set","$attrs")}function GP(e,t,n,r){const[i,o]=e.propsOptions;let s=!1,a;if(t)for(let l in t){if(Qh(l))continue;const u=t[l];let c;i&&dt(i,c=hi(l))?!o||!o.includes(c)?n[c]=u:(a||(a={}))[c]=u:l1(e.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,s=!0)}if(o){const l=at(n),u=a||Ot;for(let c=0;c<o.length;c++){const f=o[c];n[f]=yw(i,l,f,u[f],e,!dt(u,f))}}return s}function yw(e,t,n,r,i,o){const s=e[n];if(s!=null){const a=dt(s,"default");if(a&&r===void 0){const l=s.default;if(s.type!==Function&&We(l)){const{propsDefaults:u}=i;n in u?r=u[n]:(fl(i),r=u[n]=l.call(null,t),qa())}else r=l}s[0]&&(o&&!a?r=!1:s[1]&&(r===""||r===Xo(n))&&(r=!0))}return r}function VP(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const o=e.props,s={},a=[];let l=!1;if(!We(e)){const c=f=>{l=!0;const[d,h]=VP(f,t,!0);sn(s,d),h&&a.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!o&&!l)return Nt(e)&&r.set(e,yf),yf;if(Ee(o))for(let c=0;c<o.length;c++){const f=hi(o[c]);PF(f)&&(s[f]=Ot)}else if(o)for(const c in o){const f=hi(c);if(PF(f)){const d=o[c],h=s[f]=Ee(d)||We(d)?{type:d}:d;if(h){const g=LF(Boolean,h.type),p=LF(String,h.type);h[0]=g>-1,h[1]=p<0||g<p,(g>-1||dt(h,"default"))&&a.push(f)}}}const u=[s,a];return Nt(e)&&r.set(e,u),u}function PF(e){return e[0]!=="$"}function IF(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function jF(e,t){return IF(e)===IF(t)}function LF(e,t){return Ee(t)?t.findIndex(n=>jF(n,e)):We(t)&&jF(t,e)?0:-1}const YP=e=>e[0]==="_"||e==="$stable",AO=e=>Ee(e)?e.map(ii):[ii(e)],TG=(e,t,n)=>{if(t._n)return t;const r=c1((...i)=>AO(t(...i)),n);return r._c=!1,r},XP=(e,t,n)=>{const r=e._ctx;for(const i in e){if(YP(i))continue;const o=e[i];if(We(o))t[i]=TG(i,o,r);else if(o!=null){const s=AO(o);t[i]=()=>s}}},qP=(e,t)=>{const n=AO(t);e.slots.default=()=>n},kG=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=at(t),ty(t,"_",n)):XP(t,e.slots={})}else e.slots={},t&&qP(e,t);ty(e.slots,m1,1)},FG=(e,t,n)=>{const{vnode:r,slots:i}=e;let o=!0,s=Ot;if(r.shapeFlag&32){const a=t._;a?n&&a===1?o=!1:(sn(i,t),!n&&a===1&&delete i._):(o=!t.$stable,XP(t,i)),s=t}else t&&(qP(e,t),s={default:1});if(o)for(const a in i)!YP(a)&&!(a in s)&&delete i[a]};function KP(){return{app:null,config:{isNativeTag:WH,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let DG=0;function MG(e,t){return function(r,i=null){We(r)||(r=Object.assign({},r)),i!=null&&!Nt(i)&&(i=null);const o=KP(),s=new Set;let a=!1;const l=o.app={_uid:DG++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:mI,get config(){return o.config},set config(u){},use(u,...c){return s.has(u)||(u&&We(u.install)?(s.add(u),u.install(l,...c)):We(u)&&(s.add(u),u(l,...c))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,c){return c?(o.components[u]=c,l):o.components[u]},directive(u,c){return c?(o.directives[u]=c,l):o.directives[u]},mount(u,c,f){if(!a){const d=mt(r,i);return d.appContext=o,c&&t?t(d,u):e(d,u,f),a=!0,l._container=u,u.__vue_app__=l,y1(d.component)||d.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return o.provides[u]=c,l}};return l}}function oy(e,t,n,r,i=!1){if(Ee(e)){e.forEach((d,h)=>oy(d,t&&(Ee(t)?t[h]:t),n,r,i));return}if(Ru(r)&&!i)return;const o=r.shapeFlag&4?y1(r.component)||r.component.proxy:r.el,s=i?null:o,{i:a,r:l}=e,u=t&&t.r,c=a.refs===Ot?a.refs={}:a.refs,f=a.setupState;if(u!=null&&u!==l&&(Kt(u)?(c[u]=null,dt(f,u)&&(f[u]=null)):mn(u)&&(u.value=null)),We(l))qo(l,a,12,[s,c]);else{const d=Kt(l),h=mn(l);if(d||h){const g=()=>{if(e.f){const p=d?c[l]:l.value;i?Ee(p)&&tO(p,o):Ee(p)?p.includes(o)||p.push(o):d?(c[l]=[o],dt(f,l)&&(f[l]=c[l])):(l.value=[o],e.k&&(c[e.k]=l.value))}else d?(c[l]=s,dt(f,l)&&(f[l]=s)):h&&(l.value=s,e.k&&(c[e.k]=s))};s?(g.id=-1,Pn(g,n)):g()}}}let ma=!1;const wm=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",Em=e=>e.nodeType===8;function $G(e){const{mt:t,p:n,o:{patchProp:r,createText:i,nextSibling:o,parentNode:s,remove:a,insert:l,createComment:u}}=e,c=(y,v)=>{if(!v.hasChildNodes()){n(null,y,v),ny(),v._vnode=y;return}ma=!1,f(v.firstChild,y,null,null,null),ny(),v._vnode=y,ma&&console.error("Hydration completed but contains mismatches.")},f=(y,v,b,x,w,S=!1)=>{const E=Em(y)&&y.data==="[",O=()=>p(y,v,b,x,w,E),{type:A,ref:C,shapeFlag:_,patchFlag:T}=v;let k=y.nodeType;v.el=y,T===-2&&(S=!1,v.dynamicChildren=null);let D=null;switch(A){case Rf:k!==3?v.children===""?(l(v.el=i(""),s(y),y),D=y):D=O():(y.data!==v.children&&(ma=!0,y.data=v.children),D=o(y));break;case tr:k!==8||E?D=O():D=o(y);break;case Pu:if(E&&(y=o(y),k=y.nodeType),k===1||k===3){D=y;const M=!v.children.length;for(let $=0;$<v.staticCount;$++)M&&(v.children+=D.nodeType===1?D.outerHTML:D.data),$===v.staticCount-1&&(v.anchor=D),D=o(D);return E?o(D):D}else O();break;case hn:E?D=g(y,v,b,x,w,S):D=O();break;default:if(_&1)k!==1||v.type.toLowerCase()!==y.tagName.toLowerCase()?D=O():D=d(y,v,b,x,w,S);else if(_&6){v.slotScopeIds=w;const M=s(y);if(t(v,M,null,b,x,wm(M),S),D=E?m(y):o(y),D&&Em(D)&&D.data==="teleport end"&&(D=o(D)),Ru(v)){let $;E?($=mt(hn),$.anchor=D?D.previousSibling:M.lastChild):$=y.nodeType===3?Yt(""):mt("div"),$.el=y,v.component.subTree=$}}else _&64?k!==8?D=O():D=v.type.hydrate(y,v,b,x,w,S,e,h):_&128&&(D=v.type.hydrate(y,v,b,x,wm(s(y)),w,S,e,f))}return C!=null&&oy(C,null,x,v),D},d=(y,v,b,x,w,S)=>{S=S||!!v.dynamicChildren;const{type:E,props:O,patchFlag:A,shapeFlag:C,dirs:_}=v,T=E==="input"&&_||E==="option";if(T||A!==-1){if(_&&No(v,null,b,"created"),O)if(T||!S||A&48)for(const D in O)(T&&D.endsWith("value")||dp(D)&&!Qh(D))&&r(y,D,null,O[D],!1,void 0,b);else O.onClick&&r(y,"onClick",null,O.onClick,!1,void 0,b);let k;if((k=O&&O.onVnodeBeforeMount)&&Mr(k,b,v),_&&No(v,null,b,"beforeMount"),((k=O&&O.onVnodeMounted)||_)&&TP(()=>{k&&Mr(k,b,v),_&&No(v,null,b,"mounted")},x),C&16&&!(O&&(O.innerHTML||O.textContent))){let D=h(y.firstChild,v,y,b,x,w,S);for(;D;){ma=!0;const M=D;D=D.nextSibling,a(M)}}else C&8&&y.textContent!==v.children&&(ma=!0,y.textContent=v.children)}return y.nextSibling},h=(y,v,b,x,w,S,E)=>{E=E||!!v.dynamicChildren;const O=v.children,A=O.length;for(let C=0;C<A;C++){const _=E?O[C]:O[C]=ii(O[C]);if(y)y=f(y,_,x,w,S,E);else{if(_.type===Rf&&!_.children)continue;ma=!0,n(null,_,b,null,x,w,wm(b),S)}}return y},g=(y,v,b,x,w,S)=>{const{slotScopeIds:E}=v;E&&(w=w?w.concat(E):E);const O=s(y),A=h(o(y),v,O,b,x,w,S);return A&&Em(A)&&A.data==="]"?o(v.anchor=A):(ma=!0,l(v.anchor=u("]"),O,A),A)},p=(y,v,b,x,w,S)=>{if(ma=!0,v.el=null,S){const A=m(y);for(;;){const C=o(y);if(C&&C!==A)a(C);else break}}const E=o(y),O=s(y);return a(y),n(null,v,O,E,b,x,wm(O),w),E},m=y=>{let v=0;for(;y;)if(y=o(y),y&&Em(y)&&(y.data==="["&&v++,y.data==="]")){if(v===0)return o(y);v--}return y};return[c,f]}const Pn=TP;function JP(e){return QP(e)}function ZP(e){return QP(e,$G)}function QP(e,t){const n=KH();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:s,createText:a,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:d,setScopeId:h=go,insertStaticContent:g}=e,p=(F,R,I,G=null,W=null,J=null,le=!1,oe=null,ne=!!R.dynamicChildren)=>{if(F===R)return;F&&!Lo(F,R)&&(G=Qe(F),be(F,W,J,!0),F=null),R.patchFlag===-2&&(ne=!1,R.dynamicChildren=null);const{type:q,ref:he,shapeFlag:fe}=R;switch(q){case Rf:m(F,R,I,G);break;case tr:y(F,R,I,G);break;case Pu:F==null&&v(R,I,G,le);break;case hn:T(F,R,I,G,W,J,le,oe,ne);break;default:fe&1?w(F,R,I,G,W,J,le,oe,ne):fe&6?k(F,R,I,G,W,J,le,oe,ne):(fe&64||fe&128)&&q.process(F,R,I,G,W,J,le,oe,ne,Q)}he!=null&&W&&oy(he,F&&F.ref,J,R||F,!R)},m=(F,R,I,G)=>{if(F==null)r(R.el=a(R.children),I,G);else{const W=R.el=F.el;R.children!==F.children&&u(W,R.children)}},y=(F,R,I,G)=>{F==null?r(R.el=l(R.children||""),I,G):R.el=F.el},v=(F,R,I,G)=>{[F.el,F.anchor]=g(F.children,R,I,G,F.el,F.anchor)},b=({el:F,anchor:R},I,G)=>{let W;for(;F&&F!==R;)W=d(F),r(F,I,G),F=W;r(R,I,G)},x=({el:F,anchor:R})=>{let I;for(;F&&F!==R;)I=d(F),i(F),F=I;i(R)},w=(F,R,I,G,W,J,le,oe,ne)=>{le=le||R.type==="svg",F==null?S(R,I,G,W,J,le,oe,ne):A(F,R,W,J,le,oe,ne)},S=(F,R,I,G,W,J,le,oe)=>{let ne,q;const{type:he,props:fe,shapeFlag:ve,transition:Re,dirs:Ge}=F;if(ne=F.el=s(F.type,J,fe&&fe.is,fe),ve&8?c(ne,F.children):ve&16&&O(F.children,ne,null,G,W,J&&he!=="foreignObject",le,oe),Ge&&No(F,null,G,"created"),fe){for(const rt in fe)rt!=="value"&&!Qh(rt)&&o(ne,rt,null,fe[rt],J,F.children,G,W,Ie);"value"in fe&&o(ne,"value",null,fe.value),(q=fe.onVnodeBeforeMount)&&Mr(q,G,F)}E(ne,F,F.scopeId,le,G),Ge&&No(F,null,G,"beforeMount");const ft=(!W||W&&!W.pendingBranch)&&Re&&!Re.persisted;ft&&Re.beforeEnter(ne),r(ne,R,I),((q=fe&&fe.onVnodeMounted)||ft||Ge)&&Pn(()=>{q&&Mr(q,G,F),ft&&Re.enter(ne),Ge&&No(F,null,G,"mounted")},W)},E=(F,R,I,G,W)=>{if(I&&h(F,I),G)for(let J=0;J<G.length;J++)h(F,G[J]);if(W){let J=W.subTree;if(R===J){const le=W.vnode;E(F,le,le.scopeId,le.slotScopeIds,W.parent)}}},O=(F,R,I,G,W,J,le,oe,ne=0)=>{for(let q=ne;q<F.length;q++){const he=F[q]=oe?_a(F[q]):ii(F[q]);p(null,he,R,I,G,W,J,le,oe)}},A=(F,R,I,G,W,J,le)=>{const oe=R.el=F.el;let{patchFlag:ne,dynamicChildren:q,dirs:he}=R;ne|=F.patchFlag&16;const fe=F.props||Ot,ve=R.props||Ot;let Re;I&&Kl(I,!1),(Re=ve.onVnodeBeforeUpdate)&&Mr(Re,I,R,F),he&&No(R,F,I,"beforeUpdate"),I&&Kl(I,!0);const Ge=W&&R.type!=="foreignObject";if(q?C(F.dynamicChildren,q,oe,I,G,Ge,J):le||P(F,R,oe,null,I,G,Ge,J,!1),ne>0){if(ne&16)_(oe,R,fe,ve,I,G,W);else if(ne&2&&fe.class!==ve.class&&o(oe,"class",null,ve.class,W),ne&4&&o(oe,"style",fe.style,ve.style,W),ne&8){const ft=R.dynamicProps;for(let rt=0;rt<ft.length;rt++){const j=ft[rt],L=fe[j],B=ve[j];(B!==L||j==="value")&&o(oe,j,L,B,W,F.children,I,G,Ie)}}ne&1&&F.children!==R.children&&c(oe,R.children)}else!le&&q==null&&_(oe,R,fe,ve,I,G,W);((Re=ve.onVnodeUpdated)||he)&&Pn(()=>{Re&&Mr(Re,I,R,F),he&&No(R,F,I,"updated")},G)},C=(F,R,I,G,W,J,le)=>{for(let oe=0;oe<R.length;oe++){const ne=F[oe],q=R[oe],he=ne.el&&(ne.type===hn||!Lo(ne,q)||ne.shapeFlag&70)?f(ne.el):I;p(ne,q,he,null,G,W,J,le,!0)}},_=(F,R,I,G,W,J,le)=>{if(I!==G){if(I!==Ot)for(const oe in I)!Qh(oe)&&!(oe in G)&&o(F,oe,I[oe],null,le,R.children,W,J,Ie);for(const oe in G){if(Qh(oe))continue;const ne=G[oe],q=I[oe];ne!==q&&oe!=="value"&&o(F,oe,q,ne,le,R.children,W,J,Ie)}"value"in G&&o(F,"value",I.value,G.value)}},T=(F,R,I,G,W,J,le,oe,ne)=>{const q=R.el=F?F.el:a(""),he=R.anchor=F?F.anchor:a("");let{patchFlag:fe,dynamicChildren:ve,slotScopeIds:Re}=R;Re&&(oe=oe?oe.concat(Re):Re),F==null?(r(q,I,G),r(he,I,G),O(R.children,I,he,W,J,le,oe,ne)):fe>0&&fe&64&&ve&&F.dynamicChildren?(C(F.dynamicChildren,ve,I,W,J,le,oe),(R.key!=null||W&&R===W.subTree)&&CO(F,R,!0)):P(F,R,I,he,W,J,le,oe,ne)},k=(F,R,I,G,W,J,le,oe,ne)=>{R.slotScopeIds=oe,F==null?R.shapeFlag&512?W.ctx.activate(R,I,G,le,ne):D(R,I,G,W,J,le,ne):M(F,R,ne)},D=(F,R,I,G,W,J,le)=>{const oe=F.component=oI(F,G,W);if(yp(F)&&(oe.ctx.renderer=Q),aI(oe),oe.asyncDep){if(W&&W.registerDep(oe,$),!F.el){const ne=oe.subTree=mt(tr);y(null,ne,R,I)}return}$(oe,F,R,I,W,J,le)},M=(F,R,I)=>{const G=R.component=F.component;if(ZW(F,R,I))if(G.asyncDep&&!G.asyncResolved){N(G,R,I);return}else G.next=R,GW(G.update),G.update();else R.el=F.el,G.vnode=R},$=(F,R,I,G,W,J,le)=>{const oe=()=>{if(F.isMounted){let{next:he,bu:fe,u:ve,parent:Re,vnode:Ge}=F,ft=he,rt;Kl(F,!1),he?(he.el=Ge.el,N(F,he,le)):he=Ge,fe&&bf(fe),(rt=he.props&&he.props.onVnodeBeforeUpdate)&&Mr(rt,Re,he,Ge),Kl(F,!0);const j=E0(F),L=F.subTree;F.subTree=j,p(L,j,f(L.el),Qe(L),F,W,J),he.el=j.el,ft===null&&vO(F,j.el),ve&&Pn(ve,W),(rt=he.props&&he.props.onVnodeUpdated)&&Pn(()=>Mr(rt,Re,he,Ge),W)}else{let he;const{el:fe,props:ve}=R,{bm:Re,m:Ge,parent:ft}=F,rt=Ru(R);if(Kl(F,!1),Re&&bf(Re),!rt&&(he=ve&&ve.onVnodeBeforeMount)&&Mr(he,ft,R),Kl(F,!0),fe&&je){const j=()=>{F.subTree=E0(F),je(fe,F.subTree,F,W,null)};rt?R.type.__asyncLoader().then(()=>!F.isUnmounted&&j()):j()}else{const j=F.subTree=E0(F);p(null,j,I,G,F,W,J),R.el=j.el}if(Ge&&Pn(Ge,W),!rt&&(he=ve&&ve.onVnodeMounted)){const j=R;Pn(()=>Mr(he,ft,j),W)}(R.shapeFlag&256||ft&&Ru(ft.vnode)&&ft.vnode.shapeFlag&256)&&F.a&&Pn(F.a,W),F.isMounted=!0,R=I=G=null}},ne=F.effect=new pp(oe,()=>a1(q),F.scope),q=F.update=()=>ne.run();q.id=F.uid,Kl(F,!0),q()},N=(F,R,I)=>{R.component=F;const G=F.vnode.props;F.vnode=R,F.next=null,CG(F,R.props,G,I),FG(F,R.children,I),wc(),TF(),Ec()},P=(F,R,I,G,W,J,le,oe,ne=!1)=>{const q=F&&F.children,he=F?F.shapeFlag:0,fe=R.children,{patchFlag:ve,shapeFlag:Re}=R;if(ve>0){if(ve&128){ie(q,fe,I,G,W,J,le,oe,ne);return}else if(ve&256){H(q,fe,I,G,W,J,le,oe,ne);return}}Re&8?(he&16&&Ie(q,W,J),fe!==q&&c(I,fe)):he&16?Re&16?ie(q,fe,I,G,W,J,le,oe,ne):Ie(q,W,J,!0):(he&8&&c(I,""),Re&16&&O(fe,I,G,W,J,le,oe,ne))},H=(F,R,I,G,W,J,le,oe,ne)=>{F=F||yf,R=R||yf;const q=F.length,he=R.length,fe=Math.min(q,he);let ve;for(ve=0;ve<fe;ve++){const Re=R[ve]=ne?_a(R[ve]):ii(R[ve]);p(F[ve],Re,I,null,W,J,le,oe,ne)}q>he?Ie(F,W,J,!0,!1,fe):O(R,I,G,W,J,le,oe,ne,fe)},ie=(F,R,I,G,W,J,le,oe,ne)=>{let q=0;const he=R.length;let fe=F.length-1,ve=he-1;for(;q<=fe&&q<=ve;){const Re=F[q],Ge=R[q]=ne?_a(R[q]):ii(R[q]);if(Lo(Re,Ge))p(Re,Ge,I,null,W,J,le,oe,ne);else break;q++}for(;q<=fe&&q<=ve;){const Re=F[fe],Ge=R[ve]=ne?_a(R[ve]):ii(R[ve]);if(Lo(Re,Ge))p(Re,Ge,I,null,W,J,le,oe,ne);else break;fe--,ve--}if(q>fe){if(q<=ve){const Re=ve+1,Ge=Re<he?R[Re].el:G;for(;q<=ve;)p(null,R[q]=ne?_a(R[q]):ii(R[q]),I,Ge,W,J,le,oe,ne),q++}}else if(q>ve)for(;q<=fe;)be(F[q],W,J,!0),q++;else{const Re=q,Ge=q,ft=new Map;for(q=Ge;q<=ve;q++){const Me=R[q]=ne?_a(R[q]):ii(R[q]);Me.key!=null&&ft.set(Me.key,q)}let rt,j=0;const L=ve-Ge+1;let B=!1,ee=0;const ye=new Array(L);for(q=0;q<L;q++)ye[q]=0;for(q=Re;q<=fe;q++){const Me=F[q];if(j>=L){be(Me,W,J,!0);continue}let qe;if(Me.key!=null)qe=ft.get(Me.key);else for(rt=Ge;rt<=ve;rt++)if(ye[rt-Ge]===0&&Lo(Me,R[rt])){qe=rt;break}qe===void 0?be(Me,W,J,!0):(ye[qe-Ge]=q+1,qe>=ee?ee=qe:B=!0,p(Me,R[qe],I,null,W,J,le,oe,ne),j++)}const Le=B?NG(ye):yf;for(rt=Le.length-1,q=L-1;q>=0;q--){const Me=Ge+q,qe=R[Me],Ut=Me+1<he?R[Me+1].el:G;ye[q]===0?p(null,qe,I,Ut,W,J,le,oe,ne):B&&(rt<0||q!==Le[rt]?ge(qe,I,Ut,2):rt--)}}},ge=(F,R,I,G,W=null)=>{const{el:J,type:le,transition:oe,children:ne,shapeFlag:q}=F;if(q&6){ge(F.component.subTree,R,I,G);return}if(q&128){F.suspense.move(R,I,G);return}if(q&64){le.move(F,R,I,Q);return}if(le===hn){r(J,R,I);for(let fe=0;fe<ne.length;fe++)ge(ne[fe],R,I,G);r(F.anchor,R,I);return}if(le===Pu){b(F,R,I);return}if(G!==2&&q&1&&oe)if(G===0)oe.beforeEnter(J),r(J,R,I),Pn(()=>oe.enter(J),W);else{const{leave:fe,delayLeave:ve,afterLeave:Re}=oe,Ge=()=>r(J,R,I),ft=()=>{fe(J,()=>{Ge(),Re&&Re()})};ve?ve(J,Ge,ft):ft()}else r(J,R,I)},be=(F,R,I,G=!1,W=!1)=>{const{type:J,props:le,ref:oe,children:ne,dynamicChildren:q,shapeFlag:he,patchFlag:fe,dirs:ve}=F;if(oe!=null&&oy(oe,null,I,F,!0),he&256){R.ctx.deactivate(F);return}const Re=he&1&&ve,Ge=!Ru(F);let ft;if(Ge&&(ft=le&&le.onVnodeBeforeUnmount)&&Mr(ft,R,F),he&6)De(F.component,I,G);else{if(he&128){F.suspense.unmount(I,G);return}Re&&No(F,null,R,"beforeUnmount"),he&64?F.type.remove(F,R,I,W,Q,G):q&&(J!==hn||fe>0&&fe&64)?Ie(q,R,I,!1,!0):(J===hn&&fe&384||!W&&he&16)&&Ie(ne,R,I),G&&Fe(F)}(Ge&&(ft=le&&le.onVnodeUnmounted)||Re)&&Pn(()=>{ft&&Mr(ft,R,F),Re&&No(F,null,R,"unmounted")},I)},Fe=F=>{const{type:R,el:I,anchor:G,transition:W}=F;if(R===hn){Be(I,G);return}if(R===Pu){x(F);return}const J=()=>{i(I),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(F.shapeFlag&1&&W&&!W.persisted){const{leave:le,delayLeave:oe}=W,ne=()=>le(I,J);oe?oe(F.el,J,ne):ne()}else J()},Be=(F,R)=>{let I;for(;F!==R;)I=d(F),i(F),F=I;i(R)},De=(F,R,I)=>{const{bum:G,scope:W,update:J,subTree:le,um:oe}=F;G&&bf(G),W.stop(),J&&(J.active=!1,be(le,F,R,I)),oe&&Pn(oe,R),Pn(()=>{F.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},Ie=(F,R,I,G=!1,W=!1,J=0)=>{for(let le=J;le<F.length;le++)be(F[le],R,I,G,W)},Qe=F=>F.shapeFlag&6?Qe(F.component.subTree):F.shapeFlag&128?F.suspense.next():d(F.anchor||F.el),yt=(F,R,I)=>{F==null?R._vnode&&be(R._vnode,null,null,!0):p(R._vnode||null,F,R,null,null,null,I),TF(),ny(),R._vnode=F},Q={p,um:be,m:ge,r:Fe,mt:D,mc:O,pc:P,pbc:C,n:Qe,o:e};let Oe,je;return t&&([Oe,je]=t(Q)),{render:yt,hydrate:Oe,createApp:MG(yt,Oe)}}function Kl({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function CO(e,t,n=!1){const r=e.children,i=t.children;if(Ee(r)&&Ee(i))for(let o=0;o<r.length;o++){const s=r[o];let a=i[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[o]=_a(i[o]),a.el=s.el),n||CO(s,a))}}function NG(e){const t=e.slice(),n=[0];let r,i,o,s,a;const l=e.length;for(r=0;r<l;r++){const u=e[r];if(u!==0){if(i=n[n.length-1],e[i]<u){t[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)a=o+s>>1,e[n[a]]<u?o=a+1:s=a;u<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}for(o=n.length,s=n[o-1];o-- >0;)n[o]=s,s=t[s];return n}const RG=e=>e.__isTeleport,ig=e=>e&&(e.disabled||e.disabled===""),zF=e=>typeof SVGElement<"u"&&e instanceof SVGElement,vw=(e,t)=>{const n=e&&e.to;return Kt(n)?t?t(n):null:n},PG={__isTeleport:!0,process(e,t,n,r,i,o,s,a,l,u){const{mc:c,pc:f,pbc:d,o:{insert:h,querySelector:g,createText:p,createComment:m}}=u,y=ig(t.props);let{shapeFlag:v,children:b,dynamicChildren:x}=t;if(e==null){const w=t.el=p(""),S=t.anchor=p("");h(w,n,r),h(S,n,r);const E=t.target=vw(t.props,g),O=t.targetAnchor=p("");E&&(h(O,E),s=s||zF(E));const A=(C,_)=>{v&16&&c(b,C,_,i,o,s,a,l)};y?A(n,S):E&&A(E,O)}else{t.el=e.el;const w=t.anchor=e.anchor,S=t.target=e.target,E=t.targetAnchor=e.targetAnchor,O=ig(e.props),A=O?n:S,C=O?w:E;if(s=s||zF(S),x?(d(e.dynamicChildren,x,A,i,o,s,a),CO(e,t,!0)):l||f(e,t,A,C,i,o,s,a,!1),y)O||Sm(t,n,w,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const _=t.target=vw(t.props,g);_&&Sm(t,_,null,u,0)}else O&&Sm(t,S,E,u,1)}},remove(e,t,n,r,{um:i,o:{remove:o}},s){const{shapeFlag:a,children:l,anchor:u,targetAnchor:c,target:f,props:d}=e;if(f&&o(c),(s||!ig(d))&&(o(u),a&16))for(let h=0;h<l.length;h++){const g=l[h];i(g,t,n,!0,!!g.dynamicChildren)}},move:Sm,hydrate:IG};function Sm(e,t,n,{o:{insert:r},m:i},o=2){o===0&&r(e.targetAnchor,t,n);const{el:s,anchor:a,shapeFlag:l,children:u,props:c}=e,f=o===2;if(f&&r(s,t,n),(!f||ig(c))&&l&16)for(let d=0;d<u.length;d++)i(u[d],t,n,2);f&&r(a,t,n)}function IG(e,t,n,r,i,o,{o:{nextSibling:s,parentNode:a,querySelector:l}},u){const c=t.target=vw(t.props,l);if(c){const f=c._lpa||c.firstChild;if(t.shapeFlag&16)if(ig(t.props))t.anchor=u(s(e),t,a(e),n,r,i,o),t.targetAnchor=f;else{t.anchor=s(e);let d=f;for(;d;)if(d=s(d),d&&d.nodeType===8&&d.data==="teleport anchor"){t.targetAnchor=d,c._lpa=t.targetAnchor&&s(t.targetAnchor);break}u(f,t,c,n,r,i,o)}}return t.anchor&&s(t.anchor)}const jG=PG,hn=Symbol(void 0),Rf=Symbol(void 0),tr=Symbol(void 0),Pu=Symbol(void 0),og=[];let jr=null;function bo(e=!1){og.push(jr=e?null:[])}function eI(){og.pop(),jr=og[og.length-1]||null}let Ku=1;function bw(e){Ku+=e}function tI(e){return e.dynamicChildren=Ku>0?jr||yf:null,eI(),Ku>0&&jr&&jr.push(e),e}function ul(e,t,n,r,i,o){return tI(z(e,t,n,r,i,o,!0))}function TO(e,t,n,r,i){return tI(mt(e,t,n,r,i,!0))}function cl(e){return e?e.__v_isVNode===!0:!1}function Lo(e,t){return e.type===t.type&&e.key===t.key}function LG(e){}const m1="__vInternal",nI=({key:e})=>e!=null?e:null,S0=({ref:e,ref_key:t,ref_for:n})=>e!=null?Kt(e)||mn(e)||We(e)?{i:Jn,r:e,k:t,f:!!n}:e:null;function z(e,t=null,n=null,r=0,i=null,o=e===hn?0:1,s=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&nI(t),ref:t&&S0(t),scopeId:u1,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null};return a?(kO(l,n),o&128&&e.normalize(l)):n&&(l.shapeFlag|=Kt(n)?8:16),Ku>0&&!s&&jr&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&jr.push(l),l}const mt=zG;function zG(e,t=null,n=null,r=0,i=null,o=!1){if((!e||e===UP)&&(e=tr),cl(e)){const a=rs(e,t,!0);return n&&kO(a,n),Ku>0&&!o&&jr&&(a.shapeFlag&6?jr[jr.indexOf(e)]=a:jr.push(a)),a.patchFlag|=-2,a}if(JG(e)&&(e=e.__vccOpts),t){t=rI(t);let{class:a,style:l}=t;a&&!Kt(a)&&(t.class=Ya(a)),Nt(l)&&(lO(l)&&!Ee(l)&&(l=sn({},l)),t.style=bd(l))}const s=Kt(e)?1:CP(e)?128:RG(e)?64:Nt(e)?4:We(e)?2:0;return z(e,t,n,r,i,s,o,!0)}function rI(e){return e?lO(e)||m1 in e?sn({},e):e:null}function rs(e,t,n=!1){const{props:r,ref:i,patchFlag:o,children:s}=e,a=t?iI(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&nI(a),ref:t&&t.ref?n&&i?Ee(i)?i.concat(S0(t)):[i,S0(t)]:S0(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==hn?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&rs(e.ssContent),ssFallback:e.ssFallback&&rs(e.ssFallback),el:e.el,anchor:e.anchor}}function Yt(e=" ",t=0){return mt(Rf,null,e,t)}function BG(e,t){const n=mt(Pu,null,e);return n.staticCount=t,n}function UG(e="",t=!1){return t?(bo(),TO(tr,null,e)):mt(tr,null,e)}function ii(e){return e==null||typeof e=="boolean"?mt(tr):Ee(e)?mt(hn,null,e.slice()):typeof e=="object"?_a(e):mt(Rf,null,String(e))}function _a(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:rs(e)}function kO(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Ee(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),kO(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!(m1 in t)?t._ctx=Jn:i===3&&Jn&&(Jn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else We(t)?(t={default:t,_ctx:Jn},n=32):(t=String(t),r&64?(n=16,t=[Yt(t)]):n=8);e.children=t,e.shapeFlag|=n}function iI(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=Ya([t.class,r.class]));else if(i==="style")t.style=bd([t.style,r.style]);else if(dp(i)){const o=t[i],s=r[i];s&&o!==s&&!(Ee(o)&&o.includes(s))&&(t[i]=o?[].concat(o,s):s)}else i!==""&&(t[i]=r[i])}return t}function Mr(e,t,n,r=null){ci(e,t,7,[n,r])}const HG=KP();let WG=0;function oI(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||HG,o={uid:WG++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new iO(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:VP(r,i),emitsOptions:AP(r,i),emit:null,emitted:null,propsDefaults:Ot,inheritAttrs:r.inheritAttrs,ctx:Ot,data:Ot,props:Ot,attrs:Ot,slots:Ot,refs:Ot,setupState:Ot,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=YW.bind(null,o),e.ce&&e.ce(o),o}let pn=null;const Ml=()=>pn||Jn,fl=e=>{pn=e,e.scope.on()},qa=()=>{pn&&pn.scope.off(),pn=null};function sI(e){return e.vnode.shapeFlag&4}let Pf=!1;function aI(e,t=!1){Pf=t;const{props:n,children:r}=e.vnode,i=sI(e);AG(e,n,i,t),kG(e,r);const o=i?GG(e,t):void 0;return Pf=!1,o}function GG(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=uO(new Proxy(e.ctx,gw));const{setup:r}=n;if(r){const i=e.setupContext=r.length>1?uI(e):null;fl(e),wc();const o=qo(r,e,0,[e.props,i]);if(Ec(),qa(),nO(o)){if(o.then(qa,qa),t)return o.then(s=>{xw(e,s,t)}).catch(s=>{Sc(s,e,0)});e.asyncDep=o}else xw(e,o,t)}else lI(e,t)}function xw(e,t,n){We(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Nt(t)&&(e.setupState=dO(t)),lI(e,n)}let sy,ww;function VG(e){sy=e,ww=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,xG))}}const YG=()=>!sy;function lI(e,t,n){const r=e.type;if(!e.render){if(!t&&sy&&!r.render){const i=r.template||_O(e).template;if(i){const{isCustomElement:o,compilerOptions:s}=e.appContext.config,{delimiters:a,compilerOptions:l}=r,u=sn(sn({isCustomElement:o,delimiters:a},s),l);r.render=sy(i,u)}}e.render=r.render||go,ww&&ww(e)}fl(e),wc(),wG(e),Ec(),qa()}function XG(e){return new Proxy(e.attrs,{get(t,n){return gi(e,"get","$attrs"),t[n]}})}function uI(e){const t=r=>{e.exposed=r||{}};let n;return{get attrs(){return n||(n=XG(e))},slots:e.slots,emit:e.emit,expose:t}}function y1(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(dO(uO(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in ry)return ry[n](e)}}))}const qG=/(?:^|[-_])(\w)/g,KG=e=>e.replace(qG,t=>t.toUpperCase()).replace(/[-_]/g,"");function ay(e,t=!0){return We(e)?e.displayName||e.name:e.name||t&&e.__name}function cI(e,t,n=!1){let r=ay(t);if(!r&&t.__file){const i=t.__file.match(/([^/\\]+)\.\w+$/);i&&(r=i[1])}if(!r&&e&&e.parent){const i=o=>{for(const s in o)if(o[s]===t)return s};r=i(e.components||e.parent.type.components)||i(e.appContext.components)}return r?KG(r):n?"App":"Anonymous"}function JG(e){return We(e)&&"__vccOpts"in e}const fI=(e,t)=>jW(e,t,Pf);function ZG(){return null}function QG(){return null}function eV(e){}function tV(e,t){return null}function nV(){return dI().slots}function rV(){return dI().attrs}function dI(){const e=Ml();return e.setupContext||(e.setupContext=uI(e))}function iV(e,t){const n=Ee(e)?e.reduce((r,i)=>(r[i]={},r),{}):e;for(const r in t){const i=n[r];i?Ee(i)||We(i)?n[r]={type:i,default:t[r]}:i.default=t[r]:i===null&&(n[r]={default:t[r]})}return n}function oV(e,t){const n={};for(const r in e)t.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>e[r]});return n}function sV(e){const t=Ml();let n=e();return qa(),nO(n)&&(n=n.catch(r=>{throw fl(t),r})),[n,()=>fl(t)]}function hI(e,t,n){const r=arguments.length;return r===2?Nt(t)&&!Ee(t)?cl(t)?mt(e,null,[t]):mt(e,t):mt(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&cl(n)&&(n=[n]),mt(e,t,n))}const gI=Symbol(""),aV=()=>{{const e=ng(gI);return e||xP("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),e}};function lV(){}function uV(e,t,n,r){const i=n[r];if(i&&pI(i,e))return i;const o=t();return o.memo=e.slice(),n[r]=o}function pI(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let r=0;r<n.length;r++)if($f(n[r],t[r]))return!1;return Ku>0&&jr&&jr.push(e),!0}const mI="3.2.40",cV={createComponentInstance:oI,setupComponent:aI,renderComponentRoot:E0,setCurrentRenderingInstance:$g,isVNode:cl,normalizeVNode:ii},fV=cV,dV=null,hV=null,gV="http://www.w3.org/2000/svg",yu=typeof document<"u"?document:null,BF=yu&&yu.createElement("template"),pV={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?yu.createElementNS(gV,e):yu.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>yu.createTextNode(e),createComment:e=>yu.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>yu.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,o){const s=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{BF.innerHTML=r?`<svg>${e}</svg>`:e;const a=BF.content;if(r){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function mV(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function yV(e,t,n){const r=e.style,i=Kt(n);if(n&&!i){for(const o in n)Ew(r,o,n[o]);if(t&&!Kt(t))for(const o in t)n[o]==null&&Ew(r,o,"")}else{const o=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=o)}}const UF=/\s*!important$/;function Ew(e,t,n){if(Ee(n))n.forEach(r=>Ew(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=vV(e,t);UF.test(n)?e.setProperty(Xo(r),n.replace(UF,""),"important"):e[r]=n}}const HF=["Webkit","Moz","ms"],Sx={};function vV(e,t){const n=Sx[t];if(n)return n;let r=hi(t);if(r!=="filter"&&r in e)return Sx[t]=r;r=gp(r);for(let i=0;i<HF.length;i++){const o=HF[i]+r;if(o in e)return Sx[t]=o}return t}const WF="http://www.w3.org/1999/xlink";function bV(e,t,n,r,i){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(WF,t.slice(6,t.length)):e.setAttributeNS(WF,t,n);else{const o=jH(t);n==null||o&&!ZR(n)?e.removeAttribute(t):e.setAttribute(t,o?"":n)}}function xV(e,t,n,r,i,o,s){if(t==="innerHTML"||t==="textContent"){r&&s(r,i,o),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const l=n==null?"":n;(e.value!==l||e.tagName==="OPTION")&&(e.value=l),n==null&&e.removeAttribute(t);return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=ZR(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(t)}const[yI,wV]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(n&&Number(n[1])<=53)}return[e,t]})();let Sw=0;const EV=Promise.resolve(),SV=()=>{Sw=0},OV=()=>Sw||(EV.then(SV),Sw=yI());function js(e,t,n,r){e.addEventListener(t,n,r)}function _V(e,t,n,r){e.removeEventListener(t,n,r)}function AV(e,t,n,r,i=null){const o=e._vei||(e._vei={}),s=o[t];if(r&&s)s.value=r;else{const[a,l]=CV(t);if(r){const u=o[t]=TV(r,i);js(e,a,u,l)}else s&&(_V(e,a,s,l),o[t]=void 0)}}const GF=/(?:Once|Passive|Capture)$/;function CV(e){let t;if(GF.test(e)){t={};let r;for(;r=e.match(GF);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Xo(e.slice(2)),t]}function TV(e,t){const n=r=>{const i=r.timeStamp||yI();(wV||i>=n.attached-1)&&ci(kV(r,n.value),t,5,[r])};return n.value=e,n.attached=OV(),n}function kV(e,t){if(Ee(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const VF=/^on[a-z]/,FV=(e,t,n,r,i=!1,o,s,a,l)=>{t==="class"?mV(e,r,i):t==="style"?yV(e,n,r):dp(t)?eO(t)||AV(e,t,n,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):DV(e,t,r,i))?xV(e,t,r,o,s,a,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),bV(e,t,r,i))};function DV(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&VF.test(t)&&We(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||VF.test(t)&&Kt(n)?!1:t in e}function vI(e,t){const n=EO(e);class r extends v1{constructor(o){super(n,o,t)}}return r.def=n,r}const MV=e=>vI(e,MI),$V=typeof HTMLElement<"u"?HTMLElement:class{};class v1 extends $V{constructor(t,n={},r){super(),this._def=t,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&r?r(this._createVNode(),this.shadowRoot):this.attachShadow({mode:"open"})}connectedCallback(){this._connected=!0,this._instance||this._resolveDef()}disconnectedCallback(){this._connected=!1,gO(()=>{this._connected||(_w(null,this.shadowRoot),this._instance=null)})}_resolveDef(){if(this._resolved)return;this._resolved=!0;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}).observe(this,{attributes:!0});const t=r=>{const{props:i,styles:o}=r,s=!Ee(i),a=i?s?Object.keys(i):i:[];let l;if(s)for(const u in this._props){const c=i[u];(c===Number||c&&c.type===Number)&&(this._props[u]=al(this._props[u]),(l||(l=Object.create(null)))[u]=!0)}this._numberProps=l;for(const u of Object.keys(this))u[0]!=="_"&&this._setProp(u,this[u],!0,!1);for(const u of a.map(hi))Object.defineProperty(this,u,{get(){return this._getProp(u)},set(c){this._setProp(u,c)}});this._applyStyles(o),this._update()},n=this._def.__asyncLoader;n?n().then(t):t(this._def)}_setAttr(t){let n=this.getAttribute(t);this._numberProps&&this._numberProps[t]&&(n=al(n)),this._setProp(hi(t),n,!1)}_getProp(t){return this._props[t]}_setProp(t,n,r=!0,i=!0){n!==this._props[t]&&(this._props[t]=n,i&&this._instance&&this._update(),r&&(n===!0?this.setAttribute(Xo(t),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Xo(t),n+""):n||this.removeAttribute(Xo(t))))}_update(){_w(this._createVNode(),this.shadowRoot)}_createVNode(){const t=mt(this._def,sn({},this._props));return this._instance||(t.ce=n=>{this._instance=n,n.isCE=!0,n.emit=(i,...o)=>{this.dispatchEvent(new CustomEvent(i,{detail:o}))};let r=this;for(;r=r&&(r.parentNode||r.host);)if(r instanceof v1){n.parent=r._instance;break}}),t}_applyStyles(t){t&&t.forEach(n=>{const r=document.createElement("style");r.textContent=n,this.shadowRoot.appendChild(r)})}}function NV(e="$style"){{const t=Ml();if(!t)return Ot;const n=t.type.__cssModules;if(!n)return Ot;const r=n[e];return r||Ot}}function RV(e){const t=Ml();if(!t)return;const n=()=>Ow(t.subTree,e(t.proxy));FP(n),vp(()=>{const r=new MutationObserver(n);r.observe(t.subTree.el.parentNode,{childList:!0}),p1(()=>r.disconnect())})}function Ow(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Ow(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)YF(e.el,t);else if(e.type===hn)e.children.forEach(n=>Ow(n,t));else if(e.type===Pu){let{el:n,anchor:r}=e;for(;n&&(YF(n,t),n!==r);)n=n.nextSibling}}function YF(e,t){if(e.nodeType===1){const n=e.style;for(const r in t)n.setProperty(`--${r}`,t[r])}}const ya="transition",Yd="animation",FO=(e,{slots:t})=>hI(wO,xI(e),t);FO.displayName="Transition";const bI={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},PV=FO.props=sn({},wO.props,bI),Jl=(e,t=[])=>{Ee(e)?e.forEach(n=>n(...t)):e&&e(...t)},XF=e=>e?Ee(e)?e.some(t=>t.length>1):e.length>1:!1;function xI(e){const t={};for(const T in e)T in bI||(t[T]=e[T]);if(e.css===!1)return t;const{name:n="v",type:r,duration:i,enterFromClass:o=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=o,appearActiveClass:u=s,appearToClass:c=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=e,g=IV(i),p=g&&g[0],m=g&&g[1],{onBeforeEnter:y,onEnter:v,onEnterCancelled:b,onLeave:x,onLeaveCancelled:w,onBeforeAppear:S=y,onAppear:E=v,onAppearCancelled:O=b}=t,A=(T,k,D)=>{xa(T,k?c:a),xa(T,k?u:s),D&&D()},C=(T,k)=>{T._isLeaving=!1,xa(T,f),xa(T,h),xa(T,d),k&&k()},_=T=>(k,D)=>{const M=T?E:v,$=()=>A(k,T,D);Jl(M,[k,$]),qF(()=>{xa(k,T?l:o),Fs(k,T?c:a),XF(M)||KF(k,r,p,$)})};return sn(t,{onBeforeEnter(T){Jl(y,[T]),Fs(T,o),Fs(T,s)},onBeforeAppear(T){Jl(S,[T]),Fs(T,l),Fs(T,u)},onEnter:_(!1),onAppear:_(!0),onLeave(T,k){T._isLeaving=!0;const D=()=>C(T,k);Fs(T,f),EI(),Fs(T,d),qF(()=>{!T._isLeaving||(xa(T,f),Fs(T,h),XF(x)||KF(T,r,m,D))}),Jl(x,[T,D])},onEnterCancelled(T){A(T,!1),Jl(b,[T])},onAppearCancelled(T){A(T,!0),Jl(O,[T])},onLeaveCancelled(T){C(T),Jl(w,[T])}})}function IV(e){if(e==null)return null;if(Nt(e))return[Ox(e.enter),Ox(e.leave)];{const t=Ox(e);return[t,t]}}function Ox(e){return al(e)}function Fs(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function xa(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function qF(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let jV=0;function KF(e,t,n,r){const i=e._endId=++jV,o=()=>{i===e._endId&&r()};if(n)return setTimeout(o,n);const{type:s,timeout:a,propCount:l}=wI(e,t);if(!s)return r();const u=s+"end";let c=0;const f=()=>{e.removeEventListener(u,d),o()},d=h=>{h.target===e&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},a+1),e.addEventListener(u,d)}function wI(e,t){const n=window.getComputedStyle(e),r=g=>(n[g]||"").split(", "),i=r(ya+"Delay"),o=r(ya+"Duration"),s=JF(i,o),a=r(Yd+"Delay"),l=r(Yd+"Duration"),u=JF(a,l);let c=null,f=0,d=0;t===ya?s>0&&(c=ya,f=s,d=o.length):t===Yd?u>0&&(c=Yd,f=u,d=l.length):(f=Math.max(s,u),c=f>0?s>u?ya:Yd:null,d=c?c===ya?o.length:l.length:0);const h=c===ya&&/\b(transform|all)(,|$)/.test(n[ya+"Property"]);return{type:c,timeout:f,propCount:d,hasTransform:h}}function JF(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>ZF(n)+ZF(e[r])))}function ZF(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function EI(){return document.body.offsetHeight}const SI=new WeakMap,OI=new WeakMap,LV={name:"TransitionGroup",props:sn({},PV,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Ml(),r=xO();let i,o;return h1(()=>{if(!i.length)return;const s=e.moveClass||`${e.name||"v"}-move`;if(!WV(i[0].el,n.vnode.el,s))return;i.forEach(BV),i.forEach(UV);const a=i.filter(HV);EI(),a.forEach(l=>{const u=l.el,c=u.style;Fs(u,s),c.transform=c.webkitTransform=c.transitionDuration="";const f=u._moveCb=d=>{d&&d.target!==u||(!d||/transform$/.test(d.propertyName))&&(u.removeEventListener("transitionend",f),u._moveCb=null,xa(u,s))};u.addEventListener("transitionend",f)})}),()=>{const s=at(e),a=xI(s);let l=s.tag||hn;i=o,o=t.default?f1(t.default()):[];for(let u=0;u<o.length;u++){const c=o[u];c.key!=null&&qu(c,Nf(c,a,r,n))}if(i)for(let u=0;u<i.length;u++){const c=i[u];qu(c,Nf(c,a,r,n)),SI.set(c,c.el.getBoundingClientRect())}return mt(l,null,o)}}},zV=LV;function BV(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function UV(e){OI.set(e,e.el.getBoundingClientRect())}function HV(e){const t=SI.get(e),n=OI.get(e),r=t.left-n.left,i=t.top-n.top;if(r||i){const o=e.el.style;return o.transform=o.webkitTransform=`translate(${r}px,${i}px)`,o.transitionDuration="0s",e}}function WV(e,t,n){const r=e.cloneNode();e._vtc&&e._vtc.forEach(s=>{s.split(/\s+/).forEach(a=>a&&r.classList.remove(a))}),n.split(/\s+/).forEach(s=>s&&r.classList.add(s)),r.style.display="none";const i=t.nodeType===1?t:t.parentNode;i.appendChild(r);const{hasTransform:o}=wI(r);return i.removeChild(r),o}const dl=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Ee(t)?n=>bf(t,n):t};function GV(e){e.target.composing=!0}function QF(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ra={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e._assign=dl(i);const o=r||i.props&&i.props.type==="number";js(e,t?"change":"input",s=>{if(s.target.composing)return;let a=e.value;n&&(a=a.trim()),o&&(a=al(a)),e._assign(a)}),n&&js(e,"change",()=>{e.value=e.value.trim()}),t||(js(e,"compositionstart",GV),js(e,"compositionend",QF),js(e,"change",QF))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:i}},o){if(e._assign=dl(o),e.composing||document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===t||(i||e.type==="number")&&al(e.value)===t))return;const s=t==null?"":t;e.value!==s&&(e.value=s)}},DO={deep:!0,created(e,t,n){e._assign=dl(n),js(e,"change",()=>{const r=e._modelValue,i=If(e),o=e.checked,s=e._assign;if(Ee(r)){const a=Qv(r,i),l=a!==-1;if(o&&!l)s(r.concat(i));else if(!o&&l){const u=[...r];u.splice(a,1),s(u)}}else if(xc(r)){const a=new Set(r);o?a.add(i):a.delete(i),s(a)}else s(AI(e,o))})},mounted:eD,beforeUpdate(e,t,n){e._assign=dl(n),eD(e,t,n)}};function eD(e,{value:t,oldValue:n},r){e._modelValue=t,Ee(t)?e.checked=Qv(t,r.props.value)>-1:xc(t)?e.checked=t.has(r.props.value):t!==n&&(e.checked=sl(t,AI(e,!0)))}const MO={created(e,{value:t},n){e.checked=sl(t,n.props.value),e._assign=dl(n),js(e,"change",()=>{e._assign(If(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e._assign=dl(r),t!==n&&(e.checked=sl(t,r.props.value))}},_I={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const i=xc(t);js(e,"change",()=>{const o=Array.prototype.filter.call(e.options,s=>s.selected).map(s=>n?al(If(s)):If(s));e._assign(e.multiple?i?new Set(o):o:o[0])}),e._assign=dl(r)},mounted(e,{value:t}){tD(e,t)},beforeUpdate(e,t,n){e._assign=dl(n)},updated(e,{value:t}){tD(e,t)}};function tD(e,t){const n=e.multiple;if(!(n&&!Ee(t)&&!xc(t))){for(let r=0,i=e.options.length;r<i;r++){const o=e.options[r],s=If(o);if(n)Ee(t)?o.selected=Qv(t,s)>-1:o.selected=t.has(s);else if(sl(If(o),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function If(e){return"_value"in e?e._value:e.value}function AI(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const CI={created(e,t,n){Om(e,t,n,null,"created")},mounted(e,t,n){Om(e,t,n,null,"mounted")},beforeUpdate(e,t,n,r){Om(e,t,n,r,"beforeUpdate")},updated(e,t,n,r){Om(e,t,n,r,"updated")}};function TI(e,t){switch(e){case"SELECT":return _I;case"TEXTAREA":return Ra;default:switch(t){case"checkbox":return DO;case"radio":return MO;default:return Ra}}}function Om(e,t,n,r,i){const s=TI(e.tagName,n.props&&n.props.type)[i];s&&s(e,t,n,r)}function VV(){Ra.getSSRProps=({value:e})=>({value:e}),MO.getSSRProps=({value:e},t)=>{if(t.props&&sl(t.props.value,e))return{checked:!0}},DO.getSSRProps=({value:e},t)=>{if(Ee(e)){if(t.props&&Qv(e,t.props.value)>-1)return{checked:!0}}else if(xc(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},CI.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const n=TI(t.type.toUpperCase(),t.props&&t.props.type);if(n.getSSRProps)return n.getSSRProps(e,t)}}const YV=["ctrl","shift","alt","meta"],XV={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>YV.some(n=>e[`${n}Key`]&&!t.includes(n))},qV=(e,t)=>(n,...r)=>{for(let i=0;i<t.length;i++){const o=XV[t[i]];if(o&&o(n,t))return}return e(n,...r)},KV={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},JV=(e,t)=>n=>{if(!("key"in n))return;const r=Xo(n.key);if(t.some(i=>i===r||KV[i]===r))return e(n)},Ns={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Xd(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Xd(e,!0),r.enter(e)):r.leave(e,()=>{Xd(e,!1)}):Xd(e,t))},beforeUnmount(e,{value:t}){Xd(e,t)}};function Xd(e,t){e.style.display=t?e._vod:"none"}function ZV(){Ns.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const kI=sn({patchProp:FV},pV);let sg,nD=!1;function FI(){return sg||(sg=JP(kI))}function DI(){return sg=nD?sg:ZP(kI),nD=!0,sg}const _w=(...e)=>{FI().render(...e)},MI=(...e)=>{DI().hydrate(...e)},$I=(...e)=>{const t=FI().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=NI(r);if(!i)return;const o=t._component;!We(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const s=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},t},QV=(...e)=>{const t=DI().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=NI(r);if(i)return n(i,!0,i instanceof SVGElement)},t};function NI(e){return Kt(e)?document.querySelector(e):e}let rD=!1;const eY=()=>{rD||(rD=!0,VV(),ZV())},tY=()=>{},nY=Object.freeze(Object.defineProperty({__proto__:null,compile:tY,EffectScope:iO,ReactiveEffect:pp,customRef:NW,effect:nW,effectScope:JH,getCurrentScope:ZH,isProxy:lO,isReactive:Nu,isReadonly:Xu,isRef:mn,isShallow:kg,markRaw:uO,onScopeDispose:QH,proxyRefs:dO,reactive:i1,readonly:aO,ref:w0,shallowReactive:pP,shallowReadonly:TW,shallowRef:kW,stop:rW,toRaw:at,toRef:vP,toRefs:RW,triggerRef:DW,unref:yP,camelize:hi,capitalize:gp,normalizeClass:Ya,normalizeProps:UH,normalizeStyle:bd,toDisplayString:mf,toHandlerKey:eg,BaseTransition:wO,Comment:tr,Fragment:hn,KeepAlive:fG,Static:Pu,Suspense:eG,Teleport:jG,Text:Rf,callWithAsyncErrorHandling:ci,callWithErrorHandling:qo,cloneVNode:rs,compatUtils:hV,computed:fI,createBlock:TO,createCommentVNode:UG,createElementBlock:ul,createElementVNode:z,createHydrationRenderer:ZP,createPropsRestProxy:oV,createRenderer:JP,createSlots:yG,createStaticVNode:BG,createTextVNode:Yt,createVNode:mt,defineAsyncComponent:uG,defineComponent:EO,defineEmits:QG,defineExpose:eV,defineProps:ZG,get devtools(){return rf},getCurrentInstance:Ml,getTransitionRawChildren:f1,guardReactiveProps:rI,h:hI,handleError:Sc,initCustomFormatter:lV,inject:ng,isMemoSame:pI,isRuntimeOnly:YG,isVNode:cl,mergeDefaults:iV,mergeProps:iI,nextTick:gO,onActivated:$P,onBeforeMount:PP,onBeforeUnmount:g1,onBeforeUpdate:IP,onDeactivated:NP,onErrorCaptured:BP,onMounted:vp,onRenderTracked:zP,onRenderTriggered:LP,onServerPrefetch:jP,onUnmounted:p1,onUpdated:h1,openBlock:bo,popScopeId:yO,provide:kP,pushScopeId:mO,queuePostFlushCb:pO,registerRuntimeCompiler:VG,renderList:mG,renderSlot:vG,resolveComponent:_u,resolveDirective:pG,resolveDynamicComponent:gG,resolveFilter:dV,resolveTransitionHooks:Nf,setBlockTracking:bw,setDevtoolsHook:_P,setTransitionHooks:qu,ssrContextKey:gI,ssrUtils:fV,toHandlers:bG,transformVNodeArgs:LG,useAttrs:rV,useSSRContext:aV,useSlots:nV,useTransitionState:xO,version:mI,warn:xP,watch:rg,watchEffect:oG,watchPostEffect:FP,watchSyncEffect:sG,withAsyncContext:sV,withCtx:c1,withDefaults:tV,withDirectives:Oi,withMemo:uV,withScopeId:XW,Transition:FO,TransitionGroup:zV,VueElement:v1,createApp:$I,createSSRApp:QV,defineCustomElement:vI,defineSSRCustomElement:MV,hydrate:MI,initDirectivesForSSR:eY,render:_w,useCssModule:NV,useCssVars:RV,vModelCheckbox:DO,vModelDynamic:CI,vModelRadio:MO,vModelSelect:_I,vModelText:Ra,vShow:Ns,withKeys:JV,withModifiers:qV},Symbol.toStringTag,{value:"Module"}));var oi=[{name:1,time:13,count:-.304},{name:1,time:40,count:-.805},{name:1,time:80,count:-.201},{name:1,time:120,count:-.508},{name:1,time:140,count:-.304},{name:1,time:160,count:-.802},{name:1,time:180,count:-.2},{name:1,time:188,count:-.507},{name:2,time:50,count:-.605},{name:2,time:99,count:-.202},{name:2,time:100,count:-.507},{name:2,time:150,count:-.401},{name:2,time:192,count:-.607},{name:3,time:50,count:-.402},{name:3,time:80,count:-.899},{name:3,time:150,count:-.308},{name:3,time:159,count:-.601},{name:3,time:188,count:-.701}],Ai=["name","time","count"],rY=2,Au=[],Mt={x_is_date:!1,max_y:-1/0,min_y:1/0,max_x:-1/0,min_x:1/0};const iD=400;function oD(e){return oi[e][Ai[0]]}function At(e){return oi[e][Ai[1]]}function Sn(e){return oi[e][Ai[rY]]}function sD(){Mt.max_x=-1/0,Mt.min_x=1/0,Mt.max_y=-1/0,Mt.min_y=1/0;for(let e=0;e<oi.length;e++)At(e)>Mt.max_x&&(Mt.max_x=At(e)),At(e)<Mt.min_x&&(Mt.min_x=At(e)),Sn(e)>Mt.max_y&&(Mt.max_y=Sn(e)),Sn(e)<Mt.min_y&&(Mt.min_y=Sn(e))}function iY(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(i){i(n)}),(r=e.get("*"))&&r.slice().map(function(i){i(t,n)})}}}const Pt=iY(),xd=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},oY={data(){return{}},methods:{toCallback(){Pt.emit("updateDataset",null)},readCsvFile(e,t){var n;window.XMLHttpRequest?n=new XMLHttpRequest:n=new ActiveXObject("Microsoft.XMLHTTP"),n.open("GET",e,!0),n.overrideMimeType("text/html;charset=utf-8"),n.send(null),n.onload=function(){if(n.status===200){let r=n.responseText;oi.splice(0,oi.length),Ai.splice(0,Ai.length);let i=r.split(`
`),o=i[0].split(",");for(let l=0;l<o.length;l++)Ai.push(o[l]);let s=0,a="";for(let l=1;l<i.length;l++){if(i[l].length<1)continue;let u=i[l].split(",");if(a!=u[0]&&(a=u[0],s++,s>iD))break;let c={};Mt.x_is_date=!1,c[o[0]]=u[0];for(let f=1;f<o.length;f++)Number(u[f])!==Number(u[f])?f===1?(Mt.x_is_date=!0,c[o[f]]=new Date(u[f])):c[o[f]]=u[f]:c[o[f]]=Number(u[f]);oi.push(c)}t()}}},readInputFile(e){var t=this.inputfile.files;if(t.length!==0){var n=new FileReader;n.readAsText(t[0]),n.onload=function(r){let i=r.target.result;oi.splice(0,oi.length),Ai.splice(0,Ai.length);let o=i.split(`
`),s=o[0].split(",");for(let u=0;u<s.length;u++)Ai.push(s[u]);let a=0,l="";for(let u=1;u<o.length;u++){if(o[u].length<1)continue;let c=o[u].split(",");if(l!=c[0]&&(l=c[0],a++,a>iD))break;let f={};f[s[0]]=c[0];for(let d=1;d<s.length;d++)f[s[d]]=Number(c[d]);oi.push(f)}e()}}},toReadInputFile(){readInputFile(this.toCallback)},changeDataSet(){this.file.value===this.file.options[this.file.length-1].value?(this.inputfile.click(),this.file.value=null):this.file.value===this.file.options[1].value?this.readCsvFile("./data/airline.csv",this.toCallback):this.file.value===this.file.options[2].value?this.readCsvFile("./data/BeijingAir.csv",this.toCallback):this.file.value===this.file.options[3].value?this.readCsvFile("./data/EdStatsData_simple.csv",this.toCallback):this.file.value===this.file.options[4].value?this.readCsvFile("./data/hardDrive.csv",this.toCallback):this.file.value===this.file.options[5].value?this.readCsvFile("./data/reading.csv",this.toCallback):this.file.value===this.file.options[6].value?this.readCsvFile("./data/stocks.csv",this.toCallback):this.file.value===this.file.options[7].value&&this.readCsvFile("./data/weather.csv",this.toCallback),console.log("finish reading file. ")}},mounted(){this.file=document.querySelector(".dataset"),this.inputfile=document.getElementById("filename")}},ra=e=>(mO("data-v-96a143e6"),e=e(),yO(),e),sY={id:"option"},aY=ra(()=>z("option",null,"null",-1)),lY=ra(()=>z("option",null,"airline",-1)),uY=ra(()=>z("option",null,"Beijing air",-1)),cY=ra(()=>z("option",null,"population",-1)),fY=ra(()=>z("option",null,"hardDrive",-1)),dY=ra(()=>z("option",null,"reading",-1)),hY=ra(()=>z("option",null,"stocks",-1)),gY=ra(()=>z("option",null,"weather",-1)),pY=ra(()=>z("option",null,"load data",-1)),mY=[aY,lY,uY,cY,fY,dY,hY,gY,pY];function yY(e,t,n,r,i,o){return bo(),ul("div",sY,[Yt(" dataset "),z("select",{class:"dataset",onChange:t[0]||(t[0]=(...s)=>o.changeDataSet&&o.changeDataSet(...s))},mY,32),z("input",{type:"file",id:"filename",onChange:t[1]||(t[1]=(...s)=>o.toReadInputFile&&o.toReadInputFile(...s)),style:{display:"none"}},null,32)])}const vY=xd(oY,[["render",yY],["__scopeId","data-v-96a143e6"]]);/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var bY=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xY=Object.prototype.hasOwnProperty;function Aw(e,t){return xY.call(e,t)}function Cw(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Aw(e,i)&&r.push(i);return r}function li(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Tw(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function du(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function RI(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function kw(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(kw(e[t]))return!0}else if(typeof e=="object"){for(var r=Cw(e),i=r.length,o=0;o<i;o++)if(kw(e[r[o]]))return!0}}return!1}function aD(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var PI=function(e){bY(t,e);function t(n,r,i,o,s){var a=this.constructor,l=e.call(this,aD(n,{name:r,index:i,operation:o,tree:s}))||this;return l.name=r,l.index=i,l.operation=o,l.tree=s,Object.setPrototypeOf(l,a.prototype),l.message=aD(n,{name:r,index:i,operation:o,tree:s}),l}return t}(Error),tn=PI,wY=li,lf={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=ly(n,this.path);r&&(r=li(r));var i=Iu(n,{op:"remove",path:this.from}).removed;return Iu(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=ly(n,this.from);return Iu(n,{op:"add",path:this.path,value:li(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Rg(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},EY={add:function(e,t,n){return Tw(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:lf.move,copy:lf.copy,test:lf.test,_get:lf._get};function ly(e,t){if(t=="")return e;var n={op:"_get",path:t};return Iu(e,n),n.value}function Iu(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):uy(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=ly(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=Rg(e,t.value),s.test===!1)throw new tn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new tn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=li(e));var a=t.path||"",l=a.split("/"),u=e,c=1,f=l.length,d=void 0,h=void 0,g=void 0;for(typeof n=="function"?g=n:g=uy;;){if(h=l[c],h&&h.indexOf("~")!=-1&&(h=RI(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(u[h]===void 0?d=l.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&g(t,0,e,d)),c++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!Tw(h))throw new tn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);Tw(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>u.length)throw new tn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=EY[t.op].call(t,u,h,e);if(s.test===!1)throw new tn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(c>=f){var s=lf[t.op].call(t,u,h,e);if(s.test===!1)throw new tn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(u=u[h],n&&c<f&&(!u||typeof u!="object"))throw new tn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function b1(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new tn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=li(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=Iu(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function SY(e,t,n){var r=Iu(e,t);if(r.test===!1)throw new tn("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function uy(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new tn("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(lf[e.op]){if(typeof e.path!="string")throw new tn("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new tn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new tn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new tn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&kw(e.value))throw new tn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new tn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new tn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=II([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new tn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new tn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function II(e,t,n){try{if(!Array.isArray(e))throw new tn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)b1(li(t),li(e),n||!0);else{n=n||uy;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof tn)return i;throw i}}function Rg(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!Rg(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!Rg(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}const OY=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:tn,deepClone:wY,getValueByPointer:ly,applyOperation:Iu,applyPatch:b1,applyReducer:SY,validator:uy,validate:II,_areEquals:Rg},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var $O=new WeakMap,_Y=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),AY=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function CY(e){return $O.get(e)}function TY(e,t){return e.observers.get(t)}function kY(e,t){e.observers.delete(t.callback)}function FY(e,t){t.unobserve()}function DY(e,t){var n=[],r,i=CY(e);if(!i)i=new _Y(e),$O.set(e,i);else{var o=TY(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=li(e),t){r.callback=t,r.next=null;var s=function(){Fw(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){Fw(r),clearTimeout(r.next),kY(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new AY(t,r)),r}function Fw(e,t){t===void 0&&(t=!1);var n=$O.get(e.object);NO(n.value,e.object,e.patches,"",t),e.patches.length&&b1(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function NO(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=Cw(t),s=Cw(e),a=!1,l=s.length-1;l>=0;l--){var u=s[l],c=e[u];if(Aw(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[u];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?NO(c,f,n,r+"/"+du(u),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+du(u),value:li(c)}),n.push({op:"replace",path:r+"/"+du(u),value:li(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+du(u),value:li(c)}),n.push({op:"remove",path:r+"/"+du(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&o.length==s.length))for(var l=0;l<o.length;l++){var u=o[l];!Aw(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+du(u),value:li(t[u])})}}}function MY(e,t,n){n===void 0&&(n=!1);var r=[];return NO(e,t,r,"",n),r}const $Y=Object.freeze(Object.defineProperty({__proto__:null,unobserve:FY,observe:DY,generate:Fw,compare:MY},Symbol.toStringTag,{value:"Module"}));Object.assign({},OY,$Y,{JsonPatchError:PI,deepClone:li,escapePathComponent:du,unescapePathComponent:RI});var NY=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function RY(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function jI(e){var t=e.default;if(typeof t=="function"){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var PY=/("(?:[^\\"]|\\.)*")|[:,]/g,_x=function(t,n){var r,i,o;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function s(a,l,u){var c,f,d,h,g,p,m,y,v,b,x,w;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),x=JSON.stringify(a,o),x===void 0)return x;if(m=i-l.length-u,x.length<=m&&(v=x.replace(PY,function(S,E){return E||S+" "}),v.length<=m))return v;if(o!=null&&(a=JSON.parse(x),o=void 0),typeof a=="object"&&a!==null){if(y=l+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",m=a.length;f<m;f++)d.push(s(a[f],y,f===m-1?0:1)||"null");else for(b="{",c="}",p=Object.keys(a),m=p.length;f<m;f++)h=p[f],g=JSON.stringify(h)+": ",w=s(a[h],y,g.length+(f===m-1?0:1)),w!==void 0&&d.push(g+w);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+l)}return x}(t,"",0)};function Kr(e,t,n){return e.fields=t||[],e.fname=n,e}function on(e){return e==null?null:e.fname}function nr(e){return e==null?null:e.fields}function LI(e){return e.length===1?IY(e[0]):jY(e)}const IY=e=>function(t){return t[e]},jY=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Y(e){throw Error(e)}function hs(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,l;e=e+"";function u(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(l=e[a],l==="\\")o+=e.substring(s,a),o+=e.substring(++a,++a),s=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;s===i&&l==='"'||s===i&&l==="'"?(s=a+1,r=l):l==="."&&!i?a>s?u():s=a+1:l==="["?(a>s&&u(),i=s=a+1):l==="]"&&(i||Y("Access path missing open bracket: "+e),i>0&&u(),i=0,s=a+1)}return i&&Y("Access path missing closing bracket: "+e),r&&Y("Access path missing closing quote: "+e),a>s&&(a++,u()),t}function Hr(e,t,n){const r=hs(e);return e=r.length===1?r[0]:e,Kr((n&&n.get||LI)(r),[e],t||e)}const bp=Hr("id"),ar=Kr(e=>e,[],"identity"),Ma=Kr(()=>0,[],"zero"),wd=Kr(()=>1,[],"one"),$i=Kr(()=>!0,[],"true"),wa=Kr(()=>!1,[],"false");function LY(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const zI=0,RO=1,PO=2,BI=3,UI=4;function IO(e,t,n=LY){let r=e||zI;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=RO&&n(t||"error","ERROR",arguments),this},warn(){return r>=PO&&n(t||"warn","WARN",arguments),this},info(){return r>=BI&&n(t||"log","INFO",arguments),this},debug(){return r>=UI&&n(t||"log","DEBUG",arguments),this}}}var X=Array.isArray;function me(e){return e===Object(e)}const lD=e=>e!=="__proto__";function Ed(...e){return e.reduce((t,n)=>{for(const r in n)if(r==="signals")t.signals=zY(t.signals,n.signals);else{const i=r==="legend"?{layout:1}:r==="style"?!0:null;Sd(t,r,n[r],i)}return t},{})}function Sd(e,t,n,r){if(!lD(t))return;let i,o;if(me(n)&&!X(n)){o=me(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Sd(o,i,n[i]):lD(i)&&(o[i]=n[i])}else e[t]=n}function zY(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function lt(e){return e[e.length-1]}function Zn(e){return e==null||e===""?null:+e}const HI=e=>t=>e*Math.exp(t),WI=e=>t=>Math.log(e*t),GI=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),VI=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,cy=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function x1(e,t,n,r){const i=n(e[0]),o=n(lt(e)),s=(o-i)*t;return[r(i-s),r(o-s)]}function YI(e,t){return x1(e,t,Zn,ar)}function XI(e,t){var n=Math.sign(e[0]);return x1(e,t,WI(n),HI(n))}function qI(e,t,n){return x1(e,t,cy(n),cy(1/n))}function KI(e,t,n){return x1(e,t,GI(n),VI(n))}function w1(e,t,n,r,i){const o=r(e[0]),s=r(lt(e)),a=t!=null?r(t):(o+s)/2;return[i(a+(o-a)*n),i(a+(s-a)*n)]}function jO(e,t,n){return w1(e,t,n,Zn,ar)}function LO(e,t,n){const r=Math.sign(e[0]);return w1(e,t,n,WI(r),HI(r))}function fy(e,t,n,r){return w1(e,t,n,cy(r),cy(1/r))}function zO(e,t,n,r){return w1(e,t,n,GI(r),VI(r))}function JI(e){return 1+~~(new Date(e).getMonth()/3)}function ZI(e){return 1+~~(new Date(e).getUTCMonth()/3)}function pe(e){return e!=null?X(e)?e:[e]:[]}function QI(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function Ze(e){return typeof e=="function"}const BY="descending";function BO(e,t,n){n=n||{},t=pe(t)||[];const r=[],i=[],o={},s=n.comparator||UY;return pe(e).forEach((a,l)=>{a!=null&&(r.push(t[l]===BY?-1:1),i.push(a=Ze(a)?a:Hr(a,null,n)),(nr(a)||[]).forEach(u=>o[u]=1))}),i.length===0?null:Kr(s(i,r),Object.keys(o))}const E1=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),UY=(e,t)=>e.length===1?HY(e[0],t[0]):WY(e,t,e.length),HY=(e,t)=>function(n,r){return E1(e(n),e(r))*t},WY=(e,t,n)=>(t.push(0),function(r,i){let o,s=0,a=-1;for(;s===0&&++a<n;)o=e[a],s=E1(o(r),o(i));return s*t[a]});function lr(e){return Ze(e)?e:()=>e}function UO(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Je(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function is(e,t){let n=0,r,i,o,s;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=s=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=s=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>s&&(s=i))}return[o,s]}function ej(e,t){const n=e.length;let r=-1,i,o,s,a,l;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}return[a,l]}const GY=Object.prototype.hasOwnProperty;function Ae(e,t){return GY.call(e,t)}const _m={};function Od(e){let t={},n;function r(o){return Ae(t,o)&&t[o]!==_m}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,s){return r(o)||(++i.size,t[o]===_m&&--i.empty),t[o]=s,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=_m),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let s=0;for(const a in t){const l=t[a];l!==_m&&(!n||!n(l))&&(o[a]=l,++s)}i.size=s,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function tj(e,t,n,r,i,o){if(!n&&n!==0)return o;const s=+n;let a=e[0],l=lt(e),u;l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const c=Math.abs(l-t);return u<c&&u<=s?r:c<=s?i:o}function re(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Je(r,n)}function uf(e,t,n,r){let i=t[0],o=t[t.length-1],s;return i>o&&(s=i,i=o,o=s),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function $l(e){return typeof e=="boolean"}function Ka(e){return Object.prototype.toString.call(e)==="[object Date]"}function nj(e){return e&&Ze(e[Symbol.iterator])}function kt(e){return typeof e=="number"}function rj(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function de(e){return typeof e=="string"}function HO(e,t,n){e&&(e=t?pe(e).map(a=>a.replace(/\\(.)/g,"$1")):pe(e));const r=e&&e.length,i=n&&n.get||LI,o=a=>i(t?[a]:hs(a));let s;if(!r)s=function(){return""};else if(r===1){const a=o(e[0]);s=function(l){return""+a(l)}}else{const a=e.map(o);s=function(l){let u=""+a[0](l),c=0;for(;++c<r;)u+="|"+a[c](l);return u}}return Kr(s,e,"key")}function ij(e,t){const n=e[0],r=lt(e),i=+t;return i?i===1?r:n+i*(r-n):n}const VY=1e4;function oj(e){e=+e||VY;let t,n,r;const i=()=>{t={},n={},r=0},o=(s,a)=>(++r>e&&(n=t,t={},r=1),t[s]=a);return i(),{clear:i,has:s=>Ae(t,s)||Ae(n,s),get:s=>Ae(t,s)?t[s]:Ae(n,s)?o(s,n[s]):void 0,set:(s,a)=>Ae(t,s)?t[s]=a:o(s,a)}}function sj(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const s=r||new t.constructor(i+o);let a=0,l=0,u=0;for(;a<i&&l<o;++u)s[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<i;++a,++u)s[u]=t[a];for(;l<o;++l,++u)s[u]=n[l];return s}function Ah(e,t){let n="";for(;--t>=0;)n+=e;return n}function aj(e,t,n,r){const i=n||" ",o=e+"",s=t-o.length;return s<=0?o:r==="left"?Ah(i,s)+o:r==="center"?Ah(i,~~(s/2))+o+Ah(i,Math.ceil(s/2)):o+Ah(i,s)}function xp(e){return e&&lt(e)-e[0]||0}function ae(e){return X(e)?"["+e.map(ae)+"]":me(e)||de(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function WO(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const YY=e=>kt(e)||Ka(e)?e:Date.parse(e);function GO(e,t){return t=t||YY,e==null||e===""?null:t(e)}function VO(e){return e==null||e===""?null:e+""}function xo(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function lj(e,t,n,r){const i=r!=null?r:"\u2026",o=e+"",s=o.length,a=Math.max(0,t-i.length);return s<=t?o:n==="left"?i+o.slice(s-a):n==="center"?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i}function Aa(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}var uD={},Ax={},Cx=34,qd=10,Tx=13;function uj(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function XY(e,t){var n=uj(e);return function(r,i){return t(n(r),i,e)}}function cD(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Dr(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function qY(e){return e<0?"-"+Dr(-e,6):e>9999?"+"+Dr(e,6):Dr(e,4)}function KY(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":qY(e.getUTCFullYear())+"-"+Dr(e.getUTCMonth()+1,2)+"-"+Dr(e.getUTCDate(),2)+(i?"T"+Dr(t,2)+":"+Dr(n,2)+":"+Dr(r,2)+"."+Dr(i,3)+"Z":r?"T"+Dr(t,2)+":"+Dr(n,2)+":"+Dr(r,2)+"Z":n||t?"T"+Dr(t,2)+":"+Dr(n,2)+"Z":"")}function JY(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,g,p=i(f,function(m,y){if(h)return h(m,y-1);g=m,h=d?XY(m,d):uj(m)});return p.columns=g||[],p}function i(f,d){var h=[],g=f.length,p=0,m=0,y,v=g<=0,b=!1;f.charCodeAt(g-1)===qd&&--g,f.charCodeAt(g-1)===Tx&&--g;function x(){if(v)return Ax;if(b)return b=!1,uD;var S,E=p,O;if(f.charCodeAt(E)===Cx){for(;p++<g&&f.charCodeAt(p)!==Cx||f.charCodeAt(++p)===Cx;);return(S=p)>=g?v=!0:(O=f.charCodeAt(p++))===qd?b=!0:O===Tx&&(b=!0,f.charCodeAt(p)===qd&&++p),f.slice(E+1,S-1).replace(/""/g,'"')}for(;p<g;){if((O=f.charCodeAt(S=p++))===qd)b=!0;else if(O===Tx)b=!0,f.charCodeAt(p)===qd&&++p;else if(O!==n)continue;return f.slice(E,S)}return v=!0,f.slice(E,g)}for(;(y=x())!==Ax;){for(var w=[];y!==uD&&y!==Ax;)w.push(y),y=x();d&&(w=d(w,m++))==null||h.push(w)}return h}function o(f,d){return f.map(function(h){return d.map(function(g){return c(h[g])}).join(e)})}function s(f,d){return d==null&&(d=cD(f)),[d.map(c).join(e)].concat(o(f,d)).join(`
`)}function a(f,d){return d==null&&(d=cD(f)),o(f,d).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?KY(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:l,formatRow:u,formatValue:c}}function ZY(e){return e}function QY(e){if(e==null)return ZY;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,l){l||(t=n=0);var u=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+o,f[1]=(n+=a[1])*i+s;u<c;)f[u]=a[u],++u;return f}}function eX(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function tX(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return fD(e,n)})}:fD(e,t)}function fD(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=cj(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function cj(e,t){var n=QY(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,g=d.length;h<g;++h)f.push(n(d[h],h));c<0&&eX(f,g)}function o(c){return n(c)}function s(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=s(c);f.length<4;)f.push(f[0]);return f}function l(c){return c.map(a)}function u(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(u)};case"Point":d=o(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(o);break;case"LineString":d=s(c.arcs);break;case"MultiLineString":d=c.arcs.map(s);break;case"Polygon":d=l(c.arcs);break;case"MultiPolygon":d=c.arcs.map(l);break;default:return null}return{type:f,coordinates:d}}return u(t)}function nX(e,t){var n={},r={},i={},o=[],s=-1;t.forEach(function(u,c){var f=e.arcs[u<0?~u:u],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++s],t[s]=u,t[c]=d)}),t.forEach(function(u){var c=a(u),f=c[0],d=c[1],h,g;if(h=i[f])if(delete i[h.end],h.push(u),h.end=d,g=r[d]){delete r[g.start];var p=g===h?h:h.concat(g);r[p.start=h.start]=i[p.end=g.end]=p}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(u),h.start=f,g=i[f]){delete i[g.end];var m=g===h?h:g.concat(h);r[m.start=g.start]=i[m.end=h.end]=m}else r[h.start]=i[h.end]=h;else h=[u],r[h.start=f]=i[h.end=d]=h});function a(u){var c=e.arcs[u<0?~u:u],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],u<0?[d,f]:[f,d]}function l(u,c){for(var f in u){var d=u[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),o.push(d)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function rX(e){return cj(e,iX.apply(this,arguments))}function iX(e,t,n){var r,i,o;if(arguments.length>1)r=oX(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:nX(e,r)}}function oX(e,t,n){var r=[],i=[],o;function s(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:o})}function a(f){f.forEach(s)}function l(f){f.forEach(a)}function u(f){f.forEach(l)}function c(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":l(f.arcs);break;case"MultiPolygon":u(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function Gs(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function sX(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wp(e){let t,n,r;e.length!==2?(t=Gs,n=(a,l)=>Gs(e(a),l),r=(a,l)=>e(a)-l):(t=e===Gs||e===sX?e:aX,n=e,r=e);function i(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<0?u=f+1:c=f}while(u<c)}return u}function o(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function s(a,l,u=0,c=a.length){const f=i(a,l,u,c-1);return f>u&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:i,center:s,right:o}}function aX(){return 0}function fj(e){return e===null?NaN:+e}function*lX(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const dj=wp(Gs),dy=dj.right,uX=dj.left;wp(fj).center;const Ep=dy;function cX(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}function fX(e,t){const n=cX(e,t);return n&&Math.sqrt(n)}class Er{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[r++]=a),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}class dD extends Map{constructor(t,n=pj){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Dw(this,t))}has(t){return super.has(Dw(this,t))}set(t,n){return super.set(hj(this,t),n)}delete(t){return super.delete(gj(this,t))}}class hy extends Set{constructor(t,n=pj){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(Dw(this,t))}add(t){return super.add(hj(this,t))}delete(t){return super.delete(gj(this,t))}}function Dw({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function hj({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function gj({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function pj(e){return e!==null&&typeof e=="object"?e.valueOf():e}function dX(e,t){return Array.from(t,n=>e[n])}function hX(e=Gs){if(e===Gs)return mj;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function mj(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}var Mw=Math.sqrt(50),$w=Math.sqrt(10),Nw=Math.sqrt(2);function Rw(e,t,n){var r,i=-1,o,s,a;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(o=e,e=t,t=o),(a=yj(e,t,n))===0||!isFinite(a))return[];if(a>0){let l=Math.round(e/a),u=Math.round(t/a);for(l*a<e&&++l,u*a>t&&--u,s=new Array(o=u-l+1);++i<o;)s[i]=(l+i)*a}else{a=-a;let l=Math.round(e*a),u=Math.round(t*a);for(l/a<e&&++l,u/a>t&&--u,s=new Array(o=u-l+1);++i<o;)s[i]=(l+i)/a}return r&&s.reverse(),s}function yj(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Mw?10:o>=$w?5:o>=Nw?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Mw?10:o>=$w?5:o>=Nw?2:1)}function hl(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Mw?i*=10:o>=$w?i*=5:o>=Nw&&(i*=2),t<e?-i:i}function ju(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Pw(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function vj(e,t,n=0,r=e.length-1,i){for(i=i===void 0?mj:hX(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(t-u*f/l+d)),g=Math.min(r,Math.floor(t+(l-u)*f/l+d));vj(e,t,h,g,i)}const o=e[t];let s=n,a=r;for(Kd(e,n,t),i(e[r],o)>0&&Kd(e,n,r);s<a;){for(Kd(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?Kd(e,n,a):(++a,Kd(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function Kd(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Iw(e,t,n){if(e=Float64Array.from(lX(e,n)),!!(r=e.length)){if((t=+t)<=0||r<2)return Pw(e);if(t>=1)return ju(e);var r,i=(r-1)*t,o=Math.floor(i),s=ju(vj(e,o).subarray(0,o+1)),a=Pw(e.subarray(o+1));return s+(a-s)*(i-o)}}function bj(e,t,n=fj){if(!!(r=e.length)){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function gX(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function xj(e,t){return Iw(e,.5,t)}function*pX(e){for(const t of e)yield*t}function wj(e){return Array.from(pX(e))}function ui(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function Ej(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function mX(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function gy(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function jf(e){return e=gy(Math.abs(e)),e?e[1]:NaN}function yX(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function vX(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var bX=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ju(e){if(!(t=bX.exec(e)))throw new Error("invalid format: "+e);var t;return new YO({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ju.prototype=YO.prototype;function YO(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}YO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function xX(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Sj;function wX(e,t){var n=gy(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(Sj=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+gy(e,Math.max(0,t+o-1))[0]}function hD(e,t){var n=gy(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const gD={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:mX,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>hD(e*100,t),r:hD,s:wX,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function pD(e){return e}var mD=Array.prototype.map,yD=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Oj(e){var t=e.grouping===void 0||e.thousands===void 0?pD:yX(mD.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?pD:vX(mD.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"\u2212":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Ju(f);var d=f.fill,h=f.align,g=f.sign,p=f.symbol,m=f.zero,y=f.width,v=f.comma,b=f.precision,x=f.trim,w=f.type;w==="n"?(v=!0,w="g"):gD[w]||(b===void 0&&(b=12),x=!0,w="g"),(m||d==="0"&&h==="=")&&(m=!0,d="0",h="=");var S=p==="$"?n:p==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",E=p==="$"?r:/[%p]/.test(w)?s:"",O=gD[w],A=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function C(_){var T=S,k=E,D,M,$;if(w==="c")k=O(_)+k,_="";else{_=+_;var N=_<0||1/_<0;if(_=isNaN(_)?l:O(Math.abs(_),b),x&&(_=xX(_)),N&&+_==0&&g!=="+"&&(N=!1),T=(N?g==="("?g:a:g==="-"||g==="("?"":g)+T,k=(w==="s"?yD[8+Sj/3]:"")+k+(N&&g==="("?")":""),A){for(D=-1,M=_.length;++D<M;)if($=_.charCodeAt(D),48>$||$>57){k=($===46?i+_.slice(D+1):_.slice(D))+k,_=_.slice(0,D);break}}}v&&!m&&(_=t(_,1/0));var P=T.length+_.length+k.length,H=P<y?new Array(y-P+1).join(d):"";switch(v&&m&&(_=t(H+_,H.length?y-k.length:1/0),H=""),h){case"<":_=T+_+k+H;break;case"=":_=T+H+_+k;break;case"^":_=H.slice(0,P=H.length>>1)+T+_+k+H.slice(P);break;default:_=H+T+_+k;break}return o(_)}return C.toString=function(){return f+""},C}function c(f,d){var h=u((f=Ju(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(jf(d)/3)))*3,p=Math.pow(10,-g),m=yD[8+g/3];return function(y){return h(p*y)+m}}return{format:u,formatPrefix:c}}var Am,S1,XO;EX({thousands:",",grouping:[3],currency:["$",""]});function EX(e){return Am=Oj(e),S1=Am.format,XO=Am.formatPrefix,Am}function _j(e){return Math.max(0,-jf(Math.abs(e)))}function Aj(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(jf(t)/3)))*3-jf(Math.abs(e)))}function Cj(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,jf(t)-jf(e))+1}var kx=new Date,Fx=new Date;function $n(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=function(o){return e(o=new Date(+o)),o},i.ceil=function(o){return e(o=new Date(o-1)),t(o,1),e(o),o},i.round=function(o){var s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=function(o,s){return t(o=new Date(+o),s==null?1:Math.floor(s)),o},i.range=function(o,s,a){var l=[],u;if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;do l.push(u=new Date(+o)),t(o,a),e(o);while(u<o&&o<s);return l},i.filter=function(o){return $n(function(s){if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},function(s,a){if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););})},n&&(i.count=function(o,s){return kx.setTime(+o),Fx.setTime(+s),e(kx),e(Fx),Math.floor(n(kx,Fx))},i.every=function(o){return o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?function(s){return r(s)%o===0}:function(s){return i.count(0,s)%o===0}):i}),i}var py=$n(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});py.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?$n(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):py};const qO=py;py.range;const zs=1e3,Ci=zs*60,Bs=Ci*60,Zu=Bs*24,KO=Zu*7,vD=Zu*30,Dx=Zu*365;var Tj=$n(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*zs)},function(e,t){return(t-e)/zs},function(e){return e.getUTCSeconds()});const Pa=Tj;Tj.range;var kj=$n(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*zs)},function(e,t){e.setTime(+e+t*Ci)},function(e,t){return(t-e)/Ci},function(e){return e.getMinutes()});const JO=kj;kj.range;var Fj=$n(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*zs-e.getMinutes()*Ci)},function(e,t){e.setTime(+e+t*Bs)},function(e,t){return(t-e)/Bs},function(e){return e.getHours()});const ZO=Fj;Fj.range;var Dj=$n(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ci)/Zu,e=>e.getDate()-1);const Ja=Dj;Dj.range;function Oc(e){return $n(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n*7)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ci)/KO})}var _d=Oc(0),my=Oc(1),SX=Oc(2),OX=Oc(3),Lf=Oc(4),_X=Oc(5),AX=Oc(6);_d.range;my.range;SX.range;OX.range;Lf.range;_X.range;AX.range;var Mj=$n(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});const yy=Mj;Mj.range;var QO=$n(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});QO.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:$n(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)})};const gl=QO;QO.range;var $j=$n(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*Ci)},function(e,t){return(t-e)/Ci},function(e){return e.getUTCMinutes()});const e_=$j;$j.range;var Nj=$n(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*Bs)},function(e,t){return(t-e)/Bs},function(e){return e.getUTCHours()});const t_=Nj;Nj.range;var Rj=$n(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/Zu},function(e){return e.getUTCDate()-1});const Za=Rj;Rj.range;function _c(e){return $n(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n*7)},function(t,n){return(n-t)/KO})}var Ad=_c(0),vy=_c(1),CX=_c(2),TX=_c(3),zf=_c(4),kX=_c(5),FX=_c(6);Ad.range;vy.range;CX.range;TX.range;zf.range;kX.range;FX.range;var Pj=$n(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()});const by=Pj;Pj.range;var n_=$n(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});n_.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:$n(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})};const pl=n_;n_.range;function Ij(e,t,n,r,i,o){const s=[[Pa,1,zs],[Pa,5,5*zs],[Pa,15,15*zs],[Pa,30,30*zs],[o,1,Ci],[o,5,5*Ci],[o,15,15*Ci],[o,30,30*Ci],[i,1,Bs],[i,3,3*Bs],[i,6,6*Bs],[i,12,12*Bs],[r,1,Zu],[r,2,2*Zu],[n,1,KO],[t,1,vD],[t,3,3*vD],[e,1,Dx]];function a(u,c,f){const d=c<u;d&&([u,c]=[c,u]);const h=f&&typeof f.range=="function"?f:l(u,c,f),g=h?h.range(u,+c+1):[];return d?g.reverse():g}function l(u,c,f){const d=Math.abs(c-u)/f,h=wp(([,,m])=>m).right(s,d);if(h===s.length)return e.every(hl(u/Dx,c/Dx,f));if(h===0)return qO.every(Math.max(hl(u,c,f),1));const[g,p]=s[d/s[h-1][2]<s[h][2]/d?h-1:h];return g.every(p)}return[a,l]}const[DX,MX]=Ij(pl,by,Ad,Za,t_,e_),[$X,NX]=Ij(gl,yy,_d,Ja,ZO,JO),Ln="year",Wr="quarter",rr="month",yn="week",Gr="date",qn="day",os="dayofyear",pi="hours",mi="minutes",Ni="seconds",wo="milliseconds",r_=[Ln,Wr,rr,yn,Gr,qn,os,pi,mi,Ni,wo],Mx=r_.reduce((e,t,n)=>(e[t]=1+n,e),{});function i_(e){const t=pe(e).slice(),n={};return t.length||Y("Missing time unit."),t.forEach(i=>{Ae(Mx,i)?n[i]=1:Y("Invalid time unit: ".concat(i,"."))}),(n[yn]||n[qn]?1:0)+(n[Wr]||n[rr]||n[Gr]?1:0)+(n[os]?1:0)>1&&Y("Incompatible time units: ".concat(e)),t.sort((i,o)=>Mx[i]-Mx[o]),t}const RX={[Ln]:"%Y ",[Wr]:"Q%q ",[rr]:"%b ",[Gr]:"%d ",[yn]:"W%U ",[qn]:"%a ",[os]:"%j ",[pi]:"%H:00",[mi]:"00:%M",[Ni]:":%S",[wo]:".%L",["".concat(Ln,"-").concat(rr)]:"%Y-%m ",["".concat(Ln,"-").concat(rr,"-").concat(Gr)]:"%Y-%m-%d ",["".concat(pi,"-").concat(mi)]:"%H:%M"};function jj(e,t){const n=Je({},RX,t),r=i_(e),i=r.length;let o="",s=0,a,l;for(s=0;s<i;)for(a=r.length;a>s;--a)if(l=r.slice(s,a).join("-"),n[l]!=null){o+=n[l],s=a;break}return o.trim()}const vu=new Date;function o_(e){return vu.setFullYear(e),vu.setMonth(0),vu.setDate(1),vu.setHours(0,0,0,0),vu}function Lj(e){return Bj(new Date(e))}function zj(e){return jw(new Date(e))}function Bj(e){return Ja.count(o_(e.getFullYear())-1,e)}function jw(e){return _d.count(o_(e.getFullYear())-1,e)}function Lw(e){return o_(e).getDay()}function PX(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,o,s);return a.setFullYear(e),a}return new Date(e,t,n,r,i,o,s)}function Uj(e){return Wj(new Date(e))}function Hj(e){return zw(new Date(e))}function Wj(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Za.count(t-1,e)}function zw(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Ad.count(t-1,e)}function Bw(e){return vu.setTime(Date.UTC(e,0,1)),vu.getUTCDay()}function IX(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,o,s))}function Gj(e,t,n,r,i){const o=t||1,s=lt(e),a=(y,v,b)=>(b=b||y,jX(n[b],r[b],y===s&&o,v)),l=new Date,u=xo(e),c=u[Ln]?a(Ln):lr(2012),f=u[rr]?a(rr):u[Wr]?a(Wr):Ma,d=u[yn]&&u[qn]?a(qn,1,yn+qn):u[yn]?a(yn,1):u[qn]?a(qn,1):u[Gr]?a(Gr,1):u[os]?a(os,1):wd,h=u[pi]?a(pi):Ma,g=u[mi]?a(mi):Ma,p=u[Ni]?a(Ni):Ma,m=u[wo]?a(wo):Ma;return function(y){l.setTime(+y);const v=c(l);return i(v,f(l),d(l,v),h(l),g(l),p(l),m(l))}}function jX(e,t,n,r){const i=n<=1?e:r?(o,s)=>r+n*Math.floor((e(o,s)-r)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(i(o,s),s):i}function Bf(e,t,n){return t+e*7-(n+6)%7}const LX={[Ln]:e=>e.getFullYear(),[Wr]:e=>Math.floor(e.getMonth()/3),[rr]:e=>e.getMonth(),[Gr]:e=>e.getDate(),[pi]:e=>e.getHours(),[mi]:e=>e.getMinutes(),[Ni]:e=>e.getSeconds(),[wo]:e=>e.getMilliseconds(),[os]:e=>Bj(e),[yn]:e=>jw(e),[yn+qn]:(e,t)=>Bf(jw(e),e.getDay(),Lw(t)),[qn]:(e,t)=>Bf(1,e.getDay(),Lw(t))},zX={[Wr]:e=>3*e,[yn]:(e,t)=>Bf(e,0,Lw(t))};function Vj(e,t){return Gj(e,t||1,LX,zX,PX)}const BX={[Ln]:e=>e.getUTCFullYear(),[Wr]:e=>Math.floor(e.getUTCMonth()/3),[rr]:e=>e.getUTCMonth(),[Gr]:e=>e.getUTCDate(),[pi]:e=>e.getUTCHours(),[mi]:e=>e.getUTCMinutes(),[Ni]:e=>e.getUTCSeconds(),[wo]:e=>e.getUTCMilliseconds(),[os]:e=>Wj(e),[yn]:e=>zw(e),[qn]:(e,t)=>Bf(1,e.getUTCDay(),Bw(t)),[yn+qn]:(e,t)=>Bf(zw(e),e.getUTCDay(),Bw(t))},UX={[Wr]:e=>3*e,[yn]:(e,t)=>Bf(e,0,Bw(t))};function Yj(e,t){return Gj(e,t||1,BX,UX,IX)}const HX={[Ln]:gl,[Wr]:yy.every(3),[rr]:yy,[yn]:_d,[Gr]:Ja,[qn]:Ja,[os]:Ja,[pi]:ZO,[mi]:JO,[Ni]:Pa,[wo]:qO},WX={[Ln]:pl,[Wr]:by.every(3),[rr]:by,[yn]:Ad,[Gr]:Za,[qn]:Za,[os]:Za,[pi]:t_,[mi]:e_,[Ni]:Pa,[wo]:qO};function Cd(e){return HX[e]}function Td(e){return WX[e]}function Xj(e,t,n){return e?e.offset(t,n):void 0}function qj(e,t,n){return Xj(Cd(e),t,n)}function Kj(e,t,n){return Xj(Td(e),t,n)}function Jj(e,t,n,r){return e?e.range(t,n,r):void 0}function Zj(e,t,n,r){return Jj(Cd(e),t,n,r)}function Qj(e,t,n,r){return Jj(Td(e),t,n,r)}const Ch=1e3,Th=Ch*60,kh=Th*60,O1=kh*24,GX=O1*7,bD=O1*30,Uw=O1*365,e5=[Ln,rr,Gr,pi,mi,Ni,wo],Fh=e5.slice(0,-1),Dh=Fh.slice(0,-1),Mh=Dh.slice(0,-1),VX=Mh.slice(0,-1),YX=[Ln,yn],xD=[Ln,rr],t5=[Ln],Jd=[[Fh,1,Ch],[Fh,5,5*Ch],[Fh,15,15*Ch],[Fh,30,30*Ch],[Dh,1,Th],[Dh,5,5*Th],[Dh,15,15*Th],[Dh,30,30*Th],[Mh,1,kh],[Mh,3,3*kh],[Mh,6,6*kh],[Mh,12,12*kh],[VX,1,O1],[YX,1,GX],[xD,1,bD],[xD,3,3*bD],[t5,1,Uw]];function n5(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(xp(t))/n;let i=wp(a=>a[2]).right(Jd,r),o,s;return i===Jd.length?(o=t5,s=hl(t[0]/Uw,t[1]/Uw,n)):i?(i=Jd[r/Jd[i-1][2]<Jd[i][2]/r?i-1:i],o=i[0],s=i[1]):(o=e5,s=Math.max(hl(t[0],t[1],n),1)),{units:o,step:s}}function $x(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Nx(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Zd(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function r5(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,u=Qd(i),c=eh(i),f=Qd(o),d=eh(o),h=Qd(s),g=eh(s),p=Qd(a),m=eh(a),y=Qd(l),v=eh(l),b={a:N,A:P,b:H,B:ie,c:null,d:AD,e:AD,f:mq,g:Aq,G:Tq,H:hq,I:gq,j:pq,L:i5,m:yq,M:vq,p:ge,q:be,Q:kD,s:FD,S:bq,u:xq,U:wq,V:Eq,w:Sq,W:Oq,x:null,X:null,y:_q,Y:Cq,Z:kq,"%":TD},x={a:Fe,A:Be,b:De,B:Ie,c:null,d:CD,e:CD,f:$q,g:Hq,G:Gq,H:Fq,I:Dq,j:Mq,L:s5,m:Nq,M:Rq,p:Qe,q:yt,Q:kD,s:FD,S:Pq,u:Iq,U:jq,V:Lq,w:zq,W:Bq,x:null,X:null,y:Uq,Y:Wq,Z:Vq,"%":TD},w={a:C,A:_,b:T,B:k,c:D,d:OD,e:OD,f:uq,g:SD,G:ED,H:_D,I:_D,j:oq,L:lq,m:iq,M:sq,p:A,q:rq,Q:fq,s:dq,S:aq,u:ZX,U:QX,V:eq,w:JX,W:tq,x:M,X:$,y:SD,Y:ED,Z:nq,"%":cq};b.x=S(n,b),b.X=S(r,b),b.c=S(t,b),x.x=S(n,x),x.X=S(r,x),x.c=S(t,x);function S(Q,Oe){return function(je){var F=[],R=-1,I=0,G=Q.length,W,J,le;for(je instanceof Date||(je=new Date(+je));++R<G;)Q.charCodeAt(R)===37&&(F.push(Q.slice(I,R)),(J=wD[W=Q.charAt(++R)])!=null?W=Q.charAt(++R):J=W==="e"?" ":"0",(le=Oe[W])&&(W=le(je,J)),F.push(W),I=R+1);return F.push(Q.slice(I,R)),F.join("")}}function E(Q,Oe){return function(je){var F=Zd(1900,void 0,1),R=O(F,Q,je+="",0),I,G;if(R!=je.length)return null;if("Q"in F)return new Date(F.Q);if("s"in F)return new Date(F.s*1e3+("L"in F?F.L:0));if(Oe&&!("Z"in F)&&(F.Z=0),"p"in F&&(F.H=F.H%12+F.p*12),F.m===void 0&&(F.m="q"in F?F.q:0),"V"in F){if(F.V<1||F.V>53)return null;"w"in F||(F.w=1),"Z"in F?(I=Nx(Zd(F.y,0,1)),G=I.getUTCDay(),I=G>4||G===0?vy.ceil(I):vy(I),I=Za.offset(I,(F.V-1)*7),F.y=I.getUTCFullYear(),F.m=I.getUTCMonth(),F.d=I.getUTCDate()+(F.w+6)%7):(I=$x(Zd(F.y,0,1)),G=I.getDay(),I=G>4||G===0?my.ceil(I):my(I),I=Ja.offset(I,(F.V-1)*7),F.y=I.getFullYear(),F.m=I.getMonth(),F.d=I.getDate()+(F.w+6)%7)}else("W"in F||"U"in F)&&("w"in F||(F.w="u"in F?F.u%7:"W"in F?1:0),G="Z"in F?Nx(Zd(F.y,0,1)).getUTCDay():$x(Zd(F.y,0,1)).getDay(),F.m=0,F.d="W"in F?(F.w+6)%7+F.W*7-(G+5)%7:F.w+F.U*7-(G+6)%7);return"Z"in F?(F.H+=F.Z/100|0,F.M+=F.Z%100,Nx(F)):$x(F)}}function O(Q,Oe,je,F){for(var R=0,I=Oe.length,G=je.length,W,J;R<I;){if(F>=G)return-1;if(W=Oe.charCodeAt(R++),W===37){if(W=Oe.charAt(R++),J=w[W in wD?Oe.charAt(R++):W],!J||(F=J(Q,je,F))<0)return-1}else if(W!=je.charCodeAt(F++))return-1}return F}function A(Q,Oe,je){var F=u.exec(Oe.slice(je));return F?(Q.p=c.get(F[0].toLowerCase()),je+F[0].length):-1}function C(Q,Oe,je){var F=h.exec(Oe.slice(je));return F?(Q.w=g.get(F[0].toLowerCase()),je+F[0].length):-1}function _(Q,Oe,je){var F=f.exec(Oe.slice(je));return F?(Q.w=d.get(F[0].toLowerCase()),je+F[0].length):-1}function T(Q,Oe,je){var F=y.exec(Oe.slice(je));return F?(Q.m=v.get(F[0].toLowerCase()),je+F[0].length):-1}function k(Q,Oe,je){var F=p.exec(Oe.slice(je));return F?(Q.m=m.get(F[0].toLowerCase()),je+F[0].length):-1}function D(Q,Oe,je){return O(Q,t,Oe,je)}function M(Q,Oe,je){return O(Q,n,Oe,je)}function $(Q,Oe,je){return O(Q,r,Oe,je)}function N(Q){return s[Q.getDay()]}function P(Q){return o[Q.getDay()]}function H(Q){return l[Q.getMonth()]}function ie(Q){return a[Q.getMonth()]}function ge(Q){return i[+(Q.getHours()>=12)]}function be(Q){return 1+~~(Q.getMonth()/3)}function Fe(Q){return s[Q.getUTCDay()]}function Be(Q){return o[Q.getUTCDay()]}function De(Q){return l[Q.getUTCMonth()]}function Ie(Q){return a[Q.getUTCMonth()]}function Qe(Q){return i[+(Q.getUTCHours()>=12)]}function yt(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var Oe=S(Q+="",b);return Oe.toString=function(){return Q},Oe},parse:function(Q){var Oe=E(Q+="",!1);return Oe.toString=function(){return Q},Oe},utcFormat:function(Q){var Oe=S(Q+="",x);return Oe.toString=function(){return Q},Oe},utcParse:function(Q){var Oe=E(Q+="",!0);return Oe.toString=function(){return Q},Oe}}}var wD={"-":"",_:" ",0:"0"},Nn=/^\s*\d+/,XX=/^%/,qX=/[\\^$*+?|[\]().{}]/g;function bt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function KX(e){return e.replace(qX,"\\$&")}function Qd(e){return new RegExp("^(?:"+e.map(KX).join("|")+")","i")}function eh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function JX(e,t,n){var r=Nn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ZX(e,t,n){var r=Nn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function QX(e,t,n){var r=Nn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function eq(e,t,n){var r=Nn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function tq(e,t,n){var r=Nn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ED(e,t,n){var r=Nn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function SD(e,t,n){var r=Nn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function nq(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function rq(e,t,n){var r=Nn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function iq(e,t,n){var r=Nn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function OD(e,t,n){var r=Nn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function oq(e,t,n){var r=Nn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function _D(e,t,n){var r=Nn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function sq(e,t,n){var r=Nn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function aq(e,t,n){var r=Nn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function lq(e,t,n){var r=Nn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function uq(e,t,n){var r=Nn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function cq(e,t,n){var r=XX.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function fq(e,t,n){var r=Nn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function dq(e,t,n){var r=Nn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function AD(e,t){return bt(e.getDate(),t,2)}function hq(e,t){return bt(e.getHours(),t,2)}function gq(e,t){return bt(e.getHours()%12||12,t,2)}function pq(e,t){return bt(1+Ja.count(gl(e),e),t,3)}function i5(e,t){return bt(e.getMilliseconds(),t,3)}function mq(e,t){return i5(e,t)+"000"}function yq(e,t){return bt(e.getMonth()+1,t,2)}function vq(e,t){return bt(e.getMinutes(),t,2)}function bq(e,t){return bt(e.getSeconds(),t,2)}function xq(e){var t=e.getDay();return t===0?7:t}function wq(e,t){return bt(_d.count(gl(e)-1,e),t,2)}function o5(e){var t=e.getDay();return t>=4||t===0?Lf(e):Lf.ceil(e)}function Eq(e,t){return e=o5(e),bt(Lf.count(gl(e),e)+(gl(e).getDay()===4),t,2)}function Sq(e){return e.getDay()}function Oq(e,t){return bt(my.count(gl(e)-1,e),t,2)}function _q(e,t){return bt(e.getFullYear()%100,t,2)}function Aq(e,t){return e=o5(e),bt(e.getFullYear()%100,t,2)}function Cq(e,t){return bt(e.getFullYear()%1e4,t,4)}function Tq(e,t){var n=e.getDay();return e=n>=4||n===0?Lf(e):Lf.ceil(e),bt(e.getFullYear()%1e4,t,4)}function kq(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+bt(t/60|0,"0",2)+bt(t%60,"0",2)}function CD(e,t){return bt(e.getUTCDate(),t,2)}function Fq(e,t){return bt(e.getUTCHours(),t,2)}function Dq(e,t){return bt(e.getUTCHours()%12||12,t,2)}function Mq(e,t){return bt(1+Za.count(pl(e),e),t,3)}function s5(e,t){return bt(e.getUTCMilliseconds(),t,3)}function $q(e,t){return s5(e,t)+"000"}function Nq(e,t){return bt(e.getUTCMonth()+1,t,2)}function Rq(e,t){return bt(e.getUTCMinutes(),t,2)}function Pq(e,t){return bt(e.getUTCSeconds(),t,2)}function Iq(e){var t=e.getUTCDay();return t===0?7:t}function jq(e,t){return bt(Ad.count(pl(e)-1,e),t,2)}function a5(e){var t=e.getUTCDay();return t>=4||t===0?zf(e):zf.ceil(e)}function Lq(e,t){return e=a5(e),bt(zf.count(pl(e),e)+(pl(e).getUTCDay()===4),t,2)}function zq(e){return e.getUTCDay()}function Bq(e,t){return bt(vy.count(pl(e)-1,e),t,2)}function Uq(e,t){return bt(e.getUTCFullYear()%100,t,2)}function Hq(e,t){return e=a5(e),bt(e.getUTCFullYear()%100,t,2)}function Wq(e,t){return bt(e.getUTCFullYear()%1e4,t,4)}function Gq(e,t){var n=e.getUTCDay();return e=n>=4||n===0?zf(e):zf.ceil(e),bt(e.getUTCFullYear()%1e4,t,4)}function Vq(){return"+0000"}function TD(){return"%"}function kD(e){return+e}function FD(e){return Math.floor(+e/1e3)}var zc,s_,l5,a_,u5;Yq({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Yq(e){return zc=r5(e),s_=zc.format,l5=zc.parse,a_=zc.utcFormat,u5=zc.utcParse,zc}function $h(e){const t={};return n=>t[n]||(t[n]=e(n))}function Xq(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=qq(r,i);const s=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+s}}function qq(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function c5(e){const t=$h(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Ju(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Xq(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,s){s=Ju(s==null?",f":s);const a=hl(r,i,o),l=Math.max(Math.abs(r),Math.abs(i));let u;if(s.precision==null)switch(s.type){case"s":return isNaN(u=Aj(a,l))||(s.precision=u),n(s,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=Cj(a,l))||(s.precision=u-(s.type==="e"));break}case"f":case"%":{isNaN(u=_j(a))||(s.precision=u-(s.type==="%")*2);break}}return t(s)}}}let Hw;f5();function f5(){return Hw=c5({format:S1,formatPrefix:XO})}function d5(e){return c5(Oj(e))}function xy(e){return arguments.length?Hw=d5(e):Hw}function DD(e,t,n){n=n||{},me(n)||Y("Invalid time multi-format specifier: ".concat(n));const r=t(Ni),i=t(mi),o=t(pi),s=t(Gr),a=t(yn),l=t(rr),u=t(Wr),c=t(Ln),f=e(n[wo]||".%L"),d=e(n[Ni]||":%S"),h=e(n[mi]||"%I:%M"),g=e(n[pi]||"%I %p"),p=e(n[Gr]||n[qn]||"%a %d"),m=e(n[yn]||"%b %d"),y=e(n[rr]||"%B"),v=e(n[Wr]||"%B"),b=e(n[Ln]||"%Y");return x=>(r(x)<x?f:i(x)<x?d:o(x)<x?h:s(x)<x?g:l(x)<x?a(x)<x?p:m:c(x)<x?u(x)<x?y:v:b)(x)}function h5(e){const t=$h(e.format),n=$h(e.utcFormat);return{timeFormat:r=>de(r)?t(r):DD(t,Cd,r),utcFormat:r=>de(r)?n(r):DD(n,Td,r),timeParse:$h(e.parse),utcParse:$h(e.utcParse)}}let Ww;g5();function g5(){return Ww=h5({format:s_,parse:l5,utcFormat:a_,utcParse:u5})}function p5(e){return h5(r5(e))}function Pg(e){return arguments.length?Ww=p5(e):Ww}const Gw=(e,t)=>Je({},e,t);function m5(e,t){const n=e?d5(e):xy(),r=t?p5(t):Pg();return Gw(n,r)}function l_(e,t){const n=arguments.length;return n&&n!==2&&Y("defaultLocale expects either zero or two arguments."),n?Gw(xy(e),Pg(t)):Gw(xy(),Pg())}function Kq(){return f5(),g5(),l_()}const Jq=/^(data:|([A-Za-z]+:)?\/\/)/,Zq=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Qq=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,MD="file://";function eK(e,t){return n=>({options:n||{},sanitize:nK,load:tK,fileAccess:!!t,file:rK(t),http:oK(e)})}async function tK(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function nK(e,t){t=Je({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,s;const a=Zq.test(e.replace(Qq,""));(e==null||typeof e!="string"||!a)&&Y("Sanitize failure, invalid URI: "+ae(e));const l=Jq.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(i=e.startsWith(MD))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(MD.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function rK(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):iK}async function iK(){Y("No file system access.")}function oK(e){return e?async function(t,n){const r=Je({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?Ze(o[i])?o[i]():o.text():Y(o.status+""+o.statusText)}:sK}async function sK(){Y("No HTTP fetch method available.")}const aK=e=>e!=null&&e===e,lK=e=>e==="true"||e==="false"||e===!0||e===!1,uK=e=>!Number.isNaN(Date.parse(e)),y5=e=>!Number.isNaN(+e)&&!(e instanceof Date),cK=e=>y5(e)&&Number.isInteger(+e),Vw={boolean:WO,integer:Zn,number:Zn,date:GO,string:VO,unknown:ar},Cm=[lK,cK,y5,uK],fK=["boolean","integer","number","date"];function v5(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=Cm.length,i=Cm.map((o,s)=>s+1);for(let o=0,s=0,a,l;o<n;++o)for(l=t?e[o][t]:e[o],a=0;a<r;++a)if(i[a]&&aK(l)&&!Cm[a](l)&&(i[a]=0,++s,s===Cm.length))return"string";return fK[i.reduce((o,s)=>o===0?s:o,0)-1]}function b5(e,t){return t.reduce((n,r)=>(n[r]=v5(e,r),n),{})}function $D(e){const t=function(n,r){const i={delimiter:e};return u_(n,r?Je(r,i):i)};return t.responseType="text",t}function u_(e,t){return t.header&&(e=t.header.map(ae).join(t.delimiter)+`
`+e),JY(t.delimiter).parse(e+"")}u_.responseType="text";function dK(e){return typeof Buffer=="function"&&Ze(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function c_(e,t){const n=t&&t.property?Hr(t.property):ar;return me(e)&&!dK(e)?hK(n(e),t):n(JSON.parse(e))}c_.responseType="json";function hK(e,t){return!X(e)&&nj(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const gK={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function x5(e,t){let n,r,i,o;return e=c_(e,t),t&&t.feature?(n=tX,i=t.feature):t&&t.mesh?(n=rX,i=t.mesh,o=gK[t.filter]):Y("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):Y("Invalid TopoJSON object: "+i),r&&r.features||[r]}x5.responseType="json";const O0={dsv:u_,csv:$D(","),tsv:$D("	"),json:c_,topojson:x5};function f_(e,t){return arguments.length>1?(O0[e]=t,this):Ae(O0,e)?O0[e]:null}function w5(e){const t=f_(e);return t&&t.responseType||"text"}function E5(e,t,n,r){t=t||{};const i=f_(t.type||"json");return i||Y("Unknown data format type: "+t.type),e=i(e,t),t.parse&&pK(e,t.parse,n,r),Ae(e,"columns")&&delete e.columns,e}function pK(e,t,n,r){if(!e.length)return;const i=Pg();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),s,a,l,u,c,f;t==="auto"&&(t=b5(e,o)),o=Object.keys(t);const d=o.map(h=>{const g=t[h];let p,m;if(g&&(g.startsWith("date:")||g.startsWith("utc:")))return p=g.split(/:(.+)?/,2),m=p[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(p[0]==="utc"?r:n)(m);if(!Vw[g])throw Error("Illegal format pattern: "+h+":"+g);return Vw[g]});for(l=0,c=e.length,f=o.length;l<c;++l)for(s=e[l],u=0;u<f;++u)a=o[u],s[a]=d[u](s[a])}const _1=eK(typeof fetch<"u"&&fetch,null);function A1(e){const t=e||ar,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const s=n.indexOf(i);s>=0&&n.splice(s,1)}return n},n}async function _0(e,t){try{await t(e)}catch(n){e.error(n)}}const S5=Symbol("vega_id");let mK=1;function C1(e){return!!(e&&Te(e))}function Te(e){return e[S5]}function O5(e,t){return e[S5]=t,e}function Et(e){const t=e===Object(e)?e:{data:e};return Te(t)?t:O5(t,mK++)}function d_(e){return T1(e,Et({}))}function T1(e,t){for(const n in e)t[n]=e[n];return t}function _5(e,t){return O5(t,Te(e))}function Ac(e,t){return e?t?(n,r)=>e(n,r)||Te(t(n))-Te(t(r)):(n,r)=>e(n,r)||Te(n)-Te(r):null}function A5(e){return e&&e.constructor===Cc}function Cc(){const e=[],t=[],n=[],r=[],i=[];let o=null,s=!1;return{constructor:Cc,insert(a){const l=pe(a),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(a){const l=Ze(a)?r:t,u=pe(a),c=u.length;for(let f=0;f<c;++f)l.push(u[f]);return this},modify(a,l,u){const c={field:l,value:lr(u)};return Ze(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,l){return Ze(a)?i.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,l){const u={},c={};let f,d,h,g,p,m;for(f=0,d=l.length;f<d;++f)u[Te(l[f])]=1;for(f=0,d=t.length;f<d;++f)p=t[f],u[Te(p)]=-1;for(f=0,d=r.length;f<d;++f)g=r[f],l.forEach(v=>{g(v)&&(u[Te(v)]=-1)});for(f=0,d=e.length;f<d;++f)p=e[f],m=Te(p),u[m]?u[m]=1:a.add.push(Et(e[f]));for(f=0,d=l.length;f<d;++f)p=l[f],u[Te(p)]<0&&a.rem.push(p);function y(v,b,x){x?v[b]=x(v):a.encode=b,s||(c[Te(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],p=h.tuple,g=h.field,m=u[Te(p)],m>0&&(y(p,g,h.value),a.modifies(g));for(f=0,d=i.length;f<d;++f)h=i[f],g=h.filter,l.forEach(v=>{g(v)&&u[Te(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(s)a.mod=t.length||r.length?l.filter(v=>u[Te(v)]>0):l.slice();else for(m in c)a.mod.push(c[m]);return(o||o==null&&(t.length||r.length))&&a.clean(!0),a}}}const A0="_:mod:_";function k1(){Object.defineProperty(this,A0,{writable:!0,value:{}})}k1.prototype={set(e,t,n,r){const i=this,o=i[e],s=i[A0];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||r)&&(i[e]=n,s[e]=X(n)?1+n.length:-1),i},modified(e,t){const n=this[A0];if(arguments.length){if(X(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[A0]={},this}};let yK=0;const vK="pulse",bK=new k1,xK=1,wK=2;function $t(e,t,n,r){this.id=++yK,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function ND(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}$t.prototype={targets(){return this._targets||(this._targets=A1(bp))},set(e){return this.value!==e?(this.value=e,1):0},skip:ND(xK),modified:ND(wK),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new k1,i=this._argops=this._argops||[],o=[];let s,a,l,u;const c=(f,d,h)=>{h instanceof $t?(h!==this&&(t&&h.targets().add(this),o.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(s in e)if(a=e[s],s===vK)pe(a).forEach(f=>{f instanceof $t?f!==this&&(f.targets().add(this),o.push(f)):Y("Pulse parameters must be operator instances.")}),this.source=a;else if(X(a))for(r.set(s,-1,Array(l=a.length)),u=0;u<l;++u)c(s,u,a[u]);else c(s,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||bK,n=this._argops;let r,i,o,s;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],o=r.op,s=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,s);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function EK(e,t,n,r){let i=1,o;return e instanceof $t?o=e:e&&e.prototype instanceof $t?o=new e:Ze(e)?o=new $t(null,e):(i=0,o=new $t(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function SK(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let OK=0;function F1(e,t,n){this.id=++OK,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Ea(e,t,n){return new F1(e,t,n)}F1.prototype={_filter:$i,_apply:ar,targets(){return this._targets||(this._targets=A1(bp))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Ea(e);return this.targets().add(t),t},apply(e){const t=Ea(null,e);return this.targets().add(t),t},merge(){const e=Ea();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Ea();return this.targets().add(Ea(null,null,UO(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Ea(null,null,()=>n=!0)),t.targets().add(Ea(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=$i,this._targets=null}};function _K(e,t,n,r){const i=this,o=Ea(n,r),s=function(u){u.dataflow=i;try{o.receive(u)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=pe(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,s);return o}function AK(e,t){const n=this.locale();return E5(e,t,n.timeParse,n.utcParse)}function CK(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function TK(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:w5(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function kK(e,t,n){const r=this,i=r._pending||FK(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove($i).insert(o.data||[])),i.done(),o}function FK(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const DK={skip:!0};function MK(e,t,n,r,i){return(e instanceof $t?NK:$K)(this,e,t,n,r,i),this}function $K(e,t,n,r,i,o){const s=Je({},o,DK);let a,l;Ze(n)||(n=lr(n)),r===void 0?a=u=>e.touch(n(u)):Ze(r)?(l=new $t(null,r,i,!1),a=u=>{l.evaluate(u);const c=n(u),f=l.value;A5(f)?e.pulse(c,f,o):e.update(c,f,s)}):a=u=>e.update(n(u),r,s),t.apply(a)}function NK(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const s=o||{},a=new $t(null,RK(n,r),i,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function RK(e,t){return t=Ze(t)?t:lr(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function PK(e){e.rank=++this._rank}function IK(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Y("Cycle detected in dataflow graph.")}const wy={},Ro=1<<0,Ca=1<<1,Ms=1<<2,jK=Ro|Ca,RD=Ro|Ms,Bc=Ro|Ca|Ms,PD=1<<3,th=1<<4,ID=1<<5,jD=1<<6;function Qa(e,t,n){this.dataflow=e,this.stamp=t==null?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Rx(e,t){const n=[];return Aa(e,t,r=>n.push(r)),n}function LD(e,t){const n={};return e.visit(t,r=>{n[Te(r)]=1}),r=>n[Te(r)]?null:r}function Tm(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Qa.prototype={StopPropagation:wy,ADD:Ro,REM:Ca,MOD:Ms,ADD_REM:jK,ADD_MOD:RD,ALL:Bc,REFLOW:PD,SOURCE:th,NO_SOURCE:ID,NO_FIELDS:jD,fork(e){return new Qa(this.dataflow).init(this,e)},clone(){const e=this.fork(Bc);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Bc|th)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Qa(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&jD)&&(n.fields=e.fields),t&Ro?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Ca?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Ms?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&ID?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Bc;return t&Ro&&this.add.length||t&Ca&&this.rem.length||t&Ms&&this.mod.length},reflow(e){if(e)return this.fork(Bc).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Ms,LD(this,Ro))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return X(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?X(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Ro&&(n.addF=Tm(n.addF,t)),e&Ca&&(n.remF=Tm(n.remF,t)),e&Ms&&(n.modF=Tm(n.modF,t)),e&th&&(n.srcF=Tm(n.srcF,t)),n},materialize(e){e=e||Bc;const t=this;return e&Ro&&t.addF&&(t.add=Rx(t.add,t.addF),t.addF=null),e&Ca&&t.remF&&(t.rem=Rx(t.rem,t.remF),t.remF=null),e&Ms&&t.modF&&(t.mod=Rx(t.mod,t.modF),t.modF=null),e&th&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&th)return Aa(n.source,n.srcF,r),n;e&Ro&&Aa(n.add,n.addF,r),e&Ca&&Aa(n.rem,n.remF,r),e&Ms&&Aa(n.mod,n.modF,r);const i=n.source;if(e&PD&&i){const o=n.add.length+n.mod.length;o===i.length||(o?Aa(i,LD(n,RD),r):Aa(i,n.srcF,r))}return n}};function h_(e,t,n,r){const i=this,o=n.length;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(let a=0;a<o;++a){const l=n[a];if(l.stamp===t){if(l.fields){const u=i.fields||(i.fields={});for(const c in l.fields)u[c]=1}l.changed(i.ADD)&&(s|=i.ADD),l.changed(i.REM)&&(s|=i.REM),l.changed(i.MOD)&&(s|=i.MOD)}}this.changes=s}re(h_,Qa,{fork(e){const t=new Qa(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?X(e)?e.some(r=>n[r]):n[e]:0},filter(){Y("MultiPulse does not support filtering.")},materialize(){Y("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function LK(e,t,n){const r=this,i=[];if(r._pulse)return C5(r);if(r._pending&&await r._pending,t&&await _0(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new Qa(r,o,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=A1(bp);let s=0,a,l,u;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,e)),l.then?l=await l:l.async&&(i.push(l.async),l=wy),l!==wy&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++s}}catch(c){r._heap.clear(),u=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${s} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await _0(r,c[f].callback)}return n&&await _0(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function zK(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function BK(e,t,n){return this._pulse?C5(this):(this.evaluate(e,t,n),this)}function UK(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function C5(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function HK(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function WK(e,t){const n=e.source,r=this._clock;return n&&X(n)?new h_(this,r,n.map(i=>i.pulse),t):this._input[e.id]||GK(this._pulse,n&&n.pulse)}function GK(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==wy&&(e.source=t.source),e)}const g_={skip:!1,force:!1};function VK(e,t){const n=t||g_;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function YK(e,t,n){const r=n||g_;return(e.set(t)||r.force)&&this.touch(e,r),this}function XK(e,t,n){this.touch(e,n||g_);const r=new Qa(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function qK(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),T5(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,KK(t,0,e)):r=n,r}}}function T5(e,t,n,r){let i,o;const s=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(s,i)<0){e[n]=i,n=o;continue}break}return e[n]=s}function KK(e,t,n){const r=t,i=e.length,o=e[t];let s=(t<<1)+1,a;for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=o,T5(e,r,t,n)}function Ef(){this.logger(IO()),this.logLevel(RO),this._clock=0,this._rank=0,this._locale=l_();try{this._loader=_1()}catch{}this._touched=A1(bp),this._input={},this._pulse=null,this._heap=qK((e,t)=>e.qrank-t.qrank),this._postrun=[]}function nh(e){return function(){return this._log[e].apply(this,arguments)}}Ef.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:nh("error"),warn:nh("warn"),info:nh("info"),debug:nh("debug"),logLevel:nh("level"),cleanThreshold:1e4,add:EK,connect:SK,rank:PK,rerank:IK,pulse:XK,touch:VK,update:YK,changeset:Cc,ingest:CK,parse:AK,preload:kK,request:TK,events:_K,on:MK,evaluate:LK,run:BK,runAsync:zK,runAfter:UK,_enqueue:HK,_getPulse:WK};function U(e,t){$t.call(this,e,null,t)}re(U,$t,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Uf={};function k5(e){const t=F5(e);return t&&t.Definition||null}function F5(e){return e=e&&e.toLowerCase(),Ae(Uf,e)?Uf[e]:null}function*D5(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function p_(e,t,n){const r=Float64Array.from(D5(e,n));return r.sort(Gs),t.map(i=>bj(r,i))}function m_(e,t){return p_(e,[.25,.5,.75],t)}function y_(e,t){const n=e.length,r=fX(e,t),i=m_(e,t),o=(i[2]-i[0])/1.34,s=Math.min(r,o)||r||Math.abs(i[0])||1;return 1.06*s*Math.pow(n,-.2)}function M5(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],s=e.extent[1],a,l,u,c,f,d;const h=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(h)/r)-l));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=u&&h/c<=t&&(a=c)}c=Math.log(a);const g=c>=0?0:~~(-c/r)+1,p=Math.pow(n,-g-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(o/a+p)*a,o=o<c?c-a:c,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var Ri=Math.random;function JK(e){Ri=e}function $5(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(D5(e,r)),o=i.length,s=t;let a,l,u,c;for(u=0,c=Array(s);u<s;++u){for(a=0,l=0;l<o;++l)a+=i[~~(Ri()*o)];c[u]=a/o}return c.sort(Gs),[Iw(c,n/2),Iw(c,1-n/2)]}function N5(e,t,n,r){r=r||(d=>d);const i=e.length,o=new Float64Array(i);let s=0,a=1,l=r(e[0]),u=l,c=l+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(u=(l+u)/2;s<a;++s)o[s]=u;c=f+t,l=f}u=f}for(u=(l+u)/2;s<a;++s)o[s]=u;return n?ZK(o,t+t/4):o}function ZK(e,t){const n=e.length;let r=0,i=1,o,s;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(s=i+(r+o-i-i>>1);s<i;)e[s++]=e[i];for(;s>i;)e[s--]=e[r]}r=i,i=o}return e}function QK(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function eJ(e,t){t==null&&(t=e,e=0);let n,r,i;const o={min(s){return arguments.length?(n=s||0,i=r-n,o):n},max(s){return arguments.length?(r=s||0,i=r-n,o):r},sample(){return n+Math.floor(i*Ri())},pdf(s){return s===Math.floor(s)&&s>=n&&s<r?1/i:0},cdf(s){const a=Math.floor(s);return a<n?0:a>=r?1:(a-n+1)/i},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*i):NaN}};return o.min(e).max(t)}const R5=Math.sqrt(2*Math.PI),tJ=Math.SQRT2;let rh=NaN;function D1(e,t){e=e||0,t=t==null?1:t;let n=0,r=0,i,o;if(rh===rh)n=rh,rh=NaN;else{do n=Ri()*2-1,r=Ri()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,rh=r*o}return e+n*t}function v_(e,t,n){n=n==null?1:n;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*R5)}function M1(e,t,n){t=t||0,n=n==null?1:n;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const s=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,o=s*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,o=o/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,o=s/a/2.506628274631)}return r>0?1-o:o}function $1(e,t,n){return e<0||e>1?NaN:(t||0)+(n==null?1:n)*tJ*nJ(2*e-1)}function nJ(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function b_(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o==null?1:o,i):r},sample:()=>D1(n,r),pdf:o=>v_(o,n,r),cdf:o=>M1(o,n,r),icdf:o=>$1(o,n,r)};return i.mean(e).stdev(t)}function x_(e,t){const n=b_();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=y_(e)),i):t},sample(){return e[~~(Ri()*r)]+t*n.sample()},pdf(o){let s=0,a=0;for(;a<r;++a)s+=n.pdf((o-e[a])/t);return s/t/r},cdf(o){let s=0,a=0;for(;a<r;++a)s+=n.cdf((o-e[a])/t);return s/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function w_(e,t){return e=e||0,t=t==null?1:t,Math.exp(e+D1()*t)}function E_(e,t,n){if(e<=0)return 0;t=t||0,n=n==null?1:n;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*R5*e)}function S_(e,t,n){return M1(Math.log(e),t,n)}function O_(e,t,n){return Math.exp($1(e,t,n))}function P5(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o==null?1:o,i):r},sample:()=>w_(n,r),pdf:o=>E_(o,n,r),cdf:o=>S_(o,n,r),icdf:o=>O_(o,n,r)};return i.mean(e).stdev(t)}function I5(e,t){let n=0,r;function i(s){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=s[u]==null?1:+s[u];for(u=0;u<n;++u)a[u]/=l;return a}const o={weights(s){return arguments.length?(r=i(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=Ri();let a=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(s<l){a=e[u];break}return a.sample()},pdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].pdf(s);return a},cdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function __(e,t){return t==null&&(t=e==null?1:e,e=0),e+(t-e)*Ri()}function A_(e,t,n){return n==null&&(n=t==null?1:t,t=0),e>=t&&e<=n?1/(n-t):0}function C_(e,t,n){return n==null&&(n=t==null?1:t,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function T_(e,t,n){return n==null&&(n=t==null?1:t,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function j5(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o==null?1:o,i):r},sample:()=>__(n,r),pdf:o=>A_(o,n,r),cdf:o=>C_(o,n,r),icdf:o=>T_(o,n,r)};return t==null&&(t=e==null?1:e,e=0),i.min(e).max(t)}function Sp(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function N1(e,t,n,r){e=e.filter(h=>{let g=t(h),p=n(h);return g!=null&&(g=+g)>=g&&p!=null&&(p=+p)>=p}),r&&e.sort((h,g)=>t(h)-t(g));const i=e.length,o=new Float64Array(i),s=new Float64Array(i);let a=0,l=0,u=0,c,f,d;for(d of e)o[a]=c=+t(d),s[a]=f=+n(d),++a,l+=(c-l)/a,u+=(f-u)/a;for(a=0;a<i;++a)o[a]-=l,s[a]-=u;return[o,s,l,u]}function Op(e,t,n,r){let i=-1,o,s;for(const a of e)o=t(a),s=n(a),o!=null&&(o=+o)>=o&&s!=null&&(s=+s)>=s&&r(o,s,++i)}function kd(e,t,n,r,i){let o=0,s=0;return Op(e,t,n,(a,l)=>{const u=l-i(a),c=l-r;o+=u*u,s+=c*c}),1-o/s}function k_(e,t,n){let r=0,i=0,o=0,s=0,a=0;Op(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const l=Sp(r,i,o,s),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:kd(e,t,n,i,u)}}function L5(e,t,n){let r=0,i=0,o=0,s=0,a=0;Op(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const l=Sp(r,i,o,s),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:kd(e,t,n,i,u)}}function z5(e,t,n){const[r,i,o,s]=N1(e,t,n);let a=0,l=0,u=0,c=0,f=0,d,h,g;Op(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),g=d*b,a+=(b*h-a)/f,l+=(g-l)/f,u+=(g*h-u)/f,c+=(d*g-c)/f});const[p,m]=Sp(l/s,a/s,u/s,c/s),y=v=>Math.exp(p+m*(v-o));return{coef:[Math.exp(p-m*o),m],predict:y,rSquared:kd(e,t,n,s,y)}}function B5(e,t,n){let r=0,i=0,o=0,s=0,a=0,l=0;Op(e,t,n,(f,d)=>{const h=Math.log(f),g=Math.log(d);++l,r+=(h-r)/l,i+=(g-i)/l,o+=(h*g-o)/l,s+=(h*h-s)/l,a+=(d-a)/l});const u=Sp(r,i,o,s),c=f=>u[0]*Math.pow(f,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:kd(e,t,n,a,c)}}function F_(e,t,n){const[r,i,o,s]=N1(e,t,n),a=r.length;let l=0,u=0,c=0,f=0,d=0,h,g,p,m;for(h=0;h<a;)g=r[h],p=i[h++],m=g*g,l+=(m-l)/h,u+=(m*g-u)/h,c+=(m*m-c)/h,f+=(g*p-f)/h,d+=(m*p-d)/h;const y=c-l*l,v=l*y-u*u,b=(d*l-f*u)/v,x=(f*y-d*u)/v,w=-b*l,S=E=>(E=E-o,b*E*E+x*E+w+s);return{coef:[w-x*o+b*o*o+s,x-2*b*o,b],predict:S,rSquared:kd(e,t,n,s,S)}}function U5(e,t,n,r){if(r===1)return k_(e,t,n);if(r===2)return F_(e,t,n);const[i,o,s,a]=N1(e,t,n),l=i.length,u=[],c=[],f=r+1;let d,h,g,p,m;for(d=0;d<f;++d){for(g=0,p=0;g<l;++g)p+=Math.pow(i[g],d)*o[g];for(u.push(p),m=new Float64Array(f),h=0;h<f;++h){for(g=0,p=0;g<l;++g)p+=Math.pow(i[g],d+h);m[h]=p}c.push(m)}c.push(u);const y=iJ(c),v=b=>{b-=s;let x=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)x+=y[d]*Math.pow(b,d);return x};return{coef:rJ(f,y,-s,a),predict:v,rSquared:kd(e,t,n,a,v)}}function rJ(e,t,n,r){const i=Array(e);let o,s,a,l;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],l=1,i[o]+=a,s=1;s<=o;++s)l*=(o+1-s)/s,i[o-s]+=a*Math.pow(n,s)*l;return i[0]+=r,i}function iJ(e){const t=e.length-1,n=[];let r,i,o,s,a;for(r=0;r<t;++r){for(s=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][s])&&(s=i);for(o=r;o<t+1;++o)a=e[o][r],e[o][r]=e[o][s],e[o][s]=a;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,o=i+1;o<t;++o)a+=e[o][i]*n[o];n[i]=(e[t][i]-a)/e[i][i]}return n}const zD=2,BD=1e-12;function H5(e,t,n,r){const[i,o,s,a]=N1(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),c=new Float64Array(l),f=new Float64Array(l),d=new Float64Array(l).fill(1);for(let h=-1;++h<=zD;){const g=[0,u-1];for(let m=0;m<l;++m){const y=i[m],v=g[0],b=g[1],x=y-i[v]>i[b]-y?v:b;let w=0,S=0,E=0,O=0,A=0;const C=1/Math.abs(i[x]-y||1);for(let k=v;k<=b;++k){const D=i[k],M=o[k],$=oJ(Math.abs(y-D)*C)*d[k],N=D*$;w+=$,S+=N,E+=M*$,O+=M*N,A+=D*N}const[_,T]=Sp(S/w,E/w,O/w,A/w);c[m]=_+T*y,f[m]=Math.abs(o[m]-c[m]),sJ(i,m+1,g)}if(h===zD)break;const p=xj(f);if(Math.abs(p)<BD)break;for(let m=0,y,v;m<l;++m)y=f[m]/(6*p),d[m]=y>=1?BD:(v=1-y*y)*v}return aJ(i,c,s,a)}function oJ(e){return(e=1-e*e*e)*e*e}function sJ(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function aJ(e,t,n,r){const i=e.length,o=[];let s=0,a=0,l=[],u;for(;s<i;++s)u=e[s]+n,l[0]===u?l[1]+=(t[s]-l[1])/++a:(a=0,l[1]+=r,l=[u,t[s]],o.push(l));return l[1]+=r,o}const lJ=.5*Math.PI/180;function R1(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=p=>[p,e(p)],o=t[0],s=t[1],a=s-o,l=a/r,u=[i(o)],c=[];if(n===r){for(let p=1;p<r;++p)u.push(i(o+p/n*a));return u.push(i(s)),u}else{c.push(i(s));for(let p=n;--p>0;)c.push(i(o+p/n*a))}let f=u[0],d=c[c.length-1];const h=1/a,g=uJ(f[1],c);for(;d;){const p=i((f[0]+d[0])/2);p[0]-f[0]>=l&&cJ(f,p,d,h,g)>lJ?c.push(p):(f=d,u.push(d),c.pop()),d=c[c.length-1]}return u}function uJ(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const s=t[o][1];s<n&&(n=s),s>r&&(r=s)}return 1/(r-n)}function cJ(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),s=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-s)}function fJ(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function Yw(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:fJ(e)}function W5(e,t,n){return n||e+(t?"_"+t:"")}const Px=()=>{},dJ={init:Px,add:Px,rem:Px,idx:0},Ig={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.sum,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3}},_p=Object.keys(Ig);function hJ(e,t){return n=>Je({name:e,out:n||e},dJ,t)}_p.forEach(e=>{Ig[e]=hJ(e,Ig[e])});function G5(e,t){return Ig[e](t)}function V5(e,t){return e.idx-t.idx}function gJ(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{!r.req||r.req.forEach(i=>{t[i]||n(t[i]=Ig[i]())})};return e.forEach(n),Object.values(t).sort(V5)}function pJ(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.init(this))}function mJ(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function yJ(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function vJ(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function Y5(e,t){const n=t||ar,r=gJ(e),i=e.slice().sort(V5);function o(s){this._ops=r,this._out=i,this.cell=s,this.init()}return o.prototype.init=pJ,o.prototype.add=mJ,o.prototype.rem=yJ,o.prototype.set=vJ,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function D_(e){this._key=e?Hr(e):Te,this.reset()}const Bn=D_.prototype;Bn.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Bn.add=function(e){this._add.push(e)};Bn.rem=function(e){this._rem.push(e)};Bn.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),s={};let a,l,u;for(a=0;a<i;++a)s[n(t[a])]=1;for(a=0,l=0;a<r;++a)s[n(u=e[a])]?s[n(u)]=0:o[l++]=u;return this._rem=[],this._add=o};Bn.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",Ae(n,o)||(n[o]=1,++i);return i};Bn.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=ej(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Bn.argmin=function(e){return this.extent(e)[0]||{}};Bn.argmax=function(e){return this.extent(e)[1]||{}};Bn.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Bn.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Bn.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=m_(this.values(),e),this._get=e),this._q};Bn.q1=function(e){return this.quartile(e)[0]};Bn.q2=function(e){return this.quartile(e)[1]};Bn.q3=function(e){return this.quartile(e)[2]};Bn.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=$5(this.values(),1e3,.05,e),this._get=e),this._ci};Bn.ci0=function(e){return this.ci(e)[0]};Bn.ci1=function(e){return this.ci(e)[1]};function ml(e){U.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ml.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:_p},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};re(ml,U,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(a){let l,u,c,f;for(l in a)for(c=a[l].tuple,u=0;u<i;++u)r[u][f=c[n[u]]]=f}o(e._prev),o(t);function s(a,l,u){const c=n[u],f=r[u++];for(const d in f){const h=a?a+"|"+d:d;l[c]=f[d],u<i?s(h,l,u):t[h]||e.cell(h,l)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(m){const y=pe(nr(m)),v=y.length;let b=0,x;for(;b<v;++b)r[x=y[b]]||(r[x]=1,t.push(x))}this._dims=pe(e.groupby),this._dnames=this._dims.map(m=>{const y=on(m);return i(m),n.push(y),y}),this.cellkey=e.key?e.key:Yw(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.as||[],l=o.length,u={};let c,f,d,h,g,p;for(l!==s.length&&Y("Unmatched number of fields and aggregate ops."),p=0;p<l;++p){if(c=o[p],f=s[p],c==null&&f!=="count"&&Y("Null aggregate field specified."),h=on(c),g=W5(f,h,a[p]),n.push(g),f==="count"){this._counts.push(g);continue}d=u[h],d||(i(c),d=u[h]=[],d.field=c,this._measures.push(d)),f!=="count"&&(this._countOnly=!1),d.push(G5(f,g))}return this._measures=this._measures.map(m=>Y5(m,m.field)),{}},cellkey:Yw(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new D_),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let s=0;s<i;++s)o[n[s]]=r[s](e);return t?_5(t.tuple,o):Et(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,s=e.rem,a=e.mod;let l,u,c,f;if(r)for(u in r)l=r[u],(!i||l.num)&&s.push(l.tuple);for(c=0,f=this._alen;c<f;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)l=n[c],(l.num===0&&i?s:a).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const bJ=1e-14;function M_(e){U.call(this,null,e)}M_.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};re(M_,U,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,s=e.as||["bin0","bin1"],a=s[0],l=s[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(nr(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const f=r(c);c[a]=f,c[l]=f==null?null:i+o*(1+(f-i)/o)}:c=>c[a]=r(c)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=M5(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,s,a;(s=e.anchor)!=null&&(a=s-(i+r*Math.floor((s-i)/r)),i+=a,o+=a);const l=function(u){let c=Zn(t(u));return c==null?null:c<i?-1/0:c>o?1/0:(c=Math.max(i,Math.min(c,o-r)),i+r*Math.floor(bJ+(c-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=Kr(l,nr(t),e.name||"bin_"+on(t))}});function X5(e,t,n){const r=e;let i=t||[],o=n||[],s={},a=0;return{add:l=>o.push(l),remove:l=>s[r(l)]=++a,size:()=>i.length,data:(l,u)=>(a&&(i=i.filter(c=>!s[r(c)]),s={},a=0),u&&l&&i.sort(l),o.length&&(i=l?sj(l,i,o.sort(l)):i.concat(o),o=[]),i)}}function $_(e){U.call(this,[],e)}$_.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};re($_,U,{transform(e,t){const n=t.fork(t.ALL),r=X5(Te,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(Ac(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function q5(e){$t.call(this,null,xJ,e)}re(q5,$t);function xJ(e){return this.value&&!e.modified()?this.value:BO(e.fields,e.orders)}function N_(e){U.call(this,null,e)}N_.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function wJ(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}re(N_,U,{transform(e,t){const n=f=>d=>{for(var h=wJ(a(d),e.case,o)||[],g,p=0,m=h.length;p<m;++p)s.test(g=h[p])||f(g)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,s=this._stop,a=e.field,l=e.as||["text","count"],u=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=r[a],u=n[a]||0,!l&&u?(r[a]=l=Et({}),l[i]=a,l[o]=u,s.add.push(l)):u===0?(l&&s.rem.push(l),n[a]=null,r[a]=null):l[o]!==u&&(l[o]=u,s.mod.push(l));return s.modifies(t)}});function R_(e){U.call(this,null,e)}R_.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};re(R_,U,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=EJ(a,i,o,e.filter||$i)):n.mod=a,n.source=this.value,n.modifies(r)}});function EJ(e,t,n,r){for(var i=[],o={},s=e.length,a=0,l,u;a<s;++a)for(o[t]=u=e[a],l=0;l<s;++l)o[n]=e[l],r(o)&&(i.push(Et(o)),o={},o[t]=u);return i}const UD={kde:x_,mixture:I5,normal:b_,lognormal:P5,uniform:j5},SJ="distributions",HD="function",OJ="field";function K5(e,t){const n=e[HD];Ae(UD,n)||Y("Unknown distribution function: "+n);const r=UD[n]();for(const i in e)i===OJ?r.data((e.from||t()).map(e[i])):i===SJ?r[i](e[i].map(o=>K5(o,t))):typeof r[i]===HD&&r[i](e[i]);return r}function P_(e){U.call(this,null,e)}const J5=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],_J={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:J5},{name:"weights",type:"number",array:!0}]};P_.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:J5.concat(_J)},{name:"as",type:"string",array:!0,default:["value","density"]}]};re(P_,U,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=K5(e.distribution,AJ(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&Y("Invalid density method: "+s),!e.extent&&!r.data&&Y("Missing density extent parameter."),s=r[s];const a=e.as||["value","density"],l=e.extent||is(r.data()),u=R1(s,l,i,o).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Et(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function AJ(e){return()=>e.materialize(e.SOURCE).source}function Z5(e,t){return e?e.map((n,r)=>t[r]||on(n)):null}function I_(e,t,n){const r=[],i=f=>f(l);let o,s,a,l,u,c;if(t==null)r.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)l=e[s],u=t.map(i),c=o[u],c||(o[u]=c=[],c.dims=u,r.push(c)),c.push(n(l));return r}const Q5="bin";function j_(e){U.call(this,null,e)}j_.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:Q5}]};const CJ=(e,t)=>xp(is(e,t))/30;re(j_,U,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=I_(t.source,e.groupby,ar),i=e.smooth||!1,o=e.field,s=e.step||CJ(n,o),a=Ac((g,p)=>o(g)-o(p)),l=e.as||Q5,u=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<u;++d){const g=r[d].sort(a);h=-1;for(const p of N5(g,s,i,o))p<c&&(c=p),p>f&&(f=p),g[++h][l]=p}return this.value={start:c,stop:f,step:s},t.reflow(!0).modifies(l)}});function eL(e){$t.call(this,null,TJ,e),this.modified(!0)}re(eL,$t);function TJ(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Kr(n=>t(n,e),nr(t),on(t))}function L_(e){U.call(this,[void 0,void 0],e)}L_.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};re(L_,U,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],s=n[1];if((i||o==null)&&(o=1/0,s=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const l=Zn(r(a));l!=null&&(l<o&&(o=l),l>s&&(s=l))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=on(r);a&&(a=' for field "'.concat(a,'"')),t.dataflow.warn("Infinite extent".concat(a,": [").concat(o,", ").concat(s,"]")),o=s=void 0}this.value=[o,s]}});function z_(e,t){$t.call(this,e),this.parent=t,this.count=0}re(z_,$t,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function P1(e){U.call(this,{},e),this._keys=Od();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}re(P1,U,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=Ae(i,e)&&i[e],s,a;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=r||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new z_(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,s=e.modified("key"),a=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=Te(l),c=o.get(u);c!==void 0&&(o.delete(u),a(c).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);o.set(Te(l),u),a(u).add(l)}),s||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=Te(l),c=o.get(u),f=r(l);c===f?a(f).mod(l):(o.set(u,f),a(c).rem(l),a(f).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(o.get(Te(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const u=Te(l),c=o.get(u),f=r(l);c!==f&&(o.set(u,f),a(c).rem(l),a(f).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function tL(e){$t.call(this,null,kJ,e)}re(tL,$t);function kJ(e){return this.value&&!e.modified()?this.value:X(e.name)?pe(e.name).map(t=>Hr(t)):Hr(e.name,e.as)}function B_(e){U.call(this,Od(),e)}B_.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};re(B_,U,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,s=i.rem,a=i.mod,l=e.expr;let u=!0;t.visit(t.REM,f=>{const d=Te(f);r.has(d)?r.delete(d):s.push(f)}),t.visit(t.ADD,f=>{l(f,e)?o.push(f):r.set(Te(f),1)});function c(f){const d=Te(f),h=l(f,e),g=r.get(d);h&&g?(r.delete(d),o.push(f)):!h&&!g?(r.set(d,1),s.push(f)):u&&h&&!g&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function U_(e){U.call(this,[],e)}U_.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};re(U_,U,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=Z5(r,e.as||[]),o=e.index||null,s=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=r.map(g=>g(a)),u=l.reduce((g,p)=>Math.max(g,p.length),0);let c=0,f,d,h;for(;c<u;++c){for(d=d_(a),f=0;f<s;++f)d[i[f]]=(h=l[f][c])==null?null:h;o&&(d[o]=c),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function H_(e){U.call(this,[],e)}H_.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};re(H_,U,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(on),o=e.as||["key","value"],s=o[0],a=o[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let c=0,f;c<l;++c)f=d_(u),f[s]=i[c],f[a]=r[c](u),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function W_(e){U.call(this,null,e)}W_.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};re(W_,U,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,s=>s[r]=n(s,e))}});function nL(e){U.call(this,[],e)}re(nL,U,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,s,a,l;if(o>0){for(s=[];--o>=0;)s.push(l=Et(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-o);return n.source=this.value=i,n}});const km={value:"value",median:xj,mean:gX,min:Pw,max:ju},FJ=[];function G_(e){U.call(this,[],e)}G_.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function DJ(e){var t=e.method||km.value,n;if(km[t]==null)Y("Unrecognized imputation method: "+t);else return t===km.value?(n=e.value!==void 0?e.value:0,()=>n):km[t]}function MJ(e){const t=e.field;return n=>n?t(n):NaN}re(G_,U,{transform(e,t){var n=t.fork(t.ALL),r=DJ(e),i=MJ(e),o=on(e.field),s=on(e.key),a=(e.groupby||[]).map(on),l=$J(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,f=l.domain.length,d,h,g,p,m,y,v,b,x,w;for(m=0,b=l.length;m<b;++m)for(d=l[m],g=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(p=l.domain[v],w={_impute:!0},y=0,x=g.length;y<x;++y)w[a[y]]=g[y];w[s]=p,w[o]=Number.isNaN(h)?h=r(d,i):h,u.push(Et(w))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}});function $J(e,t,n,r){var i=y=>y(m),o=[],s=r?r.slice():[],a={},l={},u,c,f,d,h,g,p,m;for(s.forEach((y,v)=>a[y]=v+1),d=0,p=e.length;d<p;++d)m=e[d],g=n(m),h=a[g]||(a[g]=s.push(g)),c=(u=t?t.map(i):FJ)+"",(f=l[c])||(f=l[c]=[],o.push(f),f.values=u),f[h-1]=m;return o.domain=s,o}function V_(e){ml.call(this,e)}V_.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:_p},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};re(V_,ml,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{Je(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Y_(e){U.call(this,null,e)}Y_.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};re(Y_,U,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=I_(r,e.groupby,e.field),o=(e.groupby||[]).map(on),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Y("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=is(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const g=x_(h,s)[a],p=e.counts?h.length:1,m=c||is(h);R1(g,m,f,d).forEach(y=>{const v={};for(let b=0;b<o.length;++b)v[o[b]]=h.dims[b];v[l[0]]=y[0],v[l[1]]=y[1]*p,u.push(Et(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function rL(e){$t.call(this,null,NJ,e)}re(rL,$t);function NJ(e){return this.value&&!e.modified()?this.value:HO(e.fields,e.flat)}function iL(e){U.call(this,[],e),this._pending=null}re(iL,U,{transform(e,t){const n=t.dataflow;return this._pending?Ix(this,t,this._pending):RJ(e)?t.StopPropagation:e.values?Ix(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=pe(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>Ix(this,t,pe(r.data)))}});function RJ(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function Ix(e,t,n){n.forEach(Et);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function X_(e){U.call(this,{},e)}X_.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};re(X_,U,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,s=e.modified(),a=n.length;let l=s?t.SOURCE:t.ADD,u=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Y('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Y('The "as" parameter has too few output field names.'),c=c||i.map(on),f=function(g){for(var p=0,m=0,y,v;p<a;++p)if(v=r.get(n[p](g)),v==null)for(y=0;y<d;++y,++m)g[c[m]]=o;else for(y=0;y<d;++y,++m)g[c[m]]=i[y](v)}):(c||Y("Missing output field names."),f=function(g){for(var p=0,m;p<a;++p)m=r.get(n[p](g)),g[c[p]]=m==null?o:m}),s?u=t.reflow(!0):(h=n.some(g=>t.modified(g.fields)),l|=h?t.MOD:0),t.visit(l,f),u.modifies(c)}});function oL(e){$t.call(this,null,PJ,e)}re(oL,$t);function PJ(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,s;for(o=0;o<n;++o)s=t[o],s[0]<r&&(r=s[0]),s[1]>i&&(i=s[1]);return[r,i]}function sL(e){$t.call(this,null,IJ,e)}re(sL,$t);function IJ(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function aL(e){U.call(this,null,e)}re(aL,U,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function q_(e){ml.call(this,e)}q_.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:_p,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};re(q_,ml,{_transform:ml.prototype.transform,transform(e,t){return this._transform(jJ(e,t),t)}});function jJ(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=nr(n).concat(nr(r)),s=zJ(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>i),fields:s.map(a=>LJ(a,n,r,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}function LJ(e,t,n,r){return Kr(i=>t(i)===e?n(i):NaN,r,e+"")}function zJ(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const s=e(o);r[s]||(r[s]=1,i.push(s))}),i.sort(E1),t?i.slice(0,t):i}function lL(e){P1.call(this,e)}re(lL,P1,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(Te(o),n,t,o);return(e.modified("field")||r&&t.modified(nr(r)))&&Y("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const s=i(o);r(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=i(o);r(o).forEach(a=>s.add(Et(a)))}),t.visit(t.REM,o=>{const s=i(o);r(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function K_(e){U.call(this,null,e)}K_.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};re(K_,U,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=Z5(e.fields,e.as||[]),o=r?(a,l)=>BJ(a,l,r,i):T1;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const l=Te(a);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,a=>{const l=o(a,Et({}));s[Te(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[Te(a)]))}),n}});function BJ(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function uL(e){U.call(this,null,e)}re(uL,U,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function J_(e){U.call(this,null,e)}J_.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const UJ=1e-14;re(J_,U,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=I_(i,e.groupby,e.field),s=(e.groupby||[]).map(on),a=[],l=e.step||.01,u=e.probs||ui(l/2,1-UJ,l),c=u.length;return o.forEach(f=>{const d=p_(f,u);for(let h=0;h<c;++h){const g={};for(let p=0;p<s.length;++p)g[s[p]]=f.dims[p];g[r[0]]=u[h],g[r[1]]=d[h],a.push(Et(g))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function cL(e){U.call(this,null,e)}re(cL,U,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=Te(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=d_(i);r[Te(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[Te(i)];for(const s in i)o[s]=i[s],n.modifies(s);n.mod.push(o)})),n}});function Z_(e){U.call(this,[],e),this.count=0}Z_.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};re(Z_,U,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((c,f)=>(c[Te(f)]=1,c),{});let s=this.value,a=this.count,l=0;function u(c){let f,d;s.length<i?s.push(c):(d=~~((a+1)*Ri()),d<s.length&&d>=l&&(f=s[d],o[Te(f)]&&n.rem.push(f),s[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Te(c);o[f]&&(o[f]=-1,n.rem.push(c)),--a}),s=s.filter(c=>o[Te(c)]!==-1)),(t.rem.length||r)&&s.length<i&&t.source&&(l=a=s.length,t.visit(t.SOURCE,c=>{o[Te(c)]||u(c)}),l=-1),r&&s.length>i){const c=s.length-i;for(let f=0;f<c;++f)o[Te(s[f])]=-1,n.rem.push(s[f]);s=s.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[Te(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=s.filter(c=>!o[Te(c)])),this.count=a,this.value=n.source=s,n}});function Q_(e){U.call(this,null,e)}Q_.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};re(Q_,U,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=ui(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,Et(o)}),n.add=t.add.concat(this.value),n}});function fL(e){U.call(this,null,e),this.modified(!0)}re(fL,U,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function eA(e){U.call(this,null,e)}const dL=["unit0","unit1"];eA.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:r_,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:dL}]};re(eA,U,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),s=(i?Td:Cd)(o.unit).offset,a=e.as||dL,l=a[0],u=a[1],c=o.step;let f=o.start||1/0,d=o.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(nr(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,g=>{const p=n(g);let m,y;p==null?(g[l]=null,r&&(g[u]=null)):(g[l]=m=y=o(p),r&&(g[u]=y=s(m,c)),m<f&&(f=m),y>d&&(d=y))}),o.start=f,o.stop=d,t.modifies(r?a:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:n5({extent:e.extent||is(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=i_(r),s=this.value||{},a=(n?Yj:Vj)(o,i);return a.unit=lt(o),a.units=o,a.step=i,a.start=s.start,a.stop=s.stop,this.value=a}});function hL(e){U.call(this,Od(),e)}re(hL,U,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=a=>i.set(r(a),a);let s=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function gL(e){U.call(this,null,e)}re(gL,U,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Ac(e.sort)):t.source).map(e.field))}});function HJ(e,t,n,r){const i=jg[e](t,n);return{init:i.init||Ma,update:function(o,s){s[r]=i.next(o)}}}const jg={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=jg.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Y("ntile num must be greater than zero.");const n=jg.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Y("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=WJ(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function WJ(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const GJ=Object.keys(jg);function pL(e){const t=pe(e.ops),n=pe(e.fields),r=pe(e.params),i=pe(e.as),o=this.outputs=[],s=this.windows=[],a={},l={},u=[],c=[];let f=!0;function d(h){pe(nr(h)).forEach(g=>a[g]=1)}d(e.sort),t.forEach((h,g)=>{const p=n[g],m=on(p),y=W5(h,m,i[g]);if(d(p),o.push(y),Ae(jg,h))s.push(HJ(h,n[g],r[g],y));else{if(p==null&&h!=="count"&&Y("Null aggregate field specified."),h==="count"){u.push(y);return}f=!1;let v=l[m];v||(v=l[m]=[],v.field=p,c.push(v)),v.push(G5(h,y))}}),(u.length||c.length)&&(this.cell=VJ(c,u,f)),this.inputs=Object.keys(a)}const mL=pL.prototype;mL.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};mL.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(i[s]);for(s=e.p1;s<e.i1;++s)n.add(i[s]);n.set(t)}for(s=0;s<o;++s)r[s].update(e,t)};function VJ(e,t,n){e=e.map(l=>Y5(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),s=0;s<i;++s)o[s]=new e[s](r);if(r.store)var a=r.data=new D_;return r.add=function(l){if(r.num+=1,!n){a&&a.add(l);for(let u=0;u<i;++u)o[u].add(o[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){a&&a.rem(l);for(let u=0;u<i;++u)o[u].rem(o[u].get(l),l)}},r.set=function(l){let u,c;for(a&&a.values(),u=0,c=t.length;u<c;++u)l[t[u]]=r.num;if(!n)for(u=0,c=o.length;u<c;++u)o[u].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<i;++l)o[l].init()},r}function tA(e){U.call(this,{},e),this._mlen=0,this._mods=[]}tA.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:GJ.concat(_p)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};re(tA,U,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Ac(e.sort),i=Yw(e.groupby),o=a=>this.group(i(a));let s=this.state;(!s||n)&&(s=this.state=new pL(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)YJ(this._mods[a],s,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=X5(Te),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function YJ(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,s=r.frame||[null,0],a=e.data(n),l=a.length,u=o?wp(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||lr(-1)};t.init();for(let f=0;f<l;++f)XJ(c,s,f,l),o&&qJ(c,u),t.update(c,a[f])}function XJ(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function qJ(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,s=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<s&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}const KJ=Object.freeze(Object.defineProperty({__proto__:null,aggregate:ml,bin:M_,collect:$_,compare:q5,countpattern:N_,cross:R_,density:P_,dotbin:j_,expression:eL,extent:L_,facet:P1,field:tL,filter:B_,flatten:U_,fold:H_,formula:W_,generate:nL,impute:G_,joinaggregate:V_,kde:Y_,key:rL,load:iL,lookup:X_,multiextent:oL,multivalues:sL,params:aL,pivot:q_,prefacet:lL,project:K_,proxy:uL,quantile:J_,relay:cL,sample:Z_,sequence:Q_,sieve:fL,subflow:z_,timeunit:eA,tupleindex:hL,values:gL,window:tA},Symbol.toStringTag,{value:"Module"})),Xw=Math.PI,qw=2*Xw,hu=1e-6,JJ=qw-hu;function Kw(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Nl(){return new Kw}Kw.prototype=Nl.prototype={constructor:Kw,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,s=this._y1,a=n-e,l=r-t,u=o-e,c=s-t,f=u*u+c*c;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>hu)if(!(Math.abs(c*a-l*u)>hu)||!i)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var d=n-o,h=r-s,g=a*a+l*l,p=d*d+h*h,m=Math.sqrt(g),y=Math.sqrt(f),v=i*Math.tan((Xw-Math.acos((g+f-p)/(2*m*y)))/2),b=v/y,x=v/m;Math.abs(b-1)>hu&&(this._+="L"+(e+b*u)+","+(t+b*c)),this._+="A"+i+","+i+",0,0,"+ +(c*d>u*h)+","+(this._x1=e+x*a)+","+(this._y1=t+x*l)}},arc:function(e,t,n,r,i,o){e=+e,t=+t,n=+n,o=!!o;var s=n*Math.cos(r),a=n*Math.sin(r),l=e+s,u=t+a,c=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+u:(Math.abs(this._x1-l)>hu||Math.abs(this._y1-u)>hu)&&(this._+="L"+l+","+u),n&&(f<0&&(f=f%qw+qw),f>JJ?this._+="A"+n+","+n+",0,1,"+c+","+(e-s)+","+(t-a)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):f>hu&&(this._+="A"+n+","+n+",0,"+ +(f>=Xw)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function St(e){return function(){return e}}const WD=Math.abs,Un=Math.atan2,Zl=Math.cos,ZJ=Math.max,jx=Math.min,Fo=Math.sin,Cu=Math.sqrt,Gn=1e-12,Hf=Math.PI,Ey=Hf/2,yL=2*Hf;function QJ(e){return e>1?0:e<-1?Hf:Math.acos(e)}function GD(e){return e>=1?Ey:e<=-1?-Ey:Math.asin(e)}function eZ(e){return e.innerRadius}function tZ(e){return e.outerRadius}function nZ(e){return e.startAngle}function rZ(e){return e.endAngle}function iZ(e){return e&&e.padAngle}function oZ(e,t,n,r,i,o,s,a){var l=n-e,u=r-t,c=s-i,f=a-o,d=f*l-c*u;if(!(d*d<Gn))return d=(c*(t-o)-f*(e-i))/d,[e+d*l,t+d*u]}function Fm(e,t,n,r,i,o,s){var a=e-n,l=t-r,u=(s?o:-o)/Cu(a*a+l*l),c=u*l,f=-u*a,d=e+c,h=t+f,g=n+c,p=r+f,m=(d+g)/2,y=(h+p)/2,v=g-d,b=p-h,x=v*v+b*b,w=i-o,S=d*p-g*h,E=(b<0?-1:1)*Cu(ZJ(0,w*w*x-S*S)),O=(S*b-v*E)/x,A=(-S*v-b*E)/x,C=(S*b+v*E)/x,_=(-S*v+b*E)/x,T=O-m,k=A-y,D=C-m,M=_-y;return T*T+k*k>D*D+M*M&&(O=C,A=_),{cx:O,cy:A,x01:-c,y01:-f,x11:O*(i/w-1),y11:A*(i/w-1)}}function sZ(){var e=eZ,t=tZ,n=St(0),r=null,i=nZ,o=rZ,s=iZ,a=null;function l(){var u,c,f=+e.apply(this,arguments),d=+t.apply(this,arguments),h=i.apply(this,arguments)-Ey,g=o.apply(this,arguments)-Ey,p=WD(g-h),m=g>h;if(a||(a=u=Nl()),d<f&&(c=d,d=f,f=c),!(d>Gn))a.moveTo(0,0);else if(p>yL-Gn)a.moveTo(d*Zl(h),d*Fo(h)),a.arc(0,0,d,h,g,!m),f>Gn&&(a.moveTo(f*Zl(g),f*Fo(g)),a.arc(0,0,f,g,h,m));else{var y=h,v=g,b=h,x=g,w=p,S=p,E=s.apply(this,arguments)/2,O=E>Gn&&(r?+r.apply(this,arguments):Cu(f*f+d*d)),A=jx(WD(d-f)/2,+n.apply(this,arguments)),C=A,_=A,T,k;if(O>Gn){var D=GD(O/f*Fo(E)),M=GD(O/d*Fo(E));(w-=D*2)>Gn?(D*=m?1:-1,b+=D,x-=D):(w=0,b=x=(h+g)/2),(S-=M*2)>Gn?(M*=m?1:-1,y+=M,v-=M):(S=0,y=v=(h+g)/2)}var $=d*Zl(y),N=d*Fo(y),P=f*Zl(x),H=f*Fo(x);if(A>Gn){var ie=d*Zl(v),ge=d*Fo(v),be=f*Zl(b),Fe=f*Fo(b),Be;if(p<Hf&&(Be=oZ($,N,be,Fe,ie,ge,P,H))){var De=$-Be[0],Ie=N-Be[1],Qe=ie-Be[0],yt=ge-Be[1],Q=1/Fo(QJ((De*Qe+Ie*yt)/(Cu(De*De+Ie*Ie)*Cu(Qe*Qe+yt*yt)))/2),Oe=Cu(Be[0]*Be[0]+Be[1]*Be[1]);C=jx(A,(f-Oe)/(Q-1)),_=jx(A,(d-Oe)/(Q+1))}}S>Gn?_>Gn?(T=Fm(be,Fe,$,N,d,_,m),k=Fm(ie,ge,P,H,d,_,m),a.moveTo(T.cx+T.x01,T.cy+T.y01),_<A?a.arc(T.cx,T.cy,_,Un(T.y01,T.x01),Un(k.y01,k.x01),!m):(a.arc(T.cx,T.cy,_,Un(T.y01,T.x01),Un(T.y11,T.x11),!m),a.arc(0,0,d,Un(T.cy+T.y11,T.cx+T.x11),Un(k.cy+k.y11,k.cx+k.x11),!m),a.arc(k.cx,k.cy,_,Un(k.y11,k.x11),Un(k.y01,k.x01),!m))):(a.moveTo($,N),a.arc(0,0,d,y,v,!m)):a.moveTo($,N),!(f>Gn)||!(w>Gn)?a.lineTo(P,H):C>Gn?(T=Fm(P,H,ie,ge,f,-C,m),k=Fm($,N,be,Fe,f,-C,m),a.lineTo(T.cx+T.x01,T.cy+T.y01),C<A?a.arc(T.cx,T.cy,C,Un(T.y01,T.x01),Un(k.y01,k.x01),!m):(a.arc(T.cx,T.cy,C,Un(T.y01,T.x01),Un(T.y11,T.x11),!m),a.arc(0,0,f,Un(T.cy+T.y11,T.cx+T.x11),Un(k.cy+k.y11,k.cx+k.x11),m),a.arc(k.cx,k.cy,C,Un(k.y11,k.x11),Un(k.y01,k.x01),!m))):a.arc(0,0,f,x,b,m)}if(a.closePath(),u)return a=null,u+""||null}return l.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,c=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Hf/2;return[Zl(c)*u,Fo(c)*u]},l.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:St(+u),l):e},l.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:St(+u),l):t},l.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:St(+u),l):n},l.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:St(+u),l):r},l.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:St(+u),l):i},l.endAngle=function(u){return arguments.length?(o=typeof u=="function"?u:St(+u),l):o},l.padAngle=function(u){return arguments.length?(s=typeof u=="function"?u:St(+u),l):s},l.context=function(u){return arguments.length?(a=u==null?null:u,l):a},l}function vL(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bL(e){this._context=e}bL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function nA(e){return new bL(e)}function xL(e){return e[0]}function wL(e){return e[1]}function EL(e,t){var n=St(!0),r=null,i=nA,o=null;e=typeof e=="function"?e:e===void 0?xL:St(e),t=typeof t=="function"?t:t===void 0?wL:St(t);function s(a){var l,u=(a=vL(a)).length,c,f=!1,d;for(r==null&&(o=i(d=Nl())),l=0;l<=u;++l)!(l<u&&n(c=a[l],l,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(c,l,a),+t(c,l,a));if(d)return o=null,d+""||null}return s.x=function(a){return arguments.length?(e=typeof a=="function"?a:St(+a),s):e},s.y=function(a){return arguments.length?(t=typeof a=="function"?a:St(+a),s):t},s.defined=function(a){return arguments.length?(n=typeof a=="function"?a:St(!!a),s):n},s.curve=function(a){return arguments.length?(i=a,r!=null&&(o=i(r)),s):i},s.context=function(a){return arguments.length?(a==null?r=o=null:o=i(r=a),s):r},s}function SL(e,t,n){var r=null,i=St(!0),o=null,s=nA,a=null;e=typeof e=="function"?e:e===void 0?xL:St(+e),t=typeof t=="function"?t:St(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?wL:St(+n);function l(c){var f,d,h,g=(c=vL(c)).length,p,m=!1,y,v=new Array(g),b=new Array(g);for(o==null&&(a=s(y=Nl())),f=0;f<=g;++f){if(!(f<g&&i(p=c[f],f,c))===m)if(m=!m)d=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=f-1;h>=d;--h)a.point(v[h],b[h]);a.lineEnd(),a.areaEnd()}m&&(v[f]=+e(p,f,c),b[f]=+t(p,f,c),a.point(r?+r(p,f,c):v[f],n?+n(p,f,c):b[f]))}if(y)return a=null,y+""||null}function u(){return EL().defined(i).curve(s).context(o)}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:St(+c),r=null,l):e},l.x0=function(c){return arguments.length?(e=typeof c=="function"?c:St(+c),l):e},l.x1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:St(+c),l):r},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:St(+c),n=null,l):t},l.y0=function(c){return arguments.length?(t=typeof c=="function"?c:St(+c),l):t},l.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:St(+c),l):n},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(n)},l.lineX1=function(){return u().x(r).y(t)},l.defined=function(c){return arguments.length?(i=typeof c=="function"?c:St(!!c),l):i},l.curve=function(c){return arguments.length?(s=c,o!=null&&(a=s(o)),l):s},l.context=function(c){return arguments.length?(c==null?o=a=null:a=s(o=c),l):o},l}const aZ={draw(e,t){const n=Cu(t/Hf);e.moveTo(n,0),e.arc(0,0,n,0,yL)}};function lZ(e,t){let n=null;e=typeof e=="function"?e:St(e||aZ),t=typeof t=="function"?t:St(t===void 0?64:+t);function r(){let i;if(n||(n=i=Nl()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return r.type=function(i){return arguments.length?(e=typeof i=="function"?i:St(i),r):e},r.size=function(i){return arguments.length?(t=typeof i=="function"?i:St(+i),r):t},r.context=function(i){return arguments.length?(n=i==null?null:i,r):n},r}function yl(){}function Sy(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function I1(e){this._context=e}I1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Sy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Sy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function uZ(e){return new I1(e)}function OL(e){this._context=e}OL.prototype={areaStart:yl,areaEnd:yl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Sy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cZ(e){return new OL(e)}function _L(e){this._context=e}_L.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Sy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function fZ(e){return new _L(e)}function AL(e,t){this._basis=new I1(e),this._beta=t}AL.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,s=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*o),this._beta*t[a]+(1-this._beta)*(i+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const dZ=function e(t){function n(r){return t===1?new I1(r):new AL(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function Oy(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function rA(e,t){this._context=e,this._k=(1-t)/6}rA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Oy(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Oy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const hZ=function e(t){function n(r){return new rA(r,t)}return n.tension=function(r){return e(+r)},n}(0);function iA(e,t){this._context=e,this._k=(1-t)/6}iA.prototype={areaStart:yl,areaEnd:yl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Oy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const gZ=function e(t){function n(r){return new iA(r,t)}return n.tension=function(r){return e(+r)},n}(0);function oA(e,t){this._context=e,this._k=(1-t)/6}oA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Oy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const pZ=function e(t){function n(r){return new oA(r,t)}return n.tension=function(r){return e(+r)},n}(0);function sA(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>Gn){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Gn){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/c,s=(s*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function CL(e,t){this._context=e,this._alpha=t}CL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:sA(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const mZ=function e(t){function n(r){return t?new CL(r,t):new rA(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function TL(e,t){this._context=e,this._alpha=t}TL.prototype={areaStart:yl,areaEnd:yl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:sA(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const yZ=function e(t){function n(r){return t?new TL(r,t):new iA(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function kL(e,t){this._context=e,this._alpha=t}kL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:sA(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const vZ=function e(t){function n(r){return t?new kL(r,t):new oA(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function FL(e){this._context=e}FL.prototype={areaStart:yl,areaEnd:yl,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function bZ(e){return new FL(e)}function VD(e){return e<0?-1:1}function YD(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(VD(o)+VD(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function XD(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Lx(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function _y(e){this._context=e}_y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Lx(this,this._t0,XD(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Lx(this,XD(this,n=YD(this,e,t)),n);break;default:Lx(this,this._t0,n=YD(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function DL(e){this._context=new ML(e)}(DL.prototype=Object.create(_y.prototype)).point=function(e,t){_y.prototype.point.call(this,t,e)};function ML(e){this._context=e}ML.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function xZ(e){return new _y(e)}function wZ(e){return new DL(e)}function $L(e){this._context=e}$L.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=qD(e),i=qD(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function qD(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function EZ(e){return new $L(e)}function j1(e,t){this._context=e,this._t=t}j1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function SZ(e){return new j1(e,.5)}function OZ(e){return new j1(e,0)}function _Z(e){return new j1(e,1)}function el(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const AZ=()=>typeof Image<"u"?Image:null;function gs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Rl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Jw=Symbol("implicit");function aA(){var e=new dD,t=[],n=[],r=Jw;function i(o){let s=e.get(o);if(s===void 0){if(r!==Jw)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new dD;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return aA(t,n).unknown(r)},gs.apply(i,arguments),i}function Fd(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ap(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Pl(){}var Qu=.7,Wf=1/Qu,Sf="\\s*([+-]?\\d+)\\s*",Lg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ko="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",CZ=/^#([0-9a-f]{3,8})$/,TZ=new RegExp(`^rgb\\(${Sf},${Sf},${Sf}\\)$`),kZ=new RegExp(`^rgb\\(${Ko},${Ko},${Ko}\\)$`),FZ=new RegExp(`^rgba\\(${Sf},${Sf},${Sf},${Lg}\\)$`),DZ=new RegExp(`^rgba\\(${Ko},${Ko},${Ko},${Lg}\\)$`),MZ=new RegExp(`^hsl\\(${Lg},${Ko},${Ko}\\)$`),$Z=new RegExp(`^hsla\\(${Lg},${Ko},${Ko},${Lg}\\)$`),KD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fd(Pl,zg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:JD,formatHex:JD,formatHex8:NZ,formatHsl:RZ,formatRgb:ZD,toString:ZD});function JD(){return this.rgb().formatHex()}function NZ(){return this.rgb().formatHex8()}function RZ(){return NL(this).formatHsl()}function ZD(){return this.rgb().formatRgb()}function zg(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=CZ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?QD(t):n===3?new _n(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Dm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Dm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=TZ.exec(e))?new _n(t[1],t[2],t[3],1):(t=kZ.exec(e))?new _n(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=FZ.exec(e))?Dm(t[1],t[2],t[3],t[4]):(t=DZ.exec(e))?Dm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=MZ.exec(e))?nM(t[1],t[2]/100,t[3]/100,1):(t=$Z.exec(e))?nM(t[1],t[2]/100,t[3]/100,t[4]):KD.hasOwnProperty(e)?QD(KD[e]):e==="transparent"?new _n(NaN,NaN,NaN,0):null}function QD(e){return new _n(e>>16&255,e>>8&255,e&255,1)}function Dm(e,t,n,r){return r<=0&&(e=t=n=NaN),new _n(e,t,n,r)}function lA(e){return e instanceof Pl||(e=zg(e)),e?(e=e.rgb(),new _n(e.r,e.g,e.b,e.opacity)):new _n}function vl(e,t,n,r){return arguments.length===1?lA(e):new _n(e,t,n,r==null?1:r)}function _n(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Fd(_n,vl,Ap(Pl,{brighter(e){return e=e==null?Wf:Math.pow(Wf,e),new _n(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Qu:Math.pow(Qu,e),new _n(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new _n(Lu(this.r),Lu(this.g),Lu(this.b),Ay(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eM,formatHex:eM,formatHex8:PZ,formatRgb:tM,toString:tM}));function eM(){return`#${Tu(this.r)}${Tu(this.g)}${Tu(this.b)}`}function PZ(){return`#${Tu(this.r)}${Tu(this.g)}${Tu(this.b)}${Tu((isNaN(this.opacity)?1:this.opacity)*255)}`}function tM(){const e=Ay(this.opacity);return`${e===1?"rgb(":"rgba("}${Lu(this.r)}, ${Lu(this.g)}, ${Lu(this.b)}${e===1?")":`, ${e})`}`}function Ay(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Lu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Tu(e){return e=Lu(e),(e<16?"0":"")+e.toString(16)}function nM(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ro(e,t,n,r)}function NL(e){if(e instanceof ro)return new ro(e.h,e.s,e.l,e.opacity);if(e instanceof Pl||(e=zg(e)),!e)return new ro;if(e instanceof ro)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new ro(s,a,l,e.opacity)}function Cy(e,t,n,r){return arguments.length===1?NL(e):new ro(e,t,n,r==null?1:r)}function ro(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Fd(ro,Cy,Ap(Pl,{brighter(e){return e=e==null?Wf:Math.pow(Wf,e),new ro(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Qu:Math.pow(Qu,e),new ro(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new _n(zx(e>=240?e-240:e+120,i,r),zx(e,i,r),zx(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ro(rM(this.h),Mm(this.s),Mm(this.l),Ay(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ay(this.opacity);return`${e===1?"hsl(":"hsla("}${rM(this.h)}, ${Mm(this.s)*100}%, ${Mm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function rM(e){return e=(e||0)%360,e<0?e+360:e}function Mm(e){return Math.max(0,Math.min(1,e||0))}function zx(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const RL=Math.PI/180,PL=180/Math.PI,Ty=18,IL=.96422,jL=1,LL=.82521,zL=4/29,Of=6/29,BL=3*Of*Of,IZ=Of*Of*Of;function UL(e){if(e instanceof Jo)return new Jo(e.l,e.a,e.b,e.opacity);if(e instanceof Us)return HL(e);e instanceof _n||(e=lA(e));var t=Wx(e.r),n=Wx(e.g),r=Wx(e.b),i=Bx((.2225045*t+.7168786*n+.0606169*r)/jL),o,s;return t===n&&n===r?o=s=i:(o=Bx((.4360747*t+.3850649*n+.1430804*r)/IL),s=Bx((.0139322*t+.0971045*n+.7141733*r)/LL)),new Jo(116*i-16,500*(o-i),200*(i-s),e.opacity)}function ky(e,t,n,r){return arguments.length===1?UL(e):new Jo(e,t,n,r==null?1:r)}function Jo(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Fd(Jo,ky,Ap(Pl,{brighter(e){return new Jo(this.l+Ty*(e==null?1:e),this.a,this.b,this.opacity)},darker(e){return new Jo(this.l-Ty*(e==null?1:e),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=IL*Ux(t),e=jL*Ux(e),n=LL*Ux(n),new _n(Hx(3.1338561*t-1.6168667*e-.4906146*n),Hx(-.9787684*t+1.9161415*e+.033454*n),Hx(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Bx(e){return e>IZ?Math.pow(e,1/3):e/BL+zL}function Ux(e){return e>Of?e*e*e:BL*(e-zL)}function Hx(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Wx(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function jZ(e){if(e instanceof Us)return new Us(e.h,e.c,e.l,e.opacity);if(e instanceof Jo||(e=UL(e)),e.a===0&&e.b===0)return new Us(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*PL;return new Us(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Fy(e,t,n,r){return arguments.length===1?jZ(e):new Us(e,t,n,r==null?1:r)}function Us(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function HL(e){if(isNaN(e.h))return new Jo(e.l,0,0,e.opacity);var t=e.h*RL;return new Jo(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Fd(Us,Fy,Ap(Pl,{brighter(e){return new Us(this.h,this.c,this.l+Ty*(e==null?1:e),this.opacity)},darker(e){return new Us(this.h,this.c,this.l-Ty*(e==null?1:e),this.opacity)},rgb(){return HL(this).rgb()}}));var WL=-.14861,uA=1.78277,cA=-.29227,L1=-.90649,Bg=1.97294,iM=Bg*L1,oM=Bg*uA,sM=uA*cA-L1*WL;function LZ(e){if(e instanceof zu)return new zu(e.h,e.s,e.l,e.opacity);e instanceof _n||(e=lA(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(sM*r+iM*t-oM*n)/(sM+iM-oM),o=r-i,s=(Bg*(n-i)-cA*o)/L1,a=Math.sqrt(s*s+o*o)/(Bg*i*(1-i)),l=a?Math.atan2(s,o)*PL-120:NaN;return new zu(l<0?l+360:l,a,i,e.opacity)}function Zw(e,t,n,r){return arguments.length===1?LZ(e):new zu(e,t,n,r==null?1:r)}function zu(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Fd(zu,Zw,Ap(Pl,{brighter(e){return e=e==null?Wf:Math.pow(Wf,e),new zu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Qu:Math.pow(Qu,e),new zu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*RL,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new _n(255*(t+n*(WL*r+uA*i)),255*(t+n*(cA*r+L1*i)),255*(t+n*(Bg*r)),this.opacity)}}));function GL(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}function VL(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return GL((n-r/t)*t,s,i,o,a)}}function YL(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return GL((n-r/t)*t,i,o,s,a)}}const z1=e=>()=>e;function XL(e,t){return function(n){return e+n*t}}function zZ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function B1(e,t){var n=t-e;return n?XL(e,n>180||n<-180?n-360*Math.round(n/360):n):z1(isNaN(e)?t:e)}function BZ(e){return(e=+e)==1?An:function(t,n){return n-t?zZ(t,n,e):z1(isNaN(t)?n:t)}}function An(e,t){var n=t-e;return n?XL(e,n):z1(isNaN(e)?t:e)}const Qw=function e(t){var n=BZ(t);function r(i,o){var s=n((i=vl(i)).r,(o=vl(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=An(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function qL(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=vl(t[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=e(r),i=e(i),o=e(o),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=o(l),a+""}}}var UZ=qL(VL),HZ=qL(YL);function fA(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function KL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function WZ(e,t){return(KL(t)?fA:JL)(e,t)}function JL(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Il(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function ZL(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function eo(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function QL(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Il(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var eE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gx=new RegExp(eE.source,"g");function GZ(e){return function(){return e}}function VZ(e){return function(t){return e(t)+""}}function e6(e,t){var n=eE.lastIndex=Gx.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=eE.exec(e))&&(i=Gx.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:eo(r,i)})),n=Gx.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?VZ(l[0].x):GZ(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)a[(f=l[c]).i]=f.x(u);return a.join("")})}function Il(e,t){var n=typeof t,r;return t==null||n==="boolean"?z1(t):(n==="number"?eo:n==="string"?(r=zg(t))?(t=r,Qw):e6:t instanceof zg?Qw:t instanceof Date?ZL:KL(t)?fA:Array.isArray(t)?JL:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?QL:eo)(e,t)}function YZ(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function XZ(e,t){var n=B1(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function Cp(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var aM=180/Math.PI,tE={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function t6(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*aM,skewX:Math.atan(l)*aM,scaleX:s,scaleY:a}}var $m;function qZ(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?tE:t6(t.a,t.b,t.c,t.d,t.e,t.f)}function KZ(e){return e==null||($m||($m=document.createElementNS("http://www.w3.org/2000/svg","g")),$m.setAttribute("transform",e),!(e=$m.transform.baseVal.consolidate()))?tE:(e=e.matrix,t6(e.a,e.b,e.c,e.d,e.e,e.f))}function n6(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,f,d,h,g){if(u!==f||c!==d){var p=h.push("translate(",null,t,null,n);g.push({i:p-4,x:eo(u,f)},{i:p-2,x:eo(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function s(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:eo(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(u,c,f,d){u!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:eo(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,d,h,g){if(u!==f||c!==d){var p=h.push(i(h)+"scale(",null,",",null,")");g.push({i:p-4,x:eo(u,f)},{i:p-2,x:eo(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,f,d),s(u.rotate,c.rotate,f,d),a(u.skewX,c.skewX,f,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(h){for(var g=-1,p=d.length,m;++g<p;)f[(m=d[g]).i]=m.x(h);return f.join("")}}}var JZ=n6(qZ,"px, ","px)","deg)"),ZZ=n6(KZ,", ",")",")"),QZ=1e-12;function lM(e){return((e=Math.exp(e))+1/e)/2}function eQ(e){return((e=Math.exp(e))-1/e)/2}function tQ(e){return((e=Math.exp(2*e))-1)/(e+1)}const nQ=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],u=o[2],c=s[0],f=s[1],d=s[2],h=c-a,g=f-l,p=h*h+g*g,m,y;if(p<QZ)y=Math.log(d/u)/t,m=function(E){return[a+E*h,l+E*g,u*Math.exp(t*E*y)]};else{var v=Math.sqrt(p),b=(d*d-u*u+r*p)/(2*u*n*v),x=(d*d-u*u-r*p)/(2*d*n*v),w=Math.log(Math.sqrt(b*b+1)-b),S=Math.log(Math.sqrt(x*x+1)-x);y=(S-w)/t,m=function(E){var O=E*y,A=lM(w),C=u/(n*v)*(A*tQ(t*O+w)-eQ(w));return[a+C*h,l+C*g,u*A/lM(t*O+w)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);function r6(e){return function(t,n){var r=e((t=Cy(t)).h,(n=Cy(n)).h),i=An(t.s,n.s),o=An(t.l,n.l),s=An(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const rQ=r6(B1);var iQ=r6(An);function oQ(e,t){var n=An((e=ky(e)).l,(t=ky(t)).l),r=An(e.a,t.a),i=An(e.b,t.b),o=An(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function i6(e){return function(t,n){var r=e((t=Fy(t)).h,(n=Fy(n)).h),i=An(t.c,n.c),o=An(t.l,n.l),s=An(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const sQ=i6(B1);var aQ=i6(An);function o6(e){return function t(n){n=+n;function r(i,o){var s=e((i=Zw(i)).h,(o=Zw(o)).h),a=An(i.s,o.s),l=An(i.l,o.l),u=An(i.opacity,o.opacity);return function(c){return i.h=s(c),i.s=a(c),i.l=l(Math.pow(c,n)),i.opacity=u(c),i+""}}return r.gamma=t,r}(1)}const lQ=o6(B1);var uQ=o6(An);function dA(e,t){t===void 0&&(t=e,e=Il);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function cQ(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const fQ=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Il,interpolateArray:WZ,interpolateBasis:VL,interpolateBasisClosed:YL,interpolateDate:ZL,interpolateDiscrete:YZ,interpolateHue:XZ,interpolateNumber:eo,interpolateNumberArray:fA,interpolateObject:QL,interpolateRound:Cp,interpolateString:e6,interpolateTransformCss:JZ,interpolateTransformSvg:ZZ,interpolateZoom:nQ,interpolateRgb:Qw,interpolateRgbBasis:UZ,interpolateRgbBasisClosed:HZ,interpolateHsl:rQ,interpolateHslLong:iQ,interpolateLab:oQ,interpolateHcl:sQ,interpolateHclLong:aQ,interpolateCubehelix:lQ,interpolateCubehelixLong:uQ,piecewise:dA,quantize:cQ},Symbol.toStringTag,{value:"Module"}));function dQ(e){return function(){return e}}function nE(e){return+e}var uM=[0,1];function Lr(e){return e}function rE(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:dQ(isNaN(t)?NaN:.5)}function hQ(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function gQ(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=rE(i,r),o=n(s,o)):(r=rE(r,i),o=n(o,s)),function(a){return o(r(a))}}function pQ(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=rE(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var l=Ep(e,a,1,r)-1;return o[l](i[l](a))}}function Tp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function U1(){var e=uM,t=uM,n=Il,r,i,o,s=Lr,a,l,u;function c(){var d=Math.min(e.length,t.length);return s!==Lr&&(s=hQ(e[0],e[d-1])),a=d>2?pQ:gQ,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?o:(l||(l=a(e.map(r),t,n)))(r(s(d)))}return f.invert=function(d){return s(i((u||(u=a(t,e.map(r),eo)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,nE),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=Cp,c()},f.clamp=function(d){return arguments.length?(s=d?!0:Lr,c()):s!==Lr},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,h){return r=d,i=h,c()}}function s6(){return U1()(Lr,Lr)}function a6(e,t,n,r){var i=hl(e,t,n),o;switch(r=Ju(r==null?",f":r),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=Aj(i,s))&&(r.precision=o),XO(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Cj(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=_j(i))&&(r.precision=o-(r.type==="%")*2);break}}return S1(r)}function Tc(e){var t=e.domain;return e.ticks=function(n){var r=t();return Rw(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return a6(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],l,u,c=10;for(a<s&&(u=s,s=a,a=u,u=i,i=o,o=u);c-- >0;){if(u=yj(s,a,n),u===l)return r[i]=s,r[o]=a,t(r);if(u>0)s=Math.floor(s/u)*u,a=Math.ceil(a/u)*u;else if(u<0)s=Math.ceil(s*u)/u,a=Math.floor(a*u)/u;else break;l=u}return e},e}function l6(){var e=s6();return e.copy=function(){return Tp(e,l6())},gs.apply(e,arguments),Tc(e)}function u6(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,nE),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return u6(e).unknown(t)},e=arguments.length?Array.from(e,nE):[0,1],Tc(n)}function c6(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}function cM(e){return Math.log(e)}function fM(e){return Math.exp(e)}function mQ(e){return-Math.log(-e)}function yQ(e){return-Math.exp(-e)}function vQ(e){return isFinite(e)?+("1e"+e):e<0?0:e}function bQ(e){return e===10?vQ:e===Math.E?Math.exp:t=>Math.pow(e,t)}function xQ(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function dM(e){return(t,n)=>-e(-t,n)}function hA(e){const t=e(cM,fM),n=t.domain;let r=10,i,o;function s(){return i=xQ(r),o=bQ(r),n()[0]<0?(i=dM(i),o=dM(o),e(mQ,yQ)):e(cM,fM),t}return t.base=function(a){return arguments.length?(r=+a,s()):r},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const f=c<u;f&&([u,c]=[c,u]);let d=i(u),h=i(c),g,p;const m=a==null?10:+a;let y=[];if(!(r%1)&&h-d<m){if(d=Math.floor(d),h=Math.ceil(h),u>0){for(;d<=h;++d)for(g=1;g<r;++g)if(p=d<0?g/o(-d):g*o(d),!(p<u)){if(p>c)break;y.push(p)}}else for(;d<=h;++d)for(g=r-1;g>=1;--g)if(p=d>0?g/o(-d):g*o(d),!(p<u)){if(p>c)break;y.push(p)}y.length*2<m&&(y=Rw(u,c,m))}else y=Rw(d,h,Math.min(h-d,m)).map(o);return f?y.reverse():y},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Ju(l)).precision==null&&(l.trim=!0),l=S1(l)),a===1/0)return l;const u=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/o(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=u?l(c):""}},t.nice=()=>n(c6(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function f6(){const e=hA(U1()).domain([1,10]);return e.copy=()=>Tp(e,f6()).base(e.base()),gs.apply(e,arguments),e}function hM(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function gM(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function gA(e){var t=1,n=e(hM(t),gM(t));return n.constant=function(r){return arguments.length?e(hM(t=+r),gM(t)):t},Tc(n)}function d6(){var e=gA(U1());return e.copy=function(){return Tp(e,d6()).constant(e.constant())},gs.apply(e,arguments)}function pM(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function wQ(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function EQ(e){return e<0?-e*e:e*e}function pA(e){var t=e(Lr,Lr),n=1;function r(){return n===1?e(Lr,Lr):n===.5?e(wQ,EQ):e(pM(n),pM(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Tc(t)}function mA(){var e=pA(U1());return e.copy=function(){return Tp(e,mA()).exponent(e.exponent())},gs.apply(e,arguments),e}function SQ(){return mA.apply(null,arguments).exponent(.5)}function h6(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=bj(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[Ep(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Gs),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return h6().domain(e).range(t).unknown(r)},gs.apply(o,arguments)}function g6(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function s(l){return l!=null&&l<=l?i[Ep(r,l,0,n)]:o}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return g6().domain([e,t]).range(i).unknown(o)},gs.apply(Tc(s),arguments)}function p6(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[Ep(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return p6().domain(e).range(t).unknown(n)},gs.apply(i,arguments)}function OQ(e){return new Date(e)}function _Q(e){return e instanceof Date?+e:+new Date(+e)}function yA(e,t,n,r,i,o,s,a,l,u){var c=s6(),f=c.invert,d=c.domain,h=u(".%L"),g=u(":%S"),p=u("%I:%M"),m=u("%I %p"),y=u("%a %d"),v=u("%b %d"),b=u("%B"),x=u("%Y");function w(S){return(l(S)<S?h:a(S)<S?g:s(S)<S?p:o(S)<S?m:r(S)<S?i(S)<S?y:v:n(S)<S?b:x)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?d(Array.from(S,_Q)):d().map(OQ)},c.ticks=function(S){var E=d();return e(E[0],E[E.length-1],S==null?10:S)},c.tickFormat=function(S,E){return E==null?w:u(E)},c.nice=function(S){var E=d();return(!S||typeof S.range!="function")&&(S=t(E[0],E[E.length-1],S==null?10:S)),S?d(c6(E,S)):c},c.copy=function(){return Tp(c,yA(e,t,n,r,i,o,s,a,l,u))},c}function AQ(){return gs.apply(yA($X,NX,gl,yy,_d,Ja,ZO,JO,Pa,s_).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function CQ(){return gs.apply(yA(DX,MX,pl,by,Ad,Za,t_,e_,Pa,a_).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function H1(){var e=0,t=1,n,r,i,o,s=Lr,a=!1,l;function u(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(o(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(f){return arguments.length?(a=!!f,u):a},u.interpolator=function(f){return arguments.length?(s=f,u):s};function c(f){return function(d){var h,g;return arguments.length?([h,g]=d,s=f(h,g),u):[s(0),s(1)]}}return u.range=c(Il),u.rangeRound=c(Cp),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),u}}function jl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function vA(){var e=Tc(H1()(Lr));return e.copy=function(){return jl(e,vA())},Rl.apply(e,arguments)}function m6(){var e=hA(H1()).domain([1,10]);return e.copy=function(){return jl(e,m6()).base(e.base())},Rl.apply(e,arguments)}function y6(){var e=gA(H1());return e.copy=function(){return jl(e,y6()).constant(e.constant())},Rl.apply(e,arguments)}function bA(){var e=pA(H1());return e.copy=function(){return jl(e,bA()).exponent(e.exponent())},Rl.apply(e,arguments)}function TQ(){return bA.apply(null,arguments).exponent(.5)}function W1(){var e=0,t=.5,n=1,r=1,i,o,s,a,l,u=Lr,c,f=!1,d;function h(p){return isNaN(p=+p)?d:(p=.5+((p=+c(p))-o)*(r*p<r*o?a:l),u(f?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([e,t,n]=p,i=c(e=+e),o=c(t=+t),s=c(n=+n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,h):[e,t,n]},h.clamp=function(p){return arguments.length?(f=!!p,h):f},h.interpolator=function(p){return arguments.length?(u=p,h):u};function g(p){return function(m){var y,v,b;return arguments.length?([y,v,b]=m,u=dA(p,[y,v,b]),h):[u(0),u(.5),u(1)]}}return h.range=g(Il),h.rangeRound=g(Cp),h.unknown=function(p){return arguments.length?(d=p,h):d},function(p){return c=p,i=p(e),o=p(t),s=p(n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,h}}function v6(){var e=Tc(W1()(Lr));return e.copy=function(){return jl(e,v6())},Rl.apply(e,arguments)}function b6(){var e=hA(W1()).domain([.1,1,10]);return e.copy=function(){return jl(e,b6()).base(e.base())},Rl.apply(e,arguments)}function x6(){var e=gA(W1());return e.copy=function(){return jl(e,x6()).constant(e.constant())},Rl.apply(e,arguments)}function xA(){var e=pA(W1());return e.copy=function(){return jl(e,xA()).exponent(e.exponent())},Rl.apply(e,arguments)}function kQ(){return xA.apply(null,arguments).exponent(.5)}function wA(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const FQ="identity",Gf="linear",Qs="log",kp="pow",Fp="sqrt",G1="symlog",ec="time",tc="utc",Zo="sequential",Dd="diverging",Vf="quantile",V1="quantize",Y1="threshold",EA="ordinal",iE="point",w6="band",SA="bin-ordinal",xn="continuous",Dp="discrete",Mp="discretizing",Bi="interpolating",OA="temporal";function DQ(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function MQ(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,s,a,l,u;for(i<r&&(a=r,r=i,i=a),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(o<0&&(o=l),s=l);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[s]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function _A(){const e=aA().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,s=!1,a=0,l=0,u=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],g=wA(f,a,l);let p=r[d-0];i=(h-p)/(g||1),s&&(i=Math.floor(i)),p+=(h-p-i*(f-a))*u,o=i*(1-a),s&&(p=Math.round(p),o=Math.round(o));const m=ui(f).map(y=>p+i*y);return n(d?m.reverse():m)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],s=!0,c()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(s=!!f,c()):s},e.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),a=l,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),g=h.length-1;let p=+f[0],m=+f[1],y,v,b;if(!(p!==p||m!==m)&&(m<p&&(b=p,p=m,m=b),!(m<h[0]||p>r[1-d])))return y=Math.max(0,dy(h,p)-1),v=p===m?y:dy(h,m)-1,p-h[y]>o+1e-10&&++y,d&&(b=y,y=g-v,v=g-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return _A().domain(t()).range(r).round(s).paddingInner(a).paddingOuter(l).align(u)},c()}function E6(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return E6(t())},e}function $Q(){return E6(_A().paddingInner(1))}var NQ=Array.prototype.map;function RQ(e){return NQ.call(e,Zn)}const PQ=Array.prototype.slice;function S6(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Ep(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=RQ(r),n):e.slice()},n.range=function(r){return arguments.length?(t=PQ.call(r),n):t.slice()},n.tickFormat=function(r,i){return a6(e[0],lt(e),r==null?10:r,i)},n.copy=function(){return S6().domain(n.domain()).range(n.range())},n}const Dy={};function IQ(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?DQ(o):o.invertExtent?MQ(o):void 0),o.type=e,o};return r.metadata=xo(pe(n)),r}function xt(e,t,n){return arguments.length>1?(Dy[e]=IQ(e,t,n),this):O6(e)?Dy[e]:void 0}xt(FQ,u6);xt(Gf,l6,xn);xt(Qs,f6,[xn,Qs]);xt(kp,mA,xn);xt(Fp,SQ,xn);xt(G1,d6,xn);xt(ec,AQ,[xn,OA]);xt(tc,CQ,[xn,OA]);xt(Zo,vA,[xn,Bi]);xt("".concat(Zo,"-").concat(Gf),vA,[xn,Bi]);xt("".concat(Zo,"-").concat(Qs),m6,[xn,Bi,Qs]);xt("".concat(Zo,"-").concat(kp),bA,[xn,Bi]);xt("".concat(Zo,"-").concat(Fp),TQ,[xn,Bi]);xt("".concat(Zo,"-").concat(G1),y6,[xn,Bi]);xt("".concat(Dd,"-").concat(Gf),v6,[xn,Bi]);xt("".concat(Dd,"-").concat(Qs),b6,[xn,Bi,Qs]);xt("".concat(Dd,"-").concat(kp),xA,[xn,Bi]);xt("".concat(Dd,"-").concat(Fp),kQ,[xn,Bi]);xt("".concat(Dd,"-").concat(G1),x6,[xn,Bi]);xt(Vf,h6,[Mp,Vf]);xt(V1,g6,Mp);xt(Y1,p6,Mp);xt(SA,S6,[Dp,Mp]);xt(EA,aA,Dp);xt(w6,_A,Dp);xt(iE,$Q,Dp);function O6(e){return Ae(Dy,e)}function kc(e,t){const n=Dy[e];return n&&n.metadata[t]}function AA(e){return kc(e,xn)}function Yf(e){return kc(e,Dp)}function oE(e){return kc(e,Mp)}function _6(e){return kc(e,Qs)}function jQ(e){return kc(e,OA)}function A6(e){return kc(e,Bi)}function C6(e){return kc(e,Vf)}const LQ=["clamp","base","constant","exponent"];function T6(e,t){const n=t[0],r=lt(t)-n;return function(i){return e(n+i*r)}}function X1(e,t,n){return dA(CA(t||"rgb",n),e)}function k6(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function F6(e,t,n){const r=n-t;let i,o,s;return!r||!Number.isFinite(r)?lr(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),s=xt(o)().domain([t,n]).range([0,1]),LQ.forEach(a=>e[a]?s[a](e[a]()):0),s)}function CA(e,t){const n=fQ[zQ(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function zQ(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const BQ={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},UQ={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function D6(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function M6(e,t){for(const n in e)TA(n,t(e[n]))}const mM={};M6(UQ,D6);M6(BQ,e=>X1(D6(e)));function TA(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(mM[e]=t,this):mM[e]}const C0="symbol",HQ="discrete",WQ="gradient",GQ=e=>X(e)?e.map(t=>String(t)):String(e),VQ=(e,t)=>e[1]-t[1],YQ=(e,t)=>t[1]-e[1];function kA(e,t,n){let r;return kt(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(xp(e.domain())/n||1)))),me(t)&&(r=t.step,t=t.interval),de(t)&&(t=e.type===ec?Cd(t):e.type==tc?Td(t):Y("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function $6(e,t,n){let r=e.range(),i=r[0],o=lt(r),s=VQ;if(i>o&&(r=o,o=i,i=r,s=YQ),i=Math.floor(i),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],lt(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function FA(e,t){return e.bins?$6(e,e.bins):e.ticks?e.ticks(t):e.domain()}function N6(e,t,n,r,i,o){const s=t.type;let a=GQ;if(s===ec||i===ec)a=e.timeFormat(r);else if(s===tc||i===tc)a=e.utcFormat(r);else if(_6(s)){const l=e.formatFloat(r);if(o||t.bins)a=l;else{const u=R6(t,n,!1);a=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(a=e.format(r));return a}function R6(e,t,n){const r=FA(e,t),i=e.base(),o=Math.log(i),s=Math.max(1,i*t/r.length),a=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/o));return u*i<i-.5&&(u*=i),u<=s};return n?r.filter(a):a}const sE={[Vf]:"quantiles",[V1]:"thresholds",[Y1]:"domain"},P6={[Vf]:"quantiles",[V1]:"domain"};function I6(e,t){return e.bins?KQ(e.bins):e.type===Qs?R6(e,t,!0):sE[e.type]?qQ(e[sE[e.type]]()):FA(e,t)}function XQ(e,t,n){const r=t[P6[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],s;for(s=1;s<i;++s)o=Math.min(o,r[s]-r[s-1]);return e.formatSpan(0,o,3*10,n)}function qQ(e){const t=[-1/0].concat(e);return t.max=1/0,t}function KQ(e){const t=e.slice(0,-1);return t.max=lt(e),t}const JQ=e=>sE[e.type]||e.bins;function j6(e,t,n,r,i,o,s){const a=P6[t.type]&&o!==ec&&o!==tc?XQ(e,t,i):N6(e,t,n,i,o,s);return r===C0&&JQ(t)?ZQ(a):r===HQ?QQ(a):eee(a)}const ZQ=e=>(t,n,r)=>{const i=yM(r[n+1],yM(r.max,1/0)),o=vM(t,e),s=vM(i,e);return o&&s?o+" \u2013 "+s:s?"< "+s:"\u2265 "+o},yM=(e,t)=>e!=null?e:t,QQ=e=>(t,n)=>n?e(t):null,eee=e=>t=>e(t),vM=(e,t)=>Number.isFinite(e)?t(e):null;function tee(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+lt(t),o=i-r;if(e.type===Y1){const s=n?o/n:.1;r-=s,i+=s,o=i-r}return s=>(s-r)/o}function nee(e,t,n,r){const i=r||t.type;return de(n)&&jQ(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===ec?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===tc?e.utcFormat("%A, %d %B %Y, %X UTC"):j6(e,t,5,null,n,r,!0)}function L6(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=nee(e,t,n.format,n.formatType);if(oE(t.type)){const o=I6(t).slice(1).map(i),s=o.length;return"".concat(s," boundar").concat(s===1?"y":"ies",": ").concat(o.join(", "))}else if(Yf(t.type)){const o=t.domain(),s=o.length,a=s>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return"".concat(s," value").concat(s===1?"":"s",": ").concat(a)}else{const o=t.domain();return"values from ".concat(i(o[0])," to ").concat(i(lt(o)))}}let z6=0;function ree(){z6=0}const My="p_";function DA(e){return e&&e.gradient}function B6(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?My:"";return i||(i=e.id="gradient_"+z6++,r==="radial"?(e.x1=Do(e.x1,.5),e.y1=Do(e.y1,.5),e.r1=Do(e.r1,0),e.x2=Do(e.x2,.5),e.y2=Do(e.y2,.5),e.r2=Do(e.r2,.5),o=My):(e.x1=Do(e.x1,0),e.y1=Do(e.y1,0),e.x2=Do(e.x2,1),e.y2=Do(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function Do(e,t){return e!=null?e:t}function U6(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const bM={basis:{curve:uZ},"basis-closed":{curve:cZ},"basis-open":{curve:fZ},bundle:{curve:dZ,tension:"beta",value:.85},cardinal:{curve:hZ,tension:"tension",value:0},"cardinal-open":{curve:pZ,tension:"tension",value:0},"cardinal-closed":{curve:gZ,tension:"tension",value:0},"catmull-rom":{curve:mZ,tension:"alpha",value:.5},"catmull-rom-closed":{curve:yZ,tension:"alpha",value:.5},"catmull-rom-open":{curve:vZ,tension:"alpha",value:.5},linear:{curve:nA},"linear-closed":{curve:bZ},monotone:{horizontal:wZ,vertical:xZ},natural:{curve:EZ},step:{curve:SZ},"step-after":{curve:_Z},"step-before":{curve:OZ}};function MA(e,t,n){var r=Ae(bM,e)&&bM[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const iee={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},oee=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,see=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,aee=/^((\s+,?\s*)|(,\s*))/,lee=/^[01]/;function Xf(e){const t=[];return(e.match(oee)||[]).forEach(r=>{let i=r[0];const o=i.toLowerCase(),s=iee[o],a=uee(o,s,r.slice(1).trim()),l=a.length;if(l<s||l&&l%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,s)]),l!==s){o==="m"&&(i=i==="M"?"L":"l");for(let u=s;u<l;u+=s)t.push([i,...a.slice(u,u+s)])}}),t}function uee(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const s=e==="a"&&(o===3||o===4)?lee:see,a=n.slice(i).match(s);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(aee);l!==null&&(i+=l[0].length)}return r}const bl=Math.PI/180,cee=1e-14,bu=Math.PI/2,zo=Math.PI*2,Uc=Math.sqrt(3)/2;var Vx={},Yx={},H6=[].join;function fee(e,t,n,r,i,o,s,a,l){const u=H6.call(arguments);if(Vx[u])return Vx[u];const c=s*bl,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(l-t)*.5,g=d*(l-t)*.5-f*(a-e)*.5;let p=h*h/(n*n)+g*g/(r*r);p>1&&(p=Math.sqrt(p),n*=p,r*=p);const m=d/n,y=f/n,v=-f/r,b=d/r,x=m*a+y*l,w=v*a+b*l,S=m*e+y*t,E=v*e+b*t,O=(S-x)*(S-x)+(E-w)*(E-w);let A=1/O-.25;A<0&&(A=0);let C=Math.sqrt(A);o==i&&(C=-C);const _=.5*(x+S)-C*(E-w),T=.5*(w+E)+C*(S-x),k=Math.atan2(w-T,x-_);let M=Math.atan2(E-T,S-_)-k;M<0&&o===1?M+=zo:M>0&&o===0&&(M-=zo);const $=Math.ceil(Math.abs(M/(bu+.001))),N=[];for(let P=0;P<$;++P){const H=k+P*M/$,ie=k+(P+1)*M/$;N[P]=[_,T,H,ie,n,r,f,d]}return Vx[u]=N}function dee(e){const t=H6.call(e);if(Yx[t])return Yx[t];var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7];const c=u*s,f=-l*a,d=l*s,h=u*a,g=Math.cos(i),p=Math.sin(i),m=Math.cos(o),y=Math.sin(o),v=.5*(o-i),b=Math.sin(v*.5),x=8/3*b*b/Math.sin(v),w=n+g-x*p,S=r+p+x*g,E=n+m,O=r+y,A=E+x*y,C=O-x*m;return Yx[t]=[c*w+f*S,d*w+h*S,c*A+f*C,d*A+h*C,c*E+f*O,d*E+h*O]}const wi=["l",0,0,0,0,0,0,0];function hee(e,t,n){const r=wi[0]=e[0];if(r==="a"||r==="A")wi[1]=t*e[1],wi[2]=n*e[2],wi[3]=e[3],wi[4]=e[4],wi[5]=e[5],wi[6]=t*e[6],wi[7]=n*e[7];else if(r==="h"||r==="H")wi[1]=t*e[1];else if(r==="v"||r==="V")wi[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)wi[i]=(i%2==1?t:n)*e[i];return wi}function Ug(e,t,n,r,i,o){var s,a=null,l=0,u=0,c=0,f=0,d,h,g,p,m=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(s=t[v],(i!==1||o!==1)&&(s=hee(s,i,o)),s[0]){case"l":l+=s[1],u+=s[2],e.lineTo(l+n,u+r);break;case"L":l=s[1],u=s[2],e.lineTo(l+n,u+r);break;case"h":l+=s[1],e.lineTo(l+n,u+r);break;case"H":l=s[1],e.lineTo(l+n,u+r);break;case"v":u+=s[1],e.lineTo(l+n,u+r);break;case"V":u=s[1],e.lineTo(l+n,u+r);break;case"m":l+=s[1],u+=s[2],m=l,y=u,e.moveTo(l+n,u+r);break;case"M":l=s[1],u=s[2],m=l,y=u,e.moveTo(l+n,u+r);break;case"c":d=l+s[5],h=u+s[6],c=l+s[3],f=u+s[4],e.bezierCurveTo(l+s[1]+n,u+s[2]+r,c+n,f+r,d+n,h+r),l=d,u=h;break;case"C":l=s[5],u=s[6],c=s[3],f=s[4],e.bezierCurveTo(s[1]+n,s[2]+r,c+n,f+r,l+n,u+r);break;case"s":d=l+s[3],h=u+s[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,l+s[1]+n,u+s[2]+r,d+n,h+r),c=l+s[1],f=u+s[2],l=d,u=h;break;case"S":d=s[3],h=s[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,s[1]+n,s[2]+r,d+n,h+r),l=d,u=h,c=s[1],f=s[2];break;case"q":d=l+s[3],h=u+s[4],c=l+s[1],f=u+s[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"Q":d=s[3],h=s[4],e.quadraticCurveTo(s[1]+n,s[2]+r,d+n,h+r),l=d,u=h,c=s[1],f=s[2];break;case"t":d=l+s[1],h=u+s[2],a[0].match(/[QqTt]/)===null?(c=l,f=u):a[0]==="t"?(c=2*l-g,f=2*u-p):a[0]==="q"&&(c=2*l-c,f=2*u-f),g=c,p=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h,c=l+s[1],f=u+s[2];break;case"T":d=s[1],h=s[2],c=2*l-c,f=2*u-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"a":xM(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+u+r]),l+=s[6],u+=s[7];break;case"A":xM(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),l=s[6],u=s[7];break;case"z":case"Z":l=m,u=y,e.closePath();break}a=s}}function xM(e,t,n,r){const i=fee(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const s=dee(i[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const wM=.5773502691896257,EM={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,zo)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Uc*n,i=r-n*wM,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Uc*n,i=r-n*wM;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Uc*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Uc*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Uc*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Uc*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function W6(e){return Ae(EM,e)?EM[e]:gee(e)}var Xx={};function gee(e){if(!Ae(Xx,e)){const t=Xf(e);Xx[e]={draw:function(n,r){Ug(n,t,0,0,Math.sqrt(r)/2)}}}return Xx[e]}const va=.448084975506;function pee(e){return e.x}function mee(e){return e.y}function yee(e){return e.width}function vee(e){return e.height}function As(e){return typeof e=="function"?e:()=>+e}function Nm(e,t,n){return Math.max(t,Math.min(e,n))}function G6(){var e=pee,t=mee,n=yee,r=vee,i=As(0),o=i,s=i,a=i,l=null;function u(c,f,d){var h,g=f!=null?f:+e.call(this,c),p=d!=null?d:+t.call(this,c),m=+n.call(this,c),y=+r.call(this,c),v=Math.min(m,y)/2,b=Nm(+i.call(this,c),0,v),x=Nm(+o.call(this,c),0,v),w=Nm(+s.call(this,c),0,v),S=Nm(+a.call(this,c),0,v);if(l||(l=h=Nl()),b<=0&&x<=0&&w<=0&&S<=0)l.rect(g,p,m,y);else{var E=g+m,O=p+y;l.moveTo(g+b,p),l.lineTo(E-x,p),l.bezierCurveTo(E-va*x,p,E,p+va*x,E,p+x),l.lineTo(E,O-S),l.bezierCurveTo(E,O-va*S,E-va*S,O,E-S,O),l.lineTo(g+w,O),l.bezierCurveTo(g+va*w,O,g,O-va*w,g,O-w),l.lineTo(g,p+b),l.bezierCurveTo(g,p+va*b,g+va*b,p,g+b,p),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(c){return arguments.length?(e=As(c),u):e},u.y=function(c){return arguments.length?(t=As(c),u):t},u.width=function(c){return arguments.length?(n=As(c),u):n},u.height=function(c){return arguments.length?(r=As(c),u):r},u.cornerRadius=function(c,f,d,h){return arguments.length?(i=As(c),o=f!=null?As(f):i,a=d!=null?As(d):i,s=h!=null?As(h):o,u):i},u.context=function(c){return arguments.length?(l=c==null?null:c,u):l},u}function V6(){var e,t,n,r,i=null,o,s,a,l;function u(f,d,h){const g=h/2;if(o){var p=a-d,m=f-s;if(p||m){var y=Math.sqrt(p*p+m*m),v=(p/=y)*l,b=(m/=y)*l,x=Math.atan2(m,p);i.moveTo(s-v,a-b),i.lineTo(f-p*g,d-m*g),i.arc(f,d,g,x-Math.PI,x),i.lineTo(s+v,a+b),i.arc(s,a,l,x,x+Math.PI)}else i.arc(f,d,g,0,zo);i.closePath()}else o=1;s=f,a=d,l=g}function c(f){var d,h=f.length,g,p=!1,m;for(i==null&&(i=m=Nl()),d=0;d<=h;++d)!(d<h&&r(g=f[d],d,f))===p&&(p=!p)&&(o=0),p&&u(+e(g,d,f),+t(g,d,f),+n(g,d,f));if(m)return i=null,m+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function $p(e,t){return e!=null?e:t}const Np=e=>e.x||0,Rp=e=>e.y||0,bee=e=>e.width||0,xee=e=>e.height||0,wee=e=>(e.x||0)+(e.width||0),Eee=e=>(e.y||0)+(e.height||0),See=e=>e.startAngle||0,Oee=e=>e.endAngle||0,_ee=e=>e.padAngle||0,Aee=e=>e.innerRadius||0,Cee=e=>e.outerRadius||0,Tee=e=>e.cornerRadius||0,kee=e=>$p(e.cornerRadiusTopLeft,e.cornerRadius)||0,Fee=e=>$p(e.cornerRadiusTopRight,e.cornerRadius)||0,Dee=e=>$p(e.cornerRadiusBottomRight,e.cornerRadius)||0,Mee=e=>$p(e.cornerRadiusBottomLeft,e.cornerRadius)||0,$ee=e=>$p(e.size,64),Nee=e=>e.size||1,q1=e=>e.defined!==!1,Ree=e=>W6(e.shape||"circle"),Pee=sZ().startAngle(See).endAngle(Oee).padAngle(_ee).innerRadius(Aee).outerRadius(Cee).cornerRadius(Tee),Iee=SL().x(Np).y1(Rp).y0(Eee).defined(q1),jee=SL().y(Rp).x1(Np).x0(wee).defined(q1),Lee=EL().x(Np).y(Rp).defined(q1),zee=G6().x(Np).y(Rp).width(bee).height(xee).cornerRadius(kee,Fee,Dee,Mee),Bee=lZ().type(Ree).size($ee),Uee=V6().x(Np).y(Rp).defined(q1).size(Nee);function $A(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Hee(e,t){return Pee.context(e)(t)}function Wee(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?jee:Iee).curve(MA(r,n.orient,n.tension)).context(e)(t)}function Gee(e,t){const n=t[0],r=n.interpolate||"linear";return Lee.curve(MA(r,n.orient,n.tension)).context(e)(t)}function Md(e,t,n,r){return zee.context(e)(t,n,r)}function Vee(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Yee(e,t){return Bee.context(e)(t)}function Xee(e,t){return Uee.context(e)(t)}var Y6=1;function X6(){Y6=1}function NA(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+Y6++),s=i.clipping[o]||(i.clipping[o]={id:o});return Ze(r)?s.path=r(null):$A(n)?s.path=Md(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function cn(e){this.clear(),e&&this.union(e)}cn.prototype={clone(){return new cn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:s}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,c=n-t*l-n*a;return[a*r-l*i+u,l*r+a*i+c,a*r-l*s+u,l*r+a*s+c,a*o-l*i+u,l*o+a*i+c,a*o-l*s+u,l*o+a*s+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function K1(e){this.mark=e,this.bounds=this.bounds||new cn}function J1(e){K1.call(this,e),this.items=this.items||[]}re(J1,K1);function RA(e){this._pending=0,this._loader=e||_1()}function SM(e){e._pending+=1}function ih(e){e._pending-=1}RA.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return SM(t),t._loader.sanitize(e,{context:"href"}).then(n=>(ih(t),n)).catch(()=>(ih(t),null))},loadImage(e){const t=this,n=AZ();return SM(t),t._loader.sanitize(e,{context:"image"}).then(r=>{const i=r.href;if(!i||!n)throw{url:i};const o=new n,s=Ae(r,"crossOrigin")?r.crossOrigin:"anonymous";return s!=null&&(o.crossOrigin=s),o.onload=()=>ih(t),o.onerror=()=>ih(t),o.src=i,o}).catch(r=>(ih(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){const e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function ia(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?qee(t,r):0))}return e}function qee(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Kee=zo-1e-8;let Z1,T0,k0,ku,aE,F0,lE,uE;const Ia=(e,t)=>Z1.add(e,t),D0=(e,t)=>Ia(T0=e,k0=t),OM=e=>Ia(e,Z1.y1),_M=e=>Ia(Z1.x1,e),xu=(e,t)=>aE*e+lE*t,wu=(e,t)=>F0*e+uE*t,qx=(e,t)=>Ia(xu(e,t),wu(e,t)),Kx=(e,t)=>D0(xu(e,t),wu(e,t));function Pp(e,t){return Z1=e,t?(ku=t*bl,aE=uE=Math.cos(ku),F0=Math.sin(ku),lE=-F0):(aE=uE=1,ku=F0=lE=0),Jee}const Jee={beginPath(){},closePath(){},moveTo:Kx,lineTo:Kx,rect(e,t,n,r){ku?(qx(e+n,t),qx(e+n,t+r),qx(e,t+r),Kx(e,t)):(Ia(e+n,t+r),D0(e,t))},quadraticCurveTo(e,t,n,r){const i=xu(e,t),o=wu(e,t),s=xu(n,r),a=wu(n,r);AM(T0,i,s,OM),AM(k0,o,a,_M),D0(s,a)},bezierCurveTo(e,t,n,r,i,o){const s=xu(e,t),a=wu(e,t),l=xu(n,r),u=wu(n,r),c=xu(i,o),f=wu(i,o);CM(T0,s,l,c,OM),CM(k0,a,u,f,_M),D0(c,f)},arc(e,t,n,r,i,o){if(r+=ku,i+=ku,T0=n*Math.cos(i)+e,k0=n*Math.sin(i)+t,Math.abs(i-r)>Kee)Ia(e-n,t-n),Ia(e+n,t+n);else{const s=u=>Ia(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(s(r),s(i),i!==r)if(r=r%zo,r<0&&(r+=zo),i=i%zo,i<0&&(i+=zo),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=zo,a=r-r%bu,l=0;l<4&&a>i;++l,a-=bu)s(a);else for(a=r-r%bu+bu,l=0;l<4&&a<i;++l,a=a+bu)s(a)}}};function AM(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function CM(e,t,n,r,i){const o=r-e+3*t-3*n,s=e+n-2*t,a=e-t;let l=0,u=0,c;Math.abs(o)>cee?(c=s*s+a*o,c>=0&&(c=Math.sqrt(c),l=(-s+c)/o,u=(-s-c)/o)):l=.5*a/s,0<l&&l<1&&i(TM(l,e,t,n,r)),0<u&&u<1&&i(TM(u,e,t,n,r))}function TM(e,t,n,r,i){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*r+a*e*i}var tl=(tl=el(1,1))?tl.getContext("2d"):null;const cE=new cn;function PA(e){return function(t,n){if(!tl)return!0;e(tl,t),cE.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:s}=cE;for(let a=i;a<=s;++a)for(let l=r;l<=o;++l)if(tl.isPointInPath(l,a))return!0;return!1}}function IA(e,t){return t.contains(e.x||0,e.y||0)}function q6(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(cE.set(n,r,n+i,r+o))}function K6(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return cf(t,n,r,i,o)}function cf(e,t,n,r,i){const{x1:o,y1:s,x2:a,y2:l}=e,u=r-t,c=i-n;let f=0,d=1,h,g,p,m;for(m=0;m<4;++m){if(m===0&&(h=-u,g=-(o-t)),m===1&&(h=u,g=a-t),m===2&&(h=-c,g=-(s-n)),m===3&&(h=c,g=l-n),Math.abs(h)<1e-10&&g<0)return!1;if(p=g/h,h<0){if(p>d)return!1;p>f&&(f=p)}else if(h>0){if(p<f)return!1;p<d&&(d=p)}}return!0}function qf(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Xi(e,t){return e==null?t:e}function kM(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function Zee(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+Xi(t.x1,.5)*r,n.y1+Xi(t.y1,.5)*i,Math.max(r,i)*Xi(t.r1,0),n.x1+Xi(t.x2,.5)*r,n.y1+Xi(t.y2,.5)*i,Math.max(r,i)*Xi(t.r2,.5));else{const s=Xi(t.x1,0),a=Xi(t.y1,0),l=Xi(t.x2,1),u=Xi(t.y2,0);if(s===l||a===u||r===i)o=e.createLinearGradient(n.x1+s*r,n.y1+a*i,n.x1+l*r,n.y1+u*i);else{const c=el(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=kM(f.createLinearGradient(s,a,l,u),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return kM(o,t.stops)}function J6(e,t,n){return DA(n)?Zee(e,n,t.bounds):n}function $y(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=J6(e,t,t.fill),!0):!1}var Qee=[];function Kf(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=J6(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Qee),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function ete(e,t){return e.zindex-t.zindex||e.index-t.index}function jA(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(ete)}function Eo(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=jA(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function Ny(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=jA(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function LA(e){return function(t,n,r){Eo(n,i=>{(!r||r.intersects(i.bounds))&&Z6(e,t,i,i)})}}function tte(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&Z6(e,t,n.items[0],n.items)}}function Z6(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(qf(t,n),n.fill&&$y(t,n,i)&&t.fill(),n.stroke&&Kf(t,n,i)&&t.stroke()))}function Q1(e){return e=e||$i,function(t,n,r,i,o,s){return r*=t.pixelRatio,i*=t.pixelRatio,Ny(n,a=>{const l=a.bounds;if(!(l&&!l.contains(o,s)||!l)&&e(t,a,r,i,o,s))return a})}}function Ip(e,t){return function(n,r,i,o){var s=Array.isArray(r)?r[0]:r,a=t==null?s.fill:t,l=s.stroke&&n.isPointInStroke,u,c;return l&&(u=s.strokeWidth,c=s.strokeCap,n.lineWidth=u!=null?u:1,n.lineCap=c!=null?c:"butt"),e(n,r)?!1:a&&n.isPointInPath(i,o)||l&&n.isPointInStroke(i,o)}}function zA(e){return Q1(Ip(e))}function Bu(e,t){return"translate("+e+","+t+")"}function BA(e){return"rotate("+e+")"}function nte(e,t){return"scale("+e+","+t+")"}function Q6(e){return Bu(e.x||0,e.y||0)}function rte(e){return Bu(e.x||0,e.y||0)+(e.angle?" "+BA(e.angle):"")}function ite(e){return Bu(e.x||0,e.y||0)+(e.angle?" "+BA(e.angle):"")+(e.scaleX||e.scaleY?" "+nte(e.scaleX||1,e.scaleY||1):"")}function UA(e,t,n){function r(s,a){s("transform",rte(a)),s("d",t(null,a))}function i(s,a){return t(Pp(s,a.angle),a),ia(s,a).translate(a.x||0,a.y||0)}function o(s,a){var l=a.x||0,u=a.y||0,c=a.angle||0;s.translate(l,u),c&&s.rotate(c*=bl),s.beginPath(),t(s,a),c&&s.rotate(-c),s.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:LA(o),pick:zA(o),isect:n||PA(o)}}var ote=UA("arc",Hee);function ste(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,s,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<o&&(o=a,s=e[i]));return s}function ate(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,s;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],s=i*i+o*o,s<n))return e[r];return null}function lte(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function HA(e,t,n){function r(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function i(l,u){var c=u.items;return c.length===0?l:(t(Pp(l),c),ia(l,c[0]))}function o(l,u){l.beginPath(),t(l,u)}const s=Ip(o);function a(l,u,c,f,d,h){var g=u.items,p=u.bounds;return!g||!g.length||p&&!p.contains(d,h)?null:(c*=l.pixelRatio,f*=l.pixelRatio,s(l,g,c,f)?g[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:tte(o),pick:a,isect:IA,tip:n}}var ute=HA("area",Wee,ste);function cte(e,t){var n=t.clip;e.save(),Ze(n)?(e.beginPath(),n(e),e.clip()):e4(e,t.group)}function e4(e,t){e.beginPath(),$A(t)?Md(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function t4(e){const t=Xi(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function fte(e,t){e("transform",Q6(t))}function n4(e,t){const n=t4(t);e("d",Md(null,t,n,n))}function dte(e,t){e("class","background"),e("aria-hidden",!0),n4(e,t)}function hte(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?n4(e,t):e("d","")}function gte(e,t,n){const r=t.clip?NA(n,t,t):null;e("clip-path",r)}function pte(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),ia(e,t),e.translate(t.x||0,t.y||0)}function Hg(e,t,n,r){const i=t4(t);e.beginPath(),Md(e,t,(n||0)+i,(r||0)+i)}const mte=Ip(Hg),yte=Ip(Hg,!1),vte=Ip(Hg,!0);function bte(e,t,n){Eo(t,r=>{const i=r.x||0,o=r.y||0,s=r.strokeForeground,a=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&a&&(Hg(e,r,i,o),qf(e,r),r.fill&&$y(e,r,a)&&e.fill(),r.stroke&&!s&&Kf(e,r,a)&&e.stroke()),e.save(),e.translate(i,o),r.clip&&e4(e,r),n&&n.translate(-i,-o),Eo(r,l=>{this.draw(e,l,n)}),n&&n.translate(i,o),e.restore(),s&&r.stroke&&a&&(Hg(e,r,i,o),qf(e,r),Kf(e,r,a)&&e.stroke())})}function xte(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const s=n*e.pixelRatio,a=r*e.pixelRatio;return Ny(t,l=>{let u,c,f;const d=l.bounds;if(d&&!d.contains(i,o))return;c=l.x||0,f=l.y||0;const h=c+(l.width||0),g=f+(l.height||0),p=l.clip;if(p&&(i<c||i>h||o<f||o>g))return;if(e.save(),e.translate(c,f),c=i-c,f=o-f,p&&$A(l)&&!vte(e,l,s,a))return e.restore(),null;const m=l.strokeForeground,y=t.interactive!==!1;return y&&m&&l.stroke&&yte(e,l,s,a)?(e.restore(),l):(u=Ny(l,v=>wte(v,c,f)?this.pick(v,n,r,c,f):null),!u&&y&&(l.fill||!m&&l.stroke)&&mte(e,l,s,a)&&(u=l),e.restore(),u||null)})}function wte(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Ete={type:"group",tag:"g",nested:!1,attr:fte,bound:pte,draw:bte,pick:xte,isect:q6,content:gte,background:dte,foreground:hte},Wg={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function WA(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function GA(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function VA(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function eb(e,t){return e==="center"?t/2:e==="right"?t:0}function tb(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Ste(e,t,n){const r=WA(t,n),i=GA(t,r),o=VA(t,r),s=(t.x||0)-eb(t.align,i),a=(t.y||0)-tb(t.baseline,o),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,Wg["xmlns:xlink"],"xlink:href"),e("transform",Bu(s,a)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Ote(e,t){const n=t.image,r=GA(t,n),i=VA(t,n),o=(t.x||0)-eb(t.align,r),s=(t.y||0)-tb(t.baseline,i);return e.set(o,s,o+r,s+i)}function _te(e,t,n){Eo(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=WA(r,this);let o=GA(r,i),s=VA(r,i);if(o===0||s===0)return;let a=(r.x||0)-eb(r.align,o),l=(r.y||0)-tb(r.baseline,s),u,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=o/c,l+=(s-d)/2,s=d):(d=s*c,a+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(qf(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,l,o,s))})}var Ate={type:"image",tag:"image",nested:!1,attr:Ste,bound:Ote,draw:_te,pick:Q1(),isect:$i,get:WA,xOffset:eb,yOffset:tb},Cte=HA("line",Gee,ate);function Tte(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",ite(t)),e("d",t.path)}function M0(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*bl,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=Xf(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),Ug(e,l,0,0,o,s),e.rotate(-a),e.translate(-r,-i)):Ug(e,l,r,i,o,s)}function kte(e,t){return M0(Pp(e,t.angle),t)?e.set(0,0,0,0):ia(e,t,!0)}var Fte={type:"path",tag:"path",nested:!1,attr:Tte,bound:kte,draw:LA(M0),pick:zA(M0),isect:PA(M0)};function Dte(e,t){e("d",Md(null,t))}function Mte(e,t){var n,r;return ia(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function FM(e,t){e.beginPath(),Md(e,t)}var $te={type:"rect",tag:"path",nested:!1,attr:Dte,bound:Mte,draw:LA(FM),pick:zA(FM),isect:q6};function Nte(e,t){e("transform",Q6(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Rte(e,t){var n,r;return ia(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function r4(e,t,n){var r,i,o,s;return t.stroke&&Kf(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,s=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,s),!0):!1}function Pte(e,t,n){Eo(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&r4(e,r,i)&&(qf(e,r),e.stroke())}})}function Ite(e,t,n,r){return e.isPointInStroke?r4(e,t,1)&&e.isPointInStroke(n,r):!1}var jte={type:"rule",tag:"line",nested:!1,attr:Nte,bound:Rte,draw:Pte,pick:Q1(Ite),isect:K6},Lte=UA("shape",Vee),zte=UA("symbol",Yee,IA);const DM=oj();var po={height:ps,measureWidth:YA,estimateWidth:fE,width:fE,canvas:i4};i4(!0);function i4(e){po.width=e&&tl?YA:fE}function fE(e,t){return o4(wl(e,t),ps(e))}function o4(e,t){return~~(.8*e.length*t)}function YA(e,t){return ps(e)<=0||!(t=wl(e,t))?0:s4(t,nb(e))}function s4(e,t){const n="(".concat(t,") ").concat(e);let r=DM.get(n);return r===void 0&&(tl.font=t,r=tl.measureText(e).width,DM.set(n,r)),r}function ps(e){return e.fontSize!=null?+e.fontSize||0:11}function xl(e){return e.lineHeight!=null?e.lineHeight:ps(e)+2}function Bte(e){return X(e)?e.length>1?e:e[0]:e}function jp(e){return Bte(e.lineBreak&&e.text&&!X(e.text)?e.text.split(e.lineBreak):e.text)}function XA(e){const t=jp(e);return(X(t)?t.length-1:0)*xl(e)}function wl(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Hte(e,n):n}function Ute(e){if(po.width===YA){const t=nb(e);return n=>s4(n,t)}else{const t=ps(e);return n=>o4(n,t)}}function Hte(e,t){var n=+e.limit,r=Ute(e);if(r(t)<n)return t;var i=e.ellipsis||"\u2026",o=e.dir==="rtl",s=0,a=t.length,l;if(n-=r(i),o){for(;s<a;)l=s+a>>>1,r(t.slice(l))>n?s=l+1:a=l;return i+t.slice(s)}else{for(;s<a;)l=1+(s+a>>>1),r(t.slice(0,l))<n?s=l:a=l-1;return t.slice(0,s)+i}}function Lp(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function nb(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+ps(e)+"px "+Lp(e,t)}function qA(e){var t=e.baseline,n=ps(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*xl(e):t==="line-bottom"?.29*n-.5*xl(e):0)}const Wte={left:"start",center:"middle",right:"end"},ag=new cn;function rb(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-bu,t+=r*Math.cos(i),n+=r*Math.sin(i)),ag.x1=t,ag.y1=n,ag}function Gte(e,t){var n=t.dx||0,r=(t.dy||0)+qA(t),i=rb(t),o=i.x1,s=i.y1,a=t.angle||0,l;e("text-anchor",Wte[t.align]||"start"),a?(l=Bu(o,s)+" "+BA(a),(n||r)&&(l+=" "+Bu(n,r))):l=Bu(o+n,s+r),e("transform",l)}function KA(e,t,n){var r=po.height(t),i=t.align,o=rb(t),s=o.x1,a=o.y1,l=t.dx||0,u=(t.dy||0)+qA(t)-Math.round(.8*r),c=jp(t),f;if(X(c)?(r+=xl(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,po.width(t,h)),0)):f=po.width(t,c),i==="center"?l-=f/2:i==="right"&&(l-=f),e.set(l+=s,u+=a,l+f,u+r),t.angle&&!n)e.rotate(t.angle*bl,s,a);else if(n===2)return e.rotatedPoints(t.angle*bl,s,a);return e}function Vte(e,t,n){Eo(t,r=>{var i=r.opacity==null?1:r.opacity,o,s,a,l,u,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=nb(r),e.textAlign=r.align||"left",o=rb(r),s=o.x1,a=o.y1,r.angle&&(e.save(),e.translate(s,a),e.rotate(r.angle*bl),s=a=0),s+=r.dx||0,a+=(r.dy||0)+qA(r),c=jp(r),qf(e,r),X(c))for(u=xl(r),l=0;l<c.length;++l)f=wl(r,c[l]),r.fill&&$y(e,r,i)&&e.fillText(f,s,a),r.stroke&&Kf(e,r,i)&&e.strokeText(f,s,a),a+=u;else f=wl(r,c),r.fill&&$y(e,r,i)&&e.fillText(f,s,a),r.stroke&&Kf(e,r,i)&&e.strokeText(f,s,a);r.angle&&e.restore()}})}function Yte(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=rb(t),a=s.x1,l=s.y1,u=KA(ag,t,1),c=-t.angle*bl,f=Math.cos(c),d=Math.sin(c),h=f*i-d*o+(a-f*a+d*l),g=d*i+f*o+(l-d*a-f*l);return u.contains(h,g)}function Xte(e,t){const n=KA(ag,e,2);return cf(t,n[0],n[1],n[2],n[3])||cf(t,n[0],n[1],n[4],n[5])||cf(t,n[4],n[5],n[6],n[7])||cf(t,n[2],n[3],n[6],n[7])}var qte={type:"text",tag:"text",nested:!1,attr:Gte,bound:KA,draw:Vte,pick:Q1(Yte),isect:Xte},Kte=HA("trail",Xee,lte),yi={arc:ote,area:ute,group:Ete,image:Ate,line:Cte,path:Fte,rect:$te,rule:jte,shape:Lte,symbol:zte,text:qte,trail:Kte};function dE(e,t,n){var r=yi[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new cn),e,n)}var MM={mark:null};function a4(e,t,n){var r=yi[e.marktype],i=r.bound,o=e.items,s=o&&o.length,a,l,u,c;if(r.nested)return s?u=o[0]:(MM.mark=e,u=MM),c=dE(u,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new cn,s)for(a=0,l=o.length;a<l;++a)t.union(dE(o[a],i,n));return e.bounds=t}const Jte=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function l4(e,t){return JSON.stringify(e,Jte,t)}function u4(e){const t=typeof e=="string"?JSON.parse(e):e;return c4(t)}function c4(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&c4(n[i]);return t&&a4(e),e}function JA(e){arguments.length?this.root=u4(e):(this.root=f4({marktype:"group",name:"root",role:"frame"}),this.root.items=[new J1(this.root)])}JA.prototype={toJSON(e){return l4(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];const r=f4(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function f4(e,t){const n={bounds:new cn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function ja(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function ZA(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Pr(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=ja(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function io(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function d4(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function ib(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Zte(e,t,n,r){var i=e&&e.mark,o,s;if(i&&(o=yi[i.marktype]).tip){for(s=ib(t,n),s[0]-=r[0],s[1]-=r[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(i.items,s)}return e}function El(e,t){this._active=null,this._handlers={},this._loader=e||_1(),this._tooltip=t||Qte}function Qte(e,t,n,r){e.element().setAttribute("title",r||"")}El.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const r in t)n.push(...t[r]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{const i=new MouseEvent(e.type,e),o=ja(null,"a");for(const s in r)o.setAttribute(s,r[s]);o.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=Zte(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,o=i.width(),s=i.height();let a=i.x1+r[0]+n.left,l=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)a+=e.x||0,l+=e.y||0;return{x:a,y:l,width:o,height:s,left:a,top:l,right:a+o,bottom:l+s}}};function ms(e){this._el=null,this._bgcolor=null,this._loader=new RA(e)}ms.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e){const t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render(){},renderAsync(e){const t=this.render(e);return this._ready?this._ready.then(()=>t):Promise.resolve(t)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const i=n._call;n._ready=n._loader.ready().then(o=>{o&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const ene="keydown",tne="keypress",nne="keyup",h4="dragenter",$0="dragleave",g4="dragover",hE="mousedown",rne="mouseup",Ry="mousemove",lg="mouseout",p4="mouseover",Py="click",ine="dblclick",one="wheel",m4="mousewheel",Iy="touchstart",jy="touchmove",Ly="touchend",sne=[ene,tne,nne,h4,$0,g4,hE,rne,Ry,lg,p4,Py,ine,one,m4,Iy,jy,Ly],gE=Ry,Gg=lg,pE=Py;function zp(e,t){El.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const ane=e=>e===Iy||e===jy||e===Ly?[Iy,jy,Ly]:[e];function $M(e,t){ane(t).forEach(n=>lne(e,n))}function lne(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function NM(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?this.fire(e,r):((!i||!i.exit)&&this.fire(n,r),this._active=o,this.fire(t,r),this.fire(e,r))}}function RM(e){return function(t){this.fire(e,t),this._active=null}}re(zp,El,{initialize(e,t,n){return this._canvas=e&&ZA(e,"canvas"),[Py,hE,Ry,lg,$0].forEach(r=>$M(this,r)),El.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:sne,DOMMouseScroll(e){this.fire(m4,e)},mousemove:NM(Ry,p4,lg),dragover:NM(g4,h4,$0),mouseout:RM(lg),dragleave:RM($0),mousedown(e){this._down=this._active,this.fire(hE,e)},click(e){this._down===this._active&&(this.fire(Py,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Iy,e,!0)},touchmove(e){this.fire(jy,e,!0)},touchend(e){this.fire(Ly,e,!0),this._touch=null},fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===pE&&r&&r.href?this.handleHref(t,r,r.href):(e===gE||e===Gg)&&this.handleTooltip(t,r,e!==Gg),i)for(let o=0,s=i.length;o<s;++o)i[o].handler.call(this._obj,t,r)},on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&($M(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){const t=ib(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){const o=this.context();return yi[e.marktype].pick.call(this,o,e,t,n,r,i)}});function une(){return typeof window<"u"&&window.devicePixelRatio||1}var cne=une();function fne(e,t,n,r,i,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),l=s?cne:i;e.width=t*l,e.height=n*l;for(const u in o)a[u]=o[u];return s&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),e}function zy(e){ms.call(this,e),this._options={},this._redraw=!1,this._dirty=new cn,this._tempb=new cn}const PM=ms.prototype,dne=(e,t,n)=>new cn().set(0,0,t,n).translate(-e[0],-e[1]);function hne(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}re(zy,ms,{initialize(e,t,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:el(1,1,this._options.type),e&&this._canvas&&(io(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),PM.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(PM.resize.call(this,e,t,n,r),this._canvas)fne(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const i=this._options.externalContext;i||Y("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e){const t=this.context(),n=this._origin,r=this._width,i=this._height,o=this._dirty,s=dne(n,r,i);t.save();const a=this._redraw||o.empty()?(this._redraw=!1,s.expand(1)):hne(t,s.intersect(o),n);return this.clear(-n[0],-n[1],r,i),this.draw(t,e,a),t.restore(),o.clear(),this},draw(e,t,n){const r=yi[t.marktype];t.clip&&cte(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},clear(e,t,n,r){const i=this._options,o=this.context();i.type!=="pdf"&&!i.externalContext&&o.clearRect(e,t,n,r),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,r))}});function QA(e,t){El.call(this,e,t);const n=this;n._hrefHandler=mE(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=mE(n,(r,i)=>{n.handleTooltip(r,i,r.type!==Gg)})}const mE=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};re(QA,El,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(pE,this._hrefHandler),r.removeEventListener(gE,this._tooltipHandler),r.removeEventListener(Gg,this._tooltipHandler)),this._svg=r=e&&ZA(e,"svg"),r&&(r.addEventListener(pE,this._hrefHandler),r.addEventListener(gE,this._tooltipHandler),r.addEventListener(Gg,this._tooltipHandler)),El.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const o={type:e,handler:t,listener:mE(this,t)};(r[n]||(r[n]=[])).push(o),this._svg&&this._svg.addEventListener(n,o.listener)}return this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const y4="aria-hidden",eC="aria-label",tC="role",nC="aria-roledescription",v4="graphics-object",rC="graphics-symbol",b4=(e,t,n)=>({[tC]:e,[nC]:t,[eC]:n||void 0}),gne=xo(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),IM={axis:{desc:"axis",caption:yne},legend:{desc:"legend",caption:vne},"title-text":{desc:"title",caption:e=>"Title text '".concat(LM(e),"'")},"title-subtitle":{desc:"subtitle",caption:e=>"Subtitle text '".concat(LM(e),"'")}},jM={ariaRole:tC,ariaRoleDescription:nC,description:eC};function x4(e,t){const n=t.aria===!1;if(e(y4,n||void 0),n||t.description==null)for(const r in jM)e(jM[r],void 0);else{const r=t.mark.marktype;e(eC,t.description),e(tC,t.ariaRole||(r==="group"?v4:rC)),e(nC,t.ariaRoleDescription||"".concat(r," mark"))}}function w4(e){return e.aria===!1?{[y4]:!0}:gne[e.role]?null:IM[e.role]?mne(e,IM[e.role]):pne(e)}function pne(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return b4(n?v4:rC,"".concat(t," mark container"),e.description)}function mne(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return b4(t.role||rC,t.desc,n.description||r(n))}catch{return null}}function LM(e){return pe(e.text).join(" ")}function yne(e){const t=e.datum,n=e.orient,r=t.title?E4(e):null,i=e.context,o=i.scales[t.scale].value,s=i.dataflow.locale(),a=o.type,l=n==="left"||n==="right"?"Y":"X";return"".concat(l,"-axis")+(r?" titled '".concat(r,"'"):"")+" for a ".concat(Yf(a)?"discrete":a," scale")+" with ".concat(L6(s,o,e))}function vne(e){const t=e.datum,n=t.title?E4(e):null,r="".concat(t.type||""," legend").trim(),i=t.scales,o=Object.keys(i),s=e.context,a=s.scales[i[o[0]]].value,l=s.dataflow.locale();return xne(r)+(n?" titled '".concat(n,"'"):"")+" for ".concat(bne(o))+" with ".concat(L6(l,a,e))}function E4(e){try{return pe(lt(e.items).items[0].text).join(" ")}catch{return null}}function bne(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+lt(e)}function xne(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const S4=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),wne=e=>S4(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function iC(){let e="",t="",n="";const r=[],i=()=>t=n="",o=l=>{t&&(e+="".concat(t,">").concat(n),i()),r.push(l)},s=(l,u)=>(u!=null&&(t+=" ".concat(l,'="').concat(wne(u),'"')),a),a={open(l){o(l),t="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),f=1;f<u;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)s(h,d[h]);return a},close(){const l=r.pop();return t?e+=t+(n?">".concat(n,"</").concat(l,">"):"/>"):e+="</".concat(l,">"),i(),a},attr:s,text:l=>(n+=S4(l),a),toString:()=>e};return a}const O4=e=>_4(iC(),e)+"";function _4(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):_4(e,r)}return e.close()}const By={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Uy={blend:"mix-blend-mode"},A4={fill:"none","stroke-miterlimit":10},oh=0,zM="http://www.w3.org/2000/xmlns/",gn=Wg.xmlns;function oC(e){ms.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const Jx=ms.prototype;re(oC,ms,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=Pr(e,0,"svg",gn),this._svg.setAttributeNS(zM,"xmlns",gn),this._svg.setAttributeNS(zM,"xmlns:xlink",Wg["xmlns:xlink"]),this._svg.setAttribute("version",Wg.version),this._svg.setAttribute("class","marks"),io(e,1),this._root=Pr(this._svg,oh,"g",gn),La(this._root,A4),io(this._svg,oh+1)),this.background(this._bgcolor),Jx.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),Jx.background.apply(this,arguments)},resize(e,t,n,r){return Jx.resize.call(this,e,t,n,r),this._svg&&(La(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=Pr(e,oh,"rect",gn),La(n,{width:this._width,height:this._height,fill:t}));const r=O4(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),io(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,o,s,a,l;for(s=0,a=e.length;s<a;++s)if(n=e[s],r=n.mark,r.marktype!==i&&(i=r.marktype,o=yi[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,BM(n,t),r.items.forEach(u=>{u.dirty=t})),!r.zdirty){if(n.exit){o.nested&&r.items.length?(l=r.items[0],l._svg&&this._update(o,l._svg,l)):n._svg&&(l=n._svg.parentNode,l&&l.removeChild(n._svg)),n._svg=null;continue}n=o.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,BM(n,t)):this._update(o,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n){if(!this.isDirty(t))return t._svg;const r=this._svg,i=yi[t.marktype],o=t.interactive===!1?"none":null,s=i.tag==="g",a=UM(t,e,n,"g",r);a.setAttribute("class",d4(t));const l=w4(t);for(const d in l)gr(a,d,l[d]);s||gr(a,"pointer-events",o),gr(a,"clip-path",t.clip?NA(this,t,t.group):null);let u=null,c=0;const f=d=>{const h=this.isDirty(d),g=UM(d,a,u,i.tag,r);h&&(this._update(i,g,d),s&&One(this,g,d)),u=g,++c};return i.nested?t.items.length&&f(t.items[0]):Eo(t,f),io(a,c),a},_update(e,t,n){Hs=t,Yn=t.__values__,x4(ug,n),e.attr(ug,n,this);const r=Ane[e.type];r&&r.call(this,e,t,n),Hs&&this.style(Hs,n)},style(e,t){if(t!=null){for(const n in By){let r=n==="font"?Lp(t):t[n];if(r===Yn[n])continue;const i=By[n];r==null?e.removeAttribute(i):(DA(r)&&(r=B6(r,this._defs.gradient,C4())),e.setAttribute(i,r+"")),Yn[n]=r}for(const n in Uy)N0(e,Uy[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=Pr(e,oh+1,"defs",gn)),r=Ene(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=Pr(e,oh+1,"defs",gn)),r=Sne(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):io(n,r))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function BM(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Ene(e,t,n){let r,i,o;if(t.gradient==="radial"){let s=Pr(e,n++,"pattern",gn);La(s,{id:My+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=Pr(s,0,"rect",gn),La(s,{width:1,height:1,fill:"url(".concat(C4(),"#").concat(t.id,")")}),e=Pr(e,n++,"radialGradient",gn),La(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Pr(e,n++,"linearGradient",gn),La(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=Pr(e,r,"stop",gn),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return io(e,r),n}function Sne(e,t,n){let r;return e=Pr(e,n,"clipPath",gn),e.setAttribute("id",t.id),t.path?(r=Pr(e,0,"path",gn),r.setAttribute("d",t.path)):(r=Pr(e,0,"rect",gn),La(r,{x:0,y:0,width:t.width,height:t.height})),io(e,1),n+1}function One(e,t,n){t=t.lastChild.previousSibling;let r,i=0;Eo(n,o=>{r=e.mark(t,o,r),++i}),io(t,1+i)}function UM(e,t,n,r,i){let o=e._svg,s;if(!o&&(s=t.ownerDocument,o=ja(s,r,gn),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const a=ja(s,"path",gn);o.appendChild(a),a.__data__=e;const l=ja(s,"g",gn);o.appendChild(l),l.__data__=e;const u=ja(s,"path",gn);o.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(o.ownerSVGElement!==i||_ne(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function _ne(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Hs=null,Yn=null;const Ane={group(e,t,n){const r=Hs=t.childNodes[2];Yn=r.__values__,e.foreground(ug,n,this),Yn=t.__values__,Hs=t.childNodes[1],e.content(ug,n,this);const i=Hs=t.childNodes[0];e.background(ug,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==Yn.events&&(gr(r,"pointer-events",o),gr(i,"pointer-events",o),Yn.events=o),n.strokeForeground&&n.stroke){const s=n.fill;gr(r,"display",null),this.style(i,n),gr(i,"stroke",null),s&&(n.fill=null),Yn=r.__values__,this.style(r,n),s&&(n.fill=s),Hs=null}else gr(r,"display","none")},image(e,t,n){n.smooth===!1?(N0(t,"image-rendering","optimizeSpeed"),N0(t,"image-rendering","pixelated")):N0(t,"image-rendering",null)},text(e,t,n){const r=jp(n);let i,o,s,a;X(r)?(o=r.map(l=>wl(n,l)),i=o.join(`
`),i!==Yn.text&&(io(t,0),s=t.ownerDocument,a=xl(n),o.forEach((l,u)=>{const c=ja(s,"tspan",gn);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Yn.text=i)):(o=wl(n,r),o!==Yn.text&&(t.textContent=o,Yn.text=o)),gr(t,"font-family",Lp(n)),gr(t,"font-size",ps(n)+"px"),gr(t,"font-style",n.fontStyle),gr(t,"font-variant",n.fontVariant),gr(t,"font-weight",n.fontWeight)}};function ug(e,t,n){t!==Yn[e]&&(n?Cne(Hs,e,t,n):gr(Hs,e,t),Yn[e]=t)}function N0(e,t,n){n!==Yn[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Yn[t]=n)}function La(e,t){for(const n in t)gr(e,n,t[n])}function gr(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Cne(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function C4(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function sC(e){ms.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}re(sC,ms,{svg(){return this._text},_render(e){const t=iC();t.open("svg",Je({},Wg,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",A4,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=yi[t.marktype],r=n.tag,i=[x4,n.attr];e.open("g",{class:d4(t),"clip-path":t.clip?NA(this,t,t.group):null},w4(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});const o=s=>{const a=this.href(s);if(a&&e.open("a",a),e.open(r,this.attr(t,s,i,r!=="g"?r:null)),r==="text"){const l=jp(s);if(X(l)){const u={x:0,dy:xl(s)};for(let c=0;c<l.length;++c)e.open("tspan",c?u:null).text(wl(s,l[c])).close()}else e.text(wl(s,l))}else if(r==="g"){const l=s.strokeForeground,u=s.fill,c=s.stroke;l&&c&&(s.stroke=null),e.open("path",this.attr(t,s,n.background,"bgrect")).close(),e.open("g",this.attr(t,s,n.content)),Eo(s,f=>this.mark(e,f)),e.close(),l&&c?(u&&(s.fill=null),s.stroke=c,e.open("path",this.attr(t,s,n.foreground,"bgrect")).close(),u&&(s.fill=u)):e.open("path",this.attr(t,s,n.foreground,"bgfore")).close()}e.close(),a&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):Eo(t,o),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){const i={},o=(s,a,l,u)=>{i[u||s]=a};return Array.isArray(n)?n.forEach(s=>s(o,t,this)):n(o,t,this),r&&Tne(i,t,e,r,this._defs),i},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const i in t){const o=t[i],s=o.stops;o.gradient==="radial"?(e.open("pattern",{id:My+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):e.open("linearGradient",{id:i,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let a=0;a<s.length;++a)e.open("stop",{offset:s[a].offset,"stop-color":s[a].color}).close();e.close()}for(const i in n){const o=n[i];e.open("clipPath",{id:i}),o.path?e.open("path",{d:o.path}).close():e.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),e.close()}e.close()}}});function Tne(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=Lp(t),e["font-size"]=ps(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in By){let a=t[s];const l=By[s];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(DA(a)&&(a=B6(a,i.gradient,"")),e[l]=a)}for(const s in Uy){const a=t[s];a!=null&&(o=o||[],o.push("".concat(Uy[s],": ").concat(a,";")))}return o&&(e.style=o.join(" ")),e}const T4="canvas",k4="png",F4="svg",D4="none",za={Canvas:T4,PNG:k4,SVG:F4,None:D4},Jf={};Jf[T4]=Jf[k4]={renderer:zy,headless:zy,handler:zp};Jf[F4]={renderer:oC,headless:sC,handler:QA};Jf[D4]={};function ob(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Jf[e]=t,this):Jf[e]}function M4(e,t,n){const r=[],i=new cn().union(t),o=e.marktype;return o?$4(e,i,n,r):o==="group"?N4(e,i,n,r):Y("Intersect scene must be mark node or group item.")}function $4(e,t,n,r){if(kne(e,t,n)){const i=e.items,o=e.marktype,s=i.length;let a=0;if(o==="group")for(;a<s;++a)N4(i[a],t,n,r);else for(const l=yi[o].isect;a<s;++a){const u=i[a];R4(u,t,l)&&r.push(u)}}return r}function kne(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function N4(e,t,n,r){n&&n(e.mark)&&R4(e,t,yi.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let l=0;l<o;++l)$4(i[l],t,n,r);t.translate(s,a)}return r}function R4(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const Zx=new cn;function P4(e){const t=e.clip;if(Ze(t))t(Pp(Zx.clear()));else if(t)Zx.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(Zx)}const Fne=1e-9;function aC(e,t,n){return e===t?!0:n==="path"?I4(e,t):e instanceof Date&&t instanceof Date?+e==+t:kt(e)&&kt(t)?Math.abs(e-t)<=Fne:!e||!t||!me(e)&&!me(t)?e==t:Dne(e,t)}function I4(e,t){return aC(Xf(e),Xf(t))}function Dne(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!aC(e[i],t[i],i))return!1;return typeof e==typeof t}function Mne(){X6(),ree()}const Zf="top",oo="left",uo="right",Sl="bottom",$ne="top-left",Nne="top-right",Rne="bottom-left",Pne="bottom-right",lC="start",yE="middle",pr="end",Ine="x",jne="y",sb="group",uC="axis",cC="title",Lne="frame",zne="scope",fC="legend",j4="row-header",L4="row-footer",z4="row-title",B4="column-header",U4="column-footer",H4="column-title",Bne="padding",Une="symbol",W4="fit",Hne="fit-x",Wne="fit-y",Gne="pad",dC="none",Rm="all",vE="each",hC="flush",Ba="column",Ua="row";function G4(e){U.call(this,null,e)}re(G4,U,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=yi[i],s=o.bound;let a=r.bounds,l;if(o.nested)r.items.length&&n.dirty(r.items[0]),a=Pm(r,s),r.items.forEach(u=>{u.bounds.clear().union(a)});else if(i===sb||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),r.items.forEach(u=>a.union(Pm(u,s))),r.role){case uC:case fC:case cC:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(Pm(u,s))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(Pm(u,s))}),l&&(a.clear(),r.items.forEach(u=>a.union(u.bounds)));return P4(r),t.modifies("bounds")}});function Pm(e,t,n){return t(e.bounds.clear(),e,n)}const HM=":vega_identifier:";function gC(e){U.call(this,0,e)}gC.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};re(gC,U,{transform(e,t){const n=Vne(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function Vne(e){return e._signals[HM]||(e._signals[HM]=e.add(0))}function V4(e){U.call(this,null,e)}re(V4,U,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Yne(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===sb?J1:K1;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Yne(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function Y4(e){U.call(this,null,e)}const WM={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!X4(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},X4=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),GM=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(X4(i,o=e[n].bounds,t))return!0},Xne=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},qne=(e,t,n)=>{var r=e.range(),i=new cn;return t===Zf||t===Sl?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},VM=e=>(e.forEach(t=>t.opacity=1),e),YM=(e,t)=>e.reflow(t.modified()).modifies("opacity");re(Y4,U,{transform(e,t){const n=WM[e.method]||WM.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,s;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(VM(i),t=YM(t,e)),t;if(i=i.filter(Xne),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=VM(i),t=YM(t,e),o.length>=3&&GM(o,r)){do o=n(o,r);while(o.length>=3&&GM(o,r));o.length<3&&!lt(i).opacity&&(o.length>1&&(lt(o).opacity=0),lt(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=qne(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{s(l)||(l.opacity=0)}));const a=o[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}});function q4(e){U.call(this,null,e)}re(q4,U,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Vn=new cn;function ff(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Kne(e){var t=e.items[0].orient;return t===oo||t===uo}function Jne(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Zne(e,t,n,r){var i=t.items[0],o=i.datum,s=i.translate!=null?i.translate:.5,a=i.orient,l=Jne(o),u=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,g=o.title&&i.items[l[2]].items[0],p=i.titlePadding,m=i.bounds,y=g&&XA(g),v=0,b=0,x,w;switch(Vn.clear().union(m),m.clear(),(x=l[0])>-1&&m.union(i.items[x].bounds),(x=l[1])>-1&&m.union(i.items[x].bounds),a){case Zf:v=f||0,b=-c,w=Math.max(d,Math.min(h,-m.y1)),m.add(0,-w).add(u,0),g&&Im(e,g,w,p,y,0,-1,m);break;case oo:v=-c,b=f||0,w=Math.max(d,Math.min(h,-m.x1)),m.add(-w,0).add(0,u),g&&Im(e,g,w,p,y,1,-1,m);break;case uo:v=n+c,b=f||0,w=Math.max(d,Math.min(h,m.x2)),m.add(0,0).add(w,u),g&&Im(e,g,w,p,y,1,1,m);break;case Sl:v=f||0,b=r+c,w=Math.max(d,Math.min(h,m.y2)),m.add(0,0).add(u,w),g&&Im(e,g,w,p,0,0,1,m);break;default:v=i.x,b=i.y}return ia(m.translate(v,b),i),ff(i,"x",v+s)|ff(i,"y",b+s)&&(i.bounds=Vn,e.dirty(i),i.bounds=m,e.dirty(i)),i.mark.bounds.clear().union(m)}function Im(e,t,n,r,i,o,s,a){const l=t.bounds;if(t.auto){const u=s*(n+i+r);let c=0,f=0;e.dirty(t),o?c=(t.x||0)-(t.x=u):f=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-f)),e.dirty(t)}a.union(l)}const XM=(e,t)=>Math.floor(Math.min(e,t)),qM=(e,t)=>Math.ceil(Math.max(e,t));function Qne(e){var t=e.items,n=t.length,r=0,i,o;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===sb)switch(i.role){case uC:case fC:case cC:break;case j4:s.rowheaders.push(...o);break;case L4:s.rowfooters.push(...o);break;case B4:s.colheaders.push(...o);break;case U4:s.colfooters.push(...o);break;case z4:s.rowtitle=o[0];break;case H4:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}function ere(e){return new cn().set(0,0,e.width||0,e.height||0)}function tre(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Wt(e,t,n){const r=me(e)?e[t]:e;return r!=null?r:n!==void 0?n:0}function KM(e){return e<0?Math.ceil(-e):0}function K4(e,t,n){var r=!n.nodirty,i=n.bounds===hC?ere:tre,o=Vn.set(0,0,0,0),s=Wt(n.align,Ba),a=Wt(n.align,Ua),l=Wt(n.padding,Ba),u=Wt(n.padding,Ua),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),g=Array(c),p=0,m=Array(d),y=Array(f),v=0,b=Array(d),x=Array(d),w=Array(d),S,E,O,A,C,_,T,k,D,M,$;for(E=0;E<c;++E)g[E]=0;for(E=0;E<f;++E)y[E]=0;for(E=0;E<d;++E)_=t[E],C=w[E]=i(_),_.x=_.x||0,b[E]=0,_.y=_.y||0,x[E]=0,O=E%c,A=~~(E/c),p=Math.max(p,T=Math.ceil(C.x2)),v=Math.max(v,k=Math.ceil(C.y2)),g[O]=Math.max(g[O],T),y[A]=Math.max(y[A],k),h[E]=l+KM(C.x1),m[E]=u+KM(C.y1),r&&e.dirty(t[E]);for(E=0;E<d;++E)E%c===0&&(h[E]=0),E<c&&(m[E]=0);if(s===vE)for(O=1;O<c;++O){for($=0,E=O;E<d;E+=c)$<h[E]&&($=h[E]);for(E=O;E<d;E+=c)h[E]=$+g[O-1]}else if(s===Rm){for($=0,E=0;E<d;++E)E%c&&$<h[E]&&($=h[E]);for(E=0;E<d;++E)E%c&&(h[E]=$+p)}else for(s=!1,O=1;O<c;++O)for(E=O;E<d;E+=c)h[E]+=g[O-1];if(a===vE)for(A=1;A<f;++A){for($=0,E=A*c,S=E+c;E<S;++E)$<m[E]&&($=m[E]);for(E=A*c;E<S;++E)m[E]=$+y[A-1]}else if(a===Rm){for($=0,E=c;E<d;++E)$<m[E]&&($=m[E]);for(E=c;E<d;++E)m[E]=$+v}else for(a=!1,A=1;A<f;++A)for(E=A*c,S=E+c;E<S;++E)m[E]+=y[A-1];for(D=0,E=0;E<d;++E)D=h[E]+(E%c?D:0),b[E]+=D-t[E].x;for(O=0;O<c;++O)for(M=0,E=O;E<d;E+=c)M+=m[E],x[E]+=M-t[E].y;if(s&&Wt(n.center,Ba)&&f>1)for(E=0;E<d;++E)C=s===Rm?p:g[E%c],D=C-w[E].x2-t[E].x-b[E],D>0&&(b[E]+=D/2);if(a&&Wt(n.center,Ua)&&c!==1)for(E=0;E<d;++E)C=a===Rm?v:y[~~(E/c)],M=C-w[E].y2-t[E].y-x[E],M>0&&(x[E]+=M/2);for(E=0;E<d;++E)o.union(w[E].translate(b[E],x[E]));switch(D=Wt(n.anchor,Ine),M=Wt(n.anchor,jne),Wt(n.anchor,Ba)){case pr:D-=o.width();break;case yE:D-=o.width()/2}switch(Wt(n.anchor,Ua)){case pr:M-=o.height();break;case yE:M-=o.height()/2}for(D=Math.round(D),M=Math.round(M),o.clear(),E=0;E<d;++E)t[E].mark.bounds.clear();for(E=0;E<d;++E)_=t[E],_.x+=b[E]+=D,_.y+=x[E]+=M,o.union(_.mark.bounds.union(_.bounds.translate(b[E],x[E]))),r&&e.dirty(_);return o}function nre(e,t,n){var r=Qne(t),i=r.marks,o=n.bounds===hC?rre:ire,s=n.offset,a=n.columns||i.length,l=a<=0?1:Math.ceil(i.length/a),u=l*a,c,f,d,h,g,p,m;const y=K4(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(p=Wt(n.headerBand,Ua,null),c=jm(e,r.rowheaders,i,a,l,-Wt(s,"rowHeader"),XM,0,o,"x1",0,a,1,p)),r.colheaders&&(p=Wt(n.headerBand,Ba,null),f=jm(e,r.colheaders,i,a,a,-Wt(s,"columnHeader"),XM,1,o,"y1",0,1,a,p)),r.rowfooters&&(p=Wt(n.footerBand,Ua,null),d=jm(e,r.rowfooters,i,a,l,Wt(s,"rowFooter"),qM,0,o,"x2",a-1,a,1,p)),r.colfooters&&(p=Wt(n.footerBand,Ba,null),h=jm(e,r.colfooters,i,a,a,Wt(s,"columnFooter"),qM,1,o,"y2",u-a,1,a,p)),r.rowtitle&&(g=Wt(n.titleAnchor,Ua),m=Wt(s,"rowTitle"),m=g===pr?d+m:c-m,p=Wt(n.titleBand,Ua,.5),JM(e,r.rowtitle,m,0,y,p)),r.coltitle&&(g=Wt(n.titleAnchor,Ba),m=Wt(s,"columnTitle"),m=g===pr?h+m:f-m,p=Wt(n.titleBand,Ba,.5),JM(e,r.coltitle,m,1,y,p))}function rre(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function ire(e,t){return e.bounds[t]}function jm(e,t,n,r,i,o,s,a,l,u,c,f,d,h){var g=n.length,p=0,m=0,y,v,b,x,w,S,E,O,A;if(!g)return p;for(y=c;y<g;y+=f)n[y]&&(p=s(p,l(n[y],u)));if(!t.length)return p;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),p+=o,v=0,x=t.length;v<x;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,x=t.length;v<x;++v,y+=f){for(S=t[v],w=S.mark.bounds,b=y;b>=0&&(E=n[b])==null;b-=d);a?(O=h==null?E.x:Math.round(E.bounds.x1+h*E.bounds.width()),A=p):(O=p,A=h==null?E.y:Math.round(E.bounds.y1+h*E.bounds.height())),w.union(S.bounds.translate(O-(S.x||0),A-(S.y||0))),S.x=O,S.y=A,e.dirty(S),m=s(m,w[u])}return m}function JM(e,t,n,r,i,o){if(!!t){e.dirty(t);var s=n,a=n;r?s=Math.round(i.x1+o*i.width()):a=Math.round(i.y1+o*i.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function ore(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function sre(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function are(e,t,n,r,i,o,s){const a=ore(n,t),l=sre(e,a("offset",0)),u=a("anchor",lC),c=u===pr?1:u===yE?.5:0,f={align:vE,bounds:a("bounds",hC),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case oo:f.anchor={x:Math.floor(r.x1)-l,column:pr,y:c*(s||r.height()+2*r.y1),row:u};break;case uo:f.anchor={x:Math.ceil(r.x2)+l,y:c*(s||r.height()+2*r.y1),row:u};break;case Zf:f.anchor={y:Math.floor(i.y1)-l,row:pr,x:c*(o||i.width()+2*i.x1),column:u};break;case Sl:f.anchor={y:Math.ceil(i.y2)+l,x:c*(o||i.width()+2*i.x1),column:u};break;case $ne:f.anchor={x:l,y:l};break;case Nne:f.anchor={x:o-l,y:l,column:pr};break;case Rne:f.anchor={x:l,y:s-l,row:pr};break;case Pne:f.anchor={x:o-l,y:s-l,column:pr,row:pr};break}return f}function lre(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,s=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),cre(e,n,n.items[0].items[0]),o=ure(n,o),l=2*n.padding,u=2*n.padding,o.empty()||(l=Math.ceil(o.width()+l),u=Math.ceil(o.height()+u)),r.type===Une&&fre(n.items[0].items[0].items[0].items),i!==dC&&(n.x=s=0,n.y=a=0),n.width=l,n.height=u,ia(o.set(s,a,s+l,a+u),n),n.mark.bounds.clear().union(o),n}function ure(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function cre(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&sh(e,n,i,o);else{var s=t.items[1].items[0],a=s.anchor,l=t.titlePadding||0,u=r-s.x,c=r-s.y;switch(s.orient){case oo:i+=Math.ceil(s.bounds.width())+l;break;case uo:case Sl:break;default:o+=s.bounds.height()+l}switch((i||o)&&sh(e,n,i,o),s.orient){case oo:c+=Hc(t,n,s,a,1,1);break;case uo:u+=Hc(t,n,s,pr,0,0)+l,c+=Hc(t,n,s,a,1,1);break;case Sl:u+=Hc(t,n,s,a,0,0),c+=Hc(t,n,s,pr,-1,0,1)+l;break;default:u+=Hc(t,n,s,a,0,0)}(u||c)&&sh(e,s,u,c),(u=Math.round(s.bounds.x1-r))<0&&(sh(e,n,-u,0),sh(e,s,-u,0))}}function Hc(e,t,n,r,i,o,s){const a=e.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(o||!l)&&!s?t.items[0]:t,c=u.bounds[i?"y2":"x2"]-e.padding,f=l&&o?c:0,d=l&&o?0:c,h=i<=0?0:XA(n);return Math.round(r===lC?f:r===pr?d-h:.5*(c-h))}function sh(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function fre(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function dre(e,t,n,r,i){var o=t.items[0],s=o.frame,a=o.orient,l=o.anchor,u=o.offset,c=o.padding,f=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],h=a===oo||a===uo?r:n,g=0,p=0,m=0,y=0,v=0,b;if(s!==sb?a===oo?(g=i.y2,h=i.y1):a===uo?(g=i.y1,h=i.y2):(g=i.x1,h=i.x2):a===oo&&(g=r,h=0),b=l===lC?g:l===pr?h:(g+h)/2,d&&d.text){switch(a){case Zf:case Sl:v=f.bounds.height()+c;break;case oo:y=f.bounds.width()+c;break;case uo:y=-f.bounds.width()-c;break}Vn.clear().union(d.bounds),Vn.translate(y-(d.x||0),v-(d.y||0)),ff(d,"x",y)|ff(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(Vn),d.mark.bounds.clear().union(Vn),e.dirty(d)),Vn.clear().union(d.bounds)}else Vn.clear();switch(Vn.union(f.bounds),a){case Zf:p=b,m=i.y1-Vn.height()-u;break;case oo:p=i.x1-Vn.width()-u,m=b;break;case uo:p=i.x2+Vn.width()+u,m=b;break;case Sl:p=b,m=i.y2+u;break;default:p=o.x,m=o.y}return ff(o,"x",p)|ff(o,"y",m)&&(Vn.translate(p,m),e.dirty(o),o.bounds.clear().union(Vn),t.bounds.clear().union(Vn),e.dirty(o)),o.bounds}function J4(e){U.call(this,null,e)}re(J4,U,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&nre(n,r,e.layout),gre(n,r,e)}),hre(e.mark.group)?t.reflow():t}});function hre(e){return e&&e.mark.role!=="legend-entry"}function gre(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=new cn().set(0,0,i,o),a=s.clone(),l=s.clone(),u=[],c,f,d,h,g,p;for(g=0,p=r.length;g<p;++g)switch(f=r[g],f.role){case uC:h=Kne(f)?a:l,h.union(Zne(e,f,i,o));break;case cC:c=f;break;case fC:u.push(lre(e,f));break;case Lne:case zne:case j4:case L4:case z4:case B4:case U4:case H4:a.union(f.bounds),l.union(f.bounds);break;default:s.union(f.bounds)}if(u.length){const m={};u.forEach(y=>{d=y.orient||uo,d!==dC&&(m[d]||(m[d]=[])).push(y)});for(const y in m){const v=m[y];K4(e,v,are(v,y,n.legends,a,l,i,o))}u.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&n.autosize.type===W4)switch(y.orient){case oo:case uo:s.add(v.x1,0).add(v.x2,0);break;case Zf:case Sl:s.add(0,v.y1).add(0,v.y2)}else s.union(v)})}s.union(a).union(l),c&&s.union(dre(e,c,i,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),pre(e,t,s,n)}function pre(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===Bne){const g=e.padding();s-=g.left+g.right,a-=g.top+g.bottom}o===dC?(u=0,f=0,l=s,c=a):o===W4?(l=Math.max(0,s-u-d),c=Math.max(0,a-f-h)):o===Hne?(l=Math.max(0,s-u-d),a=c+f+h):o===Wne?(s=l+u+d,c=Math.max(0,a-f-h)):o===Gne&&(s=l+u+d,a=c+f+h),e._resizeView(s,a,l,c,[u,f],i.resize)}const mre=Object.freeze(Object.defineProperty({__proto__:null,bound:G4,identifier:gC,mark:V4,overlap:Y4,render:q4,viewlayout:J4},Symbol.toStringTag,{value:"Module"}));function Z4(e){U.call(this,null,e)}re(Z4,U,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,a=kA(o,s,e.minstep),l=e.format||N6(n,o,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?$6(o,e.values,a):FA(o,a);return i&&(r.rem=i),i=u.map((c,f)=>Et({index:f/(u.length-1||1),value:c,label:l(c)})),e.extra&&i.length&&i.push(Et({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function Q4(e){U.call(this,null,e)}function yre(){return Et({})}function vre(e){const t=Od().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}re(Q4,U,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||yre,o=e.key||Te,s=this.value;return X(r.encode)&&(r.encode=null),s&&(e.modified("key")||t.modified(o))&&Y("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=vre(o)),t.visit(t.ADD,a=>{const l=o(a);let u=s.get(l);u?u.exit?(s.empty--,r.add.push(u)):r.mod.push(u):(u=i(a),s.set(l,u),r.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=o(a),u=s.get(l);u&&(u.datum=a,r.mod.push(u))}),t.visit(t.REM,a=>{const l=o(a),u=s.get(l);a===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),r}});function e8(e){U.call(this,null,e)}re(e8,U,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(X(o))if(n.changed()||o.every(f=>i[f]))o=o[0],n.encode=null;else return t.StopPropagation;var s=o==="enter",a=i.update||wa,l=i.enter||wa,u=i.exit||wa,c=(o&&!s?i[o]:a)||wa;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{l(f,e),a(f,e)}),n.modifies(l.output),n.modifies(a.output),c!==wa&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==wa&&(t.visit(t.REM,f=>{u(f,e)}),n.modifies(u.output)),s||c!==wa){const f=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(f,d=>{const h=l(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(l.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function t8(e){U.call(this,[],e)}re(t8,U,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||C0,s=e.scale,a=+e.limit,l=kA(s,e.count==null?5:e.count,e.minstep),u=!!e.values||o===C0,c=e.format||j6(n,s,l,o,e.formatSpecifier,e.formatType,u),f=e.values||I6(s,l),d,h,g,p,m;return i&&(r.rem=i),o===C0?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),m=!0):i=f,Ze(g=e.size)?(!e.values&&s(i[0])===0&&(i=i.slice(1)),p=i.reduce((y,v)=>Math.max(y,g(v,e)),0)):g=lr(p=g||8),i=i.map((y,v)=>Et({index:v,label:c(y,v,i),value:y,offset:p,size:g(y,e)})),m&&(m=f[i.length],i.push(Et({index:i.length,label:"\u2026".concat(f.length-i.length," entries"),value:m,offset:p,size:g(m,e)})))):o===WQ?(d=s.domain(),h=F6(s,d[0],lt(d)),f.length<3&&!e.values&&d[0]!==lt(d)&&(f=[d[0],lt(d)]),i=f.map((y,v)=>Et({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(g=f.length-1,h=tee(s),i=f.map((y,v)=>Et({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===g?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const bre=e=>e.source.x,xre=e=>e.source.y,wre=e=>e.target.x,Ere=e=>e.target.y;function pC(e){U.call(this,{},e)}pC.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};re(pC,U,{transform(e,t){var n=e.sourceX||bre,r=e.sourceY||xre,i=e.targetX||wre,o=e.targetY||Ere,s=e.as||"path",a=e.orient||"vertical",l=e.shape||"line",u=ZM.get(l+"-"+a)||ZM.get(l);return u||Y("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[s]=u(n(c),r(c),i(c),o(c))}),t.reflow(e.modified()).modifies(s)}});const n8=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,Sre=(e,t,n,r)=>n8(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),r8=(e,t,n,r)=>{var i=n-e,o=r-t,s=Math.sqrt(i*i+o*o)/2,a=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+a+" 0 1 "+n+","+r},Ore=(e,t,n,r)=>r8(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),i8=(e,t,n,r)=>{const i=n-e,o=r-t,s=.2*(i+o),a=.2*(o-i);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(r-s)+" "+n+","+r},_re=(e,t,n,r)=>i8(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Are=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,Cre=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,Tre=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*s+","+t*a+"L"+r*s+","+r*a},kre=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},Fre=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},Dre=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*o+"C"+l*i+","+l*o+" "+l*s+","+l*a+" "+r*s+","+r*a},ZM=Od({line:n8,"line-radial":Sre,arc:r8,"arc-radial":Ore,curve:i8,"curve-radial":_re,"orthogonal-horizontal":Are,"orthogonal-vertical":Cre,"orthogonal-radial":Tre,"diagonal-horizontal":kre,"diagonal-vertical":Fre,"diagonal-radial":Dre});function mC(e){U.call(this,null,e)}mC.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};re(mC,U,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||wd,s=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(o),c=u.length,f=s,d=(a-s)/Ej(u),h=ui(c),g,p,m;for(e.sort&&h.sort((y,v)=>u[y]-u[v]),g=0;g<c;++g)m=u[h[g]],p=l[h[g]],p[r]=f,p[i]=f+=m*d;return this.value=u,t.reflow(e.modified()).modifies(n)}});const Mre=5;function $re(e){const t=e.type;return!e.bins&&(t===Gf||t===kp||t===Fp)}function o8(e){return AA(e)&&e!==Zo}const Nre=xo(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function s8(e){U.call(this,null,e),this.modified(!0)}re(s8,U,{transform(e,t){var n=t.dataflow,r=this.value,i=Rre(e);(!r||i!==r.type)&&(this.value=r=xt(i)());for(i in e)if(!Nre[i]){if(i==="padding"&&o8(r.type))continue;Ze(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return Bre(r,e,zre(r,e,Ire(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Rre(e){var t=e.type,n="",r;return t===Zo?Zo+"-"+Gf:(Pre(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Zo+"-":r===3?Dd+"-":""),(n+t||Gf).toLowerCase())}function Pre(e){const t=e.type;return AA(t)&&t!==ec&&t!==tc&&(e.scheme||e.range&&e.range.length&&e.range.every(de))}function Ire(e,t,n){const r=jre(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,s=t.zero||t.zero===void 0&&$re(e),a,l;if(!i)return 0;if(o8(o)&&t.padding&&i[0]!==lt(i)&&(i=Lre(o,i,t.range,t.padding,t.exponent,t.constant)),(s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,s&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[a]?a+1:l<i[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return e.domain(a8(o,i,n)),o===EA&&e.unknown(t.domainImplicit?Jw:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&kA(e,t.nice)||null),i.length}function jre(e,t,n){return t?(e.domain(a8(e.type,t,n)),t.length):-1}function Lre(e,t,n,r,i,o){var s=Math.abs(lt(n)-n[0]),a=s/(s-2*r),l=e===Qs?LO(t,null,a):e===Fp?fy(t,null,a,.5):e===kp?fy(t,null,a,i||1):e===G1?zO(t,null,a,o||1):jO(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function a8(e,t,n){if(_6(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+ae(t))}return t}function zre(e,t,n){let r=t.bins;if(r&&!X(r)){const i=e.domain(),o=i[0],s=lt(i),a=r.step;let l=r.start==null?o:r.start,u=r.stop==null?s:r.stop;a||Y("Scale bins parameter missing step property."),l<o&&(l=a*Math.ceil(o/a)),u>s&&(u=a*Math.floor(s/a)),r=ui(l,u+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===SA&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function Bre(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=Ure(r,t,n);else if(t.scheme&&(o=Hre(r,t,n),Ze(o))){if(e.interpolator)return e.interpolator(o);Y("Scale type ".concat(r," does not support interpolating color schemes."))}if(o&&A6(r))return e.interpolator(X1(bE(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(CA(t.interpolate,t.interpolateGamma)):Ze(e.round)?e.round(i):Ze(e.rangeRound)&&e.interpolate(i?Cp:Il),o&&e.range(bE(o,t.reverse))}function Ure(e,t,n){e!==w6&&e!==iE&&Y("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===iE?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*wA(n,i,r)]}function Hre(e,t,n){var r=t.schemeExtent,i,o;return X(t.scheme)?o=X1(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=TA(i),o||Y("Unrecognized scheme name: ".concat(t.scheme))),n=e===Y1?n+1:e===SA?n-1:e===Vf||e===V1?+t.schemeCount||Mre:n,A6(e)?QM(o,r,t.reverse):Ze(o)?k6(QM(o,r),n):e===EA?o:o.slice(0,n)}function QM(e,t,n){return Ze(e)&&(t||n)?T6(e,bE(t||[0,1],n)):e}function bE(e,t){return t?e.slice().reverse():e}function l8(e){U.call(this,null,e)}re(l8,U,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Ac(e.sort)),this.modified(n),t}});const e$="zero",u8="center",c8="normalize",f8=["y0","y1"];function yC(e){U.call(this,null,e)}yC.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:e$,values:[e$,u8,c8]},{name:"as",type:"string",array:!0,length:2,default:f8}]};re(yC,U,{transform(e,t){var n=e.as||f8,r=n[0],i=n[1],o=Ac(e.sort),s=e.field||wd,a=e.offset===u8?Wre:e.offset===c8?Gre:Vre,l,u,c,f;for(l=Yre(t.source,e.groupby,o,s),u=0,c=l.length,f=l.max;u<c;++u)a(l[u],f,s,r,i);return t.reflow(e.modified()).modifies(n)}});function Wre(e,t,n,r,i){for(var o=(t-e.sum)/2,s=e.length,a=0,l;a<s;++a)l=e[a],l[r]=o,l[i]=o+=Math.abs(n(l))}function Gre(e,t,n,r,i){for(var o=1/e.sum,s=0,a=e.length,l=0,u=0,c;l<a;++l)c=e[l],c[r]=s,c[i]=s=o*(u+=Math.abs(n(c)))}function Vre(e,t,n,r,i){for(var o=0,s=0,a=e.length,l=0,u,c;l<a;++l)c=e[l],u=+n(c),u<0?(c[r]=s,c[i]=s+=u):(c[r]=o,c[i]=o+=u)}function Yre(e,t,n,r){var i=[],o=p=>p(c),s,a,l,u,c,f,d,h,g;if(t==null)i.push(e.slice());else for(s={},a=0,l=e.length;a<l;++a)c=e[a],f=t.map(o),d=s[f],d||(s[f]=d=[],i.push(d)),d.push(c);for(f=0,g=0,u=i.length;f<u;++f){for(d=i[f],a=0,h=0,l=d.length;a<l;++a)h+=Math.abs(r(d[a]));d.sum=h,h>g&&(g=h),n&&d.sort(n)}return i.max=g,i}const Xre=Object.freeze(Object.defineProperty({__proto__:null,axisticks:Z4,datajoin:Q4,encode:e8,legendentries:t8,linkpath:pC,pie:mC,scale:s8,sortitems:l8,stack:yC},Symbol.toStringTag,{value:"Module"}));var $e=1e-6,Hy=1e-12,et=Math.PI,rn=et/2,Wy=et/4,Or=et*2,an=180/et,tt=et/180,gt=Math.abs,$d=Math.atan,Pi=Math.atan2,Ne=Math.cos,Lm=Math.ceil,d8=Math.exp,xE=Math.hypot,Gy=Math.log,Qx=Math.pow,ke=Math.sin,Ti=Math.sign||function(e){return e>0?1:e<0?-1:0},_r=Math.sqrt,vC=Math.tan;function h8(e){return e>1?0:e<-1?et:Math.acos(e)}function Vr(e){return e>1?rn:e<-1?-rn:Math.asin(e)}function In(){}function Vy(e,t){e&&n$.hasOwnProperty(e.type)&&n$[e.type](e,t)}var t$={Feature:function(e,t){Vy(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Vy(n[r].geometry,t)}},n$={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){wE(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)wE(n[r],t,0)},Polygon:function(e,t){r$(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)r$(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Vy(n[r],t)}};function wE(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function r$(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)wE(e[n],t,1);t.polygonEnd()}function Ls(e,t){e&&t$.hasOwnProperty(e.type)?t$[e.type](e,t):Vy(e,t)}var Yy=new Er,Xy=new Er,g8,p8,EE,SE,OE,ss={point:In,lineStart:In,lineEnd:In,polygonStart:function(){Yy=new Er,ss.lineStart=qre,ss.lineEnd=Kre},polygonEnd:function(){var e=+Yy;Xy.add(e<0?Or+e:e),this.lineStart=this.lineEnd=this.point=In},sphere:function(){Xy.add(Or)}};function qre(){ss.point=Jre}function Kre(){m8(g8,p8)}function Jre(e,t){ss.point=m8,g8=e,p8=t,e*=tt,t*=tt,EE=e,SE=Ne(t=t/2+Wy),OE=ke(t)}function m8(e,t){e*=tt,t*=tt,t=t/2+Wy;var n=e-EE,r=n>=0?1:-1,i=r*n,o=Ne(t),s=ke(t),a=OE*s,l=SE*o+a*Ne(i),u=a*r*ke(i);Yy.add(Pi(u,l)),EE=e,SE=o,OE=s}function Zre(e){return Xy=new Er,Ls(e,ss),Xy*2}function qy(e){return[Pi(e[1],e[0]),Vr(e[2])]}function nc(e){var t=e[0],n=e[1],r=Ne(n);return[r*Ne(t),r*ke(t),ke(n)]}function zm(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Qf(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function e2(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Bm(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Ky(e){var t=_r(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Xt,Nr,en,si,gu,y8,v8,_f,cg,Ta,ea,Rs={point:_E,lineStart:i$,lineEnd:o$,polygonStart:function(){Rs.point=x8,Rs.lineStart=Qre,Rs.lineEnd=eie,cg=new Er,ss.polygonStart()},polygonEnd:function(){ss.polygonEnd(),Rs.point=_E,Rs.lineStart=i$,Rs.lineEnd=o$,Yy<0?(Xt=-(en=180),Nr=-(si=90)):cg>$e?si=90:cg<-$e&&(Nr=-90),ea[0]=Xt,ea[1]=en},sphere:function(){Xt=-(en=180),Nr=-(si=90)}};function _E(e,t){Ta.push(ea=[Xt=e,en=e]),t<Nr&&(Nr=t),t>si&&(si=t)}function b8(e,t){var n=nc([e*tt,t*tt]);if(_f){var r=Qf(_f,n),i=[r[1],-r[0],0],o=Qf(i,r);Ky(o),o=qy(o);var s=e-gu,a=s>0?1:-1,l=o[0]*an*a,u,c=gt(s)>180;c^(a*gu<l&&l<a*e)?(u=o[1]*an,u>si&&(si=u)):(l=(l+360)%360-180,c^(a*gu<l&&l<a*e)?(u=-o[1]*an,u<Nr&&(Nr=u)):(t<Nr&&(Nr=t),t>si&&(si=t))),c?e<gu?ni(Xt,e)>ni(Xt,en)&&(en=e):ni(e,en)>ni(Xt,en)&&(Xt=e):en>=Xt?(e<Xt&&(Xt=e),e>en&&(en=e)):e>gu?ni(Xt,e)>ni(Xt,en)&&(en=e):ni(e,en)>ni(Xt,en)&&(Xt=e)}else Ta.push(ea=[Xt=e,en=e]);t<Nr&&(Nr=t),t>si&&(si=t),_f=n,gu=e}function i$(){Rs.point=b8}function o$(){ea[0]=Xt,ea[1]=en,Rs.point=_E,_f=null}function x8(e,t){if(_f){var n=e-gu;cg.add(gt(n)>180?n+(n>0?360:-360):n)}else y8=e,v8=t;ss.point(e,t),b8(e,t)}function Qre(){ss.lineStart()}function eie(){x8(y8,v8),ss.lineEnd(),gt(cg)>$e&&(Xt=-(en=180)),ea[0]=Xt,ea[1]=en,_f=null}function ni(e,t){return(t-=e)<0?t+360:t}function tie(e,t){return e[0]-t[0]}function s$(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function nie(e){var t,n,r,i,o,s,a;if(si=en=-(Xt=Nr=1/0),Ta=[],Ls(e,Rs),n=Ta.length){for(Ta.sort(tie),t=1,r=Ta[0],o=[r];t<n;++t)i=Ta[t],s$(r,i[0])||s$(r,i[1])?(ni(r[0],i[1])>ni(r[0],r[1])&&(r[1]=i[1]),ni(i[0],r[1])>ni(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(s=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(a=ni(r[1],i[0]))>s&&(s=a,Xt=i[0],en=r[1])}return Ta=ea=null,Xt===1/0||Nr===1/0?[[NaN,NaN],[NaN,NaN]]:[[Xt,Nr],[en,si]]}var Nh,Jy,Zy,Qy,ev,tv,nv,rv,AE,CE,TE,w8,E8,mr,yr,vr,co={sphere:In,point:bC,lineStart:a$,lineEnd:l$,polygonStart:function(){co.lineStart=oie,co.lineEnd=sie},polygonEnd:function(){co.lineStart=a$,co.lineEnd=l$}};function bC(e,t){e*=tt,t*=tt;var n=Ne(t);Bp(n*Ne(e),n*ke(e),ke(t))}function Bp(e,t,n){++Nh,Zy+=(e-Zy)/Nh,Qy+=(t-Qy)/Nh,ev+=(n-ev)/Nh}function a$(){co.point=rie}function rie(e,t){e*=tt,t*=tt;var n=Ne(t);mr=n*Ne(e),yr=n*ke(e),vr=ke(t),co.point=iie,Bp(mr,yr,vr)}function iie(e,t){e*=tt,t*=tt;var n=Ne(t),r=n*Ne(e),i=n*ke(e),o=ke(t),s=Pi(_r((s=yr*o-vr*i)*s+(s=vr*r-mr*o)*s+(s=mr*i-yr*r)*s),mr*r+yr*i+vr*o);Jy+=s,tv+=s*(mr+(mr=r)),nv+=s*(yr+(yr=i)),rv+=s*(vr+(vr=o)),Bp(mr,yr,vr)}function l$(){co.point=bC}function oie(){co.point=aie}function sie(){S8(w8,E8),co.point=bC}function aie(e,t){w8=e,E8=t,e*=tt,t*=tt,co.point=S8;var n=Ne(t);mr=n*Ne(e),yr=n*ke(e),vr=ke(t),Bp(mr,yr,vr)}function S8(e,t){e*=tt,t*=tt;var n=Ne(t),r=n*Ne(e),i=n*ke(e),o=ke(t),s=yr*o-vr*i,a=vr*r-mr*o,l=mr*i-yr*r,u=xE(s,a,l),c=Vr(u),f=u&&-c/u;AE.add(f*s),CE.add(f*a),TE.add(f*l),Jy+=c,tv+=c*(mr+(mr=r)),nv+=c*(yr+(yr=i)),rv+=c*(vr+(vr=o)),Bp(mr,yr,vr)}function lie(e){Nh=Jy=Zy=Qy=ev=tv=nv=rv=0,AE=new Er,CE=new Er,TE=new Er,Ls(e,co);var t=+AE,n=+CE,r=+TE,i=xE(t,n,r);return i<Hy&&(t=tv,n=nv,r=rv,Jy<$e&&(t=Zy,n=Qy,r=ev),i=xE(t,n,r),i<Hy)?[NaN,NaN]:[Pi(n,t)*an,Vr(r/i)*an]}function kE(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function FE(e,t){return[gt(e)>et?e+Math.round(-e/Or)*Or:e,t]}FE.invert=FE;function O8(e,t,n){return(e%=Or)?t||n?kE(c$(e),f$(t,n)):c$(e):t||n?f$(t,n):FE}function u$(e){return function(t,n){return t+=e,[t>et?t-Or:t<-et?t+Or:t,n]}}function c$(e){var t=u$(e);return t.invert=u$(-e),t}function f$(e,t){var n=Ne(e),r=ke(e),i=Ne(t),o=ke(t);function s(a,l){var u=Ne(l),c=Ne(a)*u,f=ke(a)*u,d=ke(l),h=d*n+c*r;return[Pi(f*i-h*o,c*n-d*r),Vr(h*i+f*o)]}return s.invert=function(a,l){var u=Ne(l),c=Ne(a)*u,f=ke(a)*u,d=ke(l),h=d*i-f*o;return[Pi(f*i+d*o,c*n+h*r),Vr(h*n-c*r)]},s}function uie(e){e=O8(e[0]*tt,e[1]*tt,e.length>2?e[2]*tt:0);function t(n){return n=e(n[0]*tt,n[1]*tt),n[0]*=an,n[1]*=an,n}return t.invert=function(n){return n=e.invert(n[0]*tt,n[1]*tt),n[0]*=an,n[1]*=an,n},t}function cie(e,t,n,r,i,o){if(!!n){var s=Ne(t),a=ke(t),l=r*n;i==null?(i=t+r*Or,o=t-l/2):(i=d$(s,i),o=d$(s,o),(r>0?i<o:i>o)&&(i+=r*Or));for(var u,c=i;r>0?c>o:c<o;c-=l)u=qy([s,-a*Ne(c),-a*ke(c)]),e.point(u[0],u[1])}}function d$(e,t){t=nc(t),t[0]-=e,Ky(t);var n=h8(-t[1]);return((-t[2]<0?-n:n)+Or-$e)%Or}function _8(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:In,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function R0(e,t){return gt(e[0]-t[0])<$e&&gt(e[1]-t[1])<$e}function Um(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function A8(e,t,n,r,i){var o=[],s=[],a,l;if(e.forEach(function(g){if(!((p=g.length-1)<=0)){var p,m=g[0],y=g[p],v;if(R0(m,y)){if(!m[2]&&!y[2]){for(i.lineStart(),a=0;a<p;++a)i.point((m=g[a])[0],m[1]);i.lineEnd();return}y[0]+=2*$e}o.push(v=new Um(m,g,null,!0)),s.push(v.o=new Um(m,null,v,!1)),o.push(v=new Um(y,g,null,!1)),s.push(v.o=new Um(y,null,v,!0))}}),!!o.length){for(s.sort(t),h$(o),h$(s),a=0,l=s.length;a<l;++a)s[a].e=n=!n;for(var u=o[0],c,f;;){for(var d=u,h=!0;d.v;)if((d=d.n)===u)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,l=c.length;a<l;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function h$(e){if(!!(t=e.length)){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function t2(e){return gt(e[0])<=et?e[0]:Ti(e[0])*((gt(e[0])+et)%Or-et)}function fie(e,t){var n=t2(t),r=t[1],i=ke(r),o=[ke(n),-Ne(n),0],s=0,a=0,l=new Er;i===1?r=rn+$e:i===-1&&(r=-rn-$e);for(var u=0,c=e.length;u<c;++u)if(!!(d=(f=e[u]).length))for(var f,d,h=f[d-1],g=t2(h),p=h[1]/2+Wy,m=ke(p),y=Ne(p),v=0;v<d;++v,g=x,m=S,y=E,h=b){var b=f[v],x=t2(b),w=b[1]/2+Wy,S=ke(w),E=Ne(w),O=x-g,A=O>=0?1:-1,C=A*O,_=C>et,T=m*S;if(l.add(Pi(T*A*ke(C),y*E+T*Ne(C))),s+=_?O+A*Or:O,_^g>=n^x>=n){var k=Qf(nc(h),nc(b));Ky(k);var D=Qf(o,k);Ky(D);var M=(_^O>=0?-1:1)*Vr(D[2]);(r>M||r===M&&(k[0]||k[1]))&&(a+=_^O>=0?1:-1)}}return(s<-$e||s<$e&&l<-Hy)^a&1}function C8(e,t,n,r){return function(i){var o=t(i),s=_8(),a=t(s),l=!1,u,c,f,d={point:h,lineStart:p,lineEnd:m,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],u=[]},polygonEnd:function(){d.point=h,d.lineStart=p,d.lineEnd=m,c=wj(c);var x=fie(u,r);c.length?(l||(i.polygonStart(),l=!0),A8(c,hie,x,n,i)):x&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),c=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(x,w){e(x,w)&&i.point(x,w)}function g(x,w){o.point(x,w)}function p(){d.point=g,o.lineStart()}function m(){d.point=h,o.lineEnd()}function y(x,w){f.push([x,w]),a.point(x,w)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var x=a.clean(),w=s.result(),S,E=w.length,O,A,C;if(f.pop(),u.push(f),f=null,!!E){if(x&1){if(A=w[0],(O=A.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),S=0;S<O;++S)i.point((C=A[S])[0],C[1]);i.lineEnd()}return}E>1&&x&2&&w.push(w.pop().concat(w.shift())),c.push(w.filter(die))}}return d}}function die(e){return e.length>1}function hie(e,t){return((e=e.x)[0]<0?e[1]-rn-$e:rn-e[1])-((t=t.x)[0]<0?t[1]-rn-$e:rn-t[1])}const g$=C8(function(){return!0},gie,mie,[-et,-rn]);function gie(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?et:-et,l=gt(o-t);gt(l-et)<$e?(e.point(t,n=(n+s)/2>0?rn:-rn),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&l>=et&&(gt(t-r)<$e&&(t-=r*$e),gt(o-a)<$e&&(o-=a*$e),n=pie(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function pie(e,t,n,r){var i,o,s=ke(e-n);return gt(s)>$e?$d((ke(t)*(o=Ne(r))*ke(n)-ke(r)*(i=Ne(t))*ke(e))/(i*o*s)):(t+r)/2}function mie(e,t,n,r){var i;if(e==null)i=n*rn,r.point(-et,i),r.point(0,i),r.point(et,i),r.point(et,0),r.point(et,-i),r.point(0,-i),r.point(-et,-i),r.point(-et,0),r.point(-et,i);else if(gt(e[0]-t[0])>$e){var o=e[0]<t[0]?et:-et;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function yie(e){var t=Ne(e),n=6*tt,r=t>0,i=gt(t)>$e;function o(c,f,d,h){cie(h,e,n,d,c,f)}function s(c,f){return Ne(c)*Ne(f)>t}function a(c){var f,d,h,g,p;return{lineStart:function(){g=h=!1,p=1},point:function(m,y){var v=[m,y],b,x=s(m,y),w=r?x?0:u(m,y):x?u(m+(m<0?et:-et),y):0;if(!f&&(g=h=x)&&c.lineStart(),x!==h&&(b=l(f,v),(!b||R0(f,b)||R0(v,b))&&(v[2]=1)),x!==h)p=0,x?(c.lineStart(),b=l(v,f),c.point(b[0],b[1])):(b=l(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^x){var S;!(w&d)&&(S=l(v,f,!0))&&(p=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}x&&(!f||!R0(f,v))&&c.point(v[0],v[1]),f=v,h=x,d=w},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return p|(g&&h)<<1}}}function l(c,f,d){var h=nc(c),g=nc(f),p=[1,0,0],m=Qf(h,g),y=zm(m,m),v=m[0],b=y-v*v;if(!b)return!d&&c;var x=t*y/b,w=-t*v/b,S=Qf(p,m),E=Bm(p,x),O=Bm(m,w);e2(E,O);var A=S,C=zm(E,A),_=zm(A,A),T=C*C-_*(zm(E,E)-1);if(!(T<0)){var k=_r(T),D=Bm(A,(-C-k)/_);if(e2(D,E),D=qy(D),!d)return D;var M=c[0],$=f[0],N=c[1],P=f[1],H;$<M&&(H=M,M=$,$=H);var ie=$-M,ge=gt(ie-et)<$e,be=ge||ie<$e;if(!ge&&P<N&&(H=N,N=P,P=H),be?ge?N+P>0^D[1]<(gt(D[0]-M)<$e?N:P):N<=D[1]&&D[1]<=P:ie>et^(M<=D[0]&&D[0]<=$)){var Fe=Bm(A,(-C+k)/_);return e2(Fe,E),[D,qy(Fe)]}}}function u(c,f){var d=r?e:et-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return C8(s,a,o,r?[0,-e]:[-et,e-et])}function vie(e,t,n,r,i,o){var s=e[0],a=e[1],l=t[0],u=t[1],c=0,f=1,d=l-s,h=u-a,g;if(g=n-s,!(!d&&g>0)){if(g/=d,d<0){if(g<c)return;g<f&&(f=g)}else if(d>0){if(g>f)return;g>c&&(c=g)}if(g=i-s,!(!d&&g<0)){if(g/=d,d<0){if(g>f)return;g>c&&(c=g)}else if(d>0){if(g<c)return;g<f&&(f=g)}if(g=r-a,!(!h&&g>0)){if(g/=h,h<0){if(g<c)return;g<f&&(f=g)}else if(h>0){if(g>f)return;g>c&&(c=g)}if(g=o-a,!(!h&&g<0)){if(g/=h,h<0){if(g>f)return;g>c&&(c=g)}else if(h>0){if(g<c)return;g<f&&(f=g)}return c>0&&(e[0]=s+c*d,e[1]=a+c*h),f<1&&(t[0]=s+f*d,t[1]=a+f*h),!0}}}}}var Rh=1e9,Hm=-Rh;function T8(e,t,n,r){function i(u,c){return e<=u&&u<=n&&t<=c&&c<=r}function o(u,c,f,d){var h=0,g=0;if(u==null||(h=s(u,f))!==(g=s(c,f))||l(u,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==g);else d.point(c[0],c[1])}function s(u,c){return gt(u[0]-e)<$e?c>0?0:3:gt(u[0]-n)<$e?c>0?2:1:gt(u[1]-t)<$e?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var f=s(u,1),d=s(c,1);return f!==d?f-d:f===0?c[1]-u[1]:f===1?u[0]-c[0]:f===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,f=_8(),d,h,g,p,m,y,v,b,x,w,S,E={point:O,lineStart:T,lineEnd:k,polygonStart:C,polygonEnd:_};function O(M,$){i(M,$)&&c.point(M,$)}function A(){for(var M=0,$=0,N=h.length;$<N;++$)for(var P=h[$],H=1,ie=P.length,ge=P[0],be,Fe,Be=ge[0],De=ge[1];H<ie;++H)be=Be,Fe=De,ge=P[H],Be=ge[0],De=ge[1],Fe<=r?De>r&&(Be-be)*(r-Fe)>(De-Fe)*(e-be)&&++M:De<=r&&(Be-be)*(r-Fe)<(De-Fe)*(e-be)&&--M;return M}function C(){c=f,d=[],h=[],S=!0}function _(){var M=A(),$=S&&M,N=(d=wj(d)).length;($||N)&&(u.polygonStart(),$&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),N&&A8(d,a,M,o,u),u.polygonEnd()),c=u,d=h=g=null}function T(){E.point=D,h&&h.push(g=[]),w=!0,x=!1,v=b=NaN}function k(){d&&(D(p,m),y&&x&&f.rejoin(),d.push(f.result())),E.point=O,x&&c.lineEnd()}function D(M,$){var N=i(M,$);if(h&&g.push([M,$]),w)p=M,m=$,y=N,w=!1,N&&(c.lineStart(),c.point(M,$));else if(N&&x)c.point(M,$);else{var P=[v=Math.max(Hm,Math.min(Rh,v)),b=Math.max(Hm,Math.min(Rh,b))],H=[M=Math.max(Hm,Math.min(Rh,M)),$=Math.max(Hm,Math.min(Rh,$))];vie(P,H,e,t,n,r)?(x||(c.lineStart(),c.point(P[0],P[1])),c.point(H[0],H[1]),N||c.lineEnd(),S=!1):N&&(c.lineStart(),c.point(M,$),S=!1)}v=M,b=$,x=N}return E}}function p$(e,t,n){var r=ui(e,t-$e,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function m$(e,t,n){var r=ui(e,t-$e,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function bie(){var e,t,n,r,i,o,s,a,l=10,u=l,c=90,f=360,d,h,g,p,m=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return ui(Lm(r/c)*c,n,c).map(g).concat(ui(Lm(a/f)*f,s,f).map(p)).concat(ui(Lm(t/l)*l,e,l).filter(function(b){return gt(b%c)>$e}).map(d)).concat(ui(Lm(o/u)*u,i,u).filter(function(b){return gt(b%f)>$e}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[g(r).concat(p(s).slice(1),g(n).reverse().slice(1),p(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],s=+b[1][1],r>n&&(b=r,r=n,n=b),a>s&&(b=a,a=s,s=b),y.precision(m)):[[r,a],[n,s]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],o=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),o>i&&(b=o,o=i,i=b),y.precision(m)):[[t,o],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(l=+b[0],u=+b[1],y):[l,u]},y.precision=function(b){return arguments.length?(m=+b,d=p$(o,i,90),h=m$(t,e,m),g=p$(a,s,90),p=m$(r,n,m),y):m},y.extentMajor([[-180,-90+$e],[180,90-$e]]).extentMinor([[-180,-80-$e],[180,80+$e]])}const Vg=e=>e;var n2=new Er,DE=new Er,k8,F8,ME,$E,$a={point:In,lineStart:In,lineEnd:In,polygonStart:function(){$a.lineStart=xie,$a.lineEnd=Eie},polygonEnd:function(){$a.lineStart=$a.lineEnd=$a.point=In,n2.add(gt(DE)),DE=new Er},result:function(){var e=n2/2;return n2=new Er,e}};function xie(){$a.point=wie}function wie(e,t){$a.point=D8,k8=ME=e,F8=$E=t}function D8(e,t){DE.add($E*e-ME*t),ME=e,$E=t}function Eie(){D8(k8,F8)}const y$=$a;var ed=1/0,iv=ed,Yg=-ed,ov=Yg,Sie={point:Oie,lineStart:In,lineEnd:In,polygonStart:In,polygonEnd:In,result:function(){var e=[[ed,iv],[Yg,ov]];return Yg=ov=-(iv=ed=1/0),e}};function Oie(e,t){e<ed&&(ed=e),e>Yg&&(Yg=e),t<iv&&(iv=t),t>ov&&(ov=t)}const sv=Sie;var NE=0,RE=0,Ph=0,av=0,lv=0,df=0,PE=0,IE=0,Ih=0,M8,$8,Bo,Uo,so={point:rc,lineStart:v$,lineEnd:b$,polygonStart:function(){so.lineStart=Cie,so.lineEnd=Tie},polygonEnd:function(){so.point=rc,so.lineStart=v$,so.lineEnd=b$},result:function(){var e=Ih?[PE/Ih,IE/Ih]:df?[av/df,lv/df]:Ph?[NE/Ph,RE/Ph]:[NaN,NaN];return NE=RE=Ph=av=lv=df=PE=IE=Ih=0,e}};function rc(e,t){NE+=e,RE+=t,++Ph}function v$(){so.point=_ie}function _ie(e,t){so.point=Aie,rc(Bo=e,Uo=t)}function Aie(e,t){var n=e-Bo,r=t-Uo,i=_r(n*n+r*r);av+=i*(Bo+e)/2,lv+=i*(Uo+t)/2,df+=i,rc(Bo=e,Uo=t)}function b$(){so.point=rc}function Cie(){so.point=kie}function Tie(){N8(M8,$8)}function kie(e,t){so.point=N8,rc(M8=Bo=e,$8=Uo=t)}function N8(e,t){var n=e-Bo,r=t-Uo,i=_r(n*n+r*r);av+=i*(Bo+e)/2,lv+=i*(Uo+t)/2,df+=i,i=Uo*e-Bo*t,PE+=i*(Bo+e),IE+=i*(Uo+t),Ih+=i*3,rc(Bo=e,Uo=t)}const x$=so;function R8(e){this._context=e}R8.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Or);break}}},result:In};var jE=new Er,r2,P8,I8,jh,Lh,uv={point:In,lineStart:function(){uv.point=Fie},lineEnd:function(){r2&&j8(P8,I8),uv.point=In},polygonStart:function(){r2=!0},polygonEnd:function(){r2=null},result:function(){var e=+jE;return jE=new Er,e}};function Fie(e,t){uv.point=j8,P8=jh=e,I8=Lh=t}function j8(e,t){jh-=e,Lh-=t,jE.add(_r(jh*jh+Lh*Lh)),jh=e,Lh=t}const w$=uv;function L8(){this._string=[]}L8.prototype={_radius:4.5,_circle:E$(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=E$(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function E$(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function z8(e,t){var n=4.5,r,i;function o(s){return s&&(typeof n=="function"&&i.pointRadius(+n.apply(this,arguments)),Ls(s,r(i))),i.result()}return o.area=function(s){return Ls(s,r(y$)),y$.result()},o.measure=function(s){return Ls(s,r(w$)),w$.result()},o.bounds=function(s){return Ls(s,r(sv)),sv.result()},o.centroid=function(s){return Ls(s,r(x$)),x$.result()},o.projection=function(s){return arguments.length?(r=s==null?(e=null,Vg):(e=s).stream,o):e},o.context=function(s){return arguments.length?(i=s==null?(t=null,new L8):new R8(t=s),typeof n!="function"&&i.pointRadius(n),o):t},o.pointRadius=function(s){return arguments.length?(n=typeof s=="function"?s:(i.pointRadius(+s),+s),o):n},o.projection(e).context(t)}function ab(e){return function(t){var n=new LE;for(var r in e)n[r]=e[r];return n.stream=t,n}}function LE(){}LE.prototype={constructor:LE,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function xC(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Ls(n,e.stream(sv)),t(sv.result()),r!=null&&e.clipExtent(r),e}function lb(e,t,n){return xC(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,l])},n)}function wC(e,t,n){return lb(e,[[0,0],t],n)}function EC(e,t,n){return xC(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];e.scale(150*o).translate([s,a])},n)}function SC(e,t,n){return xC(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])},n)}var S$=16,Die=Ne(30*tt);function O$(e,t){return+t?$ie(e,t):Mie(e)}function Mie(e){return ab({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function $ie(e,t){function n(r,i,o,s,a,l,u,c,f,d,h,g,p,m){var y=u-r,v=c-i,b=y*y+v*v;if(b>4*t&&p--){var x=s+d,w=a+h,S=l+g,E=_r(x*x+w*w+S*S),O=Vr(S/=E),A=gt(gt(S)-1)<$e||gt(o-f)<$e?(o+f)/2:Pi(w,x),C=e(A,O),_=C[0],T=C[1],k=_-r,D=T-i,M=v*k-y*D;(M*M/b>t||gt((y*k+v*D)/b-.5)>.3||s*d+a*h+l*g<Die)&&(n(r,i,o,s,a,l,_,T,A,x/=E,w/=E,S,p,m),m.point(_,T),n(_,T,A,x,w,S,u,c,f,d,h,g,p,m))}}return function(r){var i,o,s,a,l,u,c,f,d,h,g,p,m={point:y,lineStart:v,lineEnd:x,polygonStart:function(){r.polygonStart(),m.lineStart=w},polygonEnd:function(){r.polygonEnd(),m.lineStart=v}};function y(O,A){O=e(O,A),r.point(O[0],O[1])}function v(){f=NaN,m.point=b,r.lineStart()}function b(O,A){var C=nc([O,A]),_=e(O,A);n(f,d,c,h,g,p,f=_[0],d=_[1],c=O,h=C[0],g=C[1],p=C[2],S$,r),r.point(f,d)}function x(){m.point=y,r.lineEnd()}function w(){v(),m.point=S,m.lineEnd=E}function S(O,A){b(i=O,A),o=f,s=d,a=h,l=g,u=p,m.point=b}function E(){n(f,d,c,h,g,p,o,s,i,a,l,u,S$,r),m.lineEnd=x,x()}return m}}var Nie=ab({point:function(e,t){this.stream.point(e*tt,t*tt)}});function Rie(e){return ab({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Pie(e,t,n,r,i){function o(s,a){return s*=r,a*=i,[t+e*s,n-e*a]}return o.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},o}function _$(e,t,n,r,i,o){if(!o)return Pie(e,t,n,r,i);var s=Ne(o),a=ke(o),l=s*e,u=a*e,c=s/e,f=a/e,d=(a*n-s*t)/e,h=(a*t+s*n)/e;function g(p,m){return p*=r,m*=i,[l*p-u*m+t,n-u*p-l*m]}return g.invert=function(p,m){return[r*(c*p-f*m+d),i*(h-f*p-c*m)]},g}function ys(e){return B8(function(){return e})()}function B8(e){var t,n=150,r=480,i=250,o=0,s=0,a=0,l=0,u=0,c,f=0,d=1,h=1,g=null,p=g$,m=null,y,v,b,x=Vg,w=.5,S,E,O,A,C;function _(M){return O(M[0]*tt,M[1]*tt)}function T(M){return M=O.invert(M[0],M[1]),M&&[M[0]*an,M[1]*an]}_.stream=function(M){return A&&C===M?A:A=Nie(Rie(c)(p(S(x(C=M)))))},_.preclip=function(M){return arguments.length?(p=M,g=void 0,D()):p},_.postclip=function(M){return arguments.length?(x=M,m=y=v=b=null,D()):x},_.clipAngle=function(M){return arguments.length?(p=+M?yie(g=M*tt):(g=null,g$),D()):g*an},_.clipExtent=function(M){return arguments.length?(x=M==null?(m=y=v=b=null,Vg):T8(m=+M[0][0],y=+M[0][1],v=+M[1][0],b=+M[1][1]),D()):m==null?null:[[m,y],[v,b]]},_.scale=function(M){return arguments.length?(n=+M,k()):n},_.translate=function(M){return arguments.length?(r=+M[0],i=+M[1],k()):[r,i]},_.center=function(M){return arguments.length?(o=M[0]%360*tt,s=M[1]%360*tt,k()):[o*an,s*an]},_.rotate=function(M){return arguments.length?(a=M[0]%360*tt,l=M[1]%360*tt,u=M.length>2?M[2]%360*tt:0,k()):[a*an,l*an,u*an]},_.angle=function(M){return arguments.length?(f=M%360*tt,k()):f*an},_.reflectX=function(M){return arguments.length?(d=M?-1:1,k()):d<0},_.reflectY=function(M){return arguments.length?(h=M?-1:1,k()):h<0},_.precision=function(M){return arguments.length?(S=O$(E,w=M*M),D()):_r(w)},_.fitExtent=function(M,$){return lb(_,M,$)},_.fitSize=function(M,$){return wC(_,M,$)},_.fitWidth=function(M,$){return EC(_,M,$)},_.fitHeight=function(M,$){return SC(_,M,$)};function k(){var M=_$(n,0,0,d,h,f).apply(null,t(o,s)),$=_$(n,r-M[0],i-M[1],d,h,f);return c=O8(a,l,u),E=kE(t,$),O=kE(c,E),S=O$(E,w),D()}function D(){return A=C=null,_}return function(){return t=e.apply(this,arguments),_.invert=t.invert&&T,k()}}function OC(e){var t=0,n=et/3,r=B8(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*tt,n=o[1]*tt):[t*an,n*an]},i}function Iie(e){var t=Ne(e);function n(r,i){return[r*t,ke(i)/t]}return n.invert=function(r,i){return[r/t,Vr(i*t)]},n}function jie(e,t){var n=ke(e),r=(n+ke(t))/2;if(gt(r)<$e)return Iie(e);var i=1+n*(2*r-n),o=_r(i)/r;function s(a,l){var u=_r(i-2*r*ke(l))/r;return[u*ke(a*=r),o-u*Ne(a)]}return s.invert=function(a,l){var u=o-l,c=Pi(a,gt(u))*Ti(u);return u*r<0&&(c-=et*Ti(a)*Ti(u)),[c/r,Vr((i-(a*a+u*u)*r*r)/(2*r))]},s}function cv(){return OC(jie).scale(155.424).center([0,33.6442])}function U8(){return cv().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Lie(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function zie(){var e,t,n=U8(),r,i=cv().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=cv().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(d,h){l=[d,h]}};function c(d){var h=d[0],g=d[1];return l=null,r.point(h,g),l||(o.point(h,g),l)||(a.point(h,g),l)}c.invert=function(d){var h=n.scale(),g=n.translate(),p=(d[0]-g[0])/h,m=(d[1]-g[1])/h;return(m>=.12&&m<.234&&p>=-.425&&p<-.214?i:m>=.166&&m<.234&&p>=-.214&&p<-.115?s:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=Lie([n.stream(t=d),i.stream(d),s.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),s.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),s.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),g=+d[0],p=+d[1];return r=n.translate(d).clipExtent([[g-.455*h,p-.238*h],[g+.455*h,p+.238*h]]).stream(u),o=i.translate([g-.307*h,p+.201*h]).clipExtent([[g-.425*h+$e,p+.12*h+$e],[g-.214*h-$e,p+.234*h-$e]]).stream(u),a=s.translate([g-.205*h,p+.212*h]).clipExtent([[g-.214*h+$e,p+.166*h+$e],[g-.115*h-$e,p+.234*h-$e]]).stream(u),f()},c.fitExtent=function(d,h){return lb(c,d,h)},c.fitSize=function(d,h){return wC(c,d,h)},c.fitWidth=function(d,h){return EC(c,d,h)},c.fitHeight=function(d,h){return SC(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function H8(e){return function(t,n){var r=Ne(t),i=Ne(n),o=e(r*i);return o===1/0?[2,0]:[o*i*ke(t),o*ke(n)]}}function Up(e){return function(t,n){var r=_r(t*t+n*n),i=e(r),o=ke(i),s=Ne(i);return[Pi(t*o,r*s),Vr(r&&n*o/r)]}}var W8=H8(function(e){return _r(2/(1+e))});W8.invert=Up(function(e){return 2*Vr(e/2)});function Bie(){return ys(W8).scale(124.75).clipAngle(180-.001)}var G8=H8(function(e){return(e=h8(e))&&e/ke(e)});G8.invert=Up(function(e){return e});function Uie(){return ys(G8).scale(79.4188).clipAngle(180-.001)}function ub(e,t){return[e,Gy(vC((rn+t)/2))]}ub.invert=function(e,t){return[e,2*$d(d8(t))-rn]};function Hie(){return V8(ub).scale(961/Or)}function V8(e){var t=ys(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,l,u;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?s=a=l=u=null:(s=+f[0][0],a=+f[0][1],l=+f[1][0],u=+f[1][1]),c()):s==null?null:[[s,a],[l,u]]};function c(){var f=et*r(),d=t(uie(t.rotate()).invert([0,0]));return o(s==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===ub?[[Math.max(d[0]-f,s),a],[Math.min(d[0]+f,l),u]]:[[s,Math.max(d[1]-f,a)],[l,Math.min(d[1]+f,u)]])}return c()}function Wm(e){return vC((rn+e)/2)}function Wie(e,t){var n=Ne(e),r=e===t?ke(e):Gy(n/Ne(t))/Gy(Wm(t)/Wm(e)),i=n*Qx(Wm(e),r)/r;if(!r)return ub;function o(s,a){i>0?a<-rn+$e&&(a=-rn+$e):a>rn-$e&&(a=rn-$e);var l=i/Qx(Wm(a),r);return[l*ke(r*s),i-l*Ne(r*s)]}return o.invert=function(s,a){var l=i-a,u=Ti(r)*_r(s*s+l*l),c=Pi(s,gt(l))*Ti(l);return l*r<0&&(c-=et*Ti(s)*Ti(l)),[c/r,2*$d(Qx(i/u,1/r))-rn]},o}function Gie(){return OC(Wie).scale(109.5).parallels([30,30])}function fv(e,t){return[e,t]}fv.invert=fv;function Vie(){return ys(fv).scale(152.63)}function Yie(e,t){var n=Ne(e),r=e===t?ke(e):(n-Ne(t))/(t-e),i=n/r+e;if(gt(r)<$e)return fv;function o(s,a){var l=i-a,u=r*s;return[l*ke(u),i-l*Ne(u)]}return o.invert=function(s,a){var l=i-a,u=Pi(s,gt(l))*Ti(l);return l*r<0&&(u-=et*Ti(s)*Ti(l)),[u/r,i-Ti(r)*_r(s*s+l*l)]},o}function Xie(){return OC(Yie).scale(131.154).center([0,13.9389])}var fg=1.340264,dg=-.081106,hg=893e-6,gg=.003796,dv=_r(3)/2,qie=12;function Y8(e,t){var n=Vr(dv*ke(t)),r=n*n,i=r*r*r;return[e*Ne(n)/(dv*(fg+3*dg*r+i*(7*hg+9*gg*r))),n*(fg+dg*r+i*(hg+gg*r))]}Y8.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,s,a,l;o<qie&&(a=n*(fg+dg*r+i*(hg+gg*r))-t,l=fg+3*dg*r+i*(7*hg+9*gg*r),n-=s=a/l,r=n*n,i=r*r*r,!(gt(s)<Hy));++o);return[dv*e*(fg+3*dg*r+i*(7*hg+9*gg*r))/Ne(n),Vr(ke(n)/dv)]};function Kie(){return ys(Y8).scale(177.158)}function X8(e,t){var n=Ne(t),r=Ne(e)*n;return[n*ke(e)/r,ke(t)/r]}X8.invert=Up($d);function Jie(){return ys(X8).scale(144.049).clipAngle(60)}function Zie(){var e=1,t=0,n=0,r=1,i=1,o=0,s,a,l=null,u,c,f,d=1,h=1,g=ab({point:function(x,w){var S=b([x,w]);this.stream.point(S[0],S[1])}}),p=Vg,m,y;function v(){return d=e*r,h=e*i,m=y=null,b}function b(x){var w=x[0]*d,S=x[1]*h;if(o){var E=S*s-w*a;w=w*s+S*a,S=E}return[w+t,S+n]}return b.invert=function(x){var w=x[0]-t,S=x[1]-n;if(o){var E=S*s+w*a;w=w*s-S*a,S=E}return[w/d,S/h]},b.stream=function(x){return m&&y===x?m:m=g(p(y=x))},b.postclip=function(x){return arguments.length?(p=x,l=u=c=f=null,v()):p},b.clipExtent=function(x){return arguments.length?(p=x==null?(l=u=c=f=null,Vg):T8(l=+x[0][0],u=+x[0][1],c=+x[1][0],f=+x[1][1]),v()):l==null?null:[[l,u],[c,f]]},b.scale=function(x){return arguments.length?(e=+x,v()):e},b.translate=function(x){return arguments.length?(t=+x[0],n=+x[1],v()):[t,n]},b.angle=function(x){return arguments.length?(o=x%360*tt,a=ke(o),s=Ne(o),v()):o*an},b.reflectX=function(x){return arguments.length?(r=x?-1:1,v()):r<0},b.reflectY=function(x){return arguments.length?(i=x?-1:1,v()):i<0},b.fitExtent=function(x,w){return lb(b,x,w)},b.fitSize=function(x,w){return wC(b,x,w)},b.fitWidth=function(x,w){return EC(b,x,w)},b.fitHeight=function(x,w){return SC(b,x,w)},b}function q8(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}q8.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,s=o*o;n-=i=(n*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-t)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(gt(i)>$e&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function Qie(){return ys(q8).scale(175.295)}function K8(e,t){return[Ne(t)*ke(e),ke(t)]}K8.invert=Up(Vr);function eoe(){return ys(K8).scale(249.5).clipAngle(90+$e)}function J8(e,t){var n=Ne(t),r=1+Ne(e)*n;return[n*ke(e)/r,ke(t)/r]}J8.invert=Up(function(e){return 2*$d(e)});function toe(){return ys(J8).scale(250).clipAngle(142)}function Z8(e,t){return[Gy(vC((rn+t)/2)),-e]}Z8.invert=function(e,t){return[-t,2*$d(d8(e))-rn]};function noe(){var e=V8(Z8),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var roe=Math.abs,zE=Math.cos,hv=Math.sin,ioe=1e-6,Q8=Math.PI,BE=Q8/2,A$=ooe(2);function C$(e){return e>1?BE:e<-1?-BE:Math.asin(e)}function ooe(e){return e>0?Math.sqrt(e):0}function soe(e,t){var n=e*hv(t),r=30,i;do t-=i=(t+hv(t)-n)/(1+zE(t));while(roe(i)>ioe&&--r>0);return t/2}function aoe(e,t,n){function r(i,o){return[e*i*zE(o=soe(n,o)),t*hv(o)]}return r.invert=function(i,o){return o=C$(o/t),[i/(e*zE(o)),C$((2*o+hv(2*o))/n)]},r}var loe=aoe(A$/BE,A$,Q8);function uoe(){return ys(loe).scale(169.529)}const coe=z8(),UE=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function foe(e,t){return function n(){const r=t();return r.type=e,r.path=z8().projection(r),r.copy=r.copy||function(){const i=n();return UE.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},r}}function _C(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(gv[e]=foe(e,t),this):gv[e]||null}function e7(e){return e&&e.path||coe}const gv={albers:U8,albersusa:zie,azimuthalequalarea:Bie,azimuthalequidistant:Uie,conicconformal:Gie,conicequalarea:cv,conicequidistant:Xie,equalEarth:Kie,equirectangular:Vie,gnomonic:Jie,identity:Zie,mercator:Hie,mollweide:uoe,naturalEarth1:Qie,orthographic:eoe,stereographic:toe,transversemercator:noe};for(const e in gv)_C(e,gv[e]);function doe(){}const Cs=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function t7(){var e=1,t=1,n=a;function r(l,u){return u.map(c=>i(l,c))}function i(l,u){var c=[],f=[];return o(l,u,d=>{n(d,l,u),hoe(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,g=c.length,p;h<g;++h)if(goe((p=c[h])[0],d)!==-1){p.push(d);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function o(l,u,c){var f=new Array,d=new Array,h,g,p,m,y,v;for(h=g=-1,m=l[0]>=u,Cs[m<<1].forEach(b);++h<e-1;)p=m,m=l[h+1]>=u,Cs[p|m<<1].forEach(b);for(Cs[m<<0].forEach(b);++g<t-1;){for(h=-1,m=l[g*e+e]>=u,y=l[g*e]>=u,Cs[m<<1|y<<2].forEach(b);++h<e-1;)p=m,m=l[g*e+e+h+1]>=u,v=y,y=l[g*e+h+1]>=u,Cs[p|m<<1|y<<2|v<<3].forEach(b);Cs[m|y<<3].forEach(b)}for(h=-1,y=l[g*e]>=u,Cs[y<<2].forEach(b);++h<e-1;)v=y,y=l[g*e+h+1]>=u,Cs[y<<2|v<<3].forEach(b);Cs[y<<3].forEach(b);function b(x){var w=[x[0][0]+h,x[0][1]+g],S=[x[1][0]+h,x[1][1]+g],E=s(w),O=s(S),A,C;(A=d[E])?(C=f[O])?(delete d[A.end],delete f[C.start],A===C?(A.ring.push(S),c(A.ring)):f[A.start]=d[C.end]={start:A.start,end:C.end,ring:A.ring.concat(C.ring)}):(delete d[A.end],A.ring.push(S),d[A.end=O]=A):(A=f[O])?(C=d[E])?(delete f[A.start],delete d[C.end],A===C?(A.ring.push(S),c(A.ring)):f[C.start]=d[A.end]={start:C.start,end:A.end,ring:C.ring.concat(A.ring)}):(delete f[A.start],A.ring.unshift(w),f[A.start=E]=A):f[E]=d[O]={start:E,end:O,ring:[w,S]}}}function s(l){return l[0]*2+l[1]*(e+1)*4}function a(l,u,c){l.forEach(f=>{var d=f[0],h=f[1],g=d|0,p=h|0,m,y=u[p*e+g];d>0&&d<e&&g===d&&(m=u[p*e+g-1],f[0]=d+(c-m)/(y-m)-.5),h>0&&h<t&&p===h&&(m=u[(p-1)*e+g],f[1]=h+(c-m)/(y-m)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||Y("invalid size"),e=u,t=c,r},r.smooth=function(l){return arguments.length?(n=l?a:doe,r):n===a},r}function hoe(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function goe(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=poe(e,t[n]))return i;return 0}function poe(e,t){for(var n=t[0],r=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var l=e[o],u=l[0],c=l[1],f=e[a],d=f[0],h=f[1];if(moe(l,f,t))return 0;c>r!=h>r&&n<(d-u)*(r-c)/(h-c)+u&&(i=-i)}return i}function moe(e,t,n){var r;return yoe(e,t,n)&&voe(e[r=+(e[0]===t[0])],n[r],t[r])}function yoe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function voe(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function n7(e,t,n){return function(r){var i=is(r),o=n?Math.min(i[0],0):i[0],s=i[1],a=s-o,l=t?hl(o,s,e):a/(e+1);return ui(o+l,s,l)}}function AC(e){U.call(this,null,e)}AC.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};re(AC,U,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||ar,o=t7().smooth(e.smooth!==!1),s=e.thresholds||boe(r,i,e),a=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const c=i(u),f=o.size([c.width,c.height])(c.values,X(s)?s:s(c.values));xoe(f,c,u,e),f.forEach(d=>{l.push(T1(u,Et(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function boe(e,t,n){const r=n7(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>ju(t(i).values)))}function xoe(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(Ze(i)&&(i=i(n,r)),Ze(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const s=(kt(i)?i:i[0])||1,a=(kt(i)?i:i[1])||1,l=o&&o[0]||0,u=o&&o[1]||0;e.forEach(r7(t,s,a,l,u))}function r7(e,t,n,r,i){const o=e.x1||0,s=e.y1||0,a=t*n<0;function l(f){f.forEach(u)}function u(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-o)*t+r,f[1]=(f[1]-s)*n+i}return function(f){return f.coordinates.forEach(l),f}}function T$(e,t,n){const r=e>=0?e:y_(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function i2(e){return Ze(e)?e:lr(+e)}function i7(){var e=l=>l[0],t=l=>l[1],n=wd,r=[-1,-1],i=960,o=500,s=2;function a(l,u){const c=T$(r[0],l,e)>>s,f=T$(r[1],l,t)>>s,d=c?c+2:0,h=f?f+2:0,g=2*d+(i>>s),p=2*h+(o>>s),m=new Float32Array(g*p),y=new Float32Array(g*p);let v=m;l.forEach(x=>{const w=d+(+e(x)>>s),S=h+(+t(x)>>s);w>=0&&w<g&&S>=0&&S<p&&(m[w+S*g]+=+n(x))}),c>0&&f>0?(Wc(g,p,m,y,c),Gc(g,p,y,m,f),Wc(g,p,m,y,c),Gc(g,p,y,m,f),Wc(g,p,m,y,c),Gc(g,p,y,m,f)):c>0?(Wc(g,p,m,y,c),Wc(g,p,y,m,c),Wc(g,p,m,y,c),v=y):f>0&&(Gc(g,p,m,y,f),Gc(g,p,y,m,f),Gc(g,p,m,y,f),v=y);const b=u?Math.pow(2,-2*s):1/Ej(v);for(let x=0,w=g*p;x<w;++x)v[x]*=b;return{values:v,scale:1<<s,width:g,height:p,x1:d,y1:h,x2:d+(i>>s),y2:h+(o>>s)}}return a.x=function(l){return arguments.length?(e=i2(l),a):e},a.y=function(l){return arguments.length?(t=i2(l),a):t},a.weight=function(l){return arguments.length?(n=i2(l),a):n},a.size=function(l){if(!arguments.length)return[i,o];var u=+l[0],c=+l[1];return u>=0&&c>=0||Y("invalid size"),i=u,o=c,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||Y("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),a):1<<s},a.bandwidth=function(l){return arguments.length?(l=pe(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&Y("invalid bandwidth"),r=l,a):r},a}function Wc(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<t;++s)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[a+s*e]),a>=i&&(a>=o&&(l-=n[a-o+s*e]),r[a-i+s*e]=l/Math.min(a+1,e-1+o-a,o))}function Gc(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<e;++s)for(let a=0,l=0;a<t+i;++a)a<t&&(l+=n[s+a*e]),a>=i&&(a>=o&&(l-=n[s+(a-o)*e]),r[s+(a-i)*e]=l/Math.min(a+1,t-1+o-a,o))}function CC(e){U.call(this,null,e)}CC.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const woe=["x","y","weight","size","cellSize","bandwidth"];function o7(e,t){return woe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}re(CC,U,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=Eoe(r,e.groupby),o=(e.groupby||[]).map(on),s=o7(i7(),e),a=e.as||"grid",l=[];function u(c,f){for(let d=0;d<o.length;++d)c[o[d]]=f[d];return c}return l=i.map(c=>Et(u({[a]:s(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Eoe(e,t){var n=[],r=c=>c(a),i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function TC(e){U.call(this,null,e)}TC.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};re(TC,U,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t7().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||n7(e.count||10,e.nice,!!i),s=e.size,a,l;return i||(i=t.materialize(t.SOURCE).source,a=o7(i7(),e)(i,!0),l=r7(a,a.scale||1,a.scale||1,0,0),s=[a.width,a.height],i=a.values),o=X(o)?o:o(i),i=r.size(s)(i,o),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Et),n}});const HE="Feature",kC="FeatureCollection",Soe="MultiPoint";function FC(e){U.call(this,null,e)}FC.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};re(FC,U,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],s=i&&i[1],a=e.geojson||!i&&ar,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(nr(a))||o&&t.modified(nr(o))||s&&t.modified(nr(s)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(l,c=>n.push(a(c))),o&&s&&(t.visit(l,c=>{var f=o(c),d=s(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:HE,geometry:{type:Soe,coordinates:r}})),this.value={type:kC,features:n}}});function DC(e){U.call(this,null,e)}DC.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};re(DC,U,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||ar,o=e.as||"path",s=n.SOURCE;!r||e.modified()?(this.value=r=e7(e.projection),n.materialize().reflow()):s=i===ar||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=Ooe(r,e.pointRadius);return n.visit(s,l=>l[o]=r(i(l))),r.pointRadius(a),n.modifies(o)}});function Ooe(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function MC(e){U.call(this,null,e)}MC.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};re(MC,U,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1],l;function u(c){const f=n([r(c),i(c)]);f?(c[s]=f[0],c[a]=f[1]):(c[s]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(o)}});function $C(e){U.call(this,null,e)}$C.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};re($C,U,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=_oe(e7(e.projection),e.field||Hr("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[i]=r),n.modifies(i)}});function _oe(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(i));return e.pointRadius(o),s};return r.context=i=>(e.context(i),r),r}function NC(e){U.call(this,[],e),this.generator=bie()}NC.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};re(NC,U,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)Ze(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(_5(n[0],i)):t.add.push(Et(i)),n[0]=i,t}});function RC(e){U.call(this,null,e)}RC.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};re(RC,U,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||ar,o=Coe(e.opacity,e),s=Aoe(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?ju(n.map(u=>ju(i(u).values))):0};return n.forEach(u=>{const c=i(u),f=Je({},u,l);r||(f.$max=ju(c.values||[])),u[a]=Toe(c,f,s.dep?s:lr(s(f)),o.dep?o:lr(o(f)))}),t.reflow(!0).modifies(a)}});function Aoe(e,t){let n;return Ze(e)?(n=r=>vl(e(r,t)),n.dep=s7(e)):n=lr(vl(e||"#888")),n}function Coe(e,t){let n;return Ze(e)?(n=r=>e(r,t),n.dep=s7(e)):e?n=lr(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function s7(e){if(!Ze(e))return!1;const t=xo(nr(e));return t.$x||t.$y||t.$value||t.$max}function Toe(e,t,n,r){const i=e.width,o=e.height,s=e.x1||0,a=e.y1||0,l=e.x2||i,u=e.y2||o,c=e.values,f=c?m=>c[m]:Ma,d=el(l-s,u-a),h=d.getContext("2d"),g=h.getImageData(0,0,l-s,u-a),p=g.data;for(let m=a,y=0;m<u;++m){t.$y=m-a;for(let v=s,b=m*i;v<l;++v,y+=4){t.$x=v-s,t.$value=f(v+b);const x=n(t);p[y+0]=x.r,p[y+1]=x.g,p[y+2]=x.b,p[y+3]=~~(255*r(t))}}return h.putImageData(g,0,0),d}function a7(e){U.call(this,null,e),this.modified(!0)}re(a7,U,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Foe(e.type),UE.forEach(r=>{e[r]!=null&&k$(n,r,e[r])})):UE.forEach(r=>{e.modified(r)&&k$(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&koe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function koe(e,t){const n=Doe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Foe(e){const t=_C((e||"mercator").toLowerCase());return t||Y("Unrecognized projection type: "+e),t()}function k$(e,t,n){Ze(e[t])&&e[t](n)}function Doe(e){return e=pe(e),e.length===1?e[0]:{type:kC,features:e.reduce((t,n)=>t.concat(Moe(n)),[])}}function Moe(e){return e.type===kC?e.features:pe(e).filter(t=>t!=null).map(t=>t.type===HE?t:{type:HE,geometry:t})}const $oe=Object.freeze(Object.defineProperty({__proto__:null,contour:TC,geojson:FC,geopath:DC,geopoint:MC,geoshape:$C,graticule:NC,heatmap:RC,isocontour:AC,kde2d:CC,projection:a7},Symbol.toStringTag,{value:"Module"}));function Noe(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,s=n.length,a,l=0,u=0;for(o=0;o<s;++o)a=n[o],l+=a.x,u+=a.y;for(l=(l/s-e)*r,u=(u/s-t)*r,o=0;o<s;++o)a=n[o],a.x-=l,a.y-=u}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function Roe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return l7(this.cover(t,n),t,n,e)}function l7(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,s={data:r},a=e._x0,l=e._y0,u=e._x1,c=e._y1,f,d,h,g,p,m,y,v;if(!o)return e._root=s,e;for(;o.length;)if((p=t>=(f=(a+u)/2))?a=f:u=f,(m=n>=(d=(l+c)/2))?l=d:c=d,i=o,!(o=o[y=m<<1|p]))return i[y]=s,e;if(h=+e._x.call(null,o.data),g=+e._y.call(null,o.data),t===h&&n===g)return s.next=o,i?i[y]=s:e._root=s,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(p=t>=(f=(a+u)/2))?a=f:u=f,(m=n>=(d=(l+c)/2))?l=d:c=d;while((y=m<<1|p)===(v=(g>=d)<<1|h>=f));return i[v]=o,i[y]=s,e}function Poe(e){var t,n,r=e.length,i,o,s=new Array(r),a=new Array(r),l=1/0,u=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,a[n]=o,i<l&&(l=i),i>c&&(c=i),o<u&&(u=o),o>f&&(f=o));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),n=0;n<r;++n)l7(this,s[n],a[n],e[n]);return this}function Ioe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s=i-n||1,a=this._root,l,u;n>e||e>=i||r>t||t>=o;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=a,a=l,s*=2,u){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function joe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Loe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function xr(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function zoe(e,t,n){var r,i=this._x0,o=this._y0,s,a,l,u,c=this._x1,f=this._y1,d=[],h=this._root,g,p;for(h&&d.push(new xr(h,i,o,c,f)),n==null?n=1/0:(i=e-n,o=t-n,c=e+n,f=t+n,n*=n);g=d.pop();)if(!(!(h=g.node)||(s=g.x0)>c||(a=g.y0)>f||(l=g.x1)<i||(u=g.y1)<o))if(h.length){var m=(s+l)/2,y=(a+u)/2;d.push(new xr(h[3],m,y,l,u),new xr(h[2],s,y,m,u),new xr(h[1],m,a,l,y),new xr(h[0],s,a,m,y)),(p=(t>=y)<<1|e>=m)&&(g=d[d.length-1],d[d.length-1]=d[d.length-1-p],d[d.length-1-p]=g)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),x=v*v+b*b;if(x<n){var w=Math.sqrt(n=x);i=e-w,o=t-w,c=e+w,f=t+w,r=h.data}}return r}function Boe(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,s=this._x0,a=this._y0,l=this._x1,u=this._y1,c,f,d,h,g,p,m,y;if(!n)return this;if(n.length)for(;;){if((g=c>=(d=(s+l)/2))?s=d:l=d,(p=f>=(h=(a+u)/2))?a=h:u=h,t=n,!(n=n[m=p<<1|g]))return this;if(!n.length)break;(t[m+1&3]||t[m+2&3]||t[m+3&3])&&(r=t,y=m)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[m]=o:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=o,this)}function Uoe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Hoe(){return this._root}function Woe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Goe(e){var t=[],n,r=this._root,i,o,s,a,l;for(r&&t.push(new xr(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,s=n.y0,a=n.x1,l=n.y1)&&r.length){var u=(o+a)/2,c=(s+l)/2;(i=r[3])&&t.push(new xr(i,u,c,a,l)),(i=r[2])&&t.push(new xr(i,o,c,u,l)),(i=r[1])&&t.push(new xr(i,u,s,a,c)),(i=r[0])&&t.push(new xr(i,o,s,u,c))}return this}function Voe(e){var t=[],n=[],r;for(this._root&&t.push(new xr(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,l=r.x1,u=r.y1,c=(s+l)/2,f=(a+u)/2;(o=i[0])&&t.push(new xr(o,s,a,c,f)),(o=i[1])&&t.push(new xr(o,c,a,l,f)),(o=i[2])&&t.push(new xr(o,s,f,c,u)),(o=i[3])&&t.push(new xr(o,c,f,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Yoe(e){return e[0]}function Xoe(e){return arguments.length?(this._x=e,this):this._x}function qoe(e){return e[1]}function Koe(e){return arguments.length?(this._y=e,this):this._y}function PC(e,t,n){var r=new IC(t==null?Yoe:t,n==null?qoe:n,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function IC(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function F$(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Ar=PC.prototype=IC.prototype;Ar.copy=function(){var e=new IC(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=F$(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=F$(r));return e};Ar.add=Roe;Ar.addAll=Poe;Ar.cover=Ioe;Ar.data=joe;Ar.extent=Loe;Ar.find=zoe;Ar.remove=Boe;Ar.removeAll=Uoe;Ar.root=Hoe;Ar.size=Woe;Ar.visit=Goe;Ar.visitAfter=Voe;Ar.x=Xoe;Ar.y=Koe;function wr(e){return function(){return e}}function Ha(e){return(e()-.5)*1e-6}function Joe(e){return e.x+e.vx}function Zoe(e){return e.y+e.vy}function Qoe(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=wr(e==null?1:+e));function s(){for(var u,c=t.length,f,d,h,g,p,m,y=0;y<o;++y)for(f=PC(t,Joe,Zoe).visitAfter(a),u=0;u<c;++u)d=t[u],p=n[d.index],m=p*p,h=d.x+d.vx,g=d.y+d.vy,f.visit(v);function v(b,x,w,S,E){var O=b.data,A=b.r,C=p+A;if(O){if(O.index>d.index){var _=h-O.x-O.vx,T=g-O.y-O.vy,k=_*_+T*T;k<C*C&&(_===0&&(_=Ha(r),k+=_*_),T===0&&(T=Ha(r),k+=T*T),k=(C-(k=Math.sqrt(k)))/k*i,d.vx+=(_*=k)*(C=(A*=A)/(m+A)),d.vy+=(T*=k)*C,O.vx-=_*(C=1-C),O.vy-=T*C)}return}return x>h+C||S<h-C||w>g+C||E<g-C}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(!!t){var u,c=t.length,f;for(n=new Array(c),u=0;u<c;++u)f=t[u],n[f.index]=+e(f,u,t)}}return s.initialize=function(u,c){t=u,r=c,l()},s.iterations=function(u){return arguments.length?(o=+u,s):o},s.strength=function(u){return arguments.length?(i=+u,s):i},s.radius=function(u){return arguments.length?(e=typeof u=="function"?u:wr(+u),l(),s):e},s}function ese(e){return e.index}function D$(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function tse(e){var t=ese,n=f,r,i=wr(30),o,s,a,l,u,c=1;e==null&&(e=[]);function f(m){return 1/Math.min(a[m.source.index],a[m.target.index])}function d(m){for(var y=0,v=e.length;y<c;++y)for(var b=0,x,w,S,E,O,A,C;b<v;++b)x=e[b],w=x.source,S=x.target,E=S.x+S.vx-w.x-w.vx||Ha(u),O=S.y+S.vy-w.y-w.vy||Ha(u),A=Math.sqrt(E*E+O*O),A=(A-o[b])/A*m*r[b],E*=A,O*=A,S.vx-=E*(C=l[b]),S.vy-=O*C,w.vx+=E*(C=1-C),w.vy+=O*C}function h(){if(!!s){var m,y=s.length,v=e.length,b=new Map(s.map((w,S)=>[t(w,S,s),w])),x;for(m=0,a=new Array(y);m<v;++m)x=e[m],x.index=m,typeof x.source!="object"&&(x.source=D$(b,x.source)),typeof x.target!="object"&&(x.target=D$(b,x.target)),a[x.source.index]=(a[x.source.index]||0)+1,a[x.target.index]=(a[x.target.index]||0)+1;for(m=0,l=new Array(v);m<v;++m)x=e[m],l[m]=a[x.source.index]/(a[x.source.index]+a[x.target.index]);r=new Array(v),g(),o=new Array(v),p()}}function g(){if(!!s)for(var m=0,y=e.length;m<y;++m)r[m]=+n(e[m],m,e)}function p(){if(!!s)for(var m=0,y=e.length;m<y;++m)o[m]=+i(e[m],m,e)}return d.initialize=function(m,y){s=m,u=y,h()},d.links=function(m){return arguments.length?(e=m,h(),d):e},d.id=function(m){return arguments.length?(t=m,d):t},d.iterations=function(m){return arguments.length?(c=+m,d):c},d.strength=function(m){return arguments.length?(n=typeof m=="function"?m:wr(+m),g(),d):n},d.distance=function(m){return arguments.length?(i=typeof m=="function"?m:wr(+m),p(),d):i},d}var nse={value:()=>{}};function u7(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new P0(n)}function P0(e){this._=e}function rse(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}P0.prototype=u7.prototype={constructor:P0,on:function(e,t){var n=this._,r=rse(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=ise(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=M$(n[i],e.name,t);else if(t==null)for(i in n)n[i]=M$(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new P0(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function ise(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function M$(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=nse,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var td=0,zh=0,ah=0,c7=1e3,pv,Bh,mv=0,ic=0,cb=0,Xg=typeof performance=="object"&&performance.now?performance:Date,f7=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function jC(){return ic||(f7(ose),ic=Xg.now()+cb)}function ose(){ic=0}function yv(){this._call=this._time=this._next=null}yv.prototype=d7.prototype={constructor:yv,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?jC():+n)+(t==null?0:+t),!this._next&&Bh!==this&&(Bh?Bh._next=this:pv=this,Bh=this),this._call=e,this._time=n,WE()},stop:function(){this._call&&(this._call=null,this._time=1/0,WE())}};function d7(e,t,n){var r=new yv;return r.restart(e,t,n),r}function sse(){jC(),++td;for(var e=pv,t;e;)(t=ic-e._time)>=0&&e._call.call(void 0,t),e=e._next;--td}function $$(){ic=(mv=Xg.now())+cb,td=zh=0;try{sse()}finally{td=0,lse(),ic=0}}function ase(){var e=Xg.now(),t=e-mv;t>c7&&(cb-=t,mv=e)}function lse(){for(var e,t=pv,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:pv=n);Bh=e,WE(r)}function WE(e){if(!td){zh&&(zh=clearTimeout(zh));var t=e-ic;t>24?(e<1/0&&(zh=setTimeout($$,e-Xg.now()-cb)),ah&&(ah=clearInterval(ah))):(ah||(mv=Xg.now(),ah=setInterval(ase,c7)),td=1,f7($$))}}function use(e,t,n){var r=new yv,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,s,a){s=+s,a=a==null?jC():+a,r._restart(function l(u){u+=i,r._restart(l,i+=s,a),o(u)},s,a)},r.restart(e,t,n),r)}const cse=1664525,fse=1013904223,N$=4294967296;function dse(){let e=1;return()=>(e=(cse*e+fse)%N$)/N$}function hse(e){return e.x}function gse(e){return e.y}var pse=10,mse=Math.PI*(3-Math.sqrt(5));function yse(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,l=d7(f),u=u7("tick","end"),c=dse();e==null&&(e=[]);function f(){d(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function d(p){var m,y=e.length,v;p===void 0&&(p=1);for(var b=0;b<p;++b)for(n+=(o-n)*i,a.forEach(function(x){x(n)}),m=0;m<y;++m)v=e[m],v.fx==null?v.x+=v.vx*=s:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=s:(v.y=v.fy,v.vy=0);return t}function h(){for(var p=0,m=e.length,y;p<m;++p){if(y=e[p],y.index=p,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=pse*Math.sqrt(.5+p),b=p*mse;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function g(p){return p.initialize&&p.initialize(e,c),p}return h(),t={tick:d,restart:function(){return l.restart(f),t},stop:function(){return l.stop(),t},nodes:function(p){return arguments.length?(e=p,h(),a.forEach(g),t):e},alpha:function(p){return arguments.length?(n=+p,t):n},alphaMin:function(p){return arguments.length?(r=+p,t):r},alphaDecay:function(p){return arguments.length?(i=+p,t):+i},alphaTarget:function(p){return arguments.length?(o=+p,t):o},velocityDecay:function(p){return arguments.length?(s=1-p,t):1-s},randomSource:function(p){return arguments.length?(c=p,a.forEach(g),t):c},force:function(p,m){return arguments.length>1?(m==null?a.delete(p):a.set(p,g(m)),t):a.get(p)},find:function(p,m,y){var v=0,b=e.length,x,w,S,E,O;for(y==null?y=1/0:y*=y,v=0;v<b;++v)E=e[v],x=p-E.x,w=m-E.y,S=x*x+w*w,S<y&&(O=E,y=S);return O},on:function(p,m){return arguments.length>1?(u.on(p,m),t):u.on(p)}}}function vse(){var e,t,n,r,i=wr(-30),o,s=1,a=1/0,l=.81;function u(h){var g,p=e.length,m=PC(e,hse,gse).visitAfter(f);for(r=h,g=0;g<p;++g)t=e[g],m.visit(d)}function c(){if(!!e){var h,g=e.length,p;for(o=new Array(g),h=0;h<g;++h)p=e[h],o[p.index]=+i(p,h,e)}}function f(h){var g=0,p,m,y=0,v,b,x;if(h.length){for(v=b=x=0;x<4;++x)(p=h[x])&&(m=Math.abs(p.value))&&(g+=p.value,y+=m,v+=m*p.x,b+=m*p.y);h.x=v/y,h.y=b/y}else{p=h,p.x=p.data.x,p.y=p.data.y;do g+=o[p.data.index];while(p=p.next)}h.value=g}function d(h,g,p,m){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=m-g,x=y*y+v*v;if(b*b/l<x)return x<a&&(y===0&&(y=Ha(n),x+=y*y),v===0&&(v=Ha(n),x+=v*v),x<s&&(x=Math.sqrt(s*x)),t.vx+=y*h.value*r/x,t.vy+=v*h.value*r/x),!0;if(h.length||x>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Ha(n),x+=y*y),v===0&&(v=Ha(n),x+=v*v),x<s&&(x=Math.sqrt(s*x)));do h.data!==t&&(b=o[h.data.index]*r/x,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return u.initialize=function(h,g){e=h,n=g,c()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:wr(+h),c(),u):i},u.distanceMin=function(h){return arguments.length?(s=h*h,u):Math.sqrt(s)},u.distanceMax=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function bse(e){var t=wr(.1),n,r,i;typeof e!="function"&&(e=wr(e==null?0:+e));function o(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(i[l]-c.x)*r[l]*a}function s(){if(!!n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:wr(+a),s(),o):t},o.x=function(a){return arguments.length?(e=typeof a=="function"?a:wr(+a),s(),o):e},o}function xse(e){var t=wr(.1),n,r,i;typeof e!="function"&&(e=wr(e==null?0:+e));function o(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(i[l]-c.y)*r[l]*a}function s(){if(!!n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:wr(+a),s(),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:wr(+a),s(),o):e},o}const R$={center:Noe,collide:Qoe,nbody:vse,link:tse,x:bse,y:xse},Uh="forces",GE=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],wse=["static","iterations"],h7=["x","y","vx","vy"];function LC(e){U.call(this,null,e)}LC.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:h7}]};re(LC,U,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(GE),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&g7(n,e,0,t)):(this.value=n=Sse(t.source,e),n.on("tick",Ese(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(wse)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,l=0,u=a.length,c;l<u;++l)if(c=a[l],!(c.name!==Uh||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,o=r.length,s;i<o;++i)if(r[i].name==="links"&&(s=r[i].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(h7)}});function Ese(e,t){return()=>e.touch(t).run()}function Sse(e,t){const n=yse(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),g7(n,t,!0).on("end",()=>o=!0)}function g7(e,t,n,r){var i=pe(t.forces),o,s,a,l;for(o=0,s=GE.length;o<s;++o)a=GE[o],a!==Uh&&t.modified(a)&&e[a](t[a]);for(o=0,s=i.length;o<s;++o)l=Uh+o,a=n||t.modified(Uh,o)?_se(i[o]):r&&Ose(i[o],r)?e.force(l):null,a&&e.force(l,a);for(s=e.numForces||0;o<s;++o)e.force(Uh+o,null);return e.numForces=i.length,e}function Ose(e,t){var n,r;for(n in e)if(Ze(r=e[n])&&t.modified(nr(r)))return 1;return 0}function _se(e){var t,n;Ae(R$,e.force)||Y("Unrecognized force: "+e.force),t=R$[e.force]();for(n in e)Ze(t[n])&&Ase(t[n],e[n],e);return t}function Ase(e,t,n){e(Ze(t)?r=>t(r,n):t)}const Cse=Object.freeze(Object.defineProperty({__proto__:null,force:LC},Symbol.toStringTag,{value:"Module"}));function Tse(e,t){return e.parent===t.parent?1:2}function kse(e){return e.reduce(Fse,0)/e.length}function Fse(e,t){return e+t.x}function Dse(e){return 1+e.reduce(Mse,0)}function Mse(e,t){return Math.max(e,t.y)}function $se(e){for(var t;t=e.children;)e=t[0];return e}function Nse(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Rse(){var e=Tse,t=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(d){var h=d.children;h?(d.x=kse(h),d.y=Dse(h)):(d.x=s?a+=e(d,s):0,d.y=0,s=d)});var l=$se(o),u=Nse(o),c=l.x-e(l,u)/2,f=u.x+e(u,l)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function Pse(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Ise(){return this.eachAfter(Pse)}function jse(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Lse(e,t){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function zse(e,t){for(var n=this,r=[n],i=[],o,s,a,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function Bse(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Use(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Hse(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Wse(e){for(var t=this,n=Gse(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Gse(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Vse(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Yse(){return Array.from(this)}function Xse(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function qse(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Kse(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function zC(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Qse)):t===void 0&&(t=Zse);for(var n=new nd(e),r,i=[n],o,s,a,l;r=i.pop();)if((s=t(r.data))&&(l=(s=Array.from(s)).length))for(r.children=s,a=l-1;a>=0;--a)i.push(o=s[a]=new nd(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(p7)}function Jse(){return zC(this).eachBefore(eae)}function Zse(e){return e.children}function Qse(e){return Array.isArray(e)?e[1]:null}function eae(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function p7(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function nd(e){this.data=e,this.depth=this.height=0,this.parent=null}nd.prototype=zC.prototype={constructor:nd,count:Ise,each:jse,eachAfter:zse,eachBefore:Lse,find:Bse,sum:Use,sort:Hse,path:Wse,ancestors:Vse,descendants:Yse,leaves:Xse,links:qse,copy:Jse,[Symbol.iterator]:Kse};function I0(e){return e==null?null:m7(e)}function m7(e){if(typeof e!="function")throw new Error;return e}function Eu(){return 0}function of(e){return function(){return e}}const tae=1664525,nae=1013904223,P$=4294967296;function rae(){let e=1;return()=>(e=(tae*e+nae)%P$)/P$}function iae(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function oae(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function sae(e,t){for(var n=0,r=(e=oae(Array.from(e),t)).length,i=[],o,s;n<r;)o=e[n],s&&y7(s,o)?++n:(s=lae(i=aae(i,o)),n=0);return s}function aae(e,t){var n,r;if(o2(t,e))return[t];for(n=0;n<e.length;++n)if(Gm(t,e[n])&&o2(Hh(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(Gm(Hh(e[n],e[r]),t)&&Gm(Hh(e[n],t),e[r])&&Gm(Hh(e[r],t),e[n])&&o2(v7(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function Gm(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function y7(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function o2(e,t){for(var n=0;n<t.length;++n)if(!y7(e,t[n]))return!1;return!0}function lae(e){switch(e.length){case 1:return uae(e[0]);case 2:return Hh(e[0],e[1]);case 3:return v7(e[0],e[1],e[2])}}function uae(e){return{x:e.x,y:e.y,r:e.r}}function Hh(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,s=t.y,a=t.r,l=o-n,u=s-r,c=a-i,f=Math.sqrt(l*l+u*u);return{x:(n+o+l/f*c)/2,y:(r+s+u/f*c)/2,r:(f+i+a)/2}}function v7(e,t,n){var r=e.x,i=e.y,o=e.r,s=t.x,a=t.y,l=t.r,u=n.x,c=n.y,f=n.r,d=r-s,h=r-u,g=i-a,p=i-c,m=l-o,y=f-o,v=r*r+i*i-o*o,b=v-s*s-a*a+l*l,x=v-u*u-c*c+f*f,w=h*g-d*p,S=(g*x-p*b)/(w*2)-r,E=(p*m-g*y)/w,O=(h*b-d*x)/(w*2)-i,A=(d*y-h*m)/w,C=E*E+A*A-1,_=2*(o+S*E+O*A),T=S*S+O*O-o*o,k=-(Math.abs(C)>1e-6?(_+Math.sqrt(_*_-4*C*T))/(2*C):T/_);return{x:r+S+E*k,y:i+O+A*k,r:k}}function I$(e,t,n){var r=e.x-t.x,i,o,s=e.y-t.y,a,l,u=r*r+s*s;u?(o=t.r+n.r,o*=o,l=e.r+n.r,l*=l,o>l?(i=(u+l-o)/(2*u),a=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-a*s,n.y=e.y-i*s+a*r):(i=(u+o-l)/(2*u),a=Math.sqrt(Math.max(0,o/u-i*i)),n.x=t.x+i*r-a*s,n.y=t.y+i*s+a*r)):(n.x=t.x+n.r,n.y=t.y)}function j$(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function L$(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function Vm(e){this._=e,this.next=null,this.previous=null}function cae(e,t){if(!(o=(e=iae(e)).length))return 0;var n,r,i,o,s,a,l,u,c,f,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;I$(r,n,i=e[2]),n=new Vm(n),r=new Vm(r),i=new Vm(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<o;++l){I$(n._,r._,i=e[l]),i=new Vm(i),u=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(j$(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}f+=u._.r,u=u.next}else{if(j$(c._,i._)){n=c,n.next=r,r.previous=n,--l;continue e}d+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=L$(n);(i=i.next)!==r;)(a=L$(i))<s&&(n=i,s=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=sae(n,t),l=0;l<o;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function fae(e){return Math.sqrt(e.value)}function dae(){var e=null,t=1,n=1,r=Eu;function i(o){const s=rae();return o.x=t/2,o.y=n/2,e?o.eachBefore(z$(e)).eachAfter(s2(r,.5,s)).eachBefore(B$(1)):o.eachBefore(z$(fae)).eachAfter(s2(Eu,1,s)).eachAfter(s2(r,o.r/Math.min(t,n),s)).eachBefore(B$(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=I0(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:of(+o),i):r},i}function z$(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function s2(e,t,n){return function(r){if(i=r.children){var i,o,s=i.length,a=e(r)*t||0,l;if(a)for(o=0;o<s;++o)i[o].r+=a;if(l=cae(i,n),a)for(o=0;o<s;++o)i[o].r-=a;r.r=l+a}}}function B$(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function b7(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Hp(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(r-t)/e.value;++a<l;)s=o[a],s.y0=n,s.y1=i,s.x0=t,s.x1=t+=s.value*u}function hae(){var e=1,t=1,n=0,r=!1;function i(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(o(t,a)),r&&s.eachBefore(b7),s}function o(s,a){return function(l){l.children&&Hp(l,l.x0,s*(l.depth+1)/a,l.x1,s*(l.depth+2)/a);var u=l.x0,c=l.y0,f=l.x1-n,d=l.y1-n;f<u&&(u=f=(u+f)/2),d<c&&(c=d=(c+d)/2),l.x0=u,l.y0=c,l.x1=f,l.y1=d}}return i.round=function(s){return arguments.length?(r=!!s,i):r},i.size=function(s){return arguments.length?(e=+s[0],t=+s[1],i):[e,t]},i.padding=function(s){return arguments.length?(n=+s,i):n},i}var gae={depth:-1},U$={},a2={};function pae(e){return e.id}function mae(e){return e.parentId}function H$(){var e=pae,t=mae,n;function r(i){var o=Array.from(i),s=e,a=t,l,u,c,f,d,h,g,p,m=new Map;if(n!=null){const y=o.map((x,w)=>yae(n(x,w,i))),v=y.map(W$),b=new Set(y).add("");for(const x of v)b.has(x)||(b.add(x),y.push(x),v.push(W$(x)),o.push(a2));s=(x,w)=>y[w],a=(x,w)=>v[w]}for(c=0,l=o.length;c<l;++c)u=o[c],h=o[c]=new nd(u),(g=s(u,c,i))!=null&&(g+="")&&(p=h.id=g,m.set(p,m.has(p)?U$:h)),(g=a(u,c,i))!=null&&(g+="")&&(h.parent=g);for(c=0;c<l;++c)if(h=o[c],g=h.parent){if(d=m.get(g),!d)throw new Error("missing: "+g);if(d===U$)throw new Error("ambiguous: "+g);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===a2&&f.children.length===1;)f=f.children[0],--l;for(let y=o.length-1;y>=0&&(h=o[y],h.data===a2);--y)h.data=null}if(f.parent=gae,f.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(p7),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=I0(i),r):e},r.parentId=function(i){return arguments.length?(t=I0(i),r):t},r.path=function(i){return arguments.length?(n=I0(i),r):n},r}function yae(e){e=`${e}`;let t=e.length;return VE(e,t-1)&&!VE(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function W$(e){let t=e.length;if(t<2)return"";for(;--t>1&&!VE(e,t););return e.slice(0,t)}function VE(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function vae(e,t){return e.parent===t.parent?1:2}function l2(e){var t=e.children;return t?t[0]:e.t}function u2(e){var t=e.children;return t?t[t.length-1]:e.t}function bae(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function xae(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function wae(e,t,n){return e.a.parent===t.parent?e.a:n}function j0(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}j0.prototype=Object.create(nd.prototype);function Eae(e){for(var t=new j0(e,0),n,r=[t],i,o,s,a;n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=n.children[s]=new j0(o[s],s)),i.parent=n;return(t.parent=new j0(null,0)).children=[t],t}function Sae(){var e=vae,t=1,n=1,r=null;function i(u){var c=Eae(u);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(s),r)u.eachBefore(l);else{var f=u,d=u,h=u;u.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var g=f===d?1:e(f,d)/2,p=g-f.x,m=t/(d.x+g+p),y=n/(h.depth||1);u.eachBefore(function(v){v.x=(v.x+p)*m,v.y=v.depth*y})}return u}function o(u){var c=u.children,f=u.parent.children,d=u.i?f[u.i-1]:null;if(c){xae(u);var h=(c[0].z+c[c.length-1].z)/2;d?(u.z=d.z+e(u._,d._),u.m=u.z-h):u.z=h}else d&&(u.z=d.z+e(u._,d._));u.parent.A=a(u,d,u.parent.A||f[0])}function s(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,c,f){if(c){for(var d=u,h=u,g=c,p=d.parent.children[0],m=d.m,y=h.m,v=g.m,b=p.m,x;g=u2(g),d=l2(d),g&&d;)p=l2(p),h=u2(h),h.a=u,x=g.z+v-d.z-m+e(g._,d._),x>0&&(bae(wae(g,u,f),u,x),m+=x,y+=x),v+=g.m,m+=d.m,b+=p.m,y+=h.m;g&&!u2(h)&&(h.t=g,h.m+=v-y),d&&!l2(p)&&(p.t=d,p.m+=m-b,f=u)}return f}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function fb(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(i-n)/e.value;++a<l;)s=o[a],s.x0=t,s.x1=r,s.y0=n,s.y1=n+=s.value*u}var x7=(1+Math.sqrt(5))/2;function w7(e,t,n,r,i,o){for(var s=[],a=t.children,l,u,c=0,f=0,d=a.length,h,g,p=t.value,m,y,v,b,x,w,S;c<d;){h=i-n,g=o-r;do m=a[f++].value;while(!m&&f<d);for(y=v=m,w=Math.max(g/h,h/g)/(p*e),S=m*m*w,x=Math.max(v/S,S/y);f<d;++f){if(m+=u=a[f].value,u<y&&(y=u),u>v&&(v=u),S=m*m*w,b=Math.max(v/S,S/y),b>x){m-=u;break}x=b}s.push(l={value:m,dice:h<g,children:a.slice(c,f)}),l.dice?Hp(l,n,r,i,p?r+=g*m/p:o):fb(l,n,r,p?n+=h*m/p:i,o),p-=m,c=f}return s}const E7=function e(t){function n(r,i,o,s,a){w7(t,r,i,o,s,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(x7);function Oae(){var e=E7,t=!1,n=1,r=1,i=[0],o=Eu,s=Eu,a=Eu,l=Eu,u=Eu;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(b7),d}function f(d){var h=i[d.depth],g=d.x0+h,p=d.y0+h,m=d.x1-h,y=d.y1-h;m<g&&(g=m=(g+m)/2),y<p&&(p=y=(p+y)/2),d.x0=g,d.y0=p,d.x1=m,d.y1=y,d.children&&(h=i[d.depth+1]=o(d)/2,g+=u(d)-h,p+=s(d)-h,m-=a(d)-h,y-=l(d)-h,m<g&&(g=m=(g+m)/2),y<p&&(p=y=(p+y)/2),e(d,g,p,m,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=m7(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:of(+d),c):o},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(s=typeof d=="function"?d:of(+d),c):s},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:of(+d),c):a},c.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:of(+d),c):l},c.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:of(+d),c):u},c}function _ae(e,t,n,r,i){var o=e.children,s,a=o.length,l,u=new Array(a+1);for(u[0]=l=s=0;s<a;++s)u[s+1]=l+=o[s].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,g,p,m,y){if(f>=d-1){var v=o[f];v.x0=g,v.y0=p,v.x1=m,v.y1=y;return}for(var b=u[f],x=h/2+b,w=f+1,S=d-1;w<S;){var E=w+S>>>1;u[E]<x?w=E+1:S=E}x-u[w-1]<u[w]-x&&f+1<w&&--w;var O=u[w]-b,A=h-O;if(m-g>y-p){var C=h?(g*A+m*O)/h:m;c(f,w,O,g,p,C,y),c(w,d,A,C,p,m,y)}else{var _=h?(p*A+y*O)/h:y;c(f,w,O,g,p,m,_),c(w,d,A,g,_,m,y)}}}function Aae(e,t,n,r,i){(e.depth&1?fb:Hp)(e,t,n,r,i)}const Cae=function e(t){function n(r,i,o,s,a){if((l=r._squarify)&&l.ratio===t)for(var l,u,c,f,d=-1,h,g=l.length,p=r.value;++d<g;){for(u=l[d],c=u.children,f=u.value=0,h=c.length;f<h;++f)u.value+=c[f].value;u.dice?Hp(u,i,o,s,p?o+=(a-o)*u.value/p:a):fb(u,i,o,p?i+=(s-i)*u.value/p:s,a),p-=u.value}else r._squarify=l=w7(t,r,i,o,s,a),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(x7);function YE(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function BC(e){U.call(this,null,e)}BC.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Tae=e=>e.values;re(BC,U,{transform(e,t){t.source||Y("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(s=>{s.children&&C1(s.data)&&i.rem.push(s.data)}),this.value=o=zC({values:pe(e.keys).reduce((s,a)=>(s.key(a),s),kae()).entries(i.source)},Tae),n&&o.each(s=>{s.children&&(s=Et(s.data),i.add.push(s),i.source.push(s))}),YE(o,Te,Te)),i.source.root=o,i}});function kae(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const s=i.length,a=e[o++],l={},u={};let c=-1,f,d,h;for(;++c<s;)f=a(d=i[c])+"",(h=l[f])?h.push(d):l[f]=[d];for(f in l)u[f]=n(l[f],o);return u}function r(i,o){if(++o>e.length)return i;const s=[];for(const a in i)s.push({key:a,values:r(i[a],o)});return s}return t}function oa(e){U.call(this,null,e)}const Fae=(e,t)=>e.parent===t.parent?1:2;re(oa,U,{transform(e,t){(!t.source||!t.source.root)&&Y(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Ac(e.sort,s=>s.data)),Dae(n,this.params,e),n.separation&&n.separation(e.separation!==!1?Fae:wd);try{this.value=n(i)}catch(s){Y(s)}return i.each(s=>Mae(s,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function Dae(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function Mae(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const XE=["x","y","r","depth","children"];function UC(e){oa.call(this,e)}UC.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:XE.length,default:XE}]};re(UC,oa,{layout:dae,params:["radius","size","padding"],fields:XE});const qE=["x0","y0","x1","y1","depth","children"];function HC(e){oa.call(this,e)}HC.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:qE.length,default:qE}]};re(HC,oa,{layout:hae,params:["size","round","padding"],fields:qE});function WC(e){U.call(this,null,e)}WC.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};re(WC,U,{transform(e,t){t.source||Y("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?YE(H$().id(e.key).parentId(e.parentKey)(i.source),e.key,$i):YE(H$()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const G$={tidy:Sae,cluster:Rse},KE=["x","y","depth","children"];function GC(e){oa.call(this,e)}GC.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:KE.length,default:KE}]};re(GC,oa,{layout(e){const t=e||"tidy";if(Ae(G$,t))return G$[t]();Y("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:KE});function VC(e){U.call(this,[],e)}VC.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};re(VC,U,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||Y("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,s=>o[Te(s)]=1),r.each(s=>{const a=s.data,l=s.parent&&s.parent.data;l&&o[Te(a)]&&o[Te(l)]&&i.add.push(Et({source:l,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[Te(s)]=1),n.forEach(s=>{(o[Te(s.source)]||o[Te(s.target)])&&i.mod.push(s)})),i}});const V$={binary:_ae,dice:Hp,slice:fb,slicedice:Aae,squarify:E7,resquarify:Cae},JE=["x0","y0","x1","y1","depth","children"];function YC(e){oa.call(this,e)}YC.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:JE.length,default:JE}]};re(YC,oa,{layout(){const e=Oae();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ae(V$,t)?e.tile(V$[t]):Y("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:JE});const $ae=Object.freeze(Object.defineProperty({__proto__:null,nest:BC,pack:UC,partition:HC,stratify:WC,tree:GC,treelinks:VC,treemap:YC},Symbol.toStringTag,{value:"Module"})),c2=4278190080;function Nae(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function Rae(e,t,n,r,i){const o=e.width,s=e.height,a=r||i,l=el(o,s).getContext("2d"),u=el(o,s).getContext("2d"),c=a&&el(o,s).getContext("2d");n.forEach(O=>L0(l,O,!1)),L0(u,t,!1),a&&L0(c,t,!0);const f=f2(l,o,s),d=f2(u,o,s),h=a&&f2(c,o,s),g=e.bitmap(),p=a&&e.bitmap();let m,y,v,b,x,w,S,E;for(y=0;y<s;++y)for(m=0;m<o;++m)x=y*o+m,w=f[x]&c2,E=d[x]&c2,S=a&&h[x]&c2,(w||S||E)&&(v=e(m),b=e(y),!i&&(w||E)&&g.set(v,b),a&&(w||S)&&p.set(v,b));return[g,p]}function f2(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function L0(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>L0(e,o.items,n))}):yi[r].draw(e,{items:n?t.map(Pae):t})}function Pae(e){const t=T1(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Ts=5,cr=31,qg=32,ka=new Uint32Array(qg+1),to=new Uint32Array(qg+1);to[0]=0;ka[0]=~to[0];for(let e=1;e<=qg;++e)to[e]=to[e-1]<<1|1,ka[e]=~to[e];function Iae(e,t){const n=new Uint32Array(~~((e*t+qg)/qg));function r(o,s){n[o]|=s}function i(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>Ts]&1<<(a&cr)},set:(o,s)=>{const a=s*e+o;r(a>>>Ts,1<<(a&cr))},clear:(o,s)=>{const a=s*e+o;i(a>>>Ts,~(1<<(a&cr)))},getRange:(o,s,a,l)=>{let u=l,c,f,d,h;for(;u>=s;--u)if(c=u*e+o,f=u*e+a,d=c>>>Ts,h=f>>>Ts,d===h){if(n[d]&ka[c&cr]&to[(f&cr)+1])return!0}else{if(n[d]&ka[c&cr]||n[h]&to[(f&cr)+1])return!0;for(let g=d+1;g<h;++g)if(n[g])return!0}return!1},setRange:(o,s,a,l)=>{let u,c,f,d,h;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,f=u>>>Ts,d=c>>>Ts,f===d)r(f,ka[u&cr]&to[(c&cr)+1]);else for(r(f,ka[u&cr]),r(d,to[(c&cr)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(o,s,a,l)=>{let u,c,f,d,h;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,f=u>>>Ts,d=c>>>Ts,f===d)i(f,to[u&cr]|ka[(c&cr)+1]);else for(i(f,to[u&cr]),i(d,ka[(c&cr)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(o,s,a,l)=>o<0||s<0||l>=t||a>=e}}function jae(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),s=a=>~~((a+n)/r);return s.invert=a=>a*r-n,s.bitmap=()=>Iae(i,o),s.ratio=r,s.padding=n,s.width=e,s.height=t,s}function Lae(e,t,n,r){const i=e.width,o=e.height;return function(s){const a=s.datum.datum.items[r].items,l=a.length,u=s.datum.fontSize,c=po.width(s.datum,s.datum.text);let f=0,d,h,g,p,m,y,v;for(let b=0;b<l;++b)d=a[b].x,g=a[b].y,h=a[b].x2===void 0?d:a[b].x2,p=a[b].y2===void 0?g:a[b].y2,m=(d+h)/2,y=(g+p)/2,v=Math.abs(h-d+p-g),v>=f&&(f=v,s.x=m,s.y=y);return m=c/2,y=u/2,d=s.x-m,h=s.x+m,g=s.y-y,p=s.y+y,s.align="center",d<0&&h<=i?s.align="left":0<=d&&i<h&&(s.align="right"),s.baseline="middle",g<0&&p<=o?s.baseline="top":0<=g&&o<p&&(s.baseline="bottom"),!0}}function vv(e,t,n,r,i,o){let s=n/2;return e-s<0||e+s>i||t-(s=r/2)<0||t+s>o}function Wa(e,t,n,r,i,o,s,a){const l=i*o/(r*2),u=e(t-l),c=e(t+l),f=e(n-(o=o/2)),d=e(n+o);return s.outOfBounds(u,f,c,d)||s.getRange(u,f,c,d)||a&&a.getRange(u,f,c,d)}function zae(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1];function l(u,c,f,d,h){const g=e.invert(u),p=e.invert(c);let m=f,y=o,v;if(!vv(g,p,d,h,i,o)&&!Wa(e,g,p,h,d,m,s,a)&&!Wa(e,g,p,h,d,h,s,null)){for(;y-m>=1;)v=(m+y)/2,Wa(e,g,p,h,d,v,s,a)?y=v:m=v;if(m>f)return[g,p,m,!0]}}return function(u){const c=u.datum.datum.items[r].items,f=c.length,d=u.datum.fontSize,h=po.width(u.datum,u.datum.text);let g=n?d:0,p=!1,m=!1,y=0,v,b,x,w,S,E,O,A,C,_,T,k,D,M,$,N,P;for(let H=0;H<f;++H){for(v=c[H].x,x=c[H].y,b=c[H].x2===void 0?v:c[H].x2,w=c[H].y2===void 0?x:c[H].y2,v>b&&(P=v,v=b,b=P),x>w&&(P=x,x=w,w=P),C=e(v),T=e(b),_=~~((C+T)/2),k=e(x),M=e(w),D=~~((k+M)/2),O=_;O>=C;--O)for(A=D;A>=k;--A)N=l(O,A,g,h,d),N&&([u.x,u.y,g,p]=N);for(O=_;O<=T;++O)for(A=D;A<=M;++A)N=l(O,A,g,h,d),N&&([u.x,u.y,g,p]=N);!p&&!n&&($=Math.abs(b-v+w-x),S=(v+b)/2,E=(x+w)/2,$>=y&&!vv(S,E,h,d,i,o)&&!Wa(e,S,E,d,h,d,s,null)&&(y=$,u.x=S,u.y=E,m=!0))}return p||m?(S=h/2,E=d/2,s.setRange(e(u.x-S),e(u.y-E),e(u.x+S),e(u.y+E)),u.align="center",u.baseline="middle",!0):!1}}const Bae=[-1,-1,1,1],Uae=[-1,1,-1,1];function Hae(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=e.bitmap();return function(u){const c=u.datum.datum.items[r].items,f=c.length,d=u.datum.fontSize,h=po.width(u.datum,u.datum.text),g=[];let p=n?d:0,m=!1,y=!1,v=0,b,x,w,S,E,O,A,C,_,T,k,D;for(let M=0;M<f;++M){for(b=c[M].x,w=c[M].y,x=c[M].x2===void 0?b:c[M].x2,S=c[M].y2===void 0?w:c[M].y2,g.push([e((b+x)/2),e((w+S)/2)]);g.length;)if([A,C]=g.pop(),!(s.get(A,C)||a.get(A,C)||l.get(A,C))){l.set(A,C);for(let $=0;$<4;++$)E=A+Bae[$],O=C+Uae[$],l.outOfBounds(E,O,E,O)||g.push([E,O]);if(E=e.invert(A),O=e.invert(C),_=p,T=o,!vv(E,O,h,d,i,o)&&!Wa(e,E,O,d,h,_,s,a)&&!Wa(e,E,O,d,h,d,s,null)){for(;T-_>=1;)k=(_+T)/2,Wa(e,E,O,d,h,k,s,a)?T=k:_=k;_>p&&(u.x=E,u.y=O,p=_,m=!0)}}!m&&!n&&(D=Math.abs(x-b+S-w),E=(b+x)/2,O=(w+S)/2,D>=v&&!vv(E,O,h,d,i,o)&&!Wa(e,E,O,d,h,d,s,null)&&(v=D,u.x=E,u.y=O,y=!0))}return m||y?(E=h/2,O=d/2,s.setRange(e(u.x-E),e(u.y-O),e(u.x+E),e(u.y+O)),u.align="center",u.baseline="middle",!0):!1}}const Wae=["right","center","left"],Gae=["bottom","middle","top"];function Vae(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=r.length;return function(u){var c;const f=u.boundary,d=u.datum.fontSize;if(f[2]<0||f[5]<0||f[0]>i||f[3]>o)return!1;let h=(c=u.textWidth)!==null&&c!==void 0?c:0,g,p,m,y,v,b,x,w,S,E,O,A,C,_,T;for(let k=0;k<l;++k){if(g=(n[k]&3)-1,p=(n[k]>>>2&3)-1,m=g===0&&p===0||r[k]<0,y=g&&p?Math.SQRT1_2:1,v=r[k]<0?-1:1,b=f[1+g]+r[k]*g*y,O=f[4+p]+v*d*p/2+r[k]*p*y,w=O-d/2,S=O+d/2,A=e(b),_=e(w),T=e(S),!h)if(Y$(A,A,_,T,s,a,b,b,w,S,f,m))h=po.width(u.datum,u.datum.text);else continue;if(E=b+v*h*g/2,b=E-h/2,x=E+h/2,A=e(b),C=e(x),Y$(A,C,_,T,s,a,b,x,w,S,f,m))return u.x=g?g*v<0?x:b:E,u.y=p?p*v<0?S:w:O,u.align=Wae[g*v+1],u.baseline=Gae[p*v+1],s.setRange(A,_,C,T),!0}return!1}}function Y$(e,t,n,r,i,o,s,a,l,u,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&o||i).getRange(e,n,t,r))}const d2=0,h2=4,g2=8,p2=0,m2=1,y2=2,Yae={"top-left":d2+p2,top:d2+m2,"top-right":d2+y2,left:h2+p2,middle:h2+m2,right:h2+y2,"bottom-left":g2+p2,bottom:g2+m2,"bottom-right":g2+y2},Xae={naive:Lae,"reduced-search":zae,floodfill:Hae};function qae(e,t,n,r,i,o,s,a,l,u,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=Kae(r,f),h=Jae(i,f),g=Zae(e[0].datum),p=g==="group"&&e[0].datum.items[l].marktype,m=p==="area",y=Qae(g,p,a,l),v=u===null||u===1/0,b=m&&c==="naive";let x=-1,w=-1;const S=e.map(C=>{const _=v?po.width(C,C.text):void 0;return x=Math.max(x,_),w=Math.max(w,C.fontSize),{datum:C,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(C),textWidth:_}});u=u===null||u===1/0?Math.max(x,w)+Math.max(...r):u;const E=jae(t[0],t[1],u);let O;if(!b){n&&S.sort((T,k)=>n(T.datum,k.datum));let C=!1;for(let T=0;T<h.length&&!C;++T)C=h[T]===5||d[T]<0;const _=(g&&s||m)&&e.map(T=>T.datum);O=o.length||_?Rae(E,_||[],o,C,m):Nae(E,s&&S)}const A=m?Xae[c](E,O,s,l):Vae(E,O,h,d);return S.forEach(C=>C.opacity=+A(C)),S}function Kae(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Jae(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=Yae[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Zae(e){return e&&e.mark&&e.mark.marktype}function Qae(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const s=o.datum.items[r].items;return i(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:i}const ZE=["x","y","opacity","align","baseline"],S7=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function XC(e){U.call(this,null,e)}XC.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:S7},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:ZE.length,default:ZE}]};re(XC,U,{transform(e,t){function n(o){const s=e[o];return Ze(s)&&t.modified(s.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Y("Size parameter should be specified as a [width, height] array.");const i=e.as||ZE;return qae(t.materialize(t.SOURCE).source||[],e.size,e.sort,pe(e.offset==null?1:e.offset),pe(e.anchor||S7),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[i[0]]=o.x,s[i[1]]=o.y,s[i[2]]=o.opacity,s[i[3]]=o.align,s[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});const ele=Object.freeze(Object.defineProperty({__proto__:null,label:XC},Symbol.toStringTag,{value:"Module"}));function O7(e,t){var n=[],r=function(c){return c(a)},i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function qC(e){U.call(this,null,e)}qC.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};re(qC,U,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=O7(r,e.groupby),o=(e.groupby||[]).map(on),s=o.length,a=e.as||[on(e.x),on(e.y)],l=[];i.forEach(u=>{H5(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<s;++d)f[o[d]]=u.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],l.push(Et(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const QE={linear:k_,log:L5,exp:z5,pow:B5,quad:F_,poly:U5},tle=(e,t)=>e==="poly"?t:e==="quad"?2:1;function KC(e){U.call(this,null,e)}KC.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(QE)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};re(KC,U,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=O7(r,e.groupby),o=(e.groupby||[]).map(on),s=e.method||"linear",a=e.order||3,l=tle(s,a),u=e.as||[on(e.x),on(e.y)],c=QE[s],f=[];let d=e.extent;Ae(QE,s)||Y("Invalid regression method: "+s),d!=null&&s==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const p=c(h,e.x,e.y,a);if(e.params){f.push(Et({keys:h.dims,coef:p.coef,rSquared:p.rSquared}));return}const m=d||is(h,e.x),y=v=>{const b={};for(let x=0;x<o.length;++x)b[o[x]]=h.dims[x];b[u[0]]=v[0],b[u[1]]=v[1],f.push(Et(b))};s==="linear"?m.forEach(v=>y([v,p.predict(v)])):R1(p.predict,m,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const nle=Object.freeze(Object.defineProperty({__proto__:null,loess:qC,regression:KC},Symbol.toStringTag,{value:"Module"})),Vs=11102230246251565e-32,Hn=134217729,rle=(3+8*Vs)*Vs;function v2(e,t,n,r,i){let o,s,a,l,u=t[0],c=r[0],f=0,d=0;c>u==c>-u?(o=u,u=t[++f]):(o=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>u==c>-u?(s=u+o,a=o-(s-u),u=t[++f]):(s=c+o,a=o-(s-c),c=r[++d]),o=s,a!==0&&(i[h++]=a);f<e&&d<n;)c>u==c>-u?(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++f]):(s=o+c,l=s-o,a=o-(s-l)+(c-l),c=r[++d]),o=s,a!==0&&(i[h++]=a);for(;f<e;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++f],o=s,a!==0&&(i[h++]=a);for(;d<n;)s=o+c,l=s-o,a=o-(s-l)+(c-l),c=r[++d],o=s,a!==0&&(i[h++]=a);return(o!==0||h===0)&&(i[h++]=o),h}function ile(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function Wp(e){return new Float64Array(e)}const ole=(3+16*Vs)*Vs,sle=(2+12*Vs)*Vs,ale=(9+64*Vs)*Vs*Vs,Vc=Wp(4),X$=Wp(8),q$=Wp(12),K$=Wp(16),fr=Wp(4);function lle(e,t,n,r,i,o,s){let a,l,u,c,f,d,h,g,p,m,y,v,b,x,w,S,E,O;const A=e-i,C=n-i,_=t-o,T=r-o;x=A*T,d=Hn*A,h=d-(d-A),g=A-h,d=Hn*T,p=d-(d-T),m=T-p,w=g*m-(x-h*p-g*p-h*m),S=_*C,d=Hn*_,h=d-(d-_),g=_-h,d=Hn*C,p=d-(d-C),m=C-p,E=g*m-(S-h*p-g*p-h*m),y=w-E,f=w-y,Vc[0]=w-(y+f)+(f-E),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-S,f=b-y,Vc[1]=b-(y+f)+(f-S),O=v+y,f=O-v,Vc[2]=v-(O-f)+(y-f),Vc[3]=O;let k=ile(4,Vc),D=sle*s;if(k>=D||-k>=D||(f=e-A,a=e-(A+f)+(f-i),f=n-C,u=n-(C+f)+(f-i),f=t-_,l=t-(_+f)+(f-o),f=r-T,c=r-(T+f)+(f-o),a===0&&l===0&&u===0&&c===0)||(D=ale*s+rle*Math.abs(k),k+=A*c+T*a-(_*u+C*l),k>=D||-k>=D))return k;x=a*T,d=Hn*a,h=d-(d-a),g=a-h,d=Hn*T,p=d-(d-T),m=T-p,w=g*m-(x-h*p-g*p-h*m),S=l*C,d=Hn*l,h=d-(d-l),g=l-h,d=Hn*C,p=d-(d-C),m=C-p,E=g*m-(S-h*p-g*p-h*m),y=w-E,f=w-y,fr[0]=w-(y+f)+(f-E),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-S,f=b-y,fr[1]=b-(y+f)+(f-S),O=v+y,f=O-v,fr[2]=v-(O-f)+(y-f),fr[3]=O;const M=v2(4,Vc,4,fr,X$);x=A*c,d=Hn*A,h=d-(d-A),g=A-h,d=Hn*c,p=d-(d-c),m=c-p,w=g*m-(x-h*p-g*p-h*m),S=_*u,d=Hn*_,h=d-(d-_),g=_-h,d=Hn*u,p=d-(d-u),m=u-p,E=g*m-(S-h*p-g*p-h*m),y=w-E,f=w-y,fr[0]=w-(y+f)+(f-E),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-S,f=b-y,fr[1]=b-(y+f)+(f-S),O=v+y,f=O-v,fr[2]=v-(O-f)+(y-f),fr[3]=O;const $=v2(M,X$,4,fr,q$);x=a*c,d=Hn*a,h=d-(d-a),g=a-h,d=Hn*c,p=d-(d-c),m=c-p,w=g*m-(x-h*p-g*p-h*m),S=l*u,d=Hn*l,h=d-(d-l),g=l-h,d=Hn*u,p=d-(d-u),m=u-p,E=g*m-(S-h*p-g*p-h*m),y=w-E,f=w-y,fr[0]=w-(y+f)+(f-E),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-S,f=b-y,fr[1]=b-(y+f)+(f-S),O=v+y,f=O-v,fr[2]=v-(O-f)+(y-f),fr[3]=O;const N=v2($,q$,4,fr,K$);return K$[N-1]}function Ym(e,t,n,r,i,o){const s=(t-o)*(n-i),a=(e-i)*(r-o),l=s-a;if(s===0||a===0||s>0!=a>0)return l;const u=Math.abs(s+a);return Math.abs(l)>=ole*u?l:-lle(e,t,n,r,i,o,u)}const J$=Math.pow(2,-52),Xm=new Uint32Array(512);class bv{static from(t,n=hle,r=gle){const i=t.length,o=new Float64Array(i*2);for(let s=0;s<i;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=r(a)}return new bv(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=t.length>>1;let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let C=0;C<s;C++){const _=t[2*C],T=t[2*C+1];_<a&&(a=_),T<l&&(l=T),_>u&&(u=_),T>c&&(c=T),this._ids[C]=C}const f=(a+u)/2,d=(l+c)/2;let h=1/0,g,p,m;for(let C=0;C<s;C++){const _=b2(f,d,t[2*C],t[2*C+1]);_<h&&(g=C,h=_)}const y=t[2*g],v=t[2*g+1];h=1/0;for(let C=0;C<s;C++){if(C===g)continue;const _=b2(y,v,t[2*C],t[2*C+1]);_<h&&_>0&&(p=C,h=_)}let b=t[2*p],x=t[2*p+1],w=1/0;for(let C=0;C<s;C++){if(C===g||C===p)continue;const _=fle(y,v,b,x,t[2*C],t[2*C+1]);_<w&&(m=C,w=_)}let S=t[2*m],E=t[2*m+1];if(w===1/0){for(let T=0;T<s;T++)this._dists[T]=t[2*T]-t[0]||t[2*T+1]-t[1];hf(this._ids,this._dists,0,s-1);const C=new Uint32Array(s);let _=0;for(let T=0,k=-1/0;T<s;T++){const D=this._ids[T];this._dists[D]>k&&(C[_++]=D,k=this._dists[D])}this.hull=C.subarray(0,_),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Ym(y,v,b,x,S,E)<0){const C=p,_=b,T=x;p=m,b=S,x=E,m=C,S=_,E=T}const O=dle(y,v,b,x,S,E);this._cx=O.x,this._cy=O.y;for(let C=0;C<s;C++)this._dists[C]=b2(t[2*C],t[2*C+1],O.x,O.y);hf(this._ids,this._dists,0,s-1),this._hullStart=g;let A=3;r[g]=n[m]=p,r[p]=n[g]=m,r[m]=n[p]=g,i[g]=0,i[p]=1,i[m]=2,o.fill(-1),o[this._hashKey(y,v)]=g,o[this._hashKey(b,x)]=p,o[this._hashKey(S,E)]=m,this.trianglesLen=0,this._addTriangle(g,p,m,-1,-1,-1);for(let C=0,_,T;C<this._ids.length;C++){const k=this._ids[C],D=t[2*k],M=t[2*k+1];if(C>0&&Math.abs(D-_)<=J$&&Math.abs(M-T)<=J$||(_=D,T=M,k===g||k===p||k===m))continue;let $=0;for(let ge=0,be=this._hashKey(D,M);ge<this._hashSize&&($=o[(be+ge)%this._hashSize],!($!==-1&&$!==r[$]));ge++);$=n[$];let N=$,P;for(;P=r[N],Ym(D,M,t[2*N],t[2*N+1],t[2*P],t[2*P+1])>=0;)if(N=P,N===$){N=-1;break}if(N===-1)continue;let H=this._addTriangle(N,k,r[N],-1,-1,i[N]);i[k]=this._legalize(H+2),i[N]=H,A++;let ie=r[N];for(;P=r[ie],Ym(D,M,t[2*ie],t[2*ie+1],t[2*P],t[2*P+1])<0;)H=this._addTriangle(ie,k,P,i[k],-1,i[ie]),i[k]=this._legalize(H+2),r[ie]=ie,A--,ie=P;if(N===$)for(;P=n[N],Ym(D,M,t[2*P],t[2*P+1],t[2*N],t[2*N+1])<0;)H=this._addTriangle(P,k,N,-1,i[N],i[P]),this._legalize(H+2),i[P]=H,r[N]=N,A--,N=P;this._hullStart=n[k]=N,r[N]=n[ie]=k,r[k]=ie,o[this._hashKey(D,M)]=k,o[this._hashKey(t[2*N],t[2*N+1])]=N}this.hull=new Uint32Array(A);for(let C=0,_=this._hullStart;C<A;C++)this.hull[C]=_,_=r[_];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(ule(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,s=0;for(;;){const a=r[t],l=t-t%3;if(s=l+(t+2)%3,a===-1){if(o===0)break;t=Xm[--o];continue}const u=a-a%3,c=l+(t+1)%3,f=u+(a+2)%3,d=n[s],h=n[t],g=n[c],p=n[f];if(cle(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*g],i[2*g+1],i[2*p],i[2*p+1])){n[t]=p,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[s]),this._link(s,f);const v=u+(a+1)%3;o<Xm.length&&(Xm[o++]=v)}else{if(o===0)break;t=Xm[--o]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function ule(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function b2(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function cle(e,t,n,r,i,o,s,a){const l=e-s,u=t-a,c=n-s,f=r-a,d=i-s,h=o-a,g=l*l+u*u,p=c*c+f*f,m=d*d+h*h;return l*(f*m-p*h)-u*(c*m-p*d)+g*(c*h-f*d)<0}function fle(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,c=s*s+a*a,f=l*l+u*u,d=.5/(s*u-a*l),h=(u*c-a*f)*d,g=(s*f-l*c)*d;return h*h+g*g}function dle(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,c=s*s+a*a,f=l*l+u*u,d=.5/(s*u-a*l),h=e+(u*c-a*f)*d,g=t+(s*f-l*c)*d;return{x:h,y:g}}function hf(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],s=t[o];let a=i-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{const i=n+r>>1;let o=n+1,s=r;lh(e,i,o),t[e[n]]>t[e[r]]&&lh(e,n,r),t[e[o]]>t[e[r]]&&lh(e,o,r),t[e[n]]>t[e[o]]&&lh(e,n,o);const a=e[o],l=t[a];for(;;){do o++;while(t[e[o]]<l);do s--;while(t[e[s]]>l);if(s<o)break;lh(e,o,s)}e[n+1]=e[s],e[s]=a,r-o+1>=s-n?(hf(e,t,o,r),hf(e,t,n,s-1)):(hf(e,t,n,s-1),hf(e,t,o,r))}}function lh(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function hle(e){return e[0]}function gle(e){return e[1]}const Z$=1e-6;class Fu{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>Z$||Math.abs(this._y1-o)>Z$)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class eS{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class ple{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this,o=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let h=0,g=0,p=r.length,m,y;h<p;h+=3,g+=2){const v=r[h]*2,b=r[h+1]*2,x=r[h+2]*2,w=t[v],S=t[v+1],E=t[b],O=t[b+1],A=t[x],C=t[x+1],_=E-w,T=O-S,k=A-w,D=C-S,M=(_*D-T*k)*2;if(Math.abs(M)<1e-9){let $=1e9;const N=r[0]*2;$*=Math.sign((t[N]-w)*D-(t[N+1]-S)*k),m=(w+A)/2-$*D,y=(S+C)/2+$*k}else{const $=1/M,N=_*_+T*T,P=k*k+D*D;m=w+(D*N-T*P)*$,y=S+(_*P-k*N)*$}o[g]=m,o[g+1]=y}let s=n[n.length-1],a,l=s*4,u,c=t[2*s],f,d=t[2*s+1];i.fill(0);for(let h=0;h<n.length;++h)s=n[h],a=l,u=c,f=d,l=s*4,c=t[2*s],d=t[2*s+1],i[a+2]=i[l]=f-d,i[a+3]=i[l+1]=c-u}render(t){const n=t==null?t=new Fu:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,g=Math.floor(d/3)*2,p=s[h],m=s[h+1],y=s[g],v=s[g+1];this._renderSegment(p,m,y,v,t)}let l,u=o[o.length-1];for(let c=0;c<o.length;++c){l=u,u=o[c];const f=Math.floor(i[u]/3)*2,d=s[f],h=s[f+1],g=l*4,p=this._project(d,h,a[g+2],a[g+3]);p&&this._renderSegment(d,h,p[0],p[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Fu:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Fu:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new eS;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let s;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(o.moveTo(t,n),o.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,a,l))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[o]==i[a]&&n[o+1]==i[a+1]&&n[(o+2)%s]==i[(a+l-2)%l]&&n[(o+3)%s]==i[(a+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,s=r[t];if(s===-1)return null;const a=[];let l=s;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,o[l]!==t)break;l=i[l]}while(l!==s&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n)}_clipFinite(t,n){const r=n.length;let i=null,o,s,a=n[r-2],l=n[r-1],u,c=this._regioncode(a,l),f,d=0;for(let h=0;h<r;h+=2)if(o=a,s=l,a=n[h],l=n[h+1],u=c,c=this._regioncode(a,l),u===0&&c===0)f=d,d=0,i?i.push(a,l):i=[a,l];else{let g,p,m,y,v;if(u===0){if((g=this._clipSegment(o,s,a,l,u,c))===null)continue;[p,m,y,v]=g}else{if((g=this._clipSegment(a,l,o,s,c,u))===null)continue;[y,v,p,m]=g,f=d,d=this._edgecode(p,m),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(p,m):i=[p,m]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,s){for(;;){if(o===0&&s===0)return[t,n,r,i];if(o&s)return null;let a,l,u=o||s;u&8?(a=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):u&4?(a=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):u&2?(l=n+(i-n)*(this.xmax-t)/(r-t),a=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),a=this.xmin),o?(t=a,n=l,o=this._regioncode(t,n)):(r=a,i=l,s=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,s){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let u=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)f=d,d=this._edgecode(a[u],a[u+1]),f&&d&&(u=this._edge(t,f,d,a,u),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,o){for(;n!==r;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin;break}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}if(i.length>4)for(let s=0;s<i.length;s+=2){const a=(s+2)%i.length,l=(s+4)%i.length;(i[s]===i[a]&&i[a]===i[l]||i[s+1]===i[a+1]&&i[a+1]===i[l+1])&&(i.splice(a,2),s-=2)}return o}_project(t,n,r,i){let o=1/0,s,a,l;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(l=this.ymin,a=t+(o=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(l=this.ymax,a=t+(o=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<o&&(a=this.xmax,l=n+(o=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<o&&(a=this.xmin,l=n+(o=s)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}const mle=2*Math.PI,Yc=Math.pow;function yle(e){return e[0]}function vle(e){return e[1]}function ble(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function xle(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class JC{static from(t,n=yle,r=vle,i){return new JC("length"in t?wle(t,n,r,i):Float64Array.from(Ele(t,n,r,i)))}constructor(t){this._delaunator=new bv(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&ble(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const g=xle(n[2*d],n[2*d+1],f);n[2*d]=g[0],n[2*d+1]=g[1]}this._delaunator=new bv(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const c=o[l%3===2?l-2:l+1];(r[l]===-1||s[c]===-1)&&(s[c]=l)}for(let l=0,u=i.length;l<u;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new ple(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=n[t];if(l===-1)return;let u=l,c=-1;do{if(yield c=s[u],u=u%3===2?u-2:u+1,s[u]!==t)return;if(u=o[u],u===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let c=t,f=Yc(n-u[t*2],2)+Yc(r-u[t*2+1],2);const d=i[t];let h=d;do{let g=l[h];const p=Yc(n-u[g*2],2)+Yc(r-u[g*2+1],2);if(p<f&&(f=p,c=g),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=a[h],h===-1){if(h=o[(s[t]+1)%o.length],h!==g&&Yc(n-u[h*2],2)+Yc(r-u[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new Fu:void 0,{points:r,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){const l=i[s];if(l<s)continue;const u=o[s]*2,c=o[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Fu:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){const a=i[o],l=i[o+1];t.moveTo(a+n,l),t.arc(a,l,n,0,mle)}return r&&r.value()}renderHull(t){const n=t==null?t=new Fu:void 0,{hull:r,points:i}=this,o=r[0]*2,s=r.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new eS;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Fu:void 0,{points:i,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,l=o[t+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new eS;return this.renderTriangle(t,n),n.value()}}function wle(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let s=0;s<i;++s){const a=e[s];o[s*2]=t.call(r,a,s,e),o[s*2+1]=n.call(r,a,s,e)}return o}function*Ele(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function ZC(e){U.call(this,null,e)}ZC.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Sle=[-1e5,-1e5,1e5,1e5];re(ZC,U,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Sle;const o=this.value=JC.from(r,e.x,e.y).voronoi(i);for(let s=0,a=r.length;s<a;++s){const l=o.cellPolygon(s);r[s][n]=l?Ole(l):null}return t.reflow(e.modified()).modifies(n)}});function Ole(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}const _le=Object.freeze(Object.defineProperty({__proto__:null,voronoi:ZC},Symbol.toStringTag,{value:"Module"}));var x2=Math.PI/180,Wh=1<<11>>5,z0=1<<11;function Ale(){var e=[256,256],t,n,r,i,o,s,a,l=_7,u=[],c=Math.random,f={};f.layout=function(){for(var g=d(el()),p=Mle((e[0]>>5)*e[1]),m=null,y=u.length,v=-1,b=[],x=u.map(S=>({text:t(S),font:n(S),style:i(S),weight:o(S),rotate:s(S),size:~~(r(S)+1e-14),padding:a(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,E)=>E.size-S.size);++v<y;){var w=x[v];w.x=e[0]*(c()+.5)>>1,w.y=e[1]*(c()+.5)>>1,Cle(g,w,x,v),w.hasText&&h(p,w,m)&&(b.push(w),m?kle(m,w):m=[{x:w.x+w.x0,y:w.y+w.y0},{x:w.x+w.x1,y:w.y+w.y1}],w.x-=e[0]>>1,w.y-=e[1]>>1)}return b};function d(g){g.width=g.height=1;var p=Math.sqrt(g.getContext("2d").getImageData(0,0,1,1).data.length>>2);g.width=(Wh<<5)/p,g.height=z0/p;var m=g.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:p}}function h(g,p,m){for(var y=p.x,v=p.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),x=l(e),w=c()<.5?1:-1,S=-w,E,O,A;(E=x(S+=w))&&(O=~~E[0],A=~~E[1],!(Math.min(Math.abs(O),Math.abs(A))>=b));)if(p.x=y+O,p.y=v+A,!(p.x+p.x0<0||p.y+p.y0<0||p.x+p.x1>e[0]||p.y+p.y1>e[1])&&(!m||!Tle(p,g,e[0]))&&(!m||Fle(p,m))){for(var C=p.sprite,_=p.width>>5,T=e[0]>>5,k=p.x-(_<<4),D=k&127,M=32-D,$=p.y1-p.y0,N=(p.y+p.y0)*T+(k>>5),P,H=0;H<$;H++){P=0;for(var ie=0;ie<=_;ie++)g[N+ie]|=P<<M|(ie<_?(P=C[H*_+ie])>>>D:0);N+=T}return p.sprite=null,!0}return!1}return f.words=function(g){return arguments.length?(u=g,f):u},f.size=function(g){return arguments.length?(e=[+g[0],+g[1]],f):e},f.font=function(g){return arguments.length?(n=Ql(g),f):n},f.fontStyle=function(g){return arguments.length?(i=Ql(g),f):i},f.fontWeight=function(g){return arguments.length?(o=Ql(g),f):o},f.rotate=function(g){return arguments.length?(s=Ql(g),f):s},f.text=function(g){return arguments.length?(t=Ql(g),f):t},f.spiral=function(g){return arguments.length?(l=$le[g]||g,f):l},f.fontSize=function(g){return arguments.length?(r=Ql(g),f):r},f.padding=function(g){return arguments.length?(a=Ql(g),f):a},f.random=function(g){return arguments.length?(c=g,f):c},f}function Cle(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(Wh<<5)/o,z0/o);var s=0,a=0,l=0,u=n.length,c,f,d,h,g;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var p=Math.sin(t.rotate*x2),m=Math.cos(t.rotate*x2),y=c*m,v=c*p,b=d*m,x=d*p;c=Math.max(Math.abs(y+x),Math.abs(y-x))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>l&&(l=d),s+c>=Wh<<5&&(s=0,a+=l,l=0),a+d>=z0)break;i.translate((s+(c>>1))/o,(a+(d>>1))/o),t.rotate&&i.rotate(t.rotate*x2),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=s,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=c}for(var w=i.getImageData(0,0,(Wh<<5)/o,z0/o).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)S[h]=0;if(s=t.xoff,s==null)return;a=t.yoff;var E=0,O=-1;for(g=0;g<d;g++){for(h=0;h<c;h++){var A=f*g+(h>>5),C=w[(a+g)*(Wh<<5)+(s+h)<<2]?1<<31-h%32:0;S[A]|=C,E|=C}E?O=g:(t.y0++,d--,g--,a++)}t.y1=t.y0+O,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function Tle(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),s=o&127,a=32-s,l=e.y1-e.y0,u=(e.y+e.y0)*n+(o>>5),c,f=0;f<l;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>s:0))&t[u+d])return!0;u+=n}return!1}function kle(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Fle(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function _7(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Dle(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Mle(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Ql(e){return typeof e=="function"?e:function(){return e}}var $le={archimedean:_7,rectangular:Dle};const A7=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Nle=["text","font","rotate","fontSize","fontStyle","fontWeight"];function QC(e){U.call(this,Ale(),e)}QC.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:A7}]};re(QC,U,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Y("Wordcloud size dimensions must be non-zero.");function n(g){const p=e[g];return Ze(p)&&t.modified(p.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||Nle.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,s=e.as||A7;let a=e.fontSize||14,l;if(Ze(a)?l=e.fontSizeRange:a=lr(a),l){const g=a,p=xt("sqrt")().domain(is(i,g)).range(l);a=m=>p(g(m))}i.forEach(g=>{g[s[0]]=NaN,g[s[1]]=NaN,g[s[3]]=0});const u=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Ri).layout(),c=o.size(),f=c[0]>>1,d=c[1]>>1,h=u.length;for(let g=0,p,m;g<h;++g)p=u[g],m=p.datum,m[s[0]]=p.x+f,m[s[1]]=p.y+d,m[s[2]]=p.font,m[s[3]]=p.size,m[s[4]]=p.style,m[s[5]]=p.weight,m[s[6]]=p.rotate;return t.reflow(r).modifies(s)}});const Rle=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:QC},Symbol.toStringTag,{value:"Module"})),Ple=e=>new Uint8Array(e),Ile=e=>new Uint16Array(e),pg=e=>new Uint32Array(e);function jle(){let e=8,t=[],n=pg(0),r=qm(0,e),i=qm(0,e);return{data:()=>t,seen:()=>n=Lle(n,t.length),add(o){for(let s=0,a=t.length,l=o.length,u;s<l;++s)u=o[s],u._index=a++,t.push(u)},remove(o,s){const a=t.length,l=Array(a-o),u=t;let c,f,d;for(f=0;!s[f]&&f<a;++f)l[f]=t[f],u[f]=f;for(d=f;f<a;++f)c=t[f],s[f]?u[f]=-1:(u[f]=d,r[d]=r[f],i[d]=i[f],l[d]=c,c._index=d++),r[f]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){r[o]|=s},clear(o,s){r[o]&=~s},resize(o,s){const a=r.length;(o>a||s>e)&&(e=Math.max(s,e),r=qm(o,e,r),i=qm(o,e))}}}function Lle(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function qm(e,t,n){const r=(t<257?Ple:t<65537?Ile:pg)(e);return n&&r.set(n),r}function Q$(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const s=this,a=s.bisect(s.range,i.value),l=i.index,u=a[0],c=a[1],f=l.length;let d;for(d=0;d<u;++d)o[l[d]]|=r;for(d=c;d<f;++d)o[l[d]]|=r;return s}}}function e3(){let e=pg(0),t=[],n=0;function r(a,l,u){if(!l.length)return[];const c=n,f=l.length,d=pg(f);let h=Array(f),g,p,m;for(m=0;m<f;++m)h[m]=a(l[m]),d[m]=m;if(h=zle(h,d),c)g=t,p=e,t=Array(c+f),e=pg(c+f),Ble(u,g,p,c,h,d,f,t,e);else{if(u>0)for(m=0;m<f;++m)d[m]+=u;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,l){const u=n;let c,f,d;for(f=0;!l[e[f]]&&f<u;++f);for(d=f;f<u;++f)l[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=u-a}function o(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]}function s(a,l){let u;return l?u=l.length:(l=t,u=n),[uX(l,a[0],0,u),dy(l,a[1],0,u)]}return{insert:r,remove:i,bisect:s,reindex:o,index:()=>e,size:()=>n}}function zle(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),dX(e,t)}function Ble(e,t,n,r,i,o,s,a,l){let u=0,c=0,f;for(f=0;u<r&&c<s;++f)t[u]<i[c]?(a[f]=t[u],l[f]=n[u++]):(a[f]=i[c],l[f]=o[c++]+e);for(;u<r;++u,++f)a[f]=t[u],l[f]=n[u];for(;c<s;++c,++f)a[f]=i[c],l[f]=o[c]+e}function eT(e){U.call(this,jle(),e),this._indices=null,this._dims=null}eT.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};re(eT,U,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],s=r.length;let a=0,l,u;for(;a<s;++a)l=n[a].fname,u=i[l]||(i[l]=e3()),o.push(Q$(u,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,s=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,g={};let p,m,y,v,b,x,w,S,E;if(u.set(l),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(x={},v=t.mod,w=0,S=v.length;w<S;++w)x[v[w]._index]=1;for(w=0;w<h;++w)E=r[w],(!s[w]||e.modified("fields",w)||t.modified(E.fields))&&(y=E.fname,(p=g[y])||(o[y]=m=e3(),g[y]=p=m.insert(E,t.source,0)),s[w]=Q$(m,w,i[w]).onAdd(p,l));for(w=0,S=a.data().length;w<S;++w)b[w]||(u[w]!==l[w]?f.push(w):x[w]&&l[w]!==c&&d.push(w));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,s=this._indices,a=e.fields,l={},u=n.add,c=i.size()+r.length,f=o.length;let d=i.size(),h,g,p;i.resize(c,f),i.add(r);const m=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)g=a[h].fname,p=l[g]||(l[g]=s[g].insert(a[h],r,d)),o[h].onAdd(p,m);for(;d<c;++d)y[d]=v,m[d]!==v&&u.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),s=e.mod;let a,l,u;for(a=0,l=s.length;a<l;++a)u=s[a]._index,i[u]!==o&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),s=i.prev(),a=i.all(),l={},u=n.rem,c=t.rem;let f,d,h,g;for(f=0,d=c.length;f<d;++f)h=c[f]._index,l[h]=1,s[h]=g=o[h],o[h]=a,g!==a&&u.push(h);for(h in r)r[h].remove(d,l);return this.reindex(t,d,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const s in r)r[s].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,s=r.length;let a=0,l,u;for(n.filters=0,u=0;u<s;++u)e.modified("query",u)&&(l=u,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,a=0;u<s;++u)!e.modified("query",u)||(a|=r[u].one,this.incrementAll(r[u],i[u],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),s=i.curr(),a=i.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=u[0],g=u[1],p=e.one;let m,y,v;if(f<h)for(m=f,y=Math.min(h,d);m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=p;else if(f>h)for(m=h,y=Math.min(f,g);m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=p;if(d>g)for(m=Math.max(f,g),y=d;m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=p;else if(d<g)for(m=Math.max(h,d),y=g;m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=p;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),s=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],f=a[0],d=a[1],h=e.one;let g,p,m;if(u<f)for(g=u,p=Math.min(f,c);g<p;++g)m=s[g],o[m]^=h,n.push(m);else if(u>f)for(g=f,p=Math.min(u,d);g<p;++g)m=s[g],o[m]^=h,r.push(m);if(c>d)for(g=Math.max(u,d),p=c;g<p;++g)m=s[g],o[m]^=h,n.push(m);else if(c<d)for(g=Math.max(f,c),p=d;g<p;++g)m=s[g],o[m]^=h,r.push(m);e.range=t.slice()}});function tT(e){U.call(this,null,e)}tT.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};re(tT,U,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if((i&n)===0)return t.StopPropagation;const o=t.fork(t.ALL),s=r.data(),a=r.curr(),l=r.prev(),u=c=>a[c]&n?null:s[c];return o.filter(o.MOD,u),i&i-1?(o.filter(o.ADD,c=>{const f=a[c]&n;return!f&&f^l[c]&n?s[c]:null}),o.filter(o.REM,c=>{const f=a[c]&n;return f&&!(f^(f^l[c]&n))?s[c]:null})):(o.filter(o.ADD,u),o.filter(o.REM,c=>(a[c]&n)===i?s[c]:null)),o.filter(o.SOURCE,c=>u(c._index))}});const Ule=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:eT,resolvefilter:tT},Symbol.toStringTag,{value:"Module"})),Hle="RawCode",oc="Literal",Wle="Property",Gle="Identifier",Vle="ArrayExpression",Yle="BinaryExpression",C7="CallExpression",Xle="ConditionalExpression",qle="LogicalExpression",Kle="MemberExpression",Jle="ObjectExpression",Zle="UnaryExpression";function Oo(e){this.type=e}Oo.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=Qle(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function Qle(e){switch(e.type){case Vle:return e.elements;case Yle:case qle:return[e.left,e.right];case C7:return[e.callee].concat(e.arguments);case Xle:return[e.test,e.consequent,e.alternate];case Kle:return[e.object,e.property];case Jle:return e.properties;case Wle:return[e.key,e.value];case Zle:return[e.argument];case Gle:case oc:case Hle:default:return[]}}var vs,xe,V,ir,Ct,db=1,Gp=2,sc=3,Ll=4,hb=5,Fc=6,$r=7,Vp=8,eue=9;vs={};vs[db]="Boolean";vs[Gp]="<end>";vs[sc]="Identifier";vs[Ll]="Keyword";vs[hb]="Null";vs[Fc]="Numeric";vs[$r]="Punctuator";vs[Vp]="String";vs[eue]="RegularExpression";var tue="ArrayExpression",nue="BinaryExpression",rue="CallExpression",iue="ConditionalExpression",T7="Identifier",oue="Literal",sue="LogicalExpression",aue="MemberExpression",lue="ObjectExpression",uue="Property",cue="UnaryExpression",Cn="Unexpected token %0",fue="Unexpected number",due="Unexpected string",hue="Unexpected identifier",gue="Unexpected reserved word",pue="Unexpected end of input",tS="Invalid regular expression",w2="Invalid regular expression: missing /",k7="Octal literals are not allowed in strict mode.",mue="Duplicate data property in object literal not allowed in strict mode",jn="ILLEGAL",Kg="Disabled.",yue=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),vue=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function gb(e,t){if(!e)throw new Error("ASSERT: "+t)}function Ps(e){return e>=48&&e<=57}function nT(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function mg(e){return"01234567".indexOf(e)>=0}function bue(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function Jg(e){return e===10||e===13||e===8232||e===8233}function Yp(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&yue.test(String.fromCharCode(e))}function xv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&vue.test(String.fromCharCode(e))}const xue={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function F7(){for(;V<ir;){const e=xe.charCodeAt(V);if(bue(e)||Jg(e))++V;else break}}function nS(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)V<ir&&nT(xe[V])?(r=xe[V++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):vt({},Cn,jn);return String.fromCharCode(i)}function wue(){var e,t,n,r;for(e=xe[V],t=0,e==="}"&&vt({},Cn,jn);V<ir&&(e=xe[V++],!!nT(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&vt({},Cn,jn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function D7(){var e,t;for(e=xe.charCodeAt(V++),t=String.fromCharCode(e),e===92&&(xe.charCodeAt(V)!==117&&vt({},Cn,jn),++V,e=nS("u"),(!e||e==="\\"||!Yp(e.charCodeAt(0)))&&vt({},Cn,jn),t=e);V<ir&&(e=xe.charCodeAt(V),!!xv(e));)++V,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),xe.charCodeAt(V)!==117&&vt({},Cn,jn),++V,e=nS("u"),(!e||e==="\\"||!xv(e.charCodeAt(0)))&&vt({},Cn,jn),t+=e);return t}function Eue(){var e,t;for(e=V++;V<ir;){if(t=xe.charCodeAt(V),t===92)return V=e,D7();if(xv(t))++V;else break}return xe.slice(e,V)}function Sue(){var e,t,n;return e=V,t=xe.charCodeAt(V)===92?D7():Eue(),t.length===1?n=sc:xue.hasOwnProperty(t)?n=Ll:t==="null"?n=hb:t==="true"||t==="false"?n=db:n=sc,{type:n,value:t,start:e,end:V}}function E2(){var e=V,t=xe.charCodeAt(V),n,r=xe[V],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++V,{type:$r,value:String.fromCharCode(t),start:e,end:V};default:if(n=xe.charCodeAt(V+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return V+=2,{type:$r,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:V};case 33:case 61:return V+=2,xe.charCodeAt(V)===61&&++V,{type:$r,value:xe.slice(e,V),start:e,end:V}}}if(s=xe.substr(V,4),s===">>>=")return V+=4,{type:$r,value:s,start:e,end:V};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return V+=3,{type:$r,value:o,start:e,end:V};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return V+=2,{type:$r,value:i,start:e,end:V};if(i==="//"&&vt({},Cn,jn),"<>=!+-*%&|^/".indexOf(r)>=0)return++V,{type:$r,value:r,start:e,end:V};vt({},Cn,jn)}function Oue(e){let t="";for(;V<ir&&nT(xe[V]);)t+=xe[V++];return t.length===0&&vt({},Cn,jn),Yp(xe.charCodeAt(V))&&vt({},Cn,jn),{type:Fc,value:parseInt("0x"+t,16),start:e,end:V}}function _ue(e){let t="0"+xe[V++];for(;V<ir&&mg(xe[V]);)t+=xe[V++];return(Yp(xe.charCodeAt(V))||Ps(xe.charCodeAt(V)))&&vt({},Cn,jn),{type:Fc,value:parseInt(t,8),octal:!0,start:e,end:V}}function t3(){var e,t,n;if(n=xe[V],gb(Ps(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=V,e="",n!=="."){if(e=xe[V++],n=xe[V],e==="0"){if(n==="x"||n==="X")return++V,Oue(t);if(mg(n))return _ue(t);n&&Ps(n.charCodeAt(0))&&vt({},Cn,jn)}for(;Ps(xe.charCodeAt(V));)e+=xe[V++];n=xe[V]}if(n==="."){for(e+=xe[V++];Ps(xe.charCodeAt(V));)e+=xe[V++];n=xe[V]}if(n==="e"||n==="E")if(e+=xe[V++],n=xe[V],(n==="+"||n==="-")&&(e+=xe[V++]),Ps(xe.charCodeAt(V)))for(;Ps(xe.charCodeAt(V));)e+=xe[V++];else vt({},Cn,jn);return Yp(xe.charCodeAt(V))&&vt({},Cn,jn),{type:Fc,value:parseFloat(e),start:t,end:V}}function Aue(){var e="",t,n,r,i,o=!1;for(t=xe[V],gb(t==="'"||t==='"',"String literal must starts with a quote"),n=V,++V;V<ir;)if(r=xe[V++],r===t){t="";break}else if(r==="\\")if(r=xe[V++],!r||!Jg(r.charCodeAt(0)))switch(r){case"u":case"x":xe[V]==="{"?(++V,e+=wue()):e+=nS(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:mg(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),V<ir&&mg(xe[V])&&(o=!0,i=i*8+"01234567".indexOf(xe[V++]),"0123".indexOf(r)>=0&&V<ir&&mg(xe[V])&&(i=i*8+"01234567".indexOf(xe[V++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&xe[V]===`
`&&++V;else{if(Jg(r.charCodeAt(0)))break;e+=r}return t!==""&&vt({},Cn,jn),{type:Vp,value:e,octal:o,start:n,end:V}}function Cue(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";vt({},tS)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{vt({},tS)}try{return new RegExp(e,t)}catch{return null}}function Tue(){var e,t,n,r,i;for(e=xe[V],gb(e==="/","Regular expression literal must start with a slash"),t=xe[V++],n=!1,r=!1;V<ir;)if(e=xe[V++],t+=e,e==="\\")e=xe[V++],Jg(e.charCodeAt(0))&&vt({},w2),t+=e;else if(Jg(e.charCodeAt(0)))vt({},w2);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||vt({},w2),i=t.substr(1,t.length-2),{value:i,literal:t}}function kue(){var e,t,n;for(t="",n="";V<ir&&(e=xe[V],!!xv(e.charCodeAt(0)));)++V,e==="\\"&&V<ir?vt({},Cn,jn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&vt({},tS,n),{value:n,literal:t}}function Fue(){var e,t,n,r;return Ct=null,F7(),e=V,t=Tue(),n=kue(),r=Cue(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:V}}function Due(e){return e.type===sc||e.type===Ll||e.type===db||e.type===hb}function M7(){if(F7(),V>=ir)return{type:Gp,start:V,end:V};const e=xe.charCodeAt(V);return Yp(e)?Sue():e===40||e===41||e===59?E2():e===39||e===34?Aue():e===46?Ps(xe.charCodeAt(V+1))?t3():E2():Ps(e)?t3():E2()}function Ir(){const e=Ct;return V=e.end,Ct=M7(),V=e.end,e}function $7(){const e=V;Ct=M7(),V=e}function Mue(e){const t=new Oo(tue);return t.elements=e,t}function n3(e,t,n){const r=new Oo(e==="||"||e==="&&"?sue:nue);return r.operator=e,r.left=t,r.right=n,r}function $ue(e,t){const n=new Oo(rue);return n.callee=e,n.arguments=t,n}function Nue(e,t,n){const r=new Oo(iue);return r.test=e,r.consequent=t,r.alternate=n,r}function rT(e){const t=new Oo(T7);return t.name=e,t}function Gh(e){const t=new Oo(oue);return t.value=e.value,t.raw=xe.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function r3(e,t,n){const r=new Oo(aue);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Rue(e){const t=new Oo(lue);return t.properties=e,t}function i3(e,t,n){const r=new Oo(uue);return r.key=t,r.value=n,r.kind=e,r}function Pue(e,t){const n=new Oo(cue);return n.operator=e,n.argument=t,n.prefix=!0,n}function vt(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,s)=>(gb(s<r.length,"Message reference must be in range"),r[s]));throw n=new Error(i),n.index=V,n.description=i,n}function pb(e){e.type===Gp&&vt(e,pue),e.type===Fc&&vt(e,fue),e.type===Vp&&vt(e,due),e.type===sc&&vt(e,hue),e.type===Ll&&vt(e,gue),vt(e,Cn,e.value)}function or(e){const t=Ir();(t.type!==$r||t.value!==e)&&pb(t)}function zt(e){return Ct.type===$r&&Ct.value===e}function S2(e){return Ct.type===Ll&&Ct.value===e}function Iue(){const e=[];for(V=Ct.start,or("[");!zt("]");)zt(",")?(Ir(),e.push(null)):(e.push(ac()),zt("]")||or(","));return Ir(),Mue(e)}function o3(){V=Ct.start;const e=Ir();return e.type===Vp||e.type===Fc?(e.octal&&vt(e,k7),Gh(e)):rT(e.value)}function jue(){var e,t,n,r;if(V=Ct.start,e=Ct,e.type===sc)return n=o3(),or(":"),r=ac(),i3("init",n,r);if(e.type===Gp||e.type===$r)pb(e);else return t=o3(),or(":"),r=ac(),i3("init",t,r)}function Lue(){var e=[],t,n,r,i={},o=String;for(V=Ct.start,or("{");!zt("}");)t=jue(),t.key.type===T7?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?vt({},mue):i[r]=!0,e.push(t),zt("}")||or(",");return or("}"),Rue(e)}function zue(){or("(");const e=iT();return or(")"),e}const Bue={if:1};function Uue(){var e,t,n;if(zt("("))return zue();if(zt("["))return Iue();if(zt("{"))return Lue();if(e=Ct.type,V=Ct.start,e===sc||Bue[Ct.value])n=rT(Ir().value);else if(e===Vp||e===Fc)Ct.octal&&vt(Ct,k7),n=Gh(Ir());else{if(e===Ll)throw new Error(Kg);e===db?(t=Ir(),t.value=t.value==="true",n=Gh(t)):e===hb?(t=Ir(),t.value=null,n=Gh(t)):zt("/")||zt("/=")?(n=Gh(Fue()),$7()):pb(Ir())}return n}function Hue(){const e=[];if(or("("),!zt(")"))for(;V<ir&&(e.push(ac()),!zt(")"));)or(",");return or(")"),e}function Wue(){V=Ct.start;const e=Ir();return Due(e)||pb(e),rT(e.value)}function Gue(){return or("."),Wue()}function Vue(){or("[");const e=iT();return or("]"),e}function Yue(){var e,t,n;for(e=Uue();;)if(zt("."))n=Gue(),e=r3(".",e,n);else if(zt("("))t=Hue(),e=$ue(e,t);else if(zt("["))n=Vue(),e=r3("[",e,n);else break;return e}function s3(){const e=Yue();if(Ct.type===$r&&(zt("++")||zt("--")))throw new Error(Kg);return e}function B0(){var e,t;if(Ct.type!==$r&&Ct.type!==Ll)t=s3();else{if(zt("++")||zt("--"))throw new Error(Kg);if(zt("+")||zt("-")||zt("~")||zt("!"))e=Ir(),t=B0(),t=Pue(e.value,t);else{if(S2("delete")||S2("void")||S2("typeof"))throw new Error(Kg);t=s3()}}return t}function a3(e){let t=0;if(e.type!==$r&&e.type!==Ll)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Xue(){var e,t,n,r,i,o,s,a,l,u;if(e=Ct,l=B0(),r=Ct,i=a3(r),i===0)return l;for(r.prec=i,Ir(),t=[e,Ct],s=B0(),o=[l,r,s];(i=a3(Ct))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),t.pop(),n=n3(a,l,s),o.push(n);r=Ir(),r.prec=i,o.push(r),t.push(Ct),n=B0(),o.push(n)}for(u=o.length-1,n=o[u],t.pop();u>1;)t.pop(),n=n3(o[u-1].value,o[u-2],n),u-=2;return n}function ac(){var e,t,n;return e=Xue(),zt("?")&&(Ir(),t=ac(),or(":"),n=ac(),e=Nue(e,t,n)),e}function iT(){const e=ac();if(zt(","))throw new Error(Kg);return e}function oT(e){xe=e,V=0,ir=xe.length,Ct=null,$7();const t=iT();if(Ct.type!==Gp)throw new Error("Unexpect token after expression.");return t}var N7={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function R7(e){function t(s,a,l,u){let c=e(a[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+s+(u<0?"":u===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(s,a,l){return u=>t(s,u,a,l)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&Y("Missing arguments to clamp function."),s.length>3&&Y("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(s){s.length<3&&Y("Missing arguments to if function."),s.length>3&&Y("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function que(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function P7(e){e=e||{};const t=e.allowed?xo(e.allowed):{},n=e.forbidden?xo(e.forbidden):{},r=e.constants||N7,i=(e.functions||R7)(f),o=e.globalvar,s=e.fieldvar,a=Ze(o)?o:g=>`${o}["${g}"]`;let l={},u={},c=0;function f(g){if(de(g))return g;const p=d[g.type];return p==null&&Y("Unsupported type: "+g.type),p(g)}const d={Literal:g=>g.raw,Identifier:g=>{const p=g.name;return c>0?p:Ae(n,p)?Y("Illegal identifier: "+p):Ae(r,p)?r[p]:Ae(t,p)?p:(l[p]=1,a(p))},MemberExpression:g=>{const p=!g.computed,m=f(g.object);p&&(c+=1);const y=f(g.property);return m===s&&(u[que(y)]=1),p&&(c-=1),m+(p?"."+y:"["+y+"]")},CallExpression:g=>{g.callee.type!=="Identifier"&&Y("Illegal callee type: "+g.callee.type);const p=g.callee.name,m=g.arguments,y=Ae(i,p)&&i[p];return y||Y("Unrecognized function: "+p),Ze(y)?y(m):y+"("+m.map(f).join(",")+")"},ArrayExpression:g=>"["+g.elements.map(f).join(",")+"]",BinaryExpression:g=>"("+f(g.left)+" "+g.operator+" "+f(g.right)+")",UnaryExpression:g=>"("+g.operator+f(g.argument)+")",ConditionalExpression:g=>"("+f(g.test)+"?"+f(g.consequent)+":"+f(g.alternate)+")",LogicalExpression:g=>"("+f(g.left)+g.operator+f(g.right)+")",ObjectExpression:g=>"{"+g.properties.map(f).join(",")+"}",Property:g=>{c+=1;const p=f(g.key);return c-=1,p+":"+f(g.value)}};function h(g){const p={code:f(g),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},p}return h.functions=i,h.constants=r,h}function l3(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Kue(e){let t=e,n=e,r=e;e.length!==2&&(t=(a,l)=>e(a)-l,n=l3,r=(a,l)=>l3(e(a),l));function i(a,l,u=0,c=a.length){if(u<c){if(n(l,l)!==0)return c;do{const f=u+c>>>1;r(a[f],l)<0?u=f+1:c=f}while(u<c)}return u}function o(a,l,u=0,c=a.length){if(u<c){if(n(l,l)!==0)return c;do{const f=u+c>>>1;r(a[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function s(a,l,u=0,c=a.length){const f=i(a,l,u,c-1);return f>u&&t(a[f-1],l)>-t(a[f],l)?f-1:f}return{left:i,center:s,right:o}}function Jue(e,...t){e=new hy(e),t=t.map(Zue);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Zue(e){return e instanceof hy?e:new hy(e)}function Que(...e){const t=new hy;for(const n of e)for(const r of n)t.add(r);return t}const sT="intersect",u3="union",ece="vlMulti",tce="vlPoint",c3="or",nce="and",Io="_vgsid_",Zg=Hr(Io),rce="E",ice="R",oce="R-E",sce="R-LE",ace="R-RE",wv="index:unit";function f3(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,s,a;o<i;++o)if(a=n[o],a.getter=Hr.getter||Hr(a.field),s=a.getter(e),Ka(s)&&(s=Zn(s)),Ka(r[o])&&(r[o]=Zn(r[o])),Ka(r[o][0])&&(r[o]=r[o].map(Zn)),a.type===rce){if(X(r[o])?r[o].indexOf(s)<0:s!==r[o])return!1}else if(a.type===ice){if(!uf(s,r[o]))return!1}else if(a.type===ace){if(!uf(s,r[o],!0,!1))return!1}else if(a.type===oce){if(!uf(s,r[o],!1,!1))return!1}else if(a.type===sce&&!uf(s,r[o],!1,!0))return!1;return!0}function lce(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[wv]&&r[wv].value:void 0,s=n===sT,a=i.length,l=0,u,c,f,d,h;l<a;++l)if(u=i[l],o&&s){if(c=c||{},f=c[d=u.unit]||0,f===-1)continue;if(h=f3(t,u),c[d]=h?-1:++f,h&&o.size===1)return!0;if(!h&&f===o.get(d).count)return!1}else if(h=f3(t,u),s^h)return h;return a&&s}const I7=Kue(Zg),uce=I7.left,cce=I7.right;function fce(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[wv]&&r[wv].value:void 0,s=n===sT,a=Zg(t),l=uce(i,a);if(l===i.length||Zg(i[l])!==a)return!1;if(o&&s){if(o.size===1)return!0;if(cce(i,a)-l<o.size)return!1}return!0}function dce(e,t){return e.map(n=>Je(t.fields?{values:t.fields.map(r=>(r.getter||(r.getter=Hr(r.field)))(n.datum))}:{[Io]:Zg(n.datum)},t))}function hce(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],s={},a={},l={},u,c,f,d,h,g,p,m,y,v,b=o.length,x=0,w,S;x<b;++x)if(u=o[x],d=u.unit,c=u.fields,f=u.values,c&&f){for(w=0,S=c.length;w<S;++w)h=c[w],p=s[h.field]||(s[h.field]={}),m=p[d]||(p[d]=[]),l[h.field]=y=h.type.charAt(0),v=O2["".concat(y,"_union")],p[d]=v(m,pe(f[w]));n&&(m=a[d]||(a[d]=[]),m.push(pe(f).reduce((E,O,A)=>(E[c[A].field]=O,E),{})))}else h=Io,g=Zg(u),p=s[h]||(s[h]={}),m=p[d]||(p[d]=[]),m.push(g),n&&(m=a[d]||(a[d]=[]),m.push({[Io]:g}));if(t=t||u3,s[Io]?s[Io]=O2["".concat(Io,"_").concat(t)](...Object.values(s[Io])):Object.keys(s).forEach(E=>{s[E]=Object.keys(s[E]).map(O=>s[E][O]).reduce((O,A)=>O===void 0?A:O2["".concat(l[E],"_").concat(t)](O,A))}),o=Object.keys(a),n&&o.length){const E=r?tce:ece;s[E]=t===u3?{[c3]:o.reduce((O,A)=>(O.push(...a[A]),O),[])}:{[nce]:o.map(O=>({[c3]:a[O]}))}}return s}var O2={["".concat(Io,"_union")]:Que,["".concat(Io,"_intersect")]:Jue,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Zn(t[0]),r=Zn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Zn(t[0]),r=Zn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const gce=":",pce="@";function aT(e,t,n,r){t[0].type!==oc&&Y("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&lt(t).value,s="unit",a=pce+s,l=gce+i;o===sT&&!Ae(r,a)&&(r[a]=n.getData(i).indataRef(n,s)),Ae(r,l)||(r[l]=n.getData(i).tuplesRef())}function j7(e){const t=this.context.data[e];return t?t.values.value:[]}function mce(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function yce(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove($i).insert(t)),1}function vce(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const Xp=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},bce=Xp("format"),L7=Xp("timeFormat"),xce=Xp("utcFormat"),wce=Xp("timeParse"),Ece=Xp("utcParse"),Km=new Date(2e3,0,1);function mb(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(Km.setYear(2e3),Km.setMonth(e),Km.setDate(t),L7.call(this,Km,n))}function Sce(e){return mb.call(this,e,1,"%B")}function Oce(e){return mb.call(this,e,1,"%b")}function _ce(e){return mb.call(this,0,2+e,"%A")}function Ace(e){return mb.call(this,0,2+e,"%a")}const Cce=":",Tce="@",rS="%",z7="$";function lT(e,t,n,r){t[0].type!==oc&&Y("First argument to data functions must be a string literal.");const i=t[0].value,o=Cce+i;if(!Ae(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function kce(e,t,n,r){t[0].type!==oc&&Y("First argument to indata must be a string literal."),t[1].type!==oc&&Y("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,s=Tce+o;Ae(s,r)||(r[s]=n.getData(i).indataRef(n,o))}function zr(e,t,n,r){if(t[0].type===oc)d3(n,r,t[0].value);else for(e in n.scales)d3(n,r,e)}function d3(e,t,n){const r=rS+n;if(!Ae(t,r))try{t[r]=e.scaleRef(n)}catch{}}function sa(e,t){let n;return Ze(e)?e:de(e)?(n=t.scales[e])&&n.value:void 0}function Fce(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=zr,n._range=zr,n._scale=zr;const r=i=>"_["+(i.type===oc?ae(rS+i.value):ae(rS)+"+"+e(i))+"]";return{_bandwidth:i=>"this.__bandwidth(".concat(r(i[0]),")"),_range:i=>"".concat(r(i[0]),".range()"),_scale:i=>"".concat(r(i[0]),"(").concat(e(i[1]),")")}}function uT(e,t){return function(n,r,i){if(n){const o=sa(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const Dce=uT("area",Zre),Mce=uT("bounds",nie),$ce=uT("centroid",lie);function Nce(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function cT(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Rce(){return cT(this.context.dataflow,"warn",arguments)}function Pce(){return cT(this.context.dataflow,"info",arguments)}function Ice(){return cT(this.context.dataflow,"debug",arguments)}function _2(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function iS(e){const t=vl(e),n=_2(t.r),r=_2(t.g),i=_2(t.b);return .2126*n+.7152*r+.0722*i}function jce(e,t){const n=iS(e),r=iS(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function Lce(){const e=[].slice.call(arguments);return e.unshift({}),Je(...e)}function B7(e,t){return e===t||e!==e&&t!==t?!0:X(e)?X(t)&&e.length===t.length?zce(e,t):!1:me(e)&&me(t)?U7(e,t):!1}function zce(e,t){for(let n=0,r=e.length;n<r;++n)if(!B7(e[n],t[n]))return!1;return!0}function U7(e,t){for(const n in e)if(!B7(e[n],t[n]))return!1;return!0}function h3(e){return t=>U7(e,t)}function Bce(e,t,n,r,i,o){const s=this.context.dataflow,a=this.context.data[e],l=a.input,u=s.stamp();let c=a.changes,f,d;if(s._trigger===!1||!(l.value.length||t||r))return 0;if((!c||c.stamp<u)&&(a.changes=c=s.changeset(),c.stamp=u,s.runAfter(()=>{a.modified=!0,s.pulse(l,c).run()},!0,1)),n&&(f=n===!0?$i:X(n)||C1(n)?n:h3(n),c.remove(f)),t&&c.insert(t),r&&(f=h3(r),l.value.some(f)?c.remove(f):c.insert(r)),i)for(d in o)c.modify(i,d,o[d]);return 1}function Uce(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)}function Hce(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const g3={};function Wce(e,t){const n=g3[t]||(g3[t]=Hr(t));return X(e)?e.map(n):n(e)}function fT(e){return X(e)||ArrayBuffer.isView(e)?e:null}function dT(e){return fT(e)||(de(e)?e:null)}function Gce(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fT(e).join(...n)}function Vce(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return dT(e).indexOf(...n)}function Yce(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return dT(e).lastIndexOf(...n)}function Xce(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return dT(e).slice(...n)}function qce(e,t,n){return Ze(n)&&Y("Function argument passed to replace."),String(e).replace(t,n)}function Kce(e){return fT(e).slice().reverse()}function Jce(e,t,n){return wA(e||0,t||0,n||0)}function Zce(e,t){const n=sa(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Qce(e,t){const n=sa(e,(t||this).context);return n?n.copy():void 0}function efe(e,t){const n=sa(e,(t||this).context);return n?n.domain():[]}function tfe(e,t,n){const r=sa(e,(n||this).context);return r?X(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function nfe(e,t){const n=sa(e,(t||this).context);return n&&n.range?n.range():[]}function rfe(e,t,n){const r=sa(e,(n||this).context);return r?r(t):void 0}function ife(e,t,n,r,i){e=sa(e,(i||this).context);const o=U6(t,n);let s=e.domain(),a=s[0],l=lt(s),u=ar;return l-a?u=F6(e,a,l):e=(e.interpolator?xt("sequential")().interpolator(e.interpolator()):xt("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(s=e.ticks(+r||15),a!==s[0]&&s.unshift(a),l!==lt(s)&&s.push(l)),s.forEach(c=>o.stop(u(c),e(c))),o}function ofe(e,t,n){const r=sa(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function sfe(e){let t=null;return function(n){return n?Ug(n,t=t||Xf(e)):e}}const H7=e=>e.data;function W7(e,t){const n=j7.call(t,e);return n.root&&n.root.lookup||{}}function afe(e,t,n){const r=W7(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(H7):void 0}function lfe(e,t){const n=W7(e,this)[t];return n?n.ancestors().map(H7):void 0}const G7=()=>typeof window<"u"&&window||null;function ufe(){const e=G7();return e?e.screen:{}}function cfe(){const e=G7();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function ffe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function V7(e,t,n){if(!e)return[];const[r,i]=e,o=new cn().set(r[0],r[1],i[0],i[1]),s=n||this.context.dataflow.scenegraph().root;return M4(s,o,dfe(t))}function dfe(e){let t=null;if(e){const n=pe(e.marktype),r=pe(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function hfe(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;const i=e[e.length-1];return i===void 0||Math.sqrt((i[0]-t)**2+(i[1]-n)**2)>r?(e.push([t,n]),[...e]):e}function gfe(e){return(e!=null?e:[]).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?"M ".concat(i,",").concat(o," "):r===e.length-1?" Z":"L ".concat(i,",").concat(o," ")},"")}function pfe(e,t,n){const{x:r,y:i,mark:o}=n,s=new cn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),u<s.y1&&(s.y1=u),u>s.y2&&(s.y2=u);return s.translate(r,i),V7([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(l=>mfe(l.x,l.y,t))}function mfe(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[s,a]=n[o],[l,u]=n[i];u>t!=a>t&&e<(s-l)*(t-u)/(a-u)+l&&r++}return r&1}const Qg={random(){return Ri()},cumulativeNormal:M1,cumulativeLogNormal:S_,cumulativeUniform:C_,densityNormal:v_,densityLogNormal:E_,densityUniform:A_,quantileNormal:$1,quantileLogNormal:O_,quantileUniform:T_,sampleNormal:D1,sampleLogNormal:w_,sampleUniform:__,isArray:X,isBoolean:$l,isDate:Ka,isDefined(e){return e!==void 0},isNumber:kt,isObject:me,isRegExp:rj,isString:de,isTuple:C1,isValid(e){return e!=null&&e===e},toBoolean:WO,toDate(e){return GO(e)},toNumber:Zn,toString:VO,indexof:Vce,join:Gce,lastindexof:Yce,replace:qce,reverse:Kce,slice:Xce,flush:tj,lerp:ij,merge:Lce,pad:aj,peek:lt,pluck:Wce,span:xp,inrange:uf,truncate:lj,rgb:vl,lab:ky,hcl:Fy,hsl:Cy,luminance:iS,contrast:jce,sequence:ui,format:bce,utcFormat:xce,utcParse:Ece,utcOffset:Kj,utcSequence:Qj,timeFormat:L7,timeParse:wce,timeOffset:qj,timeSequence:Zj,timeUnitSpecifier:jj,monthFormat:Sce,monthAbbrevFormat:Oce,dayFormat:_ce,dayAbbrevFormat:Ace,quarter:JI,utcquarter:ZI,week:zj,utcweek:Hj,dayofyear:Lj,utcdayofyear:Uj,warn:Rce,info:Pce,debug:Ice,extent(e){return is(e)},inScope:Nce,intersect:V7,clampRange:QI,pinchDistance:Uce,pinchAngle:Hce,screen:ufe,containerSize:ffe,windowSize:cfe,bandspace:Jce,setdata:yce,pathShape:sfe,panLinear:YI,panLog:XI,panPow:qI,panSymlog:KI,zoomLinear:jO,zoomLog:LO,zoomPow:fy,zoomSymlog:zO,encode:vce,modify:Bce,lassoAppend:hfe,lassoPath:gfe,intersectLasso:pfe},yfe=["view","item","group","xy","x","y"],vfe="event.vega.",Y7="this.",hT={},X7={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>"_[".concat(ae(z7+e),"]"),functions:bfe,constants:N7,visitors:hT},oS=P7(X7);function bfe(e){const t=R7(e);yfe.forEach(n=>t[n]=vfe+n);for(const n in Qg)t[n]=Y7+n;return Je(t,Fce(e,Qg,hT)),t}function dn(e,t,n){return arguments.length===1?Qg[e]:(Qg[e]=t,n&&(hT[e]=n),oS&&(oS.functions[e]=Y7+e),this)}dn("bandwidth",Zce,zr);dn("copy",Qce,zr);dn("domain",efe,zr);dn("range",nfe,zr);dn("invert",tfe,zr);dn("scale",rfe,zr);dn("gradient",ife,zr);dn("geoArea",Dce,zr);dn("geoBounds",Mce,zr);dn("geoCentroid",$ce,zr);dn("geoShape",ofe,zr);dn("indata",mce,kce);dn("data",j7,lT);dn("treePath",afe,lT);dn("treeAncestors",lfe,lT);dn("vlSelectionTest",lce,aT);dn("vlSelectionIdTest",fce,aT);dn("vlSelectionResolve",hce,aT);dn("vlSelectionTuples",dce);function as(e,t){const n={};let r;try{e=de(e)?e:ae(e)+"",r=oT(e)}catch{Y("Expression parse error: "+e)}r.visit(o=>{if(o.type!==C7)return;const s=o.callee.name,a=X7.visitors[s];a&&a(s,o.arguments,t,n)});const i=oS(r);return i.globals.forEach(o=>{const s=z7+o;!Ae(n,s)&&t.getSignal(o)&&(n[s]=t.signalRef(o))}),{$expr:Je({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function xfe(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const wfe=xo(["rule"]),p3=xo(["group","image","rect"]);function Efe(e,t){let n="";return wfe[t]||(e.x2&&(e.x?(p3[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(p3[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function gT(e){return(e+"").toLowerCase()}function Sfe(e){return gT(e)==="operator"}function Ofe(e){return gT(e)==="collect"}function uh(e,t,n){n[n.length-1]!==";"&&(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function _fe(e,t,n,r){return"((u = ".concat(e,") < (v = ").concat(t,") || u == null) && v != null ? ").concat(n,`
  : (u > v || v == null) && u != null ? `).concat(r,`
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? `).concat(n,`
  : v !== v && u === u ? `).concat(r," : ")}var Afe={operator:(e,t)=>uh(e,["_"],t.code),parameter:(e,t)=>uh(e,["datum","_"],t.code),event:(e,t)=>uh(e,["event"],t.code),handler:(e,t)=>{const n="var datum=event.item&&event.item.datum;return ".concat(t.code,";");return uh(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const s="o["+ae(o)+"]";i+="$=".concat(r[o].code,";if(").concat(s,"!==$)").concat(s,"=$,m=1;")}return i+=Efe(r,n),i+="return m;",uh(e,["item","_"],i)},codegen:{get(e){const t="[".concat(e.map(ae).join("]["),"]"),n=Function("_","return _".concat(t,";"));return n.path=t,n},comparator(e,t){let n;const r=(o,s)=>{const a=t[s];let l,u;return o.path?(l="a".concat(o.path),u="b".concat(o.path)):((n=n||{})["f"+s]=o,l="this.f".concat(s,"(a)"),u="this.f".concat(s,"(b)")),_fe(l,u,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function Cfe(e){const t=this;Sfe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Tfe(e){const t=this;if(e.params){const n=t.get(e.id);n||Y("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function kfe(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=X(i)?i.map(o=>m3(o,n,t)):m3(i,n,t)}return t}function m3(e,t,n){if(!e||!me(e))return e;for(let r=0,i=y3.length,o;r<i;++r)if(o=y3[r],Ae(e,o.key))return o.parse(e,t,n);return e}var y3=[{key:"$ref",parse:Ffe},{key:"$key",parse:Mfe},{key:"$expr",parse:Dfe},{key:"$field",parse:$fe},{key:"$encode",parse:Rfe},{key:"$compare",parse:Nfe},{key:"$context",parse:Pfe},{key:"$subflow",parse:Ife},{key:"$tupleid",parse:jfe}];function Ffe(e,t){return t.get(e.$ref)||Y("Operator not defined: "+e.$ref)}function Dfe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code+"_"+e.$name;return t.fn[r]||(t.fn[r]=Kr(t.parameterExpression(e.$expr),e.$fields,e.$name))}function Mfe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=HO(e.$key,e.$flat,t.expr.codegen))}function $fe(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Hr(e.$field,e.$name,t.expr.codegen))}function Nfe(e,t){const n="c:"+e.$compare+"_"+e.$order,r=pe(e.$compare).map(i=>i&&i.$tupleid?Te:i);return t.fn[n]||(t.fn[n]=BO(r,e.$order,t.expr.codegen))}function Rfe(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=Kr(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function Pfe(e,t){return t}function Ife(e,t){const n=e.$subflow;return function(r,i,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(o),a.detachSubflow=()=>t.detach(s),a}}function jfe(){return Te}function Lfe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Y("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function zfe(e){var t=this,n=me(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,s=void 0;r||Y("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,s)}const Bfe={skip:!0};function Ufe(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(r[o]=s.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(i[o]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function Hfe(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],Bfe)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove($i).insert(r[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}function q7(e,t,n,r){return new K7(e,t,n,r)}function K7(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||Afe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function v3(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}K7.prototype=v3.prototype={fork(){const e=new v3(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Ofe(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[gT(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:xfe,parseOperator:Cfe,parseOperatorParameters:Tfe,parseParameters:kfe,parseStream:Lfe,parseUpdate:zfe,getState:Ufe,setState:Hfe};function Wfe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),J7(t,e.description()))}function J7(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Gfe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const A2="default";function Vfe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:A2,item:null}));e.on(e.events("view","mousemove"),t,(n,r)=>{const i=t.value,o=i?de(i)?i:i.user:A2,s=r.item&&r.item.cursor||null;return i&&o===i.user&&s==i.item?i:{user:o,item:s}}),e.add(null,function(n){let r=n.cursor,i=this.value;return de(r)||(i=r.item,r=r.user),sS(e,r&&r!==A2?r:i||r),i},{cursor:t})}function sS(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function Ev(e,t){var n=e._runtime.data;return Ae(n,t)||Y("Unrecognized data set: "+t),n[t]}function Yfe(e,t){return arguments.length<2?Ev(this,e).values.value:yb.call(this,e,Cc().remove($i).insert(t))}function yb(e,t){A5(t)||Y("Second argument to changes must be a changeset.");const n=Ev(this,e);return n.modified=!0,this.pulse(n.input,t)}function Xfe(e,t){return yb.call(this,e,Cc().insert(t))}function qfe(e,t){return yb.call(this,e,Cc().remove(t))}function Z7(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Q7(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function vb(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Kfe(e){var t=vb(e),n=Z7(e),r=Q7(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function Jfe(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,s,a;return i&&(a=vb(e),s=t.changedTouches?t.changedTouches[0]:t,o=ib(s,i),o[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=Zfe(e,n,o),t}function Zfe(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(s){var a=r,l;if(s){for(l=t;l;l=l.mark.group)if(l.mark.name===s){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;de(s)&&(s=i(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:lr(e),item:lr(t||{}),group:i,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}const b3="view",Qfe="timer",ede="window",tde={trap:!1};function nde(e){const t=Je({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{X(r[o])&&(r[o]=xo(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function e9(e,t,n,r){e._eventListeners.push({type:n,sources:pe(t),handler:r})}function rde(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function Jm(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||me(r)&&!r[n]?(e.warn("Blocked ".concat(t," ").concat(n," event listener.")),!1):!0}function ide(e,t,n){var r=this,i=new F1(n),o=function(u,c){r.runAsync(null,()=>{e===b3&&rde(r,t)&&u.preventDefault(),i.receive(Jfe(r,u,c))})},s;if(e===Qfe)Jm(r,"timer",t)&&r.timer(o,t);else if(e===b3)Jm(r,"view",t)&&r.addEventListener(t,o,tde);else if(e===ede?Jm(r,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&Jm(r,"selector",t)&&(s=document.querySelectorAll(e)),!s)r.warn("Can not resolve event source: "+e);else{for(var a=0,l=s.length;a<l;++a)s[a].addEventListener(t,o);e9(r,s,t,o)}return i}function x3(e){return e.item}function w3(e){return e.item.mark.source}function E3(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function ode(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","mouseover",x3),w3,E3(e)),this.on(this.events("view","mouseout",x3),w3,E3(t)),this}function sde(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,o;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(o=n[r],i=o.sources.length;--i>=0;)o.sources[i].removeEventListener(o.type,o.handler);return e&&e.call(this,this._handler,null,null,null),this}function fi(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const ade="vega-bind",lde="vega-bind-name",ude="vega-bind-radio";function cde(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,s)})}},r.debounce&&(i.update=UO(r.debounce,i.update))),(r.input==null&&r.element?fde:hde)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function fde(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),e9(r,t,i,o),e.set=s=>{t.value=s,t.dispatchEvent(dde(i))}}function dde(e){return typeof Event<"u"?new Event(e):{type:e}}function hde(e,t,n,r){const i=r.signal(n.signal),o=fi("div",{class:ade}),s=n.input==="radio"?o:o.appendChild(fi("label"));s.appendChild(fi("span",{class:lde},n.name||n.signal)),t.appendChild(o);let a=gde;switch(n.input){case"checkbox":a=pde;break;case"select":a=mde;break;case"radio":a=yde;break;case"range":a=vde;break}a(e,s,n,i)}function gde(e,t,n,r){const i=fi("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function pde(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=fi("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function mde(e,t,n,r){const i=fi("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const l={value:s};Sv(s,r)&&(l.selected=!0),i.appendChild(fi("option",l,(o[a]||s)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=s=>{for(let a=0,l=n.options.length;a<l;++a)if(Sv(n.options[a],s)){i.selectedIndex=a;return}}}function yde(e,t,n,r){const i=fi("span",{class:ude}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((s,a)=>{const l={type:"radio",name:n.signal,value:s};Sv(s,r)&&(l.checked=!0);const u=fi("input",l);u.addEventListener("change",()=>e.update(s));const c=fi("label",{},(o[a]||s)+"");return c.prepend(u),i.appendChild(c),u}),e.set=s=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)Sv(a[u].value,s)&&(a[u].checked=!0)}}function vde(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,s=n.step||hl(o,i,100),a=fi("input",{type:"range",name:n.signal,min:o,max:i,step:s});a.value=r;const l=fi("span",{},+r);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=c=>{a.value=c,l.textContent=c}}function Sv(e,t){return e===t||e+""==t+""}function t9(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,Z7(e),Q7(e),vb(e),i,o).background(e.background())}function pT(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function bde(e,t,n,r){const i=new r(e.loader(),pT(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,vb(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function xde(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=ob(r);e=n._el=e?C2(n,e,!0):null,Wfe(n),o||n.error("Unrecognized renderer type: "+r);const s=o.handler||zp,a=e?o.renderer:o.headless;return n._renderer=a?t9(n,n._renderer,e,a):null,n._handler=bde(n,n._handler,e,s),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=C2(n,t,!0):e.appendChild(fi("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=C2(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{cde(n,l.element||t,l)})),n}function C2(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const ch=e=>+e||0,wde=e=>({top:e,bottom:e,left:e,right:e});function S3(e){return me(e)?{top:ch(e.top),bottom:ch(e.bottom),left:ch(e.left),right:ch(e.right)}:wde(ch(e))}async function mT(e,t,n,r){const i=ob(t),o=i&&i.headless;return o||Y("Unrecognized renderer type: "+t),await e.runAsync(),t9(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function Ede(e,t){e!==za.Canvas&&e!==za.SVG&&e!==za.PNG&&Y("Unrecognized image type: "+e);const n=await mT(this,e,t);return e===za.SVG?Sde(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Sde(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Ode(e,t){return(await mT(this,za.Canvas,e,t)).canvas()}async function _de(e){return(await mT(this,za.SVG,e)).svg()}function Ade(e,t,n){return q7(e,Uf,Qg,n).parse(t)}function Cde(e){var t=this._runtime.scales;return Ae(t,e)||Y("Unrecognized scale or projection: "+e),t[e].value}var n9="width",r9="height",yT="padding",O3={skip:!0};function i9(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===yT?r.left+r.right:0)}function o9(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===yT?r.top+r.bottom:0)}function Tde(e){var t=e._signals,n=t[n9],r=t[r9],i=t[yT];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=i9(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=o9(e,a.size),o()},{size:r});const s=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,s.rank=i.rank+1}function kde(e,t,n,r,i,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal(n9,n,O3),s._resizeWidth.skip(!0)),s.height()!==r&&(a=1,s.signal(r9,r,O3),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==i[0]||s._origin[1]!==i[1])&&(s._resize=1,s._origin=i),a&&s.run("enter"),o&&s.runAfter(l=>l.resize())},!1,1)}function Fde(e){return this._runtime.getState(e||{data:Dde,signals:Mde,recurse:!0})}function Dde(e,t){return t.modified&&X(t.input.value)&&e.indexOf("_:vega:_")}function Mde(e,t){return!(e==="parent"||t instanceof Uf.proxy)}function $de(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Nde(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(use(n,t))}function Rde(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Pde(r))}function Pde(e){return e==null?"":X(e)?s9(e):me(e)&&!Ka(e)?Ide(e):e+""}function Ide(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(X(n)?s9(n):a9(n))}).join(`
`)}function s9(e){return"["+e.map(a9).join(", ")+"]"}function a9(e){return X(e)?"[\u2026]":me(e)&&!Ka(e)?"{\u2026}":e}function l9(e,t){const n=this;if(t=t||{},Ef.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=Je({},e.locale,t.locale);n.locale(m5(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||za.Canvas,n._scenegraph=new JA;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Rde,n._redraw=!0,n._handler=new zp().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=nde(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=Ade(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:Je({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=i9(n,n._width),n._viewHeight=o9(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Tde(n),Gfe(n),Vfe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind)}function Zm(e,t){return Ae(e._signals,t)?e._signals[t]:Y("Unrecognized signal name: "+ae(t))}function u9(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function _3(e,t,n,r){let i=u9(n,r);return i||(i=pT(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function A3(e,t,n){const r=u9(t,n);return r&&t._targets.remove(r),e}re(l9,Ef,{async evaluate(e,t,n){if(await Ef.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Kfe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&_0(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&J7(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=Zm(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",S3(e)):S3(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(ob(e)||Y("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Ef.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Zm(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:kde,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=pT(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return _3(this,e,Zm(this,e),t)},removeSignalListener(e,t){return A3(this,Zm(this,e),t)},addDataListener(e,t){return _3(this,e,Ev(this,e).values,t)},removeDataListener(e,t){return A3(this,Ev(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=sS(this,null);this._globalCursor=!!e,t&&sS(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Nde,events:ide,finalize:sde,hover:ode,data:Yfe,change:yb,insert:Xfe,remove:qfe,scale:Cde,initialize:xde,toImageURL:Ede,toCanvas:Ode,toSVG:_de,getState:Fde,setState:$de});const jde="view",Ov="[",_v="]",c9="{",f9="}",Lde=":",d9=",",zde="@",Bde=">",Ude=/[[\]{}]/,Hde={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let h9,g9;function zl(e,t,n){return h9=t||jde,g9=n||Hde,p9(e.trim()).map(aS)}function Wde(e){return g9[e]}function yg(e,t,n,r,i){const o=e.length;let s=0,a;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function p9(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=yg(e,i,d9,Ov+c9,_v+f9),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function aS(e){return e[0]==="["?Gde(e):Vde(e)}function Gde(e){const t=e.length;let n=1,r;if(n=yg(e,n,_v,Ov,_v),n===t)throw"Empty between selector: "+e;if(r=p9(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Bde)throw"Expected '>' after between selector: "+e;r=r.map(aS);const i=aS(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Vde(e){const t={source:h9},n=[];let r=[0,0],i=0,o=0,s=e.length,a=0,l,u;if(e[s-1]===f9){if(a=e.lastIndexOf(c9),a>=0){try{r=Yde(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),s=e.length}else throw"Unmatched right brace: "+e;a=0}if(!s)throw e;if(e[0]===zde&&(i=++a),l=yg(e,a,Lde),l<s&&(n.push(e.substring(o,l).trim()),o=a=++l),a=yg(e,a,Ov),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),u=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=yg(e,a,_v),a===s)throw"Unmatched left bracket: "+e;if(u.push(e.substring(o,a).trim()),a<s-1&&e[++a]!==Ov)throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||Ude.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],i?t.markname=n[0].slice(1):Wde(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function Yde(e){const t=e.split(d9);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function Xde(e){return me(e)?e:{type:e||"pad"}}const fh=e=>+e||0,qde=e=>({top:e,bottom:e,left:e,right:e});function Kde(e){return me(e)?e.signal?e:{top:fh(e.top),bottom:fh(e.bottom),left:fh(e.left),right:fh(e.right)}:qde(fh(e))}const Tn=e=>me(e)&&!X(e)?Je({},e):{value:e};function C3(e,t,n,r){return n!=null?(me(n)&&!X(n)||X(n)&&n.length&&me(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function zn(e,t,n){for(const r in t)C3(e,r,t[r]);for(const r in n)C3(e,r,n[r],"update")}function Nd(e,t,n){for(const r in t)n&&Ae(n,r)||(e[r]=Je(e[r]||{},t[r]));return e}function sf(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const vT="mark",bT="frame",xT="scope",Jde="axis",Zde="axis-domain",Qde="axis-grid",ehe="axis-label",the="axis-tick",nhe="axis-title",rhe="legend",ihe="legend-band",ohe="legend-entry",she="legend-gradient",m9="legend-label",ahe="legend-symbol",lhe="legend-title",uhe="title",che="title-text",fhe="title-subtitle";function dhe(e,t,n,r,i){const o={},s={};let a,l,u,c;l="lineBreak",t==="text"&&i[l]!=null&&!sf(l,e)&&T2(o,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===bT?i.group:n===vT?Je({},i.mark,i[t]):null;for(l in c)u=sf(l,e)||(l==="fill"||l==="stroke")&&(sf("fill",e)||sf("stroke",e)),u||T2(o,l,c[l]);pe(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)sf(h,e)||T2(o,h,d[h])}),e=Je({},e);for(l in o)c=o[l],c.signal?(a=a||{})[l]=c:s[l]=c;return e.enter=Je(s,e.enter),a&&(e.update=Je(a,e.update)),e}function T2(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const y9=e=>de(e)?ae(e):e.signal?`(${e.signal})`:v9(e);function bb(e){if(e.gradient!=null)return ghe(e);let t=e.signal?`(${e.signal})`:e.color?hhe(e.color):e.field!=null?v9(e.field):e.value!==void 0?ae(e.value):void 0;return e.scale!=null&&(t=phe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${U0(e.exponent)})`),e.mult!=null&&(t+=`*${U0(e.mult)}`),e.offset!=null&&(t+=`+${U0(e.offset)}`),e.round&&(t=`round(${t})`),t}const Qm=(e,t,n,r)=>`(${e}(${[t,n,r].map(bb).join(",")})+'')`;function hhe(e){return e.c?Qm("hcl",e.h,e.c,e.l):e.h||e.s?Qm("hsl",e.h,e.s,e.l):e.l||e.a?Qm("lab",e.l,e.a,e.b):e.r||e.g||e.b?Qm("rgb",e.r,e.g,e.b):null}function ghe(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:ae(n));for(;t.length&&lt(t)==null;)t.pop();return t.unshift(y9(e.gradient)),`gradient(${t.join(",")})`}function U0(e){return me(e)?"("+bb(e)+")":e}function v9(e){return b9(me(e)?e:{datum:e})}function b9(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Y("Invalid field reference: "+ae(e));return e.signal||(r=de(r)?hs(r).map(ae).join("]["):b9(r)),t+"["+r+"]"}function phe(e,t){const n=y9(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+U0(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function mhe(e){let t="";return e.forEach(n=>{const r=bb(n);t+=n.test?`(${n.test})?${r}:`:r}),lt(t)===":"&&(t+="null"),t}function x9(e,t,n,r,i,o){const s={};o=o||{},o.encoders={$encode:s},e=dhe(e,t,n,r,i.config);for(const a in e)s[a]=yhe(e[a],t,o,i);return o}function yhe(e,t,n,r){const i={},o={};for(const s in e)e[s]!=null&&(i[s]=bhe(vhe(e[s]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function vhe(e){return X(e)?mhe(e):bb(e)}function bhe(e,t,n,r){const i=as(e,t);return i.$fields.forEach(o=>r[o]=1),Je(n,i.$params),i.$expr}const xhe="outer",whe=["value","update","init","react","bind"];function T3(e,t){Y(e+' for "outer" push: '+ae(t))}function w9(e,t){const n=e.name;if(e.push===xhe)t.signals[n]||T3("No prior signal definition",n),whe.forEach(r=>{e[r]!==void 0&&T3("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function lS(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function xb(e,t,n,r){return new lS(e,t,n,r)}function Av(e,t){return xb("operator",e,t)}function Ce(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function ep(e,t){return t?{$field:e,$name:t}:{$field:e}}const uS=ep("key");function k3(e,t){return{$compare:e,$order:t}}function Ehe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const She="ascending",Ohe="descending";function _he(e){return me(e)?(e.order===Ohe?"-":"+")+wb(e.op,e.field):""}function wb(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const wT="scope",cS="view";function bn(e){return e&&e.signal}function Ahe(e){return e&&e.expr}function H0(e){if(bn(e))return!0;if(me(e)){for(const t in e)if(H0(e[t]))return!0}return!1}function Zi(e,t){return e!=null?e:t}function Uu(e){return e&&e.signal||e}const F3="timer";function tp(e,t){return(e.merge?The:e.stream?khe:e.type?Fhe:Y("Invalid stream specification: "+ae(e)))(e,t)}function Che(e){return e===wT?cS:e||cS}function The(e,t){const n=e.merge.map(i=>tp(i,t)),r=ET({merge:n},e,t);return t.addStream(r).id}function khe(e,t){const n=tp(e.stream,t),r=ET({stream:n},e,t);return t.addStream(r).id}function Fhe(e,t){let n;e.type===F3?(n=t.event(F3,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Che(e.source),e.type);const r=ET({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function ET(e,t,n){let r=t.between;return r&&(r.length!==2&&Y('Stream "between" parameter must have 2 entries: '+ae(t)),e.between=[tp(r[0],n),tp(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Dhe(t.marktype,t.markname,t.markrole)),t.source===wT&&r.push("inScope(event.item)"),r.length&&(e.filter=as("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Dhe(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const Mhe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function $he(e,t,n){const r=e.encode,i={target:n};let o=e.events,s=e.update,a=[];o||Y("Signal update missing events specification."),de(o)&&(o=zl(o,t.isSubscope()?wT:cS)),o=pe(o).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[Rhe(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),r!=null&&(s&&Y("Signal encode and update are mutually exclusive."),s="encode(item(),"+ae(r)+")"),i.update=de(s)?as(s,t):s.expr!=null?as(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:Mhe,$params:{$value:t.signalRef(s.signal)}}:Y("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(l=>t.addUpdate(Je(Nhe(l,t),i)))}function Nhe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):tp(e,t)}}function Rhe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Phe(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Y("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=as(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>$he(i,t,n.id))}const Ft=e=>(t,n,r)=>xb(e,n,t||void 0,r),E9=Ft("aggregate"),Ihe=Ft("axisticks"),S9=Ft("bound"),_o=Ft("collect"),D3=Ft("compare"),jhe=Ft("datajoin"),O9=Ft("encode"),Lhe=Ft("expression"),zhe=Ft("facet"),Bhe=Ft("field"),Uhe=Ft("key"),Hhe=Ft("legendentries"),Whe=Ft("load"),Ghe=Ft("mark"),Vhe=Ft("multiextent"),Yhe=Ft("multivalues"),Xhe=Ft("overlap"),qhe=Ft("params"),_9=Ft("prefacet"),Khe=Ft("projection"),Jhe=Ft("proxy"),Zhe=Ft("relay"),A9=Ft("render"),Qhe=Ft("scale"),Dc=Ft("sieve"),ege=Ft("sortitems"),C9=Ft("viewlayout"),tge=Ft("values");let nge=0;const T9={min:"min",max:"max",count:"sum"};function rge(e,t){const n=e.type||"linear";O6(n)||Y("Unrecognized scale type: "+ae(n)),t.addScale(e.name,{type:n,domain:void 0})}function ige(e,t){const n=t.getScale(e.name).params;let r;n.domain=k9(e.domain,e,t),e.range!=null&&(n.range=D9(e,t,n)),e.interpolate!=null&&gge(e.interpolate,n),e.nice!=null&&(n.nice=hge(e.nice)),e.bins!=null&&(n.bins=dge(e.bins,t));for(r in e)Ae(n,r)||r==="name"||(n[r]=ki(e[r],t))}function ki(e,t){return me(e)?e.signal?t.signalRef(e.signal):Y("Unsupported object: "+ae(e)):e}function W0(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>ki(n,t))}function Eb(e){Y("Can not find data set: "+ae(e))}function k9(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Y("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(X(e)?oge:e.fields?age:sge)(e,t,n)}function oge(e,t,n){return e.map(r=>ki(r,n))}function sge(e,t,n){const r=n.getData(e.data);return r||Eb(e.data),Yf(t.type)?r.valuesRef(n,e.field,F9(e.sort,!1)):C6(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function age(e,t,n){const r=e.data,i=e.fields.reduce((o,s)=>(s=de(s)?{data:r,field:s}:X(s)||s.signal?lge(s,n):s,o.push(s),o),[]);return(Yf(t.type)?uge:C6(t.type)?cge:fge)(e,n,i)}function lge(e,t){const n="_:vega:_"+nge++,r=_o({});if(X(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+ae(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Dc({})]),{data:n,field:"data"}}function uge(e,t,n){const r=F9(e.sort,!0);let i,o;const s=n.map(u=>{const c=t.getData(u.data);return c||Eb(u.data),c.countsRef(t,u.field,r)}),a={groupby:uS,pulse:s};r&&(i=r.op||"count",o=r.field?wb(i,r.field):"count",a.ops=[T9[i]],a.fields=[t.fieldRef(o)],a.as=[o]),i=t.add(E9(a));const l=t.add(_o({pulse:Ce(i)}));return o=t.add(tge({field:uS,sort:t.sortRef(r),pulse:Ce(l)})),Ce(o)}function F9(e,t){return e&&(!e.field&&!e.op?me(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Y("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!T9[e.op]&&Y("Multiple domain scales can not be sorted using "+e.op)),e}function cge(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||Eb(i.data),o.domainRef(t,i.field)});return Ce(t.add(Yhe({values:r})))}function fge(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||Eb(i.data),o.extentRef(t,i.field)});return Ce(t.add(Vhe({extents:r})))}function dge(e,t){return e.signal||X(e)?W0(e,t):t.objectProperty(e)}function hge(e){return me(e)?{interval:ki(e.interval),step:ki(e.step)}:ki(e)}function gge(e,t){t.interpolate=ki(e.type||e),e.gamma!=null&&(t.interpolateGamma=ki(e.gamma))}function D9(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(de(i)){if(r&&Ae(r,i))return e=Je({},e,{range:r[i]}),D9(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Yf(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Y("Unrecognized scale range value: "+ae(i))}else if(i.scheme){n.scheme=X(i.scheme)?W0(i.scheme,t):ki(i.scheme,t),i.extent&&(n.schemeExtent=W0(i.extent,t)),i.count&&(n.schemeCount=ki(i.count,t));return}else if(i.step){n.rangeStep=ki(i.step,t);return}else{if(Yf(e.type)&&!X(i))return k9(i,e,t);X(i)||Y("Unsupported range type: "+ae(i))}return i.map(o=>(X(o)?W0:ki)(o,t))}function pge(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=fS(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=fS(n[i],i,t));t.addProjection(e.name,r)}function fS(e,t,n){return X(e)?e.map(r=>fS(r,t,n)):me(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Y("Unsupported parameter object: "+ae(e)):e}const Ao="top",Rd="left",Pd="right",Ol="bottom",M9="center",mge="vertical",yge="start",vge="middle",bge="end",dS="index",ST="label",xge="offset",rd="perc",wge="perc2",Di="value",qp="guide-label",OT="guide-title",Ege="group-title",Sge="group-subtitle",M3="symbol",G0="gradient",hS="discrete",gS="size",Oge="shape",_ge="fill",Age="stroke",Cge="strokeWidth",Tge="strokeDash",kge="opacity",_T=[gS,Oge,_ge,Age,Cge,Tge,kge],Kp={name:1,style:1,interactive:1},ht={value:0},Mi={value:1},Sb="group",$9="rect",AT="rule",Fge="symbol",Mc="text";function np(e){return e.type=Sb,e.interactive=e.interactive||!1,e}function Jr(e,t){const n=(r,i)=>Zi(e[r],Zi(t[r],i));return n.isVertical=r=>mge===Zi(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Zi(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Zi(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Zi(e.columns,Zi(t.columns,+n.isVertical(!0))),n}function N9(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Dge(e,t,n){const r=t.config.style[n];return r&&r[e]}function Ob(e,t,n){return`item.anchor === '${yge}' ? ${e} : item.anchor === '${bge}' ? ${t} : ${n}`}const CT=Ob(ae(Rd),ae(Pd),ae(M9));function Mge(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},me(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function R9(e,t){return t?e?me(e)?Object.assign({},e,{offset:R9(e.offset,t)}):{value:e,offset:t}:t:e}function vi(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Nd(e.encode,t,Kp)):e.interactive=!1,e}function $ge(e,t,n,r){const i=Jr(e,n),o=i.isVertical(),s=i.gradientThickness(),a=i.gradientLength();let l,u,c,f,d;o?(u=[0,1],c=[0,0],f=s,d=a):(u=[0,0],c=[1,0],f=a,d=s);const h={enter:l={opacity:ht,x:ht,y:ht,width:Tn(f),height:Tn(d)},update:Je({},l,{opacity:Mi,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:ht}};return zn(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),vi({type:$9,role:she,encode:h},r)}function Nge(e,t,n,r,i){const o=Jr(e,n),s=o.isVertical(),a=o.gradientThickness(),l=o.gradientLength();let u,c,f,d,h="";s?(u="y",f="y2",c="x",d="width",h="1-"):(u="x",f="x2",c="y",d="height");const g={opacity:ht,fill:{scale:t,field:Di}};g[u]={signal:h+"datum."+rd,mult:l},g[c]=ht,g[f]={signal:h+"datum."+wge,mult:l},g[d]=Tn(a);const p={enter:g,update:Je({},g,{opacity:Mi}),exit:{opacity:ht}};return zn(p,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),vi({type:$9,role:ihe,key:Di,from:i,encode:p},r)}const Rge=`datum.${rd}<=0?"${Rd}":datum.${rd}>=1?"${Pd}":"${M9}"`,Pge=`datum.${rd}<=0?"${Ol}":datum.${rd}>=1?"${Ao}":"${vge}"`;function $3(e,t,n,r){const i=Jr(e,t),o=i.isVertical(),s=Tn(i.gradientThickness()),a=i.gradientLength();let l=i("labelOverlap"),u,c,f,d,h="";const g={enter:u={opacity:ht},update:c={opacity:Mi,text:{field:ST}},exit:{opacity:ht}};return zn(g,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Zi(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=c.baseline={signal:Pge},f="y",d="x",h="1-"):(u.align=c.align={signal:Rge},u.baseline={value:"top"},f="x",d="y"),u[f]=c[f]={signal:h+"datum."+rd,mult:a},u[d]=c[d]=s,s.offset=Zi(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+dS}:void 0,vi({type:Mc,role:m9,style:qp,key:Di,from:r,encode:g,overlap:l},n)}function Ige(e,t,n,r,i){const o=Jr(e,t),s=n.entries,a=!!(s&&s.interactive),l=s?s.name:void 0,u=o("clipHeight"),c=o("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${xge} : datum.${gS}`,h=u?Tn(u):{field:gS},g=`datum.${dS}`,p=`max(1, ${i})`;let m,y,v,b,x;h.mult=.5,m={enter:y={opacity:ht,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:Mi,x:y.x,y:y.y},exit:{opacity:ht}};let w=null,S=null;e.fill||(w=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),zn(m,{fill:o("symbolFillColor",w),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",S),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),_T.forEach(C=>{e[C]&&(v[C]=y[C]={scale:e[C],field:Di})});const E=vi({type:Fge,role:ahe,key:Di,from:f,clip:u?!0:void 0,encode:m},n.symbols),O=Tn(c);O.offset=o("labelOffset"),m={enter:y={opacity:ht,x:{signal:d,offset:O},y:h},update:v={opacity:Mi,text:{field:ST},x:y.x,y:y.y},exit:{opacity:ht}},zn(m,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const A=vi({type:Mc,role:m9,style:qp,key:Di,from:f,encode:m},n.labels);return m={enter:{noBound:{value:!u},width:ht,height:u?Tn(u):ht,opacity:ht},exit:{opacity:ht},update:v={opacity:Mi,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(b=`ceil(item.mark.items.length / ${p})`,v.row.signal=`${g}%${b}`,v.column.signal=`floor(${g} / ${b})`,x={field:["row",g]}):(v.row.signal=`floor(${g} / ${p})`,v.column.signal=`${g} % ${p}`,x={field:g}),v.column.signal=`(${i})?${v.column.signal}:${g}`,r={facet:{data:r,name:"value",groupby:dS}},np({role:xT,from:r,encode:Nd(m,s,Kp),marks:[E,A],name:l,interactive:a,sort:x})}function jge(e,t){const n=Jr(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const TT='item.orient === "left"',kT='item.orient === "right"',_b=`(${TT} || ${kT})`,Lge=`datum.vgrad && ${_b}`,zge=Ob('"top"','"bottom"','"middle"'),Bge=Ob('"right"','"left"','"center"'),Uge=`datum.vgrad && ${kT} ? (${Bge}) : (${_b} && !(datum.vgrad && ${TT})) ? "left" : ${CT}`,Hge=`item._anchor || (${_b} ? "middle" : "start")`,Wge=`${Lge} ? (${TT} ? -90 : 90) : 0`,Gge=`${_b} ? (datum.vgrad ? (${kT} ? "bottom" : "top") : ${zge}) : "top"`;function Vge(e,t,n,r){const i=Jr(e,t),o={enter:{opacity:ht},update:{opacity:Mi,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:ht}};return zn(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Hge},angle:{signal:Wge},align:{signal:Uge},baseline:{signal:Gge},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),vi({type:Mc,role:lhe,style:OT,from:r,encode:o},n)}function Yge(e,t){let n;return me(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+N3(e.path)+")":e.sphere&&(n="geoShape("+N3(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function N3(e){return me(e)&&e.signal?e.signal:ae(e)}function P9(e){const t=e.role||"";return!t.indexOf("axis")||!t.indexOf("legend")||!t.indexOf("title")?t:e.type===Sb?xT:t||vT}function Xge(e){return{marktype:e.type,name:e.name||void 0,role:e.role||P9(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function qge(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function FT(e,t){const n=k5(e.type);n||Y("Unrecognized transform type: "+ae(e.type));const r=xb(n.type.toLowerCase(),null,I9(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function I9(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const s=e.params[o];r[s.name]=Kge(s,t,n)}return r}function Kge(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return Jge(e,t,n);if(i===void 0){e.required&&Y("Missing required "+ae(t.type)+" parameter: "+ae(e.name));return}else{if(r==="param")return Zge(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!bn(i)?i.map(o=>R3(e,o,n)):R3(e,i,n)}function R3(e,t,n){const r=e.type;if(bn(t))return I3(r)?Y("Expression references can not be signals."):k2(r)?n.fieldRef(t):j3(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||k2(r);return i&&Qge(t)?n.exprRef(t.expr,t.as):i&&epe(t)?ep(t.field,t.as):I3(r)?as(t,n):tpe(r)?Ce(n.getData(t).values):k2(r)?ep(t):j3(r)?n.compareRef(t):t}}function Jge(e,t,n){return de(t.from)||Y('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function Zge(e,t,n){const r=t[e.name];return e.array?(X(r)||Y("Expected an array of sub-parameters. Instead: "+ae(r)),r.map(i=>P3(e,i,n))):P3(e,r,n)}function P3(e,t,n){const r=e.params.length;let i;for(let s=0;s<r;++s){i=e.params[s];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Y("Unsupported parameter: "+ae(t));const o=Je(I9(i,t,n),i.key);return Ce(n.add(qhe(o)))}const Qge=e=>e&&e.expr,epe=e=>e&&e.field,tpe=e=>e==="data",I3=e=>e==="expr",k2=e=>e==="field",j3=e=>e==="compare";function npe(e,t,n){let r,i,o,s,a;return e?(r=e.facet)&&(t||Y("Only group marks can be faceted."),r.field!=null?s=a=V0(r,n):(e.data?a=Ce(n.getData(e.data).aggregate):(o=FT(Je({type:"aggregate",groupby:pe(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=V0(r,n),s=a=Ce(n.add(o))),i=n.keyRef(r.groupby,!0))):s=Ce(n.add(_o(null,[{}]))),s||(s=V0(e,n)),{key:i,pulse:s,parent:a}}function V0(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ce(t.getData(e.data).output)}function lc(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}lc.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],s=null,a=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Ce(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(s=t[a]);return new lc(e,o,i,r,s)};function j9(e){return de(e)?e:null}function L3(e,t,n){const r=wb(n.op,n.field);let i;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function dh(e,t,n,r,i,o,s){const a=t[n]||(t[n]={}),l=_he(o);let u=j9(i),c,f;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),c=a[u]),!c){const d=o?{field:uS,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:Ce(t.output)};l&&(d.sort=e.sortRef(o)),f=e.add(xb(r,void 0,d)),s&&(t.index[i]=f),c=Ce(f),u!=null&&(a[u]=c)}return c}lc.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=j9(t);let s,a,l;return o!=null&&(e=r.scope,s=i[o]),s?n&&n.field&&L3(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Ce(r.output)},n&&n.field&&L3(e,l,n),a=e.add(E9(l)),s=e.add(_o({pulse:Ce(a)})),s={agg:a,ref:Ce(s)},o!=null&&(i[o]=s)),s.ref},tuplesRef(){return Ce(this.values)},extentRef(e,t){return dh(e,this,"extent","extent",t,!1)},domainRef(e,t){return dh(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return dh(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return dh(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return dh(e,this,"indata","tupleindex",t,!0,!0)}};function rpe(e,t,n){const r=e.from.facet,i=r.name,o=V0(r,t);let s;r.name||Y("Facet must have a name: "+ae(r)),r.data||Y("Facet must reference a data set: "+ae(r)),r.field?s=t.add(_9({field:t.fieldRef(r.field),pulse:o})):r.groupby?s=t.add(zhe({key:t.keyRef(r.groupby),group:Ce(t.proxy(n.parent)),pulse:o})):Y("Facet must specify groupby or field: "+ae(r));const a=t.fork(),l=a.add(_o()),u=a.add(Dc({pulse:Ce(l)}));a.addData(i,new lc(a,l,l,u)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}function ipe(e,t,n){const r=t.add(_9({pulse:n.pulse})),i=t.fork();i.add(Dc()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function L9(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,s=e.modify,a=e.values,l=t.add(Av()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,o,s,a].map(f=>f==null?"null":f).join(",")+"),0)",c=as(u,t);l.update=c.$expr,l.params=c.$params}function Ab(e,t){const n=P9(e),r=e.type===Sb,i=e.from&&e.from.facet,o=e.overlap;let s=e.layout||n===xT||n===bT,a,l,u,c,f,d,h;const g=n===vT||s||i,p=npe(e.from,r,t);l=t.add(jhe({key:p.key||(e.key?ep(e.key):void 0),pulse:p.pulse,clean:!r}));const m=Ce(l);l=u=t.add(_o({pulse:m})),l=t.add(Ghe({markdef:Xge(e),interactive:qge(e.interactive,t),clip:Yge(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ce(l)}));const y=Ce(l);l=c=t.add(O9(x9(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{const E=FT(S,t),O=E.metadata;(O.generates||O.changes)&&Y("Mark transforms should not generate new data."),O.nomod||(c.params.mod=!0),E.params.pulse=Ce(l),t.add(l=E)}),e.sort&&(l=t.add(ege({sort:t.compareRef(e.sort),pulse:Ce(l)})));const v=Ce(l);(i||s)&&(s=t.add(C9({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=Ce(s));const b=t.add(S9({mark:y,pulse:d||v}));h=Ce(b),r&&(g&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(v,d||h,m),i?rpe(e,t,p):g?ipe(e,t,p):t.parse(e),t.popState(),g&&(s&&a.push(s),a.push(b))),o&&(h=ope(o,h,t));const x=t.add(A9({pulse:h})),w=t.add(Dc({pulse:Ce(x)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new lc(t,u,x,w)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&Y("Marks only support modify triggers."),L9(S,t,f)}))}function ope(e,t,n){const r=e.method,i=e.bound,o=e.separation,s={separation:bn(o)?n.signalRef(o.signal):o,method:bn(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;s.boundTolerance=bn(a)?n.signalRef(a.signal):+a,s.boundScale=n.scaleRef(i.scale),s.boundOrient=i.orient}return Ce(n.add(Xhe(s)))}function spe(e,t){const n=t.config.legend,r=e.encode||{},i=Jr(e,n),o=r.legend||{},s=o.name||void 0,a=o.interactive,l=o.style,u={};let c=0,f,d,h;_T.forEach(b=>e[b]?(u[b]=e[b],c=c||e[b]):0),c||Y("Missing valid scale for legend.");const g=ape(e,t.scaleType(c)),p={title:e.title!=null,scales:u,type:g,vgrad:g!=="symbol"&&i.isVertical()},m=Ce(t.add(_o(null,[p]))),y={enter:{x:{value:0},y:{value:0}}},v=Ce(t.add(Hhe(d={type:g,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return g===G0?(h=[$ge(e,c,n,r.gradient),$3(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${Uu(i.gradientLength())})/100))`)):g===hS?h=[Nge(e,c,n,r.gradient,v),$3(e,n,r.labels,v)]:(f=jge(e,n),h=[Ige(e,n,r,v,Uu(f.columns))],d.size=cpe(e,t,h[0].marks)),h=[np({role:ohe,from:m,encode:y,marks:h,layout:f,interactive:a})],p.title&&h.push(Vge(e,n,r.title,m)),Ab(np({role:rhe,from:m,encode:Nd(upe(i,e,n),o,Kp),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:a,style:l}),t)}function ape(e,t){let n=e.type||M3;return!e.type&&lpe(e)===1&&(e.fill||e.stroke)&&(n=AA(t)?G0:oE(t)?hS:M3),n!==G0?n:oE(t)?hS:G0}function lpe(e){return _T.reduce((t,n)=>t+(e[n]?1:0),0)}function upe(e,t,n){const r={enter:{},update:{}};return zn(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function cpe(e,t,n){const r=Uu(z3("size",e,n)),i=Uu(z3("strokeWidth",e,n)),o=Uu(fpe(n[1].encode,t,qp));return as(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function z3(e,t,n){return t[e]?`scale("${t[e]}",datum)`:N9(e,n[0].encode)}function fpe(e,t,n){return N9("fontSize",e)||Dge("fontSize",t,n)}const dpe=`item.orient==="${Rd}"?-90:item.orient==="${Pd}"?90:0`;function hpe(e,t){e=de(e)?{text:e}:e;const n=Jr(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,s=i.interactive,a=i.style,l=[],u={},c=Ce(t.add(_o(null,[u])));return l.push(mpe(e,n,gpe(e),c)),e.subtitle&&l.push(ype(e,n,r.subtitle,c)),Ab(np({role:uhe,from:c,encode:ppe(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),t)}function gpe(e){const t=e.encode;return t&&t.title||Je({name:e.name,interactive:e.interactive,style:e.style},t)}function ppe(e,t){const n={enter:{},update:{}};return zn(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:CT},angle:{signal:dpe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Nd(n,t,Kp)}function mpe(e,t,n,r){const i={value:0},o=e.text,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return zn(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),vi({type:Mc,role:che,style:Ege,from:r,encode:s},n)}function ype(e,t,n,r){const i={value:0},o=e.subtitle,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return zn(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),vi({type:Mc,role:fhe,style:Sge,from:r,encode:s},n)}function vpe(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(FT(r,t))}),e.on&&e.on.forEach(r=>{L9(r,t,e.name)}),t.addDataPipeline(e.name,bpe(e,t,n))}function bpe(e,t,n){const r=[];let i=null,o=!1,s=!1,a,l,u,c,f;for(e.values?bn(e.values)||H0(e.format)?(r.push(B3(t,e)),r.push(i=eu())):r.push(i=eu({$ingest:e.values,$format:e.format})):e.url?H0(e.url)||H0(e.format)?(r.push(B3(t,e)),r.push(i=eu())):r.push(i=eu({$request:e.url,$format:e.format})):e.source&&(i=a=pe(e.source).map(d=>Ce(t.getData(d).output)),r.push(null)),l=0,u=n.length;l<u;++l)c=n[l],f=c.metadata,!i&&!f.source&&r.push(i=eu()),r.push(c),f.generates&&(s=!0),f.modifies&&!s&&(o=!0),f.source?i=c:f.changes&&(i=null);return a&&(u=a.length-1,r[0]=Zhe({derive:o,pulse:u?a:a[0]}),(o||u)&&r.splice(1,0,eu())),i||r.push(eu()),r.push(Dc({})),r}function eu(e){const t=_o({},e);return t.metadata={source:!0},t}function B3(e,t){return Whe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const z9=e=>e===Ol||e===Ao,Cb=(e,t,n)=>bn(e)?Spe(e.signal,t,n):e===Rd||e===Ao?t:n,kn=(e,t,n)=>bn(e)?wpe(e.signal,t,n):z9(e)?t:n,mo=(e,t,n)=>bn(e)?Epe(e.signal,t,n):z9(e)?n:t,B9=(e,t,n)=>bn(e)?Ope(e.signal,t,n):e===Ao?{value:t}:{value:n},xpe=(e,t,n)=>bn(e)?_pe(e.signal,t,n):e===Pd?{value:t}:{value:n},wpe=(e,t,n)=>U9(`${e} === '${Ao}' || ${e} === '${Ol}'`,t,n),Epe=(e,t,n)=>U9(`${e} !== '${Ao}' && ${e} !== '${Ol}'`,t,n),Spe=(e,t,n)=>DT(`${e} === '${Rd}' || ${e} === '${Ao}'`,t,n),Ope=(e,t,n)=>DT(`${e} === '${Ao}'`,t,n),_pe=(e,t,n)=>DT(`${e} === '${Pd}'`,t,n),U9=(e,t,n)=>(t=t!=null?Tn(t):t,n=n!=null?Tn(n):n,U3(t)&&U3(n)?(t=t?t.signal||ae(t.value):null,n=n?n.signal||ae(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Je({test:e},t)].concat(n||[])),U3=e=>e==null||Object.keys(e).length===1,DT=(e,t,n)=>({signal:`${e} ? (${gf(t)}) : (${gf(n)})`}),Ape=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${Rd}' ? (${gf(r)}) : `:"")+(n!=null?`${e} === '${Ol}' ? (${gf(n)}) : `:"")+(i!=null?`${e} === '${Pd}' ? (${gf(i)}) : `:"")+(t!=null?`${e} === '${Ao}' ? (${gf(t)}) : `:"")+"(null)"}),gf=e=>bn(e)?e.signal:e==null?null:ae(e),Cpe=(e,t)=>t===0?0:bn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Af=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Xc(e,t,n,r){let i;if(t&&Ae(t,e))return t[e];if(Ae(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[OT][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[qp][i]}return null}function H3(e){const t={};for(const n of e)if(!!n)for(const r in n)t[r]=1;return Object.keys(t)}function Tpe(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,a,l,u;if(bn(s)){const f=H3([n.axisX,n.axisY]),d=H3([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of f)a[u]=kn(s,Xc(u,n.axisX,i,r),Xc(u,n.axisY,i,r));l={};for(u of d)l[u]=Ape(s.signal,Xc(u,n.axisTop,i,r),Xc(u,n.axisBottom,i,r),Xc(u,n.axisLeft,i,r),Xc(u,n.axisRight,i,r))}else a=s===Ao||s===Ol?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return a||l||o?Je({},i,a,l,o):i}function kpe(e,t,n,r){const i=Jr(e,t),o=e.orient;let s,a;const l={enter:s={opacity:ht},update:a={opacity:Mi},exit:{opacity:ht}};zn(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=W3(e,0),c=W3(e,1);return s.x=a.x=kn(o,u,ht),s.x2=a.x2=kn(o,c),s.y=a.y=mo(o,u,ht),s.y2=a.y2=mo(o,c),vi({type:AT,role:Zde,from:r,encode:l},n)}function W3(e,t){return{scale:e.scale,range:t}}function Fpe(e,t,n,r,i){const o=Jr(e,t),s=e.orient,a=e.gridScale,l=Cb(s,1,-1),u=Dpe(e.offset,l);let c,f,d;const h={enter:c={opacity:ht},update:d={opacity:Mi},exit:f={opacity:ht}};zn(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const g={scale:e.scale,field:Di,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},p=kn(s,{signal:"height"},{signal:"width"}),m=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},y=a?{scale:a,range:1,mult:l,offset:u}:Je(p,{mult:l,offset:u});return c.x=d.x=kn(s,g,m),c.y=d.y=mo(s,g,m),c.x2=d.x2=mo(s,y),c.y2=d.y2=kn(s,y),f.x=kn(s,g),f.y=mo(s,g),vi({type:AT,role:Qde,key:Di,from:r,encode:h},n)}function Dpe(e,t){if(t!==1)if(!me(e))e=bn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Je({},e);for(;n.mult!=null;)if(me(n.mult))n=n.mult=Je({},n.mult);else return n.mult=bn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function Mpe(e,t,n,r,i,o){const s=Jr(e,t),a=e.orient,l=Cb(a,-1,1);let u,c,f;const d={enter:u={opacity:ht},update:f={opacity:Mi},exit:c={opacity:ht}};zn(d,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const h=Tn(i);h.mult=l;const g={scale:e.scale,field:Di,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return f.y=u.y=kn(a,ht,g),f.y2=u.y2=kn(a,h),c.x=kn(a,g),f.x=u.x=mo(a,ht,g),f.x2=u.x2=mo(a,h),c.y=mo(a,g),vi({type:AT,role:the,key:Di,from:r,encode:d},n)}function F2(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function $pe(e,t,n,r,i,o){const s=Jr(e,t),a=e.orient,l=e.scale,u=Cb(a,-1,1),c=Uu(s("labelFlush")),f=Uu(s("labelFlushOffset")),d=s("labelAlign"),h=s("labelBaseline");let g=c===0||!!c,p;const m=Tn(i);m.mult=u,m.offset=Tn(s("labelPadding")||0),m.offset.mult=u;const y={scale:l,field:Di,band:.5,offset:R9(o.offset,s("labelOffset"))},v=kn(a,g?F2(l,c,'"left"','"right"','"center"'):{value:"center"},xpe(a,"left","right")),b=kn(a,B9(a,"bottom","top"),g?F2(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),x=F2(l,c,`-(${f})`,f,0);g=g&&f;const w={opacity:ht,x:kn(a,y,m),y:mo(a,y,m)},S={enter:w,update:p={opacity:Mi,text:{field:ST},x:w.x,y:w.y,align:v,baseline:b},exit:{opacity:ht,x:w.x,y:w.y}};zn(S,{dx:!d&&g?kn(a,x):null,dy:!h&&g?mo(a,x):null}),zn(S,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:d,baseline:h});const E=s("labelBound");let O=s("labelOverlap");return O=O||E?{separation:s("labelSeparation"),method:O,order:"datum.index",bound:E?{scale:l,orient:a,tolerance:E}:null}:void 0,p.align!==v&&(p.align=Af(p.align,v)),p.baseline!==b&&(p.baseline=Af(p.baseline,b)),vi({type:Mc,role:ehe,style:qp,key:Di,from:r,encode:S,overlap:O},n)}function Npe(e,t,n,r){const i=Jr(e,t),o=e.orient,s=Cb(o,-1,1);let a,l;const u={enter:a={opacity:ht,anchor:Tn(i("titleAnchor",null)),align:{signal:CT}},update:l=Je({},a,{opacity:Mi,text:Tn(e.title)}),exit:{opacity:ht}},c={signal:`lerp(range("${e.scale}"), ${Ob(0,1,.5)})`};return l.x=kn(o,c),l.y=mo(o,c),a.angle=kn(o,ht,Cpe(s,90)),a.baseline=kn(o,B9(o,Ol,Ao),{value:Ol}),l.angle=a.angle,l.baseline=a.baseline,zn(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Rpe(i,o,u,n),u.update.align=Af(u.update.align,a.align),u.update.angle=Af(u.update.angle,a.angle),u.update.baseline=Af(u.update.baseline,a.baseline),vi({type:Mc,role:nhe,style:OT,from:r,encode:u},n)}function Rpe(e,t,n,r){const i=(a,l)=>a!=null?(n.update[l]=Af(Tn(a),n.update[l]),!1):!sf(l,r),o=i(e("titleX"),"x"),s=i(e("titleY"),"y");n.enter.auto=s===o?Tn(s):kn(t,Tn(s),Tn(o))}function Ppe(e,t){const n=Tpe(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,s=i.interactive,a=i.style,l=Jr(e,n),u=Mge(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},f=Ce(t.add(_o({},[c]))),d=Ce(t.add(Ihe({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let g;return c.grid&&h.push(Fpe(e,n,r.grid,d,u)),c.ticks&&(g=l("tickSize"),h.push(Mpe(e,n,r.ticks,d,g,u))),c.labels&&(g=c.ticks?g:0,h.push($pe(e,n,r.labels,d,g,u))),c.domain&&h.push(kpe(e,n,r.domain,f)),c.title&&h.push(Npe(e,n,r.title,f)),Ab(np({role:Jde,from:f,encode:Nd(Ipe(l,e),i,Kp),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:s,style:a}),t)}function Ipe(e,t){const n={enter:{},update:{}};return zn(n,{orient:e("orient"),offset:e("offset")||0,position:Zi(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function H9(e,t,n){const r=pe(e.signals),i=pe(e.scales);return n||r.forEach(o=>w9(o,t)),pe(e.projections).forEach(o=>pge(o,t)),i.forEach(o=>rge(o,t)),pe(e.data).forEach(o=>vpe(o,t)),i.forEach(o=>ige(o,t)),(n||r).forEach(o=>Phe(o,t)),pe(e.axes).forEach(o=>Ppe(o,t)),pe(e.marks).forEach(o=>Ab(o,t)),pe(e.legends).forEach(o=>spe(o,t)),e.title&&hpe(e.title,t),t.parseLambdas(),t}const jpe=e=>Nd({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Lpe(e,t){const n=t.config,r=Ce(t.root=t.add(Av())),i=zpe(e,n);i.forEach(u=>w9(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(_o()),s=t.add(O9(x9(jpe(e.encode),Sb,bT,e.style,t,{pulse:Ce(o)}))),a=t.add(C9({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Ce(s)}));t.operators.pop(),t.pushState(Ce(s),Ce(a),null),H9(e,t,i),t.operators.push(a);let l=t.add(S9({mark:r,pulse:Ce(a)}));return l=t.add(A9({pulse:Ce(l)})),l=t.add(Dc({pulse:Ce(l)})),t.addData("root",new lc(t,o,o,l)),t}function hh(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function zpe(e,t){const n=s=>Zi(e[s],t[s]),r=[hh("background",n("background")),hh("autosize",Xde(n("autosize"))),hh("padding",Kde(n("padding"))),hh("width",n("width")||0),hh("height",n("height")||0)],i=r.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return pe(e.signals).forEach(s=>{Ae(i,s.name)?s=Je(i[s.name],s):r.push(s),o[s.name]=s}),pe(t.signals).forEach(s=>{!Ae(o,s.name)&&!Ae(i,s.name)&&r.push(s)}),r}function W9(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function G3(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}W9.prototype=G3.prototype={parse(e){return H9(e,this)},fork(){return new G3(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof lS?Ce(e):e;return this.add(Jhe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let s,a;r&&(s=r.data||(r.data={}),a=s[i]||(s[i]=[]),a.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Ce(this.add(Dc({pulse:e})))),this._parent.push(t),this._lookup.push(n?Ce(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return lt(this._parent)},encode(){return lt(this._encode)},lookup(){return lt(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(de(e))return ep(e,t);e.signal||Y("Unsupported field reference: "+ae(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Ce(this.add(Bhe(i)))}return r},compareRef(e){let t=!1;const n=o=>bn(o)?(t=!0,this.signalRef(o.signal)):Ahe(o)?(t=!0,this.exprRef(o.expr)):o,r=pe(e.field).map(n),i=pe(e.order).map(n);return t?Ce(this.add(D3({fields:r,orders:i}))):k3(r,i)},keyRef(e,t){let n=!1;const r=o=>bn(o)?(n=!0,Ce(i[o.signal])):o,i=this.signals;return e=pe(e).map(r),n?Ce(this.add(Uhe({fields:e,flat:t}))):Ehe(e,t)},sortRef(e){if(!e)return e;const t=wb(e.op,e.field),n=e.order||She;return n.signal?Ce(this.add(D3({fields:t,orders:this.signalRef(n.signal)}))):k3(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Ae(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Y("Duplicate signal name: "+ae(e));const n=t instanceof lS?t:this.add(Av(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Y("Unrecognized signal name: "+ae(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ce(this.signals[e]):(Ae(this.lambdas,e)||(this.lambdas[e]=this.add(Av(null))),Ce(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=as(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!me(e)?e:this.signalRef(e.signal||MT(e))},exprRef(e,t){const n={expr:as(e,this)};return t&&(n.expr.$name=t),Ce(this.add(Lhe(n)))},addBinding(e,t){this.bindings||Y("Nested signals do not support binding: "+ae(e)),this.bindings.push(Je({signal:e},t))},addScaleProj(e,t){Ae(this.scales,e)&&Y("Duplicate scale or projection name: "+ae(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Qhe(t))},addProjection(e,t){this.addScaleProj(e,Khe(t))},getScale(e){return this.scales[e]||Y("Unrecognized scale name: "+ae(e)),this.scales[e]},scaleRef(e){return Ce(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ae(this.data,e)&&Y("Duplicate data set name: "+ae(e)),this.data[e]=t},getData(e){return this.data[e]||Y("Undefined data set name: "+ae(e)),this.data[e]},addDataPipeline(e,t){return Ae(this.data,e)&&Y("Duplicate data set name: "+ae(e)),this.addData(e,lc.fromEntries(this,t))}};function MT(e){return(X(e)?Bpe:Upe)(e)}function Bpe(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(me(i)?i.signal||MT(i):ae(i))}return n+"]"}function Upe(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+ae(r)+":"+(me(i)?i.signal||MT(i):ae(i));return t+"}"}function Hpe(){const e="sans-serif",r="#4c78a8",i="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Wpe(e,t,n){return me(e)||Y("Input Vega specification must be an object."),t=Ed(Hpe(),t,e.config),Lpe(e,new W9(t,n)).toRuntime()}var Gpe="5.22.1";Je(Uf,KJ,mre,Xre,$oe,Cse,ele,$ae,nle,_le,Rle,Ule);const Vpe=Object.freeze(Object.defineProperty({__proto__:null,version:Gpe,Dataflow:Ef,EventStream:F1,MultiPulse:h_,Operator:$t,Parameters:k1,Pulse:Qa,Transform:U,changeset:Cc,definition:k5,ingest:Et,isTuple:C1,transform:F5,transforms:Uf,tupleid:Te,interpolate:CA,interpolateColors:X1,interpolateRange:T6,quantizeInterpolator:k6,scale:xt,scheme:TA,projection:_C,View:l9,defaultLocale:l_,formatLocale:xy,locale:m5,resetDefaultLocale:Kq,timeFormatLocale:Pg,expressionFunction:dn,parse:Wpe,runtimeContext:q7,codegenExpression:P7,parseExpression:oT,parseSelector:zl,Debug:UI,Error:RO,Info:BI,None:zI,Warn:PO,accessor:Kr,accessorFields:nr,accessorName:on,array:pe,ascending:E1,clampRange:QI,compare:BO,constant:lr,debounce:UO,error:Y,extend:Je,extent:is,extentIndex:ej,falsy:wa,fastmap:Od,field:Hr,flush:tj,hasOwnProperty:Ae,id:bp,identity:ar,inherits:re,inrange:uf,isArray:X,isBoolean:$l,isDate:Ka,isFunction:Ze,isIterable:nj,isNumber:kt,isObject:me,isRegExp:rj,isString:de,key:HO,lerp:ij,logger:IO,lruCache:oj,merge:sj,mergeConfig:Ed,one:wd,pad:aj,panLinear:YI,panLog:XI,panPow:qI,panSymlog:KI,peek:lt,quarter:JI,repeat:Ah,span:xp,splitAccessPath:hs,stringValue:ae,toBoolean:WO,toDate:GO,toNumber:Zn,toSet:xo,toString:VO,truncate:lj,truthy:$i,utcquarter:ZI,visitArray:Aa,writeConfig:Sd,zero:Ma,zoomLinear:jO,zoomLog:LO,zoomPow:fy,zoomSymlog:zO,bandwidthNRD:y_,bin:M5,bootstrapCI:$5,cumulativeLogNormal:S_,cumulativeNormal:M1,cumulativeUniform:C_,densityLogNormal:E_,densityNormal:v_,densityUniform:A_,dotbin:N5,quantileLogNormal:O_,quantileNormal:$1,quantileUniform:T_,quantiles:p_,quartiles:m_,get random(){return Ri},randomInteger:eJ,randomKDE:x_,randomLCG:QK,randomLogNormal:P5,randomMixture:I5,randomNormal:b_,randomUniform:j5,regressionExp:z5,regressionLinear:k_,regressionLoess:H5,regressionLog:L5,regressionPoly:U5,regressionPow:B5,regressionQuad:F_,sampleCurve:R1,sampleLogNormal:w_,sampleNormal:D1,sampleUniform:__,setRandom:JK,DATE:Gr,DAY:qn,DAYOFYEAR:os,HOURS:pi,MILLISECONDS:wo,MINUTES:mi,MONTH:rr,QUARTER:Wr,SECONDS:Ni,TIME_UNITS:r_,WEEK:yn,YEAR:Ln,dayofyear:Lj,timeBin:n5,timeFloor:Vj,timeInterval:Cd,timeOffset:qj,timeSequence:Zj,timeUnitSpecifier:jj,timeUnits:i_,utcFloor:Yj,utcInterval:Td,utcOffset:Kj,utcSequence:Qj,utcdayofyear:Uj,utcweek:Hj,week:zj,format:O0,formats:f_,inferType:v5,inferTypes:b5,loader:_1,read:E5,responseType:w5,typeParsers:Vw,path:Nl,Bounds:cn,CanvasHandler:zp,CanvasRenderer:zy,Gradient:U6,GroupItem:J1,Handler:El,Item:K1,Marks:yi,RenderType:za,Renderer:ms,ResourceLoader:RA,SVGHandler:QA,SVGRenderer:oC,SVGStringRenderer:sC,Scenegraph:JA,boundClip:P4,boundContext:Pp,boundItem:dE,boundMark:a4,boundStroke:ia,domChild:Pr,domClear:io,domCreate:ja,domFind:ZA,font:nb,fontFamily:Lp,fontSize:ps,intersect:M4,intersectBoxLine:cf,intersectPath:PA,intersectPoint:IA,intersectRule:K6,lineHeight:xl,markup:iC,multiLineOffset:XA,pathCurves:MA,pathEqual:I4,pathParse:Xf,pathRectangle:G6,pathRender:Ug,pathSymbols:W6,pathTrail:V6,point:ib,renderModule:ob,resetSVGClipId:X6,resetSVGDefIds:Mne,sceneEqual:aC,sceneFromJSON:u4,scenePickVisit:Ny,sceneToJSON:l4,sceneVisit:Eo,sceneZOrder:jA,serializeXML:O4,textMetrics:po},Symbol.toStringTag,{value:"Module"}));function Ype(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var Xpe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},qpe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},Kpe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const Jpe=Array.prototype.slice,tu=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,Jpe.call(t,1))},Zpe=(e,t,n,r,i,o,s)=>new Date(e,t||0,n!=null?n:1,r||0,i||0,o||0,s||0);var Qpe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:Zpe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return tu("join",arguments)},indexof:function(){return tu("indexOf",arguments)},lastindexof:function(){return tu("lastIndexOf",arguments)},slice:function(){return tu("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return tu("substring",arguments,String)},split:function(){return tu("split",arguments,String)},replace:function(){return tu("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const eme=["view","item","group","xy","x","y"],tme={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:Xpe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);return n&&(e.memberDepth-=1),r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||Qpe[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>qpe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>Kpe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,n[i]=e(r.value),n},{})};function gh(e,t,n,r,i,o){const s=a=>tme[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=r,s.event=i,s.item=o,eme.forEach(a=>s.fn[a]=(...l)=>i.vega[a](...l)),s(e)}var nme={operator(e,t){const n=t.ast,r=e.functions;return i=>gh(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,o)=>gh(n,r,o,i)},event(e,t){const n=t.ast,r=e.functions;return i=>gh(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,o)=>{const s=o.item&&o.item.datum;return gh(n,r,i,s,o)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(s,a)=>{const l=s.datum;let u=0,c;for(const f in r)c=gh(r[f].ast,i,a,l,void 0,s),s[f]!==c&&(s[f]=c,u=1);return n!=="rule"&&Ype(s,r,o),u}}};const rme="vega-lite",ime='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',ome="5.2.0",sme=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],ame="https://vega.github.io/vega-lite/",lme="Vega-Lite is a concise high-level language for interactive visualization.",ume=["vega","chart","visualization"],cme="build/vega-lite.js",fme="build/vega-lite.min.js",dme="build/vega-lite.min.js",hme="build/src/index",gme="build/src/index.d.ts",pme={vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2pdf:"./bin/vl2pdf",vl2vg:"./bin/vl2vg"},mme=["bin","build","src","vega-lite*","tsconfig.json"],yme={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",eslintbase:"eslint .",format:"yarn eslintbase --fix && yarn prettierbase --write",lint:"yarn eslintbase && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"yarn run prebuild && yarn build && yarn shipit",shipit:"auto shipit"},vme={type:"git",url:"https://github.com/vega/vega-lite.git"},bme="BSD-3-Clause",xme={url:"https://github.com/vega/vega-lite/issues"},wme={"@auto-it/conventional-commits":"^10.34.1","@auto-it/first-time-contributor":"^10.34.1","@babel/core":"^7.17.5","@babel/preset-env":"^7.16.11","@babel/preset-typescript":"^7.16.7","@rollup/plugin-alias":"^3.1.9","@rollup/plugin-babel":"^5.3.1","@rollup/plugin-commonjs":"^22.0.0","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^13.1.3","@types/chai":"^4.3.0","@types/d3":"^7.1.0","@types/jest":"^27.4.1","@types/mkdirp":"^1.0.2","@types/pako":"^2.0.0","@typescript-eslint/eslint-plugin":"^5.14.0","@typescript-eslint/parser":"^5.14.0",ajv:"^8.10.0","ajv-formats":"^2.1.1",auto:"^10.34.1",chai:"^4.3.6",cheerio:"^1.0.0-rc.10","conventional-changelog-cli":"^2.2.2",d3:"^7.4.4","del-cli":"^5.0.0",eslint:"^8.11.0","eslint-config-prettier":"^8.5.0","eslint-plugin-jest":"^26.1.1","eslint-plugin-prettier":"^4.0.0","gh-pages":"^4.0.0","highlight.js":"^11.5.0",jest:"^27.5.1","jest-dev-server":"^6.0.3",mkdirp:"^1.0.4",pako:"^2.0.4",prettier:"^2.5.1",puppeteer:"^15.0.0",rollup:"^2.70.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3","rollup-plugin-terser":"^7.0.2",serve:"^14.0.1",terser:"^5.12.1","ts-jest":"^27.1.3","ts-json-schema-generator":"^1.0.0","vega-cli":"^5.22.0",typescript:"~4.7.2","vega-datasets":"~2.4.0","vega-embed":"^6.20.8","vega-tooltip":"^0.28.0","yaml-front-matter":"^4.1.1"},Eme={"@types/clone":"~2.1.1","array-flat-polyfill":"^1.0.1",clone:"~2.1.2","fast-deep-equal":"~3.1.3","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~3.0.0",tslib:"~2.4.0","vega-event-selector":"~3.0.0","vega-expression":"~5.0.0","vega-util":"~1.17.0",yargs:"~17.5.1"},Sme={vega:"^5.22.0"},Ome={node:">=12"},_me={name:rme,author:ime,version:ome,collaborators:sme,homepage:ame,description:lme,keywords:ume,main:cme,unpkg:fme,jsdelivr:dme,module:hme,types:gme,bin:pme,files:mme,scripts:yme,repository:vme,license:bme,bugs:xme,devDependencies:wme,dependencies:Eme,peerDependencies:Sme,engines:Ome};Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,function(n,r){return Array.isArray(r)?n.push.apply(n,e.call(r,t-1)):n.push(r),n},[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var G9={exports:{}};(function(e){var t=function(){function n(d,h){return h!=null&&d instanceof h}var r;try{r=Map}catch{r=function(){}}var i;try{i=Set}catch{i=function(){}}var o;try{o=Promise}catch{o=function(){}}function s(d,h,g,p,m){typeof h=="object"&&(g=h.depth,p=h.prototype,m=h.includeNonEnumerable,h=h.circular);var y=[],v=[],b=typeof Buffer<"u";typeof h>"u"&&(h=!0),typeof g>"u"&&(g=1/0);function x(w,S){if(w===null)return null;if(S===0)return w;var E,O;if(typeof w!="object")return w;if(n(w,r))E=new r;else if(n(w,i))E=new i;else if(n(w,o))E=new o(function(N,P){w.then(function(H){N(x(H,S-1))},function(H){P(x(H,S-1))})});else if(s.__isArray(w))E=[];else if(s.__isRegExp(w))E=new RegExp(w.source,f(w)),w.lastIndex&&(E.lastIndex=w.lastIndex);else if(s.__isDate(w))E=new Date(w.getTime());else{if(b&&Buffer.isBuffer(w))return Buffer.allocUnsafe?E=Buffer.allocUnsafe(w.length):E=new Buffer(w.length),w.copy(E),E;n(w,Error)?E=Object.create(w):typeof p>"u"?(O=Object.getPrototypeOf(w),E=Object.create(O)):(E=Object.create(p),O=p)}if(h){var A=y.indexOf(w);if(A!=-1)return v[A];y.push(w),v.push(E)}n(w,r)&&w.forEach(function(N,P){var H=x(P,S-1),ie=x(N,S-1);E.set(H,ie)}),n(w,i)&&w.forEach(function(N){var P=x(N,S-1);E.add(P)});for(var C in w){var _;O&&(_=Object.getOwnPropertyDescriptor(O,C)),!(_&&_.set==null)&&(E[C]=x(w[C],S-1))}if(Object.getOwnPropertySymbols)for(var T=Object.getOwnPropertySymbols(w),C=0;C<T.length;C++){var k=T[C],D=Object.getOwnPropertyDescriptor(w,k);D&&!D.enumerable&&!m||(E[k]=x(w[k],S-1),D.enumerable||Object.defineProperty(E,k,{enumerable:!1}))}if(m)for(var M=Object.getOwnPropertyNames(w),C=0;C<M.length;C++){var $=M[C],D=Object.getOwnPropertyDescriptor(w,$);D&&D.enumerable||(E[$]=x(w[$],S-1),Object.defineProperty(E,$,{enumerable:!1}))}return E}return x(d,g)}s.clonePrototype=function(h){if(h===null)return null;var g=function(){};return g.prototype=h,new g};function a(d){return Object.prototype.toString.call(d)}s.__objToStr=a;function l(d){return typeof d=="object"&&a(d)==="[object Date]"}s.__isDate=l;function u(d){return typeof d=="object"&&a(d)==="[object Array]"}s.__isArray=u;function c(d){return typeof d=="object"&&a(d)==="[object RegExp]"}s.__isRegExp=c;function f(d){var h="";return d.global&&(h+="g"),d.ignoreCase&&(h+="i"),d.multiline&&(h+="m"),h}return s.__getRegExpFlags=f,s}();e.exports&&(e.exports=t)})(G9);const Ame=G9.exports;var Cme=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n},$T=function(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var n=typeof t.cycles=="boolean"?t.cycles:!1,r=t.cmp&&function(o){return function(s){return function(a,l){var u={key:a,value:s[a]},c={key:l,value:s[l]};return o(u,c)}}}(t.cmp),i=[];return function o(s){if(s&&s.toJSON&&typeof s.toJSON=="function"&&(s=s.toJSON()),s!==void 0){if(typeof s=="number")return isFinite(s)?""+s:"null";if(typeof s!="object")return JSON.stringify(s);var a,l;if(Array.isArray(s)){for(l="[",a=0;a<s.length;a++)a&&(l+=","),l+=o(s[a])||"null";return l+"]"}if(s===null)return"null";if(i.indexOf(s)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=i.push(s)-1,c=Object.keys(s).sort(r&&r(s));for(l="",a=0;a<c.length;a++){var f=c[a],d=o(s[f]);!d||(l&&(l+=","),l+=JSON.stringify(f)+":"+d)}return i.splice(u,1),"{"+l+"}"}}(e)};function NT(e){return!!e.or}function RT(e){return!!e.and}function PT(e){return!!e.not}function Y0(e,t){if(PT(e))Y0(e.not,t);else if(RT(e))for(const n of e.and)Y0(n,t);else if(NT(e))for(const n of e.or)Y0(n,t);else t(e)}function Cf(e,t){return PT(e)?{not:Cf(e.not,t)}:RT(e)?{and:e.and.map(n=>Cf(n,t))}:NT(e)?{or:e.or.map(n=>Cf(n,t))}:t(e)}const Wo=Cme,Xe=Ame;function V9(e){throw new Error(e)}function id(e,t){const n={};for(const r of t)Ae(e,r)&&(n[r]=e[r]);return n}function di(e,t){const n=Object.assign({},e);for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>$T(e)).join(",")})`};const jt=$T;function ut(e){if(kt(e))return e;const t=de(e)?e:$T(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function pS(e){return e===!1||e===null}function ct(e,t){return e.includes(t)}function uc(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function IT(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function Y9(e,...t){for(const n of t)Tme(e,n!=null?n:{});return e}function Tme(e,t){for(const n of Z(t))Sd(e,n,t[n],!0)}function Go(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function kme(e,t){const n=Z(e),r=Z(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function X9(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function jT(e,t){for(const n of e)if(t.has(n))return!0;return!1}function mS(e){const t=new Set;for(const n of e){const i=hs(n).map((s,a)=>a===0?s:`[${s}]`),o=i.map((s,a)=>i.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function LT(e,t){return e===void 0||t===void 0?!0:jT(mS(e),mS(t))}function Tt(e){return Z(e).length===0}const Z=Object.keys,sr=Object.values,_l=Object.entries;function rp(e){return e===!0||e===!1}function Vt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function vg(e,t){return PT(e)?`!(${vg(e.not,t)})`:RT(e)?`(${e.and.map(n=>vg(n,t)).join(") && (")})`:NT(e)?`(${e.or.map(n=>vg(n,t)).join(") || (")})`:t(e)}function Cv(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Cv(e[n],t)&&delete e[n],Tt(e)}function Jp(e){return e.charAt(0).toUpperCase()+e.substr(1)}function zT(e,t="datum"){const n=hs(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(ae).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function q9(e,t="datum"){return`${t}[${ae(hs(e).join("."))}]`}function Fme(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Ii(e){return`${hs(e).map(Fme).join("\\.")}`}function cc(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function BT(e){return`${hs(e).join(".")}`}function od(e){return e?hs(e).length:0}function fn(...e){for(const t of e)if(t!==void 0)return t}let K9=42;function J9(e){const t=++K9;return e?String(e)+t:t}function Dme(){K9=42}function Z9(e){return Q9(e)?e:`__${e}`}function Q9(e){return e.startsWith("__")}function ip(e){if(e!==void 0)return(e%360+360)%360}function Tb(e){return kt(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}var Zp=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Ys="row",Xs="column",kb="facet",Jt="x",Fn="y",Co="x2",bs="y2",Bl="xOffset",Id="yOffset",To="radius",aa="radius2",Ui="theta",la="theta2",xs="latitude",ws="longitude",ko="latitude2",ji="longitude2",Yr="color",Es="fill",Ss="stroke",Xr="shape",ua="size",$c="angle",ca="opacity",Ul="fillOpacity",Hl="strokeOpacity",Wl="strokeWidth",Gl="strokeDash",Qp="text",em="order",tm="detail",Fb="key",fc="tooltip",Db="href",Mb="url",$b="description",Mme={x:1,y:1,x2:1,y2:1},ez={theta:1,theta2:1,radius:1,radius2:1};function tz(e){return e in ez}const UT={longitude:1,longitude2:1,latitude:1,latitude2:1};function $me(e){switch(e){case xs:return"y";case ko:return"y2";case ws:return"x";case ji:return"x2"}}function Nme(e){return e in UT}const Rme=Z(UT),HT=Object.assign(Object.assign(Object.assign(Object.assign({},Mme),ez),UT),{xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function Tf(e){return e===Yr||e===Es||e===Ss}const nz={row:1,column:1,facet:1},Fi=Z(nz),WT=Object.assign(Object.assign({},HT),nz),Pme=Z(WT),Ime=Zp(WT,["order","detail","tooltip"]),jme=Zp(Ime,["row","column","facet"]);function Lme(e){return!!jme[e]}function rz(e){return!!WT[e]}const zme=[Co,bs,ko,ji,la,aa];function iz(e){return Nc(e)!==e}function Nc(e){switch(e){case Co:return Jt;case bs:return Fn;case ko:return xs;case ji:return ws;case la:return Ui;case aa:return To}return e}function Al(e){if(tz(e))switch(e){case Ui:return"startAngle";case la:return"endAngle";case To:return"outerRadius";case aa:return"innerRadius"}return e}function fa(e){switch(e){case Jt:return Co;case Fn:return bs;case xs:return ko;case ws:return ji;case Ui:return la;case To:return aa}}function qr(e){switch(e){case Jt:case Co:return"width";case Fn:case bs:return"height"}}function Bme(e){switch(e){case Jt:return"xOffset";case Fn:return"yOffset";case Co:return"x2Offset";case bs:return"y2Offset";case Ui:return"thetaOffset";case To:return"radiusOffset";case la:return"theta2Offset";case aa:return"radius2Offset"}}function oz(e){switch(e){case Jt:return"xOffset";case Fn:return"yOffset"}}function sz(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Ume=Z(HT),GT=Zp(HT,["x","y","x2","y2","xOffset","yOffset","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),Hme=Z(GT),VT={x:1,y:1},Os=Z(VT);function Dn(e){return e in VT}const YT={theta:1,radius:1},Wme=Z(YT);function Nb(e){return e==="width"?Jt:Fn}const az={xOffset:1,yOffset:1};function jd(e){return e in az}const lz=Zp(GT,["text","tooltip","href","url","description","detail","key","order"]),Gme=Z(lz);function Vme(e){return!!GT[e]}function Yme(e){switch(e){case Yr:case Es:case Ss:case ua:case Xr:case ca:case Wl:case Gl:return!0;case Ul:case Hl:case $c:return!1}}const uz=Object.assign(Object.assign(Object.assign(Object.assign({},VT),YT),az),lz),Rb=Z(uz);function Vl(e){return!!uz[e]}function Xme(e,t){return Kme(e)[t]}const cz={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},qme=Zp(cz,["geoshape"]);function Kme(e){switch(e){case Yr:case Es:case Ss:case $b:case tm:case Fb:case fc:case Db:case em:case ca:case Ul:case Hl:case Wl:case kb:case Ys:case Xs:return cz;case Jt:case Fn:case Bl:case Id:case xs:case ws:return qme;case Co:case bs:case ko:case ji:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case ua:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Gl:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Xr:return{point:"always",geoshape:"always"};case Qp:return{text:"always"};case $c:return{point:"always",square:"always",text:"always"};case Mb:return{image:"always"};case Ui:return{text:"always",arc:"always"};case To:return{text:"always",arc:"always"};case la:case aa:return{arc:"always"}}}function D2(e){switch(e){case Jt:case Fn:case Ui:case To:case Bl:case Id:case ua:case $c:case Wl:case ca:case Ul:case Hl:case Co:case bs:case la:case aa:return;case kb:case Ys:case Xs:case Xr:case Gl:case Qp:case fc:case Db:case Mb:case $b:return"discrete";case Yr:case Es:case Ss:return"flexible";case xs:case ws:case ko:case ji:case tm:case Fb:case em:return}}const Jme={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Zme={count:1,min:1,max:1};function ta(e){return!!e&&!!e.argmin}function Yl(e){return!!e&&!!e.argmax}function XT(e){return de(e)&&!!Jme[e]}const Qme=new Set(["count","valid","missing","distinct"]);function fz(e){return de(e)&&Qme.has(e)}function e0e(e){return de(e)&&ct(["min","max"],e)}const t0e=new Set(["count","sum","distinct","valid","missing"]),n0e=new Set(["mean","average","median","q1","q3","min","max"]);function dz(e){return $l(e)&&(e=Vb(e,void 0)),"bin"+Z(e).map(t=>Pb(e[t])?Vt(`_${t}_${_l(e[t])}`):Vt(`_${t}_${e[t]}`)).join("")}function Lt(e){return e===!0||Rc(e)&&!e.binned}function br(e){return e==="binned"||Rc(e)&&e.binned===!0}function Rc(e){return me(e)}function Pb(e){return e==null?void 0:e.param}function V3(e){switch(e){case Ys:case Xs:case ua:case Yr:case Es:case Ss:case Wl:case ca:case Ul:case Hl:case Xr:return 6;case Gl:return 4;default:return 10}}function nm(e){return!!(e!=null&&e.expr)}function Rr(e){const t=Z(e||{}),n={};for(const r of t)n[r]=ai(e[r]);return n}var r0e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function hz(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:s,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:g}=e,p=r0e(e,["anchor","frame","offset","orient","angle","limit","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),m=Object.assign(Object.assign({},p),a?{fill:a}:{}),y=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t?{anchor:t}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{}),o!==void 0?{angle:o}:{}),s!==void 0?{limit:s}:{}),v=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},l?{subtitleColor:l}:{}),u?{subtitleFont:u}:{}),c?{subtitleFontSize:c}:{}),f?{subtitleFontStyle:f}:{}),d?{subtitleFontWeight:d}:{}),h?{subtitleLineHeight:h}:{}),g?{subtitlePadding:g}:{}),b=id(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function Fa(e){return de(e)||X(e)&&de(e[0])}function _e(e){return!!(e!=null&&e.signal)}function Xl(e){return!!e.step}function i0e(e){return X(e)?!1:"fields"in e&&!("data"in e)}function o0e(e){return X(e)?!1:"fields"in e&&"data"in e}function Ws(e){return X(e)?!1:"field"in e&&"data"in e}const s0e={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},a0e=Z(s0e),l0e={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},yS=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];var qT=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function gz(e){const t=X(e.condition)?e.condition.map(Y3):Y3(e.condition);return Object.assign(Object.assign({},ai(e)),{condition:t})}function ai(e){if(nm(e)){const{expr:t}=e,n=qT(e,["expr"]);return Object.assign({signal:t},n)}return e}function Y3(e){if(nm(e)){const{expr:t}=e,n=qT(e,["expr"]);return Object.assign({signal:t},n)}return e}function Bt(e){if(nm(e)){const{expr:t}=e,n=qT(e,["expr"]);return Object.assign({signal:t},n)}return _e(e)?e:e!==void 0?{value:e}:void 0}function u0e(e){return _e(e)?e.signal:ae(e)}function X3(e){return _e(e)?e.signal:ae(e.value)}function qs(e){return _e(e)?e.signal:e==null?null:ae(e)}function c0e(e,t,n){for(const r of n){const i=dc(r,t.markDef,t.config);i!==void 0&&(e[r]=Bt(i))}return e}function pz(e){var t;return[].concat(e.type,(t=e.style)!==null&&t!==void 0?t:[])}function _t(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:dc(e,t,n,r)}function dc(e,t,n,{vgChannel:r}={}){return fn(r?Tv(e,t,n.style):void 0,Tv(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function Tv(e,t,n){return mz(e,pz(t),n)}function mz(e,t,n){t=pe(t);let r;for(const i of t){const o=n[i];o&&o[e]!==void 0&&(r=o[e])}return r}function yz(e,t){return pe(e).reduce((n,r)=>{var i;return n.field.push(ue(r,t)),n.order.push((i=r.sort)!==null&&i!==void 0?i:"ascending"),n},{field:[],order:[]})}function vz(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Wo(i,r))return;n.push(r)}),n}function bz(e,t){return Wo(e,t)||!t?e:e?[...pe(e),...pe(t)].join(", "):t}function xz(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Fa(n)||_e(n))&&(Fa(r)||_e(r)))return{explicit:e.explicit,value:bz(n,r)};if(Fa(n)||_e(n))return{explicit:e.explicit,value:n};if(Fa(r)||_e(r))return{explicit:e.explicit,value:r};if(!Fa(n)&&!_e(n)&&!Fa(r)&&!_e(r))return{explicit:e.explicit,value:vz(n,r)};throw new Error("It should never reach here")}function KT(e){return`Invalid specification ${jt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const f0e='Autosize "fit" only works for single views and layered views.';function q3(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function K3(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function J3(e){return e?`Dropping "fit-${e}" because spec has discrete ${qr(e)}.`:'Dropping "fit" because spec has discrete size.'}function JT(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Z3(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function d0e(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function h0e(e){return`The "nearest" transform is not supported for ${e} marks.`}function wz(e){return`Selection not supported for ${e} yet.`}function g0e(e){return`Cannot find a selection named "${e}".`}const p0e="Scale bindings are currently only supported for scales with unbinned, continuous domains.",m0e="Legend bindings are only supported for selections over an individual field or encoding channel.";function y0e(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function v0e(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const b0e="The same selection must be used to override scale domains in a layered view.",x0e='Interval selections should be initialized using "x" and/or "y" keys.';function w0e(e){return`Unknown repeated value "${e}".`}function Q3(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const E0e="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function S0e(e){return`Unrecognized parse "${e}".`}function eN(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const O0e="Attempt to add the same child twice.";function _0e(e){return`Ignoring an invalid transform: ${jt(e)}.`}const A0e='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function tN(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function C0e(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${jt(t)} is overridden by a child projection ${jt(n)}.`}const T0e="Arc marks uses theta channel rather than angle, replacing angle with theta.";function k0e(e){return`${e}Offset dropped because ${e} is continuous`}function F0e(e){return`There is no ${e} encoding. Replacing ${e}Offset encoding as ${e}.`}function D0e(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${jt(n)}}.`}function Ez(e){return`Invalid field type "${e}".`}function M0e(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function $0e(e){return`Invalid aggregation operator "${e}".`}function Sz(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function N0e(e){return`Position range does not support relative band size for ${e}.`}function vS(e,t){return`Dropping ${jt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const R0e="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Ib(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function P0e(e){return`${e} encoding has no scale, so specified scale is ignored.`}function I0e(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function j0e(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function L0e(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function z0e(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function M2(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function B0e(e){return`The ${e} for range marks cannot be an expression`}function U0e(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function H0e(e,t){return`Specified orient "${e}" overridden with "${t}".`}function W0e(e){return`Cannot use the scale property "${e}" with non-color channel.`}function G0e(e){return`Cannot use the relative band size with ${e} scale.`}function V0e(e){return`Using unaggregated domain with raw field has no effect (${jt(e)}).`}function Y0e(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function X0e(e){return`Unaggregated domain is currently unsupported for log scale (${jt(e)}).`}function q0e(e){return`Cannot apply size to non-oriented mark "${e}".`}function K0e(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function J0e(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function Oz(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function _z(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function Z0e(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${jt(n)} and ${jt(r)}). Using ${jt(n)}.`}function Q0e(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${jt(n)} and ${jt(r)}). Using the union of the two domains.`}function eye(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function tye(e){return`Dropping sort property ${jt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const nN="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",nye="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",rye="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",iye="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function oye(e){return`Cannot stack "${e}" if there is already "${e}2".`}function sye(e){return`Cannot stack non-linear scale (${e}).`}function aye(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function kv(e,t){return`Invalid ${e}: ${jt(t)}.`}function lye(e){return`Dropping day from datetime ${jt(e)} as day cannot be combined with other units.`}function uye(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function cye(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function fye(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function rN(e){return`1D error band does not support ${e}.`}function Az(e){return`Channel ${e} is required for "binned" bin.`}function dye(e){return`Channel ${e} should not be used with "binned" bin.`}function hye(e){return`Domain for ${e} is required for threshold scale.`}globalThis&&globalThis.__classPrivateFieldSet;globalThis&&globalThis.__classPrivateFieldGet;const Cz=IO(PO);let sd=Cz;function gye(e){return sd=e,sd}function pye(){return sd=Cz,sd}function te(...e){sd.warn(...e)}function mye(...e){sd.debug(...e)}function Pc(e){if(e&&me(e)){for(const t of QT)if(t in e)return!0}return!1}const Tz=["january","february","march","april","may","june","july","august","september","october","november","december"],yye=Tz.map(e=>e.substr(0,3)),kz=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],vye=kz.map(e=>e.substr(0,3));function bye(e){if(Tb(e)&&(e=+e),kt(e))return e>4&&te(kv("quarter",e)),e-1;throw new Error(kv("quarter",e))}function xye(e){if(Tb(e)&&(e=+e),kt(e))return e-1;{const t=e.toLowerCase(),n=Tz.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=yye.indexOf(r);if(i!==-1)return i;throw new Error(kv("month",e))}}function wye(e){if(Tb(e)&&(e=+e),kt(e))return e%7;{const t=e.toLowerCase(),n=kz.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=vye.indexOf(r);if(i!==-1)return i;throw new Error(kv("day",e))}}function ZT(e,t){const n=[];if(t&&e.day!==void 0&&Z(e).length>1&&(te(lye(e)),e=Xe(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?xye(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?bye(e.quarter):e.quarter;n.push(kt(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?wye(e.day):e.day;n.push(kt(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function op(e){const n=ZT(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Eye(e){const n=ZT(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Sye(e){const t=ZT(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}var Oye=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Fz={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},QT=Z(Fz);function _ye(e){return!!Fz[e]}function ek(e){return e.startsWith("utc")}function Aye(e){return e.substr(3)}const Cye={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function tk(e){return QT.filter(t=>Dz(e,t))}function Dz(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Tye(e,t,{end:n}={end:!1}){const r=zT(t),i=ek(e)?"utc":"";function o(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let s;const a={};for(const l of QT)Dz(e,l)&&(a[l]=o(l),s=l);return n&&(a[s]+="+1"),Eye(a)}function Mz(e){if(!e)return;const t=tk(e);return`timeUnitSpecifier(${jt(t)}, ${jt(Cye)})`}function kye(e,t,n){if(!e)return;const r=Mz(e);return`${n||ek(e)?"utc":"time"}Format(${t}, ${r})`}function ur(e){if(!e)return;let t;return de(e)?t={unit:e}:me(e)&&(t=Object.assign(Object.assign({},e),e.unit?{unit:e.unit}:{})),ek(t.unit)&&(t.utc=!0,t.unit=Aye(t.unit)),t}function Fye(e){const t=ur(e),{utc:n}=t,r=Oye(t,["utc"]);return r.unit?(n?"utc":"")+Z(r).map(i=>Vt(`${i==="unit"?"":`_${i}_`}${r[i]}`)).join(""):(n?"utc":"")+"timeunit"+Z(r).map(i=>Vt(`_${i}_${r[i]}`)).join("")}function Dye(e){return e==null?void 0:e.param}function nk(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function rk(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function ik(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function ok(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function sk(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function ak(e){if(e!=null&&e.field){if(X(e.range)&&e.range.length===2)return!0;if(_e(e.range))return!0}return!1}function lk(e){return!!(e!=null&&e.field)&&(X(e.oneOf)||X(e.in))}function Mye(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function $z(e){return lk(e)||nk(e)||ak(e)||rk(e)||ok(e)||ik(e)||sk(e)}function Mo(e,t){return Yb(e,{timeUnit:t,wrapTime:!0})}function $ye(e,t){return e.map(n=>Mo(n,t))}function Nz(e,t=!0){var n;const{field:r}=e,i=(n=ur(e.timeUnit))===null||n===void 0?void 0:n.unit,o=i?`time(${Tye(i,r)})`:ue(e,{expr:"datum"});if(nk(e))return`${o}===${Mo(e.equal,i)}`;if(rk(e)){const s=e.lt;return`${o}<${Mo(s,i)}`}else if(ok(e)){const s=e.gt;return`${o}>${Mo(s,i)}`}else if(ik(e)){const s=e.lte;return`${o}<=${Mo(s,i)}`}else if(sk(e)){const s=e.gte;return`${o}>=${Mo(s,i)}`}else{if(lk(e))return`indexof([${$ye(e.oneOf,i).join(",")}], ${o}) !== -1`;if(Mye(e))return uk(o,e.valid);if(ak(e)){const{range:s}=e,a=_e(s)?{signal:`${s.signal}[0]`}:s[0],l=_e(s)?{signal:`${s.signal}[1]`}:s[1];if(a!==null&&l!==null&&t)return"inrange("+o+", ["+Mo(a,i)+", "+Mo(l,i)+"])";const u=[];return a!==null&&u.push(`${o} >= ${Mo(a,i)}`),l!==null&&u.push(`${o} <= ${Mo(l,i)}`),u.length>0?u.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${jt(e)}`)}function uk(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Nye(e){var t;return $z(e)&&e.timeUnit?Object.assign(Object.assign({},e),{timeUnit:(t=ur(e.timeUnit))===null||t===void 0?void 0:t.unit}):e}const rm={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Rye(e){return e==="quantitative"||e==="temporal"}function Rz(e){return e==="ordinal"||e==="nominal"}const hc=rm.quantitative,ck=rm.ordinal,ad=rm.temporal,fk=rm.nominal,Ld=rm.geojson;function Pye(e){if(e)switch(e=e.toLowerCase(),e){case"q":case hc:return"quantitative";case"t":case ad:return"temporal";case"o":case ck:return"ordinal";case"n":case fk:return"nominal";case Ld:return"geojson"}}var Iye=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Br={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},bS={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function jye(e,t){const n=bS[e],r=bS[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const Lye={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function iN(e){return Lye[e]}const Pz=new Set(["linear","log","pow","sqrt","symlog"]),Iz=new Set([...Pz,"time","utc"]);function jz(e){return Pz.has(e)}const Lz=new Set(["quantile","quantize","threshold"]),zye=new Set([...Iz,...Lz,"sequential","identity"]),Bye=new Set(["ordinal","bin-ordinal","point","band"]);function Mn(e){return Bye.has(e)}function bi(e){return zye.has(e)}function fo(e){return Iz.has(e)}function ld(e){return Lz.has(e)}const Uye={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4};function Hye(e){return!de(e)&&!!e.name}function zz(e){return e==null?void 0:e.param}function Wye(e){return e==null?void 0:e.unionWith}function Gye(e){return me(e)&&"field"in e}const Vye={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},Yye=Iye(Vye,["type","domain","range","rangeMax","rangeMin","scheme"]),Xye=Z(Yye);function xS(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return fo(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return fo(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"clamp":return fo(e);case"nice":return fo(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return bi(e)&&!ct(["log","time","utc","threshold","quantile"],e)}}function Bz(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Tf(e)?void 0:W0e(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function qye(e,t){return ct([ck,fk],t)?e===void 0||Mn(e):t===ad?ct([Br.TIME,Br.UTC,void 0],e):t===hc?jz(e)||ld(e)||e===void 0:!0}function Kye(e,t,n=!1){if(!Vl(e))return!1;switch(e){case Jt:case Fn:case Bl:case Id:case Ui:case To:return fo(t)||t==="band"?!0:t==="point"?!n:!1;case ua:case Wl:case ca:case Ul:case Hl:case $c:return fo(t)||ld(t)||ct(["band","point","ordinal"],t);case Yr:case Es:case Ss:return t!=="band";case Gl:case Xr:return t==="ordinal"||ld(t)}}const Cr={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Uz=Cr.arc,jb=Cr.area,Lb=Cr.bar,Jye=Cr.image,zb=Cr.line,Bb=Cr.point,Zye=Cr.rect,Fv=Cr.rule,Hz=Cr.text,dk=Cr.tick,Qye=Cr.trail,hk=Cr.circle,gk=Cr.square,Wz=Cr.geoshape;function ql(e){return["line","area","trail"].includes(e)}function Gz(e){return["rect","bar","image","arc"].includes(e)}const eve=new Set(Z(Cr));function ls(e){return e.type}const tve=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],nve=["fill","fillOpacity"],rve=[...tve,...nve],ive={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},oN=Z(ive),ove={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},sve={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},ave={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},Vz=Z(ave);function gc(e){return e&&e.band!=null}const lve={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Yz=5,uve={binSpacing:1,continuousBandSize:Yz,timeUnitBandPosition:.5},cve={binSpacing:0,continuousBandSize:Yz,timeUnitBandPosition:.5},fve={thickness:1};function dve(e){return ls(e)?e.type:e}function pk(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:o}=e,s=yk(e);return se(n)&&!fz(n.aggregate)&&i&&fo(i.get("type"))?hve({fieldDef:n,channel:t,markDef:r,ref:s,config:o}):s}function hve({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return ql(n.type)?r:_t("invalid",n,i)===null?[gve(e,t),r]:r}function gve(e,t){const n=mk(e,!0),i=Nc(t)==="y"?{field:{group:"height"}}:{value:0};return Object.assign({test:n},i)}function mk(e,t=!0){return uk(de(e)?e:ue(e,{expr:"datum"}),!t)}function pve(e){const{datum:t}=e;return Pc(t)?op(t):`${jt(t)}`}function Hu(e,t,n,r){const i={};if(t&&(i.scale=t),_s(e)){const{datum:o}=e;Pc(o)?i.signal=op(o):_e(o)?i.signal=o.signal:nm(o)?i.signal=o.expr:i.value=o}else i.field=ue(e,n);if(r){const{offset:o,band:s}=r;o&&(i.offset=o),s&&(i.band=s)}return i}function Dv({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,bandPosition:o=.5}){const s=0<o&&o<1?"datum":void 0,a=ue(t,{expr:s,suffix:i}),l=n!==void 0?ue(n,{expr:s}):ue(t,{suffix:"end",expr:s}),u={};if(o===0||o===1){u.scale=e;const c=o===0?a:l;u.field=c}else{const c=_e(o)?`${o.signal} * ${a} + (1-${o.signal}) * ${l}`:`${o} * ${a} + ${1-o} * ${l}`;u.signal=`scale("${e}", ${c})`}return r&&(u.offset=r),u}function yk({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u,bandPosition:c}){var f;if(t){if(Ve(t)){const d=s==null?void 0:s.get("type");if(Li(t)){c!=null||(c=tB({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:h,timeUnit:g,type:p}=t;if(Lt(h)||c&&g&&p===ad)return a!=null&&a.impute?Hu(t,o,{binSuffix:"mid"},{offset:l}):c&&!Mn(d)?Dv({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:l}):Hu(t,o,am(t,e)?{binSuffix:"range"}:{},{offset:l});if(br(h)){if(se(n))return Dv({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});te(Az(e===Jt?Co:bs))}}return Hu(t,o,Mn(d)?{binSuffix:"range"}:{},{offset:l,band:d==="band"?(f=c!=null?c:t.bandPosition)!==null&&f!==void 0?f:.5:void 0})}else if(So(t)){const d=t.value,h=l?{offset:l}:{};return Object.assign(Object.assign({},bg(e,d)),h)}}return Ze(u)&&(u=u()),u&&Object.assign(Object.assign({},u),l?{offset:l}:{})}function bg(e,t){return ct(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:ct(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Bt(t)}function pc(e){return e&&e!=="number"&&e!=="time"}function Xz(e,t,n){return`${e}(${t}${n?`, ${jt(n)}`:""})`}const mve=" \u2013 ";function vk({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var s,a;if(pc(n))return ho({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const l=qz(e,r,i),u=ud(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(u==="quantitative"){if(i&&o.normalizedNumberFormatType)return ho({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return ho({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(u==="temporal"&&o.timeFormatType&&se(e)&&e.timeUnit===void 0)return ho({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(fd(e)){const c=vve({field:l,timeUnit:se(e)?(s=ur(e.timeUnit))===null||s===void 0?void 0:s.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:Ic(e)&&((a=e.scale)===null||a===void 0?void 0:a.type)===Br.UTC});return c?{signal:c}:void 0}if(t=wS({type:u,specifiedFormat:t,config:o,normalizeStack:i}),se(e)&&Lt(e.bin)){const c=ue(e,{expr:r,binSuffix:"end"});return{signal:im(l,c,t,n,o)}}else return t||ud(e)==="quantitative"?{signal:`${Zz(l,t)}`}:{signal:`isValid(${l}) ? ${l} : ""+${l}`}}function qz(e,t,n){return se(e)?n?`${ue(e,{expr:t,suffix:"end"})}-${ue(e,{expr:t,suffix:"start"})}`:ue(e,{expr:t}):pve(e)}function ho({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:s}){if(s!=null||(s=qz(e,r,i)),s!=="datum.value"&&se(e)&&Lt(e.bin)){const a=ue(e,{expr:r,binSuffix:"end"});return{signal:im(s,a,t,n,o)}}return{signal:Xz(n,s,t)}}function Kz(e,t,n,r,i,o){var s;if(!pc(r)&&!(n===void 0&&r===void 0&&i.customFormatTypes&&ud(e)==="quantitative"&&(i.normalizedNumberFormatType&&cd(e)&&e.stack==="normalize"||i.numberFormatType))){if(cd(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return wS({type:"quantitative",config:i,normalizeStack:!0});if(fd(e)){const a=se(e)?(s=ur(e.timeUnit))===null||s===void 0?void 0:s.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:yve({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return wS({type:t,specifiedFormat:n,config:i})}}function Jz(e,t,n){var r;if(e&&(_e(e)||e==="number"||e==="time"))return e;if(fd(t)&&n!=="time"&&n!=="utc")return se(t)&&((r=ur(t==null?void 0:t.timeUnit))===null||r===void 0?void 0:r.utc)?"utc":"time"}function wS({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(de(t))return t;if(e===hc)return r?n.normalizedNumberFormat:n.numberFormat}function yve({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:Mz(t)}:r?void 0:n.timeFormat)}function Zz(e,t){return`format(${e}, "${t||""}")`}function sN(e,t,n,r){var i;return pc(n)?Xz(n,e,t):Zz(e,(i=de(t)?t:void 0)!==null&&i!==void 0?i:r.numberFormat)}function im(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return im(e,t,i.numberFormat,i.numberFormatType,i);const o=sN(e,n,r,i),s=sN(t,n,r,i);return`${uk(e,!1)} ? "null" : ${o} + "${mve}" + ${s}`}function vve({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=de(n)?n:i,`${o?"utc":"time"}Format(${e}, '${n}')`):kye(t,e,o)}const Ub="min",bve={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function aN(e){return e in bve}function Qz(e){return!!(e!=null&&e.encoding)}function Qo(e){return e&&(e.op==="count"||!!e.field)}function eB(e){return e&&X(e)}function om(e){return"row"in e||"column"in e}function bk(e){return!!e&&"header"in e}function Hb(e){return"facet"in e}var ES=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function xve(e){return e.param}function wve(e){return e&&!de(e)&&"repeat"in e}function lN(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:t})}function xk(e){return"sort"in e}function tB({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Ve(e)&&e.bandPosition!==void 0)return e.bandPosition;if(se(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return Gz(n.type)?0:dc("timeUnitBandPosition",n,r);if(Lt(o))return .5}}function nB({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:s}){var a,l,u;const c=qr(e),f=_t(s?"size":c,r,i,{vgChannel:c});if(f!==void 0)return f;if(se(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:dc("timeUnitBandSize",r,i)};if(Lt(h)&&!Mn(o))return{band:1}}if(Gz(r.type))return o?Mn(o)?((a=i[r.type])===null||a===void 0?void 0:a.discreteBandSize)||{band:1}:(l=i[r.type])===null||l===void 0?void 0:l.continuousBandSize:(u=i[r.type])===null||u===void 0?void 0:u.discreteBandSize}function rB(e,t,n,r){return Lt(e.bin)||e.timeUnit&&Li(e)&&e.type==="temporal"?tB({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function Wb(e){return e&&"condition"in e}function Gb(e){const t=e==null?void 0:e.condition;return!!t&&!X(t)&&se(t)}function sm(e){const t=e==null?void 0:e.condition;return!!t&&!X(t)&&Ve(t)}function Eve(e){const t=e==null?void 0:e.condition;return!!t&&(X(t)||So(t))}function se(e){return e&&(!!e.field||e.aggregate==="count")}function ud(e){return e==null?void 0:e.type}function _s(e){return e&&"datum"in e}function Vo(e){return Li(e)&&!Mv(e)||SS(e)}function SS(e){return _s(e)&&kt(e.datum)}function Ve(e){return se(e)||_s(e)}function Li(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function So(e){return e&&"value"in e&&"value"in e}function Ic(e){return e&&("scale"in e||"sort"in e)}function cd(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function iB(e){return e&&"legend"in e}function oB(e){return e&&("format"in e||"formatType"in e)}function Sve(e){return di(e,["legend","axis","header","scale"])}function Ove(e){return"op"in e}function ue(e,t={}){var n,r,i;let o=e.field;const s=t.prefix;let a=t.suffix,l="";if(Ave(e))o=Z9("count");else{let u;if(!t.nofn)if(Ove(e))u=e.op;else{const{bin:c,aggregate:f,timeUnit:d}=e;Lt(c)?(u=dz(c),a=((n=t.binSuffix)!==null&&n!==void 0?n:"")+((r=t.suffix)!==null&&r!==void 0?r:"")):f?Yl(f)?(l=`["${o}"]`,o=`argmax_${f.argmax}`):ta(f)?(l=`["${o}"]`,o=`argmin_${f.argmin}`):u=String(f):d&&(u=Fye(d),a=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+((i=t.suffix)!==null&&i!==void 0?i:""))}u&&(o=o?`${u}_${o}`:u)}return a&&(o=`${o}_${a}`),s&&(o=`${s}_${o}`),t.forAs?BT(o):t.expr?q9(o,t.expr)+l:Ii(o)+l}function Mv(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return se(e)&&!!e.bin;case"temporal":return!1}throw new Error(Ez(e.type))}function _ve(e){var t;return Ic(e)&&ld((t=e.scale)===null||t===void 0?void 0:t.type)}function Ave(e){return e.aggregate==="count"}function Cve(e,t){var n;const{field:r,bin:i,timeUnit:o,aggregate:s}=e;if(s==="count")return t.countTitle;if(Lt(i))return`${r} (binned)`;if(o){const a=(n=ur(o))===null||n===void 0?void 0:n.unit;if(a)return`${r} (${tk(a).join("-")})`}else if(s)return Yl(s)?`${r} for max ${s.argmax}`:ta(s)?`${r} for min ${s.argmin}`:`${Jp(s)} of ${r}`;return r}function Tve(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Yl(t))return`${i} for argmax(${t.argmax})`;if(ta(t))return`${i} for argmin(${t.argmin})`;const o=ur(r),s=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||Lt(n)&&"bin";return s?`${s.toUpperCase()}(${i})`:i}const sB=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Tve(e);default:return Cve(e,t)}};let aB=sB;function lB(e){aB=e}function kve(){lB(sB)}function kf(e,t,{allowDisabling:n,includeDefault:r=!0}){var i,o;const s=(i=wk(e))===null||i===void 0?void 0:i.title;if(!se(e))return s!=null?s:e.title;const a=e,l=r?Ek(a,t):void 0;return n?fn(s,a.title,l):(o=s!=null?s:a.title)!==null&&o!==void 0?o:l}function wk(e){if(cd(e)&&e.axis)return e.axis;if(iB(e)&&e.legend)return e.legend;if(bk(e)&&e.header)return e.header}function Ek(e,t){return aB(e,t)}function $v(e){var t;if(oB(e)){const{format:n,formatType:r}=e;return{format:n,formatType:r}}else{const n=(t=wk(e))!==null&&t!==void 0?t:{},{format:r,formatType:i}=n;return{format:r,formatType:i}}}function Fve(e,t){var n;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(xk(e)&&X(e.sort))return"ordinal";const{aggregate:r,bin:i,timeUnit:o}=e;if(o)return"temporal";if(i||r&&!Yl(r)&&!ta(r))return"quantitative";if(Ic(e)&&((n=e.scale)===null||n===void 0?void 0:n.type))switch(bS[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function us(e){if(se(e))return e;if(Gb(e))return e.condition}function vn(e){if(Ve(e))return e;if(sm(e))return e.condition}function uB(e,t,n,r={}){if(de(e)||kt(e)||$l(e)){const i=de(e)?"string":kt(e)?"number":"boolean";return te(D0e(t,i,e)),{value:e}}return Ve(e)?Nv(e,t,n,r):sm(e)?Object.assign(Object.assign({},e),{condition:Nv(e.condition,t,n,r)}):e}function Nv(e,t,n,r){if(oB(e)){const{format:i,formatType:o}=e,s=ES(e,["format","formatType"]);if(pc(o)&&!n.customFormatTypes)return te(tN(t)),Nv(s,t,n,r)}else{const i=cd(e)?"axis":iB(e)?"legend":bk(e)?"header":null;if(i&&e[i]){const o=e[i],{format:s,formatType:a}=o,l=ES(o,["format","formatType"]);if(pc(a)&&!n.customFormatTypes)return te(tN(t)),Nv(Object.assign(Object.assign({},e),{[i]:l}),t,n,r)}}return se(e)?Sk(e,t,r):Dve(e)}function Dve(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=kt(n)?"quantitative":de(n)?"nominal":Pc(n)?"temporal":void 0,Object.assign(Object.assign({},e),{type:t})}function Sk(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:s}=e,a=Object.assign({},e);if(!n&&r&&!XT(r)&&!Yl(r)&&!ta(r)&&(te($0e(r)),delete a.aggregate),i&&(a.timeUnit=ur(i)),s&&(a.field=`${s}`),Lt(o)&&(a.bin=Vb(o,t)),br(o)&&!Dn(t)&&te(dye(t)),Li(a)){const{type:l}=a,u=Pye(l);l!==u&&(a.type=u),l!=="quantitative"&&fz(r)&&(te(M0e(l,r)),a.type="quantitative")}else if(!iz(t)){const l=Fve(a,t);a.type=l}if(Li(a)){const{compatible:l,warning:u}=Mve(a,t)||{};l===!1&&te(u)}if(xk(a)&&de(a.sort)){const{sort:l}=a;if(aN(l))return Object.assign(Object.assign({},a),{sort:{encoding:l}});const u=l.substr(1);if(l.charAt(0)==="-"&&aN(u))return Object.assign(Object.assign({},a),{sort:{encoding:u,order:"descending"}})}if(bk(a)){const{header:l}=a;if(l){const{orient:u}=l,c=ES(l,["orient"]);if(u)return Object.assign(Object.assign({},a),{header:Object.assign(Object.assign({},c),{labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u})})}}return a}function Vb(e,t){return $l(e)?{maxbins:V3(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?Object.assign(Object.assign({},e),{maxbins:V3(t)}):e}const qc={compatible:!0};function Mve(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Ys:case Xs:case kb:return Mv(e)?qc:{compatible:!1,warning:j0e(t)};case Jt:case Fn:case Bl:case Id:case Yr:case Es:case Ss:case Qp:case tm:case Fb:case fc:case Db:case Mb:case $c:case Ui:case To:case $b:return qc;case ws:case ji:case xs:case ko:return n!==hc?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:qc;case ca:case Ul:case Hl:case Wl:case ua:case la:case aa:case Co:case bs:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:qc;case Xr:case Gl:return!Mv(e)&&!_ve(e)?{compatible:!1,warning:L0e(t)}:qc;case em:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:qc}}function fd(e){const{formatType:t}=$v(e);return t==="time"||!t&&$ve(e)}function $ve(e){return e&&(e.type==="temporal"||se(e)&&!!e.timeUnit)}function Yb(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var o;const s=t&&((o=ur(t))===null||o===void 0?void 0:o.unit);let a=s||n==="temporal",l;return nm(e)?l=e.expr:_e(e)?l=e.signal:Pc(e)?(a=!0,l=op(e)):(de(e)||kt(e))&&a&&(l=`datetime(${jt(e)})`,_ye(s)&&(kt(e)&&e<1e4||de(e)&&isNaN(Date.parse(e)))&&(l=op({[s]:e}))),l?r&&a?`time(${l})`:l:i?void 0:jt(e)}function cB(e,t){const{type:n}=e;return t.map(r=>{const i=Yb(r,{timeUnit:se(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return i!==void 0?{signal:i}:r})}function am(e,t){return Lt(e.bin)?Vl(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const uN={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function lm(e){return e==null?void 0:e.condition}const fB=["domain","grid","labels","ticks","title"],Nve={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},dB={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Rve=Object.assign(Object.assign({},dB),{style:1,labelExpr:1,encoding:1});function cN(e){return!!Rve[e]}const Pve={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},hB=Z(Pve);function da(e){return"mark"in e}class Xb{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return da(t)?dve(t.mark)===this.name:!1}}var Ive=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Wu(e,t){const n=e&&e[t];return n?X(n)?uc(n,r=>!!r.field):se(n)||Gb(n):!1}function gB(e,t){const n=e&&e[t];return n?X(n)?uc(n,r=>!!r.field):se(n)||_s(n)||sm(n):!1}function OS(e,t){if(Dn(t)){const n=e[t];if((se(n)||_s(n))&&Rz(n.type)){const r=oz(t);return gB(e,r)}}return!1}function Ok(e){return uc(Pme,t=>{if(Wu(e,t)){const n=e[t];if(X(n))return uc(n,r=>!!r.aggregate);{const r=us(n);return r&&!!r.aggregate}}return!1})}function pB(e,t){const n=[],r=[],i=[],o=[],s={};return _k(e,(a,l)=>{if(se(a)){const{field:u,aggregate:c,bin:f,timeUnit:d}=a,h=Ive(a,["field","aggregate","bin","timeUnit"]);if(c||d||f){const g=wk(a),p=g==null?void 0:g.title;let m=ue(a,{forAs:!0});const y=Object.assign(Object.assign(Object.assign({},p?[]:{title:kf(a,t,{allowDisabling:!0})}),h),{field:m});if(c){let v;if(Yl(c)?(v="argmax",m=ue({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${m}.${u}`):ta(c)?(v="argmin",m=ue({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${m}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:m};u&&(b.field=u),o.push(b)}}else if(n.push(m),Li(a)&&Lt(f)){if(r.push({bin:f,field:u,as:m}),n.push(ue(a,{binSuffix:"end"})),am(a,l)&&n.push(ue(a,{binSuffix:"range"})),Dn(l)){const v={field:`${m}_end`};s[`${l}2`]=v}y.bin="binned",iz(l)||(y.type=hc)}else if(d){i.push({timeUnit:d,field:u,as:m});const v=Li(a)&&a.type!==ad&&"time";v&&(l===Qp||l===fc?y.formatType=v:Vme(l)?y.legend=Object.assign({formatType:v},y.legend):Dn(l)&&(y.axis=Object.assign({formatType:v},y.axis)))}s[l]=y}else n.push(u),s[l]=e[l]}else s[l]=e[l]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:s}}function jve(e,t,n){const r=Xme(t,n);if(r){if(r==="binned"){const i=e[t===Co?Jt:Fn];return!!(se(i)&&se(e[t])&&br(i.bin))}}else return!1;return!0}function Lve(e,t,n,r){const i={};for(const o of Z(e))rz(o)||te(I0e(o));for(let o of Ume){if(!e[o])continue;const s=e[o];if(jd(o)){const a=sz(o),l=i[a];if(se(l)){if(Rye(l.type)&&se(s)){te(k0e(a));continue}}else o=a,te(F0e(a))}if(o==="angle"&&t==="arc"&&!e.theta&&(te(T0e),o=Ui),!jve(e,o,t)){te(Ib(o,t));continue}if(o===ua&&t==="line"){const a=us(e[o]);if(a!=null&&a.aggregate){te(R0e);continue}}if(o===Yr&&(n?"fill"in e:"stroke"in e)){te(Sz("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===tm||o===em&&!X(s)&&!So(s)||o===fc&&X(s))s&&(i[o]=pe(s).reduce((a,l)=>(se(l)?a.push(Sk(l,o)):te(vS(l,o)),a),[]));else{if(o===fc&&s===null)i[o]=null;else if(!se(s)&&!_s(s)&&!So(s)&&!Wb(s)&&!_e(s)){te(vS(s,o));continue}i[o]=uB(s,o,r)}}return i}function qb(e,t){const n={};for(const r of Z(e)){const i=uB(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function zve(e){const t=[];for(const n of Z(e))if(Wu(e,n)){const r=e[n],i=pe(r);for(const o of i)se(o)?t.push(o):Gb(o)&&t.push(o.condition)}return t}function _k(e,t,n){if(!!e)for(const r of Z(e)){const i=e[r];if(X(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function Bve(e,t,n,r){return e?Z(e).reduce((i,o)=>{const s=e[o];return X(s)?s.reduce((a,l)=>t.call(r,a,l,o),i):t.call(r,i,s,o)},n):n}function mB(e,t){return Z(t).reduce((n,r)=>{switch(r){case Jt:case Fn:case Db:case $b:case Mb:case Co:case bs:case Bl:case Id:case Ui:case la:case To:case aa:case xs:case ws:case ko:case ji:case Qp:case Xr:case $c:case fc:return n;case em:if(e==="line"||e==="trail")return n;case tm:case Fb:{const i=t[r];if(X(i)||se(i))for(const o of pe(i))o.aggregate||n.push(ue(o,{}));return n}case ua:if(e==="trail")return n;case Yr:case Es:case Ss:case ca:case Ul:case Hl:case Gl:case Wl:{const i=us(t[r]);return i&&!i.aggregate&&n.push(ue(i,{})),n}}},[])}var yB=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Uve(e){const{tooltip:t}=e,n=yB(e,["tooltip"]);if(!t)return{filteredEncoding:n};let r,i;if(X(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return X(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function _S(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:s,titlePrefix:a})=>{const l=r?` of ${Ak(t)}`:"";return{field:s+t.field,type:t.type,title:_e(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),o=zve(n).map(Sve);return{tooltip:[...i,...Go(o,ut)]}}function Ak(e){const{title:t,field:n}=e;return fn(t,n)}function Ck(e,t,n,r,i){const{scale:o,axis:s}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=Ak(n);return vB(e,a,i,{mark:l,encoding:Object.assign(Object.assign(Object.assign({[t]:Object.assign(Object.assign(Object.assign({field:`${u}_${n.field}`,type:n.type},d!==void 0?{title:d}:{}),o!==void 0?{scale:o}:{}),s!==void 0?{axis:s}:{})},de(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{}),r),f)})}}function vB(e,t,n,r){const{clip:i,color:o,opacity:s}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[Object.assign(Object.assign({},r),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[t]),i?{clip:i}:{}),o?{color:o}:{}),s?{opacity:s}:{}),ls(r.mark)?r.mark:{type:r.mark}),{style:`${a}-${String(t)}`}),$l(e[t])?{}:e[t])})]:[]}function bB(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],s=r[`${i}2`],a=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:e0(o,n),continuousAxisChannelDef2:e0(s,n),continuousAxisChannelDefError:e0(a,n),continuousAxisChannelDefError2:e0(l,n),continuousAxis:i}}function e0(e,t){if(e!=null&&e.aggregate){const{aggregate:n}=e,r=yB(e,["aggregate"]);return n!==t&&te(fye(n,t)),r}else return e}function xB(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(ls(n)&&n.orient)return n.orient;if(Vo(i)){if(Vo(o)){const s=se(i)&&i.aggregate,a=se(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return fd(o)&&!fd(i)?"horizontal":"vertical"}return"horizontal"}else{if(Vo(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}var X0=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Rv="boxplot",Hve=["box","median","outliers","rule","ticks"],Wve=new Xb(Rv,EB);function wB(e){return kt(e)?"tukey":e}function EB(e,{config:t}){var n,r;e=Object.assign(Object.assign({},e),{encoding:qb(e.encoding,t)});const{mark:i,encoding:o,params:s,projection:a}=e,l=X0(e,["mark","encoding","params","projection"]),u=ls(i)?i:{type:i};s&&te(wz("boxplot"));const c=(n=u.extent)!==null&&n!==void 0?n:t.boxplot.extent,f=_t("size",u,t),d=wB(c),{bins:h,timeUnits:g,transform:p,continuousAxisChannelDef:m,continuousAxis:y,groupby:v,aggregate:b,encodingWithoutContinuousAxis:x,ticksOrient:w,boxOrient:S,customTooltipWithoutAggregatedField:E}=Gve(e,c,t),{color:O,size:A}=x,C=X0(x,["color","size"]),_=W=>Ck(u,y,m,W,t.boxplot),T=_(C),k=_(x),D=_(Object.assign(Object.assign({},C),A?{size:A}:{})),M=_S([{fieldPrefix:d==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:d==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,x),$={type:"tick",color:"black",opacity:1,orient:w,invalid:null,aria:!1},N=d==="min-max"?M:_S([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,x),P=[...T({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:N}),...T({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:N}),...T({partName:"ticks",mark:$,positionPrefix:"lower_whisker",extraEncoding:N}),...T({partName:"ticks",mark:$,positionPrefix:"upper_whisker",extraEncoding:N})],H=[...d!=="tukey"?P:[],...k({partName:"box",mark:Object.assign(Object.assign({type:"bar"},f?{size:f}:{}),{orient:S,invalid:null,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:M}),...D({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},me(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{}),f?{size:f}:{}),{orient:w,aria:!1}),positionPrefix:"mid_box",extraEncoding:M})];if(d==="min-max")return Object.assign(Object.assign({},l),{transform:((r=l.transform)!==null&&r!==void 0?r:[]).concat(p),layer:H});const ie=`datum["lower_box_${m.field}"]`,ge=`datum["upper_box_${m.field}"]`,be=`(${ge} - ${ie})`,Fe=`${ie} - ${c} * ${be}`,Be=`${ge} + ${c} * ${be}`,De=`datum["${m.field}"]`,Ie={joinaggregate:SB(m.field),groupby:v},Qe={transform:[{filter:`(${Fe} <= ${De}) && (${De} <= ${Be})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${m.field}`},{op:"max",field:m.field,as:`upper_whisker_${m.field}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${m.field}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${m.field}`},...b],groupby:v}],layer:P},yt=X0(C,["tooltip"]),{scale:Q,axis:Oe}=m,je=Ak(m),F=di(Oe,["title"]),R=vB(u,"outliers",t.boxplot,{transform:[{filter:`(${De} < ${Fe}) || (${De} > ${Be})`}],mark:"point",encoding:Object.assign(Object.assign(Object.assign({[y]:Object.assign(Object.assign(Object.assign({field:m.field,type:m.type},je!==void 0?{title:je}:{}),Q!==void 0?{scale:Q}:{}),Tt(F)?{}:{axis:F})},yt),O?{color:O}:{}),E?{tooltip:E}:{})})[0];let I;const G=[...h,...g,Ie];return R?I={transform:G,layer:[R,Qe]}:(I=Qe,I.transform.unshift(...G)),Object.assign(Object.assign({},l),{layer:[I,{transform:p,layer:H}]})}function SB(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function Gve(e,t,n){const r=xB(e,Rv),{continuousAxisChannelDef:i,continuousAxis:o}=bB(e,r,Rv),s=i.field,a=wB(t),l=[...SB(s),{op:"median",field:s,as:`mid_box_${s}`},{op:"min",field:s,as:(a==="min-max"?"lower_whisker_":"min_")+s},{op:"max",field:s,as:(a==="min-max"?"upper_whisker_":"max_")+s}],u=a==="min-max"||a==="tukey"?[]:[{calculate:`datum["upper_box_${s}"] - datum["lower_box_${s}"]`,as:`iqr_${s}`},{calculate:`min(datum["upper_box_${s}"] + datum["iqr_${s}"] * ${t}, datum["max_${s}"])`,as:`upper_whisker_${s}`},{calculate:`max(datum["lower_box_${s}"] - datum["iqr_${s}"] * ${t}, datum["min_${s}"])`,as:`lower_whisker_${s}`}],c=e.encoding,f=o;c[f];const d=X0(c,[typeof f=="symbol"?f:f+""]),{customTooltipWithoutAggregatedField:h,filteredEncoding:g}=Uve(d),{bins:p,timeUnits:m,aggregate:y,groupby:v,encoding:b}=pB(g,n),x=r==="vertical"?"horizontal":"vertical",w=r,S=[...p,...m,{aggregate:[...y,...l],groupby:v},...u];return{bins:p,timeUnits:m,transform:S,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:w,customTooltipWithoutAggregatedField:h}}var fN=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Tk="errorbar",Vve=["ticks","rule"],Yve=new Xb(Tk,OB);function OB(e,{config:t}){e=Object.assign(Object.assign({},e),{encoding:qb(e.encoding,t)});const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:l,tooltipEncoding:u}=_B(e,Tk,t);delete o.size;const c=Ck(a,i,r,o,t.errorbar),f=a.thickness,d=a.size,h=Object.assign(Object.assign({type:"tick",orient:s,aria:!1},f!==void 0?{thickness:f}:{}),d!==void 0?{size:d}:{}),g=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:Object.assign({type:"rule",ariaRoleDescription:"errorbar"},f!==void 0?{size:f}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return Object.assign(Object.assign(Object.assign({},l),{transform:n}),g.length>1?{layer:g}:Object.assign({},g[0]))}function Xve(e,t){const{encoding:n}=e;if(qve(n))return{orient:xB(e,t),inputType:"raw"};const r=Kve(n),i=Jve(n),o=n.x,s=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(Ve(a)&&Ve(l))throw new Error(`${t} cannot have both x2 and y2`);if(Ve(a)){if(Vo(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Ve(l)){if(Vo(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,u=n.yError,c=n.yError2;if(Ve(l)&&!Ve(a))throw new Error(`${t} cannot have xError2 without xError`);if(Ve(c)&&!Ve(u))throw new Error(`${t} cannot have yError2 without yError`);if(Ve(a)&&Ve(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Ve(a)){if(Vo(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Ve(u)){if(Vo(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function qve(e){return(Ve(e.x)||Ve(e.y))&&!Ve(e.x2)&&!Ve(e.y2)&&!Ve(e.xError)&&!Ve(e.xError2)&&!Ve(e.yError)&&!Ve(e.yError2)}function Kve(e){return Ve(e.x2)||Ve(e.y2)}function Jve(e){return Ve(e.xError)||Ve(e.xError2)||Ve(e.yError)||Ve(e.yError2)}function _B(e,t,n){var r;const{mark:i,encoding:o,params:s,projection:a}=e,l=fN(e,["mark","encoding","params","projection"]),u=ls(i)?i:{type:i};s&&te(wz(t));const{orient:c,inputType:f}=Xve(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:h,continuousAxisChannelDefError:g,continuousAxisChannelDefError2:p,continuousAxis:m}=bB(e,c,t),{errorBarSpecificAggregate:y,postAggregateCalculates:v,tooltipSummary:b,tooltipTitleWithFieldName:x}=Zve(u,d,h,g,p,f,t,n),w=o,S=m;w[S];const E=m==="x"?"x2":"y2";w[E];const O=m==="x"?"xError":"yError";w[O];const A=m==="x"?"xError2":"yError2";w[A];const C=fN(w,[typeof S=="symbol"?S:S+"",typeof E=="symbol"?E:E+"",typeof O=="symbol"?O:O+"",typeof A=="symbol"?A:A+""]),{bins:_,timeUnits:T,aggregate:k,groupby:D,encoding:M}=pB(C,n),$=[...k,...y],N=f!=="raw"?[]:D,P=_S(b,d,M,x);return{transform:[...(r=l.transform)!==null&&r!==void 0?r:[],..._,...T,...$.length===0?[]:[{aggregate:$,groupby:N}],...v],groupby:N,continuousAxisChannelDef:d,continuousAxis:m,encodingWithoutContinuousAxis:M,ticksOrient:c==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:l,tooltipEncoding:P}}function Zve(e,t,n,r,i,o,s,a){let l=[],u=[];const c=t.field;let f,d=!1;if(o==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,g=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(g==="iqr")&&te(cye(h,g,s)),g==="stderr"||g==="stdev")l=[{op:g,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:Jp(h)},{fieldPrefix:"upper_",titlePrefix:dN(h,g,"+")},{fieldPrefix:"lower_",titlePrefix:dN(h,g,"-")}],d=!0;else{let p,m,y;g==="ci"?(p="mean",m="ci0",y="ci1"):(p="median",m="q1",y="q3"),l=[{op:m,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:p,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:kf({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:kf({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:kf({field:c,aggregate:p,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&te(uye(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?u.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):u.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of u)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:cc(cc(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:f,tooltipTitleWithFieldName:d}}function dN(e,t,n){return`${Jp(e)} ${n} ${t}`}const kk="errorband",Qve=["band","borders"],e1e=new Xb(kk,AB);function AB(e,{config:t}){e=Object.assign(Object.assign({},e),{encoding:qb(e.encoding,t)});const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:l}=_B(e,kk,t),u=s,c=Ck(u,i,r,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const g=Object.assign(Object.assign({},u.interpolate?{interpolate:u.interpolate}:{}),u.tension&&u.interpolate?{tension:u.tension}:{});return f?(d=Object.assign(Object.assign(Object.assign({},d),g),{ariaRoleDescription:"errorband"}),h=Object.assign(Object.assign(Object.assign({},h),g),{aria:!1})):u.interpolate?te(rN("interpolate")):u.tension&&te(rN("tension")),Object.assign(Object.assign({},a),{transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]})}const CB={};function Fk(e,t,n){const r=new Xb(e,t);CB[e]={normalizer:r,parts:n}}function t1e(){return Z(CB)}Fk(Rv,EB,Hve);Fk(Tk,OB,Vve);Fk(kk,AB,Qve);const n1e=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],TB={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},kB={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},r1e=Z(TB),i1e=Z(kB),o1e={header:1,headerRow:1,headerColumn:1,headerFacet:1},FB=Z(o1e),DB=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],s1e={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},a1e={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},cs="_vgsid_",l1e={point:{on:"click",fields:[cs],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Dk(e){return e==="legend"||!!(e!=null&&e.legend)}function $2(e){return Dk(e)&&me(e)}function Mk(e){return!!(e!=null&&e.select)}var u1e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function MB(e){const t=[];for(const n of e||[]){if(Mk(n))continue;const{expr:r,bind:i}=n,o=u1e(n,["expr","bind"]);if(i&&r){const s=Object.assign(Object.assign({},o),{bind:i,init:r});t.push(s)}else{const s=Object.assign(Object.assign(Object.assign({},o),r?{update:r}:{}),i?{bind:i}:{});t.push(s)}}return t}function c1e(e){return Kb(e)||Nk(e)||$k(e)}function $k(e){return"concat"in e}function Kb(e){return"vconcat"in e}function Nk(e){return"hconcat"in e}function $B({step:e,offsetIsDiscrete:t}){var n;return t?(n=e.for)!==null&&n!==void 0?n:"offset":"position"}function fs(e){return me(e)&&e.step!==void 0}function hN(e){return e.view||e.width||e.height}const gN=20,f1e={align:1,bounds:1,center:1,columns:1,spacing:1},d1e=Z(f1e);function h1e(e,t,n){var r,i;const o=n[t],s={},{spacing:a,columns:l}=o;a!==void 0&&(s.spacing=a),l!==void 0&&(Hb(e)&&!om(e.facet)||$k(e))&&(s.columns=l),Kb(e)&&(s.columns=1);for(const u of d1e)if(e[u]!==void 0)if(u==="spacing"){const c=e[u];s[u]=kt(c)?c:{row:(r=c.row)!==null&&r!==void 0?r:a,column:(i=c.column)!==null&&i!==void 0?i:a}}else s[u]=e[u];return s}var g1e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function AS(e,t){var n;return(n=e[t])!==null&&n!==void 0?n:e[t==="width"?"continuousWidth":"continuousHeight"]}function Pv(e,t){const n=Iv(e,t);return fs(n)?n.step:NB}function Iv(e,t){var n;const r=(n=e[t])!==null&&n!==void 0?n:e[t==="width"?"discreteWidth":"discreteHeight"];return fn(r,{step:e.step})}const NB=20,p1e={continuousWidth:200,continuousHeight:200,step:NB},m1e={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:p1e,mark:sve,arc:{},area:{},bar:uve,circle:{},geoshape:{},image:{},line:{},point:{},rect:cve,rule:{color:"black"},square:{},text:{color:"black"},tick:fve,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Uye,projection:{},legend:s1e,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:l1e,style:{},title:{},facet:{spacing:gN},concat:{spacing:gN},normalizedNumberFormat:".0%"},ks=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],pN={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},mN={blue:ks[0],orange:ks[1],red:ks[2],teal:ks[3],green:ks[4],yellow:ks[5],purple:ks[6],pink:ks[7],brown:ks[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function y1e(e={}){return{signals:[{name:"color",value:me(e)?Object.assign(Object.assign({},mN),e):mN}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function v1e(e){return{signals:[{name:"fontSize",value:me(e)?Object.assign(Object.assign({},pN),e):pN}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function b1e(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function RB(e){const t=Z(e||{}),n={};for(const r of t){const i=e[r];n[r]=lm(i)?gz(i):ai(i)}return n}function x1e(e){const t=Z(e),n={};for(const r of t)n[r]=RB(e[r]);return n}const w1e=[...Vz,...hB,...FB,"background","padding","legend","lineBreak","scale","style","title","view"];function PB(e={}){const{color:t,font:n,fontSize:r,selection:i}=e,o=g1e(e,["color","font","fontSize","selection"]),s=Ed({},Xe(m1e),n?b1e(n):{},t?y1e(t):{},r?v1e(r):{},o||{});i&&Sd(s,"selection",i,!0);const a=di(s,w1e);for(const l of["background","lineBreak","padding"])s[l]&&(a[l]=ai(s[l]));for(const l of Vz)s[l]&&(a[l]=Rr(s[l]));for(const l of hB)s[l]&&(a[l]=RB(s[l]));for(const l of FB)s[l]&&(a[l]=Rr(s[l]));return s.legend&&(a.legend=Rr(s.legend)),s.scale&&(a.scale=Rr(s.scale)),s.style&&(a.style=x1e(s.style)),s.title&&(a.title=Rr(s.title)),s.view&&(a.view=Rr(s.view)),a}const E1e=new Set(["view",...eve]),S1e=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],O1e=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},ove);function _1e(e){e=Xe(e);for(const t of S1e)delete e[t];if(e.axis)for(const t in e.axis)lm(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of n1e)delete e.legend[t];if(e.mark){for(const t of oN)delete e.mark[t];e.mark.tooltip&&me(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(MB(e.params)),delete e.params);for(const t of E1e){for(const r of oN)delete e[t][r];const n=O1e[t];if(n)for(const r of n)delete e[t][r];C1e(e,t)}for(const t of t1e())delete e[t];A1e(e);for(const t in e)me(e[t])&&Tt(e[t])&&delete e[t];return Tt(e)?void 0:e}function A1e(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=hz(e.title);Tt(t)||(e.style["group-title"]=Object.assign(Object.assign({},e.style["group-title"]),t)),Tt(n)||(e.style["group-subtitle"]=Object.assign(Object.assign({},e.style["group-subtitle"]),n)),Tt(r)?delete e.title:e.title=r}function C1e(e,t,n,r){const i=r?e[t][r]:e[t];t==="view"&&(n="cell");const o=Object.assign(Object.assign({},i),e.style[n!=null?n:t]);Tt(o)||(e.style[n!=null?n:t]=o),r||delete e[t]}function Jb(e){return"layer"in e}function T1e(e){return"repeat"in e}function k1e(e){return!X(e.repeat)&&e.repeat.layer}var F1e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class Rk{map(t,n){return Hb(t)?this.mapFacet(t,n):T1e(t)?this.mapRepeat(t,n):Nk(t)?this.mapHConcat(t,n):Kb(t)?this.mapVConcat(t,n):$k(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(Jb(t))return this.mapLayer(t,n);if(da(t))return this.mapUnit(t,n);throw new Error(KT(t))}mapLayer(t,n){return Object.assign(Object.assign({},t),{layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))})}mapHConcat(t,n){return Object.assign(Object.assign({},t),{hconcat:t.hconcat.map(r=>this.map(r,n))})}mapVConcat(t,n){return Object.assign(Object.assign({},t),{vconcat:t.vconcat.map(r=>this.map(r,n))})}mapConcat(t,n){const{concat:r}=t,i=F1e(t,["concat"]);return Object.assign(Object.assign({},i),{concat:r.map(o=>this.map(o,n))})}mapFacet(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}mapRepeat(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}}const D1e={zero:1,center:1,normalize:1};function M1e(e){return e in D1e}const $1e=new Set([Uz,Lb,jb,Fv,Bb,hk,gk,zb,Hz,dk]),N1e=new Set([Lb,jb,Uz]);function Kc(e){return se(e)&&ud(e)==="quantitative"&&!e.bin}function yN(e,t){var n,r;const i=t==="x"?"y":"radius",o=e[t],s=e[i];if(se(o)&&se(s))if(Kc(o)&&Kc(s)){if(o.stack)return t;if(s.stack)return i;const a=se(o)&&!!o.aggregate,l=se(s)&&!!s.aggregate;if(a!==l)return a?t:i;{const u=(n=o.scale)===null||n===void 0?void 0:n.type,c=(r=s.scale)===null||r===void 0?void 0:r.type;if(u&&u!=="linear")return i;if(c&&c!=="linear")return t}}else{if(Kc(o))return t;if(Kc(s))return i}else{if(Kc(o))return t;if(Kc(s))return i}}function R1e(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function IB(e,t){var n,r;const i=ls(e)?e.type:e;if(!$1e.has(i))return null;const o=yN(t,"x")||yN(t,"theta");if(!o)return null;const s=t[o],a=se(s)?ue(s,{}):void 0,l=R1e(o),u=[],c=new Set;if(t[l]){const h=t[l],g=se(h)?ue(h,{}):void 0;g&&g!==a&&(u.push(l),c.add(g));const p=l==="x"?"xOffset":"yOffset",m=t[p],y=se(m)?ue(m,{}):void 0;y&&y!==a&&(u.push(p),c.add(y))}const f=Hme.reduce((h,g)=>{if(g!=="tooltip"&&Wu(t,g)){const p=t[g];for(const m of pe(p)){const y=us(m);if(y.aggregate)continue;const v=ue(y,{});(!v||!c.has(v))&&h.push({channel:g,fieldDef:y})}}return h},[]);let d;return s.stack!==void 0?$l(s.stack)?d=s.stack?"zero":null:d=s.stack:N1e.has(i)&&(d="zero"),!d||!M1e(d)||Ok(t)&&f.length===0?null:((n=s==null?void 0:s.scale)===null||n===void 0?void 0:n.type)&&((r=s==null?void 0:s.scale)===null||r===void 0?void 0:r.type)!==Br.LINEAR?(te(sye(s.scale.type)),null):Ve(t[fa(o)])?(s.stack!==void 0&&te(oye(o)),null):(se(s)&&s.aggregate&&!t0e.has(s.aggregate)&&te(aye(s.aggregate)),{groupbyChannels:u,groupbyFields:c,fieldChannel:o,impute:s.impute===null?!1:ql(i),stackBy:f,offset:d})}var jB=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function P1e(e){const t=jB(e,["point","line"]);return Z(t).length>1?t:t.type}function I1e(e){for(const t of["line","area","rule","trail"])e[t]&&(e=Object.assign(Object.assign({},e),{[t]:di(e[t],["point","line"])}));return e}function N2(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?me(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?me(t.point)?t.point:{}:void 0}function vN(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class j1e{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(da(t)){const{mark:r,encoding:i}=t,o=ls(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!N2(o,n[o.type],i);case"area":return!!N2(o,n[o.type],i)||!!vN(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{params:o,projection:s,mark:a,encoding:l}=t,u=jB(t,["params","projection","mark","encoding"]),c=qb(l,i),f=ls(a)?a:{type:a},d=N2(f,i[f.type],c),h=f.type==="area"&&vN(f,i[f.type]),g=[Object.assign(Object.assign({},o?{params:o}:{}),{mark:P1e(Object.assign(Object.assign({},f.type==="area"&&f.opacity===void 0&&f.fillOpacity===void 0?{opacity:.7}:{}),f)),encoding:di(c,["shape"])})],p=IB(f,c);let m=c;if(p){const{fieldChannel:y,offset:v}=p;m=Object.assign(Object.assign({},c),{[y]:Object.assign(Object.assign({},c[y]),v?{stack:v}:{})})}return h&&g.push(Object.assign(Object.assign({},s?{projection:s}:{}),{mark:Object.assign(Object.assign({type:"line"},id(f,["clip","interpolate","tension","tooltip"])),h),encoding:m})),d&&g.push(Object.assign(Object.assign({},s?{projection:s}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},id(f,["clip","tooltip"])),d),encoding:m})),r(Object.assign(Object.assign({},u),{layer:g}),Object.assign(Object.assign({},n),{config:I1e(i)}))}}var L1e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function z1e(e,t){return t?om(e)?zB(e,t):LB(e,t):e}function R2(e,t){return t?zB(e,t):e}function CS(e,t,n){const r=t[e];if(wve(r)){if(r.repeat in n)return Object.assign(Object.assign({},t),{[e]:n[r.repeat]});te(w0e(r.repeat));return}return t}function LB(e,t){if(e=CS("field",e,t),e!==void 0){if(e===null)return null;if(xk(e)&&Qo(e.sort)){const n=CS("field",e.sort,t);e=Object.assign(Object.assign({},e),n?{sort:n}:{})}return e}}function bN(e,t){if(se(e))return LB(e,t);{const n=CS("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function xN(e,t){if(Ve(e)){const n=bN(e,t);if(n)return n;if(Wb(e))return{condition:e.condition}}else{if(sm(e)){const n=bN(e.condition,t);return n?Object.assign(Object.assign({},e),{condition:n}):L1e(e,["condition"])}return e}}function zB(e,t){const n={};for(const r in e)if(Ae(e,r)){const i=e[r];if(X(i))n[r]=i.map(o=>xN(o,t)).filter(o=>o);else{const o=xN(i,t);o!==void 0&&(n[r]=o)}}return n}class B1e{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(da(t)){const{encoding:n,mark:r}=t;if(r==="line"||ls(r)&&r.type==="line")for(const i of zme){const o=Nc(i),s=n[o];if(n[i]&&(se(s)&&!br(s.bin)||_s(s)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:o}=t;return te(U0e(!!i.x2,!!i.y2)),r(Object.assign(Object.assign({},t),{mark:me(o)?Object.assign(Object.assign({},o),{type:"rule"}):"rule"}),n)}}var ba=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class U1e extends Rk{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Wve,Yve,e1e,new j1e,new B1e]}map(t,n){if(da(t)){const r=Wu(t.encoding,Ys),i=Wu(t.encoding,Xs),o=Wu(t.encoding,kb);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,o=R2(t.encoding,n.repeater),s=Object.assign(Object.assign({},t),o?{encoding:o}:{});if(r||i)return this.mapUnitWithParentEncodingOrProjection(s,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,a);return s}mapRepeat(t,n){return k1e(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i}=t,o=ba(t,["repeat","spec"]),{row:s,column:a,layer:l}=r,{repeater:u={},repeaterPrefix:c=""}=n;return s||a?this.mapRepeat(Object.assign(Object.assign({},t),{repeat:Object.assign(Object.assign({},s?{row:s}:{}),a?{column:a}:{}),spec:{repeat:{layer:l},spec:i}}),n):Object.assign(Object.assign({},o),{layer:l.map(f=>{const d=Object.assign(Object.assign({},u),{layer:f}),h=`${(i.name||"")+c}child__layer_${Vt(f)}`,g=this.mapLayerOrUnit(i,Object.assign(Object.assign({},n),{repeater:d,repeaterPrefix:h}));return g.name=h,g})})}mapNonLayerRepeat(t,n){var r;const{repeat:i,spec:o,data:s}=t,a=ba(t,["repeat","spec","data"]);!X(i)&&t.columns&&(t=di(t,["columns"]),te(Q3("repeat")));const l=[],{repeater:u={},repeaterPrefix:c=""}=n,f=!X(i)&&i.row||[u?u.row:null],d=!X(i)&&i.column||[u?u.column:null],h=X(i)&&i||[u?u.repeat:null];for(const p of h)for(const m of f)for(const y of d){const v={repeat:p,row:m,column:y,layer:u.layer},b=(o.name||"")+c+"child__"+(X(i)?`${Vt(p)}`:(i.row?`row_${Vt(m)}`:"")+(i.column?`column_${Vt(y)}`:"")),x=this.map(o,Object.assign(Object.assign({},n),{repeater:v,repeaterPrefix:b}));x.name=b,l.push(di(x,["data"]))}const g=X(i)?t.columns:i.column?i.column.length:1;return Object.assign(Object.assign({data:(r=o.data)!==null&&r!==void 0?r:s,align:"all"},a),{columns:g,concat:l})}mapFacet(t,n){const{facet:r}=t;return om(r)&&t.columns&&(t=di(t,["columns"]),te(Q3("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:s,config:a}=n,l=EN({parentProjection:s,projection:i}),u=wN({parentEncoding:o,encoding:R2(r,n.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},t),l?{projection:l}:{}),u?{encoding:u}:{}),{config:a})}mapFacetedUnit(t,n){const r=t.encoding,{row:i,column:o,facet:s}=r,a=ba(r,["row","column","facet"]),{mark:l,width:u,projection:c,height:f,view:d,params:h,encoding:g}=t,p=ba(t,["mark","width","projection","height","view","params","encoding"]),{facetMapping:m,layout:y}=this.getFacetMappingAndLayout({row:i,column:o,facet:s},n),v=R2(a,n.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},p),y),{facet:m,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u?{width:u}:{}),f?{height:f}:{}),d?{view:d}:{}),c?{projection:c}:{}),{mark:l,encoding:v}),h?{params:h}:{})}),n)}getFacetMappingAndLayout(t,n){var r;const{row:i,column:o,facet:s}=t;if(i||o){s&&te(z0e([...i?[Ys]:[],...o?[Xs]:[]]));const a={},l={};for(const u of[Ys,Xs]){const c=t[u];if(c){const f=ba(c,["align","center","spacing","columns"]);a[u]=f;for(const d of["align","center","spacing"])c[d]!==void 0&&((r=l[d])!==null&&r!==void 0||(l[d]={}),l[d][u]=c[d])}}return{facetMapping:a,layout:l}}else{const{align:a,center:l,spacing:u,columns:c}=s,f=ba(s,["align","center","spacing","columns"]);return{facetMapping:z1e(f,n.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},a?{align:a}:{}),l?{center:l}:{}),u?{spacing:u}:{}),c?{columns:c}:{})}}}mapLayer(t,n){var{parentEncoding:r,parentProjection:i}=n,o=ba(n,["parentEncoding","parentProjection"]);const{encoding:s,projection:a}=t,l=ba(t,["encoding","projection"]),u=Object.assign(Object.assign({},o),{parentEncoding:wN({parentEncoding:r,encoding:s,layer:!0}),parentProjection:EN({parentProjection:i,projection:a})});return super.mapLayer(l,u)}}function wN({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Z(e),...Z(t)]);for(const o of i){const s=t[o],a=e[o];if(Ve(s)){const l=Object.assign(Object.assign({},a),s);r[o]=l}else sm(s)?r[o]=Object.assign(Object.assign({},s),{condition:Object.assign(Object.assign({},a),s.condition)}):s||s===null?r[o]=s:(n||So(a)||_e(a)||Ve(a)||X(a))&&(r[o]=a)}}else r=t;return!r||Tt(r)?void 0:r}function EN(e){const{parentProjection:t,projection:n}=e;return t&&n&&te(C0e({parentProjection:t,projection:n})),n!=null?n:t}function Pk(e){return"filter"in e}function H1e(e){return(e==null?void 0:e.stop)!==void 0}function BB(e){return"lookup"in e}function W1e(e){return"data"in e}function G1e(e){return"param"in e}function V1e(e){return"pivot"in e}function Y1e(e){return"density"in e}function X1e(e){return"quantile"in e}function q1e(e){return"regression"in e}function K1e(e){return"loess"in e}function J1e(e){return"sample"in e}function Z1e(e){return"window"in e}function Q1e(e){return"joinaggregate"in e}function ebe(e){return"flatten"in e}function tbe(e){return"calculate"in e}function UB(e){return"bin"in e}function nbe(e){return"impute"in e}function rbe(e){return"timeUnit"in e}function ibe(e){return"aggregate"in e}function obe(e){return"stack"in e}function sbe(e){return"fold"in e}function abe(e){return e.map(t=>Pk(t)?{filter:Cf(t.filter,Nye)}:t)}var nl=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class lbe extends Rk{map(t,n){var r,i;return(r=n.emptySelections)!==null&&r!==void 0||(n.emptySelections={}),(i=n.selectionPredicates)!==null&&i!==void 0||(n.selectionPredicates={}),t=SN(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=SN(t,n),t.encoding){const r={};for(const[i,o]of _l(t.encoding))r[i]=HB(o,n);t=Object.assign(Object.assign({},t),{encoding:r})}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const r=t,{selection:i}=r,o=nl(r,["selection"]);return i?Object.assign(Object.assign({},o),{params:_l(i).map(([s,a])=>{var l;const u=a,{init:c,bind:f,empty:d}=u,h=nl(u,["init","bind","empty"]);h.type==="single"?(h.type="point",h.toggle=!1):h.type==="multi"&&(h.type="point"),n.emptySelections[s]=d!=="none";for(const g of sr((l=n.selectionPredicates[s])!==null&&l!==void 0?l:{}))g.empty=d!=="none";return{name:s,value:c,select:h,bind:f}})}):t}}function SN(e,t){const{transform:n}=e,r=nl(e,["transform"]);if(n){const i=n.map(o=>{if(Pk(o))return{filter:TS(o,t)};if(UB(o)&&Rc(o.bin))return Object.assign(Object.assign({},o),{bin:WB(o.bin)});if(BB(o)){const s=o.from,{selection:a}=s,l=nl(s,["selection"]);return a?Object.assign(Object.assign({},o),{from:Object.assign({param:a},l)}):o}return o});return Object.assign(Object.assign({},r),{transform:i})}return e}function HB(e,t){var n,r;const i=Xe(e);if(se(i)&&Rc(i.bin)&&(i.bin=WB(i.bin)),Ic(i)&&((r=(n=i.scale)===null||n===void 0?void 0:n.domain)===null||r===void 0?void 0:r.selection)){const o=i.scale.domain,{selection:s}=o,a=nl(o,["selection"]);i.scale.domain=Object.assign(Object.assign({},a),s?{param:s}:{})}if(Wb(i))if(X(i.condition))i.condition=i.condition.map(o=>{const{selection:s,param:a,test:l}=o,u=nl(o,["selection","param","test"]);return a?o:Object.assign(Object.assign({},u),{test:TS(o,t)})});else{const o=HB(i.condition,t),{selection:s,param:a,test:l}=o,u=nl(o,["selection","param","test"]);i.condition=a?i.condition:Object.assign(Object.assign({},u),{test:TS(i.condition,t)})}return i}function WB(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n}=t,r=nl(t,["selection"]);return Object.assign(Object.assign({},e),{extent:Object.assign(Object.assign({},r),{param:n})})}return e}function TS(e,t){const n=r=>Cf(r,i=>{var o,s,a;const l=(o=t.emptySelections[i])!==null&&o!==void 0?o:!0,u={param:i,empty:l};return(s=(a=t.selectionPredicates)[i])!==null&&s!==void 0||(a[i]=[]),t.selectionPredicates[i].push(u),u});return e.selection?n(e.selection):Cf(e.test||e.filter,r=>r.selection?n(r.selection):r)}class kS extends Rk{map(t,n){var r;const i=(r=n.selections)!==null&&r!==void 0?r:[];if(t.params&&!da(t)){const o=[];for(const s of t.params)Mk(s)?i.push(s):o.push(s);t.params=o}return n.selections=i,super.map(t,GB(t,n))}mapUnit(t,n){var r;const i=n.selections;if(!i||!i.length)return t;const o=((r=n.path)!==null&&r!==void 0?r:[]).concat(t.name),s=[];for(const a of i)if(!a.views||!a.views.length)s.push(a);else for(const l of a.views)(de(l)&&(l===t.name||o.indexOf(l)>=0)||X(l)&&l.map(u=>o.indexOf(u)).every((u,c,f)=>u!==-1&&(c===0||u>f[c-1])))&&s.push(a);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=kS.prototype[e];kS.prototype[e]=function(n,r){return t.call(this,n,GB(n,r))}}function GB(e,t){var n;return e.name?Object.assign(Object.assign({},t),{path:((n=t.path)!==null&&n!==void 0?n:[]).concat(e.name)}):t}function VB(e,t){t===void 0&&(t=PB(e.config));const n=dbe(e,t),{width:r,height:i}=e,o=hbe(n,{width:r,height:i,autosize:e.autosize},t);return Object.assign(Object.assign({},n),o?{autosize:o}:{})}const ube=new U1e,cbe=new lbe,fbe=new kS;function dbe(e,t={}){const n={config:t};return fbe.map(ube.map(cbe.map(e,n),n),n)}function ON(e){return de(e)?{type:e}:e!=null?e:{}}function hbe(e,t,n){let{width:r,height:i}=t;const o=da(e)||Jb(e),s={};o?r=="container"&&i=="container"?(s.type="fit",s.contains="padding"):r=="container"?(s.type="fit-x",s.contains="padding"):i=="container"&&(s.type="fit-y",s.contains="padding"):(r=="container"&&(te(q3("width")),r=void 0),i=="container"&&(te(q3("height")),i=void 0));const a=Object.assign(Object.assign(Object.assign({type:"pad"},s),n?ON(n.autosize):{}),ON(e.autosize));if(a.type==="fit"&&!o&&(te(f0e),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&te(K3("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&te(K3("height")),!Wo(a,{type:"pad"}))return a}function gbe(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function pbe(e){return e?`fit-${Nb(e)}`:"fit"}const mbe=["background","padding"];function _N(e,t){const n={};for(const r of mbe)e&&e[r]!==void 0&&(n[r]=ai(e[r]));return t&&(n.params=e.params),n}class ha{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new ha(Xe(this.explicit),Xe(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(t){return fn(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Z(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Po(e){return{explicit:!0,value:e}}function Qr(e){return{explicit:!1,value:e}}function YB(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:Zb(t,n,r,i)}}function Zb(e,t,n,r){return e.explicit&&t.explicit&&te(Z0e(n,r,e.value,t.value)),e}function Cl(e,t,n,r,i=Zb){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Wo(e.value,t.value)?e:i(e,t,n,r)}class ybe extends ha{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function dd(e){return"url"in e}function sp(e){return"values"in e}function XB(e){return"name"in e&&!dd(e)&&!sp(e)&&!rl(e)}function rl(e){return e&&(qB(e)||KB(e)||Ik(e))}function qB(e){return"sequence"in e}function KB(e){return"sphere"in e}function Ik(e){return"graticule"in e}var It;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(It||(It={}));var vbe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function mc(e,t=!0,n=ar){if(X(e)){const r=e.map(i=>mc(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Pc(e))return n(t?op(e):Sye(e));return t?n(jt(e)):e}function bbe(e,t){var n;for(const r of sr((n=e.component.selection)!==null&&n!==void 0?n:{})){const i=r.name;let o=`${i}${Fl}, ${r.resolve==="global"?"true":`{unit: ${hd(e)}}`}`;for(const s of ex)!s.defined(r)||(s.signals&&(t=s.signals(e,r,t)),s.modifyExpr&&(o=s.modifyExpr(e,r,o)));t.push({name:i+Zbe,on:[{events:{signal:r.name+Fl},update:`modify(${ae(r.name+yc)}, ${o})`}]})}return jk(t)}function xbe(e,t){if(e.component.selection&&Z(e.component.selection).length){const n=ae(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:zl("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return jk(t)}function wbe(e,t){var n;let r=!1;for(const i of sr((n=e.component.selection)!==null&&n!==void 0?n:{})){const o=i.name,s=ae(o+yc);if(t.filter(l=>l.name===o).length===0){const l=i.resolve==="global"?"union":i.resolve,u=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${dU}(${s}, ${ae(l)}${u}`})}r=!0;for(const l of ex)l.defined(i)&&l.topLevelSignals&&(t=l.topLevelSignals(e,i,t))}return r&&t.filter(o=>o.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),jk(t)}function Ebe(e,t){var n;const r=[...t],i=hd(e,{escape:!1});for(const o of sr((n=e.component.selection)!==null&&n!==void 0?n:{})){const s={name:o.name+yc};if(o.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:cs}}]),o.init){const l=o.project.items.map(u=>vbe(u,["signals"]));s.values=o.project.hasSelectionId?o.init.map(u=>({unit:i,[cs]:mc(u,!1)[0]})):o.init.map(u=>({unit:i,fields:l,values:mc(u,!1)}))}r.filter(l=>l.name===o.name+yc).length||r.push(s)}return r}function JB(e,t){var n;for(const r of sr((n=e.component.selection)!==null&&n!==void 0?n:{}))for(const i of ex)i.defined(r)&&i.marks&&(t=i.marks(e,r,t));return t}function Sbe(e,t){for(const n of e.children)un(n)&&(t=JB(n,t));return t}function Obe(e,t,n,r){const i=yU(e,t.param,t);return{signal:bi(n.get("type"))&&X(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function jk(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Dt{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){te(O0e);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Sr extends Dt{constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${J9()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}var AN=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class es extends Dt{constructor(t,n){super(t),this.formula=n}clone(){return new es(null,Xe(this.formula))}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o)=>{const{field:s,timeUnit:a}=o;if(a){const l=ue(o,{forAs:!0});i[ut({as:l,field:s,timeUnit:a})]={as:l,field:s,timeUnit:a}}return i},{});return Tt(r)?null:new es(t,r)}static makeFromTransform(t,n){const r=Object.assign({},n),{timeUnit:i}=r,o=AN(r,["timeUnit"]),s=ur(i),a=Object.assign(Object.assign({},o),{timeUnit:s});return new es(t,{[ut(a)]:a})}merge(t){this.formula=Object.assign({},this.formula);for(const n in t.formula)this.formula[n]||(this.formula[n]=t.formula[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of _l(this.formula))t.has(i.as)||(n[r]=i);this.formula=n}producedFields(){return new Set(sr(this.formula).map(t=>t.as))}dependentFields(){return new Set(sr(this.formula).map(t=>t.field))}hash(){return`TimeUnit ${ut(this.formula)}`}assemble(){const t=[];for(const n of sr(this.formula)){const{field:r,as:i,timeUnit:o}=n,s=ur(o),{unit:a,utc:l}=s,u=AN(s,["unit","utc"]);t.push(Object.assign(Object.assign(Object.assign(Object.assign({field:Ii(r),type:"timeunit"},a?{units:tk(a)}:{}),l?{timezone:"utc"}:{}),u),{as:[i,`${i}_end`]}))}return t}}var _be=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const um="_tuple_fields";class Abe{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Cbe={defined:()=>!0,parse:(e,t,n)=>{var r;const i=t.name,o=(r=t.project)!==null&&r!==void 0?r:t.project=new Abe,s={},a={},l=new Set,u=(p,m)=>{const y=m==="visual"?p.channel:p.field;let v=Vt(`${i}_${y}`);for(let b=1;l.has(v);b++)v=Vt(`${i}_${y}_${b}`);return l.add(v),{[m]:v}},c=t.type,f=e.config.selection[c],d=n.value!==void 0?pe(n.value):null;let{fields:h,encodings:g}=me(n.select)?n.select:{};if(!h&&!g&&d){for(const p of d)if(!!me(p))for(const m of Z(p))Lme(m)?(g||(g=[])).push(m):c==="interval"?(te(x0e),g=f.encodings):(h||(h=[])).push(m)}!h&&!g&&(g=f.encodings,"fields"in f&&(h=f.fields));for(const p of g!=null?g:[]){const m=e.fieldDef(p);if(m){let y=m.field;if(m.aggregate){te(d0e(p,m.aggregate));continue}else if(!y){te(Z3(p));continue}if(m.timeUnit){y=e.vgField(p);const v={timeUnit:m.timeUnit,as:y,field:m.field};a[ut(v)]=v}if(!s[y]){let v="E";if(c==="interval"){const x=e.getScaleComponent(p).get("type");bi(x)&&(v="R")}else m.bin&&(v="R-RE");const b={field:y,channel:p,type:v};b.signals=Object.assign(Object.assign({},u(b,"data")),u(b,"visual")),o.items.push(s[y]=b),o.hasField[y]=o.hasChannel[p]=s[y],o.hasSelectionId=o.hasSelectionId||y===cs}}else te(Z3(p))}for(const p of h!=null?h:[]){if(o.hasField[p])continue;const m={type:"E",field:p};m.signals=Object.assign({},u(m,"data")),o.items.push(m),o.hasField[p]=m,o.hasSelectionId=o.hasSelectionId||p===cs}d&&(t.init=d.map(p=>o.items.map(m=>me(p)?p[m.channel]!==void 0?p[m.channel]:p[m.field]:p))),Tt(a)||(o.timeUnit=new es(null,a))},signals:(e,t,n)=>{const r=t.name+um;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(o=>{const s=_be(o,["signals","hasLegend"]);return s.field=Ii(s.field),s})})}},Tl={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Vl(i))continue;const o=e.getScaleComponent(i),s=o?o.get("type"):void 0;if(!o||!bi(s)){te(p0e);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(s=>n.filter(a=>a.name===s.signals.data).length===0);if(!e.parent||DS(e)||r.length===0)return n;const i=n.filter(s=>s.name===t.name)[0];let o=i.update;if(o.indexOf(dU)>=0)i.update=`{${r.map(s=>`${ae(Ii(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of r){const a=`${ae(Ii(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}i.update=o}return n.concat(r.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!DS(e))for(const r of t.scales){const i=n.filter(o=>o.name===r.signals.data)[0];i.push="outer",delete i.value,delete i.update}return n}};function FS(e,t){return`domain(${ae(e.scaleName(t))})`}function DS(e){var t;return e.parent&&Wd(e.parent)&&((t=!e.parent.parent)!==null&&t!==void 0?t:DS(e.parent.parent))}var Tbe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Ff="_brush",MS="_scale_trigger",kbe={defined:e=>e.type==="interval",signals:(e,t,n)=>{const r=t.name,i=r+um,o=Tl.defined(t),s=t.init?t.init[0]:null,a=[],l=[];if(t.translate&&!o){const c=`!event.item || event.item.mark.name !== ${ae(r+Ff)}`;ZB(t,(f,d)=>{var h,g;const p=pe((h=(g=d.between[0]).filter)!==null&&h!==void 0?h:g.filter=[]);return p.includes(c)||p.push(c),f})}t.project.items.forEach((c,f)=>{const d=c.channel;if(d!==Jt&&d!==Fn){te("Interval selections only support x and y encoding channels.");return}const h=s?s[f]:null,g=Fbe(e,t,c,h),p=c.signals.data,m=c.signals.visual,y=ae(e.scaleName(d)),v=e.getScaleComponent(d).get("type"),b=bi(v)?"+":"";n.push(...g),a.push(p),l.push({scaleName:e.scaleName(d),expr:`(!isArray(${p}) || (${b}invert(${y}, ${m})[0] === ${b}${p}[0] && ${b}invert(${y}, ${m})[1] === ${b}${p}[1]))`})}),!o&&l.length&&n.push({name:r+MS,value:{},on:[{events:l.map(c=>({scale:c.scaleName})),update:`${l.map(c=>c.expr).join(" && ")} ? ${r+MS} : {}`}]});const u=`unit: ${hd(e)}, fields: ${i}, values`;return n.concat(Object.assign(Object.assign({name:r+Fl},s?{init:`{${u}: ${mc(s)}}`}:{}),a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}))},marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,s=i==null?void 0:i.signals.visual,a=o==null?void 0:o.signals.visual,l=`data(${ae(t.name+yc)})`;if(Tl.defined(t)||!i&&!o)return n;const u={x:i!==void 0?{signal:`${s}[0]`}:{value:0},y:o!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const m of Z(u))u[m]=[Object.assign({test:`${l}.length && ${l}[0].unit === ${hd(e)}`},u[m]),{value:0}];const c=t.mark,{fill:f,fillOpacity:d,cursor:h}=c,g=Tbe(c,["fill","fillOpacity","cursor"]),p=Z(g).reduce((m,y)=>(m[y]=[{test:[i!==void 0&&`${s}[0] !== ${s}[1]`,o!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:g[y]},{value:null}],m),{});return[{name:`${r+Ff}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:f},fillOpacity:{value:d}},update:u}},...n,{name:r+Ff,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},h?{cursor:{value:h}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},u),p)}}]}};function Fbe(e,t,n,r){const i=n.channel,o=n.signals.visual,s=n.signals.data,a=Tl.defined(t),l=ae(e.scaleName(i)),u=e.getScaleComponent(i),c=u?u.get("type"):void 0,f=p=>`scale(${l}, ${p})`,d=e.getSizeSignalRef(i===Jt?"width":"height").signal,h=`${i}(unit)`,g=ZB(t,(p,m)=>[...p,{events:m.between[0],update:`[${h}, ${h}]`},{events:m,update:`[${o}[0], clamp(${h}, 0, ${d})]`}]);return g.push({events:{signal:t.name+MS},update:bi(c)?`[${f(`${s}[0]`)}, ${f(`${s}[1]`)}]`:"[0, 0]"}),a?[{name:s,on:[]}]:[Object.assign(Object.assign({name:o},r?{init:mc(r,!0,f)}:{value:[]}),{on:g}),Object.assign(Object.assign({name:s},r?{init:mc(r)}:{}),{on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${l}, ${o})`}]})]}function ZB(e,t){return e.events.reduce((n,r)=>r.between?t(n,r):(te(`${r} is not an ordered event stream for interval selections.`),n),[])}const Dbe={defined:e=>e.type==="point",signals:(e,t,n)=>{var r;const i=t.name,o=i+um,s=t.project,a="(item().isVoronoi ? datum.datum : datum)",l=sr((r=e.component.selection)!==null&&r!==void 0?r:{}).reduce((d,h)=>h.type==="interval"?d.concat(h.name+Ff):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${l?` && ${l}`:""}`;let c=`unit: ${hd(e)}, `;if(t.project.hasSelectionId)c+=`${cs}: ${a}[${ae(cs)}]`;else{const d=s.items.map(h=>{const g=e.fieldDef(h.channel);return g!=null&&g.bin?`[${a}[${ae(e.vgField(h.channel,{}))}], ${a}[${ae(e.vgField(h.channel,{binSuffix:"end"}))}]]`:`${a}[${ae(h.field)}]`}).join(", ");c+=`fields: ${o}, values: [${d}]`}const f=t.events;return n.concat([{name:i+Fl,on:f?[{events:f,update:`${u} ? {${c}} : null`,force:!0}]:[]}])}};function zd(e,t,n,r){const i=Wb(t)&&t.condition,o=r(t);if(i){const a=pe(i).map(l=>{const u=r(l);if(xve(l)){const{param:c,empty:f}=l,d=mU(e,{param:c,empty:f});return Object.assign({test:d},u)}else{const c=zv(e,l.test);return Object.assign({test:c},u)}});return{[n]:[...a,...o!==void 0?[o]:[]]}}else return o!==void 0?{[n]:o}:{}}function Lk(e,t="text"){const n=e.encoding[t];return zd(e,n,t,r=>Qb(r,e.config))}function Qb(e,t,n="datum"){if(e){if(So(e))return Bt(e.value);if(Ve(e)){const{format:r,formatType:i}=$v(e);return vk({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function QB(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,s=n.tooltip;if(X(s))return{tooltip:CN({tooltip:s},o,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return zd(e,s,"tooltip",l=>{const u=Qb(l,i,a);if(u)return u;if(l===null)return;let c=_t("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),de(c))return{value:c};if(me(c))return _e(c)?c:c.content==="encoding"?CN(n,o,i,t):{signal:a}})}}function eU(e,t,n,{reactiveGeom:r}={}){const i={},o=r?"datum.datum":"datum",s=[];function a(u,c){const f=Nc(c),d=Li(u)?u:Object.assign(Object.assign({},u),{type:e[f].type}),h=d.title||Ek(d,n),g=pe(h).join(", ");let p;if(Dn(c)){const m=c==="x"?"x2":"y2",y=us(e[m]);if(br(d.bin)&&y){const v=ue(d,{expr:o}),b=ue(y,{expr:o}),{format:x,formatType:w}=$v(d);p=im(v,b,x,w,n),i[m]=!0}}if((Dn(c)||c===Ui||c===To)&&t&&t.fieldChannel===c&&t.offset==="normalize"){const{format:m,formatType:y}=$v(d);p=vk({fieldOrDatumDef:d,format:m,formatType:y,expr:o,config:n,normalizeStack:!0}).signal}p!=null||(p=Qb(d,n,o).signal),s.push({channel:c,key:g,value:p})}_k(e,(u,c)=>{se(u)?a(u,c):Gb(u)&&a(u.condition,c)});const l={};for(const{channel:u,key:c,value:f}of s)!i[u]&&!l[c]&&(l[c]=f);return l}function CN(e,t,n,{reactiveGeom:r}={}){const i=eU(e,t,n,{reactiveGeom:r}),o=_l(i).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function Mbe(e){const{markDef:t,config:n}=e,r=_t("aria",t,n);return r===!1?{}:Object.assign(Object.assign(Object.assign({},r?{aria:r}:{}),$be(e)),Nbe(e))}function $be(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=_t("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in l0e?{}:{ariaRoleDescription:{value:t}}}function Nbe(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return zd(e,o,"description",l=>Qb(l,e.config));const s=_t("description",n,r);if(s!=null)return{description:Bt(s)};if(r.aria===!1)return{};const a=eU(t,i,r);if(!Tt(a))return{description:{signal:_l(a).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function On(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:l}=n;a===void 0&&(l!=null||(l=_t(e,r,o,{vgChannel:s,ignoreVgConfig:!0})),l!==void 0&&(a=Bt(l)));const u=i[e];return zd(t,u,s!=null?s:e,c=>yk({channel:e,channelDef:c,markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function tU(e,t={filled:void 0}){var n,r,i,o;const{markDef:s,encoding:a,config:l}=e,{type:u}=s,c=(n=t.filled)!==null&&n!==void 0?n:_t("filled",s,l),f=ct(["bar","point","circle","square","geoshape"],u)?"transparent":void 0,d=(i=(r=_t(c===!0?"color":void 0,s,l,{vgChannel:"fill"}))!==null&&r!==void 0?r:l.mark[c===!0&&"color"])!==null&&i!==void 0?i:f,h=(o=_t(c===!1?"color":void 0,s,l,{vgChannel:"stroke"}))!==null&&o!==void 0?o:l.mark[c===!1&&"color"],g=c?"fill":"stroke",p=Object.assign(Object.assign({},d?{fill:Bt(d)}:{}),h?{stroke:Bt(h)}:{});return s.color&&(c?s.fill:s.stroke)&&te(Sz("property",{fill:"fill"in s,stroke:"stroke"in s})),Object.assign(Object.assign(Object.assign(Object.assign({},p),On("color",e,{vgChannel:g,defaultValue:c?d:h})),On("fill",e,{defaultValue:a.fill?d:void 0})),On("stroke",e,{defaultValue:a.stroke?h:void 0}))}function Rbe(e){const{encoding:t,mark:n}=e,r=t.order;return!ql(n)&&So(r)?zd(e,r,"zindex",i=>Bt(i.value)):{}}function ap({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,s=t[o],a=n[o];if((o==="xOffset"||o==="yOffset")&&a){const u=yk({channel:o,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:Bt(s),bandPosition:i});return{offsetType:"encoding",offset:u}}const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function Qn(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:s,stack:a}=t,l=i[e],u=i[fa(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=ap({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),g=zk({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),p=!l&&Dn(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Pbe({channel:e,channelDef:l,channel2Def:u,markDef:o,config:s,scaleName:c,scale:f,stack:a,offset:d,defaultRef:g,bandPosition:h==="encoding"?0:void 0});return p?{[r||e]:p}:void 0}function Pbe(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:s}=e;if(Ve(n)&&i&&t===i.fieldChannel){if(se(n)){let a=n.bandPosition;if(a===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return Dv({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:o})}return Hu(n,r,{suffix:"end"},{offset:o})}return pk(e)}function zk({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:s}=e;return()=>{const a=Nc(n),l=Al(n),u=_t(n,o,s,{vgChannel:l});if(u!==void 0)return bg(n,u);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!ct([Br.LOG,Br.TIME,Br.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{const c=e[qr(n)];return Object.assign(Object.assign({},c),{mult:.5})}}}}const Ibe={left:"x",center:"xc",right:"x2"},jbe={top:"y",middle:"yc",bottom:"y2"};function nU(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Al(e);const i=e==="x"?"align":"baseline",o=_t(i,t,n);let s;return _e(o)?(te(B0e(i)),s=void 0):s=o,e==="x"?Ibe[s||(r==="top"?"left":"center")]:jbe[s||r]}function jv(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?rU(e,t,{defaultPos:n,defaultPos2:r}):Qn(e,t,{defaultPos:n})}function rU(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,s=fa(e),a=qr(e),l=Lbe(t,r,s),u=l[a]?nU(e,i,o):Al(e);return Object.assign(Object.assign({},Qn(e,t,{defaultPos:n,vgChannel:u})),l)}function Lbe(e,t,n){const{encoding:r,mark:i,markDef:o,stack:s,config:a}=e,l=Nc(n),u=qr(n),c=Al(n),f=r[l],d=e.scaleName(l),h=e.getScaleComponent(l),{offset:g}=n in r||n in o?ap({channel:n,markDef:o,encoding:r,model:e}):ap({channel:l,markDef:o,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const m=qr(n),y=e.markDef[m];return y!=null?{[m]:{value:y}}:{[c]:{field:e.getName(n)}}}const p=zbe({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:a,scaleName:d,scale:h,stack:s,offset:g,defaultRef:void 0});return p!==void 0?{[c]:p}:t0(n,o)||t0(n,{[n]:Tv(n,o,a.style),[u]:Tv(u,o,a.style)})||t0(n,a[i])||t0(n,a.mark)||{[c]:zk({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function zbe({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u}){return Ve(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Hu(t,o,{suffix:"start"},{offset:l}):pk({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:r,config:i,offset:l,defaultRef:u})}function t0(e,t){const n=qr(e),r=Al(e);if(t[r]!==void 0)return{[r]:bg(e,t[r])};if(t[e]!==void 0)return{[r]:bg(e,t[e])};if(t[n]){const i=t[n];if(gc(i))te(N0e(n));else return{[n]:bg(e,i)}}}function kl(e,t){var n,r;const{config:i,encoding:o,markDef:s}=e,a=s.type,l=fa(t),u=qr(t),c=o[t],f=o[l],d=e.getScaleComponent(t),h=d?d.get("type"):void 0,g=s.orient,p=(r=(n=o[u])!==null&&n!==void 0?n:o.size)!==null&&r!==void 0?r:_t("size",s,i,{vgChannel:u}),m=a==="bar"&&(t==="x"?g==="vertical":g==="horizontal");return se(c)&&(Lt(c.bin)||br(c.bin)||c.timeUnit&&!f)&&!(p&&!gc(p))&&!Mn(h)?Hbe({fieldDef:c,fieldDef2:f,channel:t,model:e}):(Ve(c)&&Mn(h)||m)&&!f?Ube(c,t,e):rU(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Bbe(e,t,n,r,i){if(gc(i))if(n){const s=n.get("type");if(s==="band"){let a=`bandwidth('${t}')`;return i.band!==1&&(a=`${i.band} * ${a}`),{signal:`max(0.25, ${a})`}}else i.band!==1&&(te(G0e(s)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(_e(i))return i;if(i)return{value:i}}if(n){const s=n.get("range");if(Xl(s)&&kt(s.step))return{value:s.step-2}}return{value:Pv(r.view,e)-2}}function Ube(e,t,n){const{markDef:r,encoding:i,config:o,stack:s}=n,a=r.orient,l=n.scaleName(t),u=n.getScaleComponent(t),c=qr(t),f=fa(t),d=Bme(t),h=n.scaleName(d),g=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let p;(i.size||r.size)&&(g?p=On("size",n,{vgChannel:c,defaultRef:Bt(r.size)}):te(q0e(r.type)));const m=!!p,y=nB({channel:t,fieldDef:e,markDef:r,config:o,scaleType:u==null?void 0:u.get("type"),useVlSizeChannel:g});p=p||{[c]:Bbe(c,h||l,u,o,y)};const v=(u==null?void 0:u.get("type"))==="band"&&gc(y)&&!m?"top":"middle",b=nU(t,r,o,v),x=b==="xc"||b==="yc",{offset:w,offsetType:S}=ap({channel:t,markDef:r,encoding:i,model:n,bandPosition:x?.5:0}),E=pk({channel:t,channelDef:e,markDef:r,config:o,scaleName:l,scale:u,stack:s,offset:w,defaultRef:zk({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:x?S==="encoding"?0:.5:_e(y)?{signal:`(1-${y})/2`}:gc(y)?(1-y.band)/2:0});if(c)return Object.assign({[b]:E},p);{const O=Al(f),A=p[c],C=w?Object.assign(Object.assign({},A),{offset:w}):A;return{[b]:E,[O]:X(E)?[E[0],Object.assign(Object.assign({},E[1]),{offset:C})]:Object.assign(Object.assign({},E),{offset:C})}}}function ph(e,t,n,r,i){if(tz(e))return 0;const o=e==="x"||e==="y2"?-t/2:t/2;if(_e(n)||_e(i)||_e(r)){const s=qs(n),a=qs(i),l=qs(r),u=l?`${l} + `:"",c=s?`(${s} ? -1 : 1) * `:"",f=a?`(${a} + ${o})`:o;return{signal:u+c+f}}else return i=i||0,r+(n?-i-o:+i+o)}function Hbe({fieldDef:e,fieldDef2:t,channel:n,model:r}){var i,o,s;const{config:a,markDef:l,encoding:u}=r,c=r.getScaleComponent(n),f=r.scaleName(n),d=c?c.get("type"):void 0,h=c.get("reverse"),g=nB({channel:n,fieldDef:e,markDef:l,config:a,scaleType:d}),p=(i=r.component.axes[n])===null||i===void 0?void 0:i[0],m=(o=p==null?void 0:p.get("translate"))!==null&&o!==void 0?o:.5,y=Dn(n)&&(s=_t("binSpacing",l,a))!==null&&s!==void 0?s:0,v=fa(n),b=Al(n),x=Al(v),{offset:w}=ap({channel:n,markDef:l,encoding:u,model:r,bandPosition:0}),S=_e(g)?{signal:`(1-${g.signal})/2`}:gc(g)?(1-g.band)/2:.5;if(Lt(e.bin)||e.timeUnit)return{[x]:TN({fieldDef:e,scaleName:f,bandPosition:S,offset:ph(v,y,h,m,w)}),[b]:TN({fieldDef:e,scaleName:f,bandPosition:_e(S)?{signal:`1-${S.signal}`}:1-S,offset:ph(n,y,h,m,w)})};if(br(e.bin)){const E=Hu(e,f,{},{offset:ph(v,y,h,m,w)});if(se(t))return{[x]:E,[b]:Hu(t,f,{},{offset:ph(n,y,h,m,w)})};if(Rc(e.bin)&&e.bin.step)return{[x]:E,[b]:{signal:`scale("${f}", ${ue(e,{expr:"datum"})} + ${e.bin.step})`,offset:ph(n,y,h,m,w)}}}te(Az(v))}function TN({fieldDef:e,scaleName:t,bandPosition:n,offset:r}){return Dv({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r})}const Wbe=new Set(["aria","width","height"]);function Hi(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?tU(e):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Gbe(e.markDef,t)),kN(e,"fill",n)),kN(e,"stroke",r)),On("opacity",e)),On("fillOpacity",e)),On("strokeOpacity",e)),On("strokeWidth",e)),On("strokeDash",e)),Rbe(e)),QB(e)),Lk(e,"href")),Mbe(e))}function kN(e,t,n){const{config:r,mark:i,markDef:o}=e;if(_t("invalid",o,r)==="hide"&&n&&!ql(i)){const a=Vbe(e,{invalid:!0,channels:Rb});if(a)return{[t]:[{test:a,value:null},...pe(n)]}}return n?{[t]:n}:{}}function Gbe(e,t){return a0e.reduce((n,r)=>(!Wbe.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=Bt(e[r])),n),{})}function Vbe(e,{invalid:t=!1,channels:n}){const r=n.reduce((o,s)=>{const a=e.getScaleComponent(s);if(a){const l=a.get("type"),u=e.vgField(s,{expr:"datum"});u&&bi(l)&&(o[u]=!0)}return o},{}),i=Z(r);if(i.length>0){const o=t?"||":"&&";return i.map(s=>mk(s,t)).join(` ${o} `)}}function Bk(e){const{config:t,markDef:n}=e;if(_t("invalid",n,t)){const i=Ybe(e,{channels:Os});if(i)return{defined:{signal:i}}}return{}}function Ybe(e,{invalid:t=!1,channels:n}){const r=n.reduce((o,s)=>{var a;const l=e.getScaleComponent(s);if(l){const u=l.get("type"),c=e.vgField(s,{expr:"datum",binSuffix:!((a=e.stack)===null||a===void 0)&&a.impute?"mid":void 0});c&&bi(u)&&(o[c]=!0)}return o},{}),i=Z(r);if(i.length>0){const o=t?"||":"&&";return i.map(s=>mk(s,t)).join(` ${o} `)}}function FN(e,t){if(t!==void 0)return{[e]:Bt(t)}}const P2="voronoi",iU={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(P2)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(ql(o))return te(h0e(o)),n;const s={name:e.getName(P2),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},QB(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,c)=>{var f;const d=(f=u.name)!==null&&f!==void 0?f:"";d===e.component.mark[0].name?a=c:d.indexOf(P2)>=0&&(l=!0)}),l||n.splice(a+1,0,s),n}},oU={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Dk(e.bind),parse:(e,t,n)=>hU(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,s=t.init&&t.init[0],a=iU.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,u)=>{var c,f;const d=Vt(`${r}_${l.field}`);n.filter(g=>g.name===d).length||n.unshift(Object.assign(Object.assign({name:d},s?{init:mc(s[u])}:{value:null}),{on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${ae(l.field)}] : null`}]:[],bind:(f=(c=o[l.field])!==null&&c!==void 0?c:o[l.channel])!==null&&f!==void 0?f:o}))}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.filter(u=>u.name===r+Fl)[0],s=r+um,a=i.items.map(u=>Vt(`${r}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(o.update=`${l} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},Lv="_toggle",sU={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Lv,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Fl,r=t.name+Lv;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${hd(e)}}, `)+`${r} ? ${n} : null`}},Xbe={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=de(t.clear)?zl(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(oU.defined(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===Vt(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(s=>s.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const s=n.findIndex(a=>a.name===i.signals.data);r(s,"null")}}else{let i=n.findIndex(o=>o.name===t.name+Fl);r(i,"null"),sU.defined(t)&&(i=n.findIndex(o=>o.name===t.name+Lv),r(i,"false"))}return n}},aU={defined:e=>{const t=e.resolve==="global"&&e.bind&&Dk(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==cs;return t&&!n&&te(m0e),t&&n},parse:(e,t,n)=>{var r;const i=Xe(n);if(i.select=de(i.select)?{type:i.select,toggle:t.toggle}:Object.assign(Object.assign({},i.select),{toggle:t.toggle}),hU(t,i),me(n.select)&&(n.select.on||n.select.clear)){const a='event.item && indexof(event.item.mark.role, "legend") < 0';for(const l of t.events)l.filter=pe((r=l.filter)!==null&&r!==void 0?r:[]),l.filter.includes(a)||l.filter.push(a)}const o=$2(t.bind)?t.bind.legend:"click",s=de(o)?zl(o,"view"):pe(o);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=$2(t.bind)&&t.bind.legend,o=s=>a=>{const l=Xe(a);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${Vt(s.field)}_legend`,l=`${r}_${a}`;if(n.filter(c=>c.name===l).length===0){const c=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift(Object.assign(Object.assign({name:l},t.init?{}:{value:null}),{on:[{events:c,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]}))}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(d=>d.name===r+Fl),s=r+um,a=i.items.filter(d=>d.hasLegend).map(d=>Vt(`${r}_${Vt(d.field)}_legend`)),u=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(d=>({signal:d})),update:u}):a.length>0&&(o.update=u,delete o.value,delete o.on);const c=n.find(d=>d.name===r+Lv),f=$2(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push(Object.assign(Object.assign({},c.on[0]),{events:f})):c.on[0].events=f),n}};function qbe(e,t,n){var r,i,o,s;const a=(r=e.fieldDef(t))===null||r===void 0?void 0:r.field;for(const l of sr((i=e.component.selection)!==null&&i!==void 0?i:{})){const u=(o=l.project.hasField[a])!==null&&o!==void 0?o:l.project.hasChannel[t];if(u&&aU.defined(l)){const c=(s=n.get("selections"))!==null&&s!==void 0?s:[];c.push(l.name),n.set("selections",c,!1),u.hasLegend=!0}}}const lU="_translate_anchor",uU="_translate_delta",Kbe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Tl.defined(t),o=r+lU,{x:s,y:a}=t.project.hasChannel;let l=zl(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+Ff,u))),n.push({name:o,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(s!==void 0?`, extent_x: ${i?FS(e,Jt):`slice(${s.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?FS(e,Fn):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+uU,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),s!==void 0&&DN(e,t,s,"width",n),a!==void 0&&DN(e,t,a,"height",n),n}};function DN(e,t,n,r,i){var o,s;const a=t.name,l=a+lU,u=a+uU,c=n.channel,f=Tl.defined(t),d=i.filter(E=>E.name===n.signals[f?"data":"visual"])[0],h=e.getSizeSignalRef(r).signal,g=e.getScaleComponent(c),p=g.get("type"),m=g.get("reverse"),y=f?c===Jt?m?"":"-":m?"-":"":"",v=`${l}.extent_${c}`,b=`${y}${u}.${c} / ${f?`${h}`:`span(${v})`}`,x=f?p==="log"?"panLog":p==="symlog"?"panSymlog":p==="pow"?"panPow":"panLinear":"panLinear",w=f?p==="pow"?`, ${(o=g.get("exponent"))!==null&&o!==void 0?o:1}`:p==="symlog"?`, ${(s=g.get("constant"))!==null&&s!==void 0?s:1}`:"":"",S=`${x}(${v}, ${b}${w})`;d.on.push({events:{signal:u},update:f?S:`clampRange(${S}, 0, ${h})`})}const cU="_zoom_anchor",fU="_zoom_delta",Jbe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Tl.defined(t),o=r+fU,{x:s,y:a}=t.project.hasChannel,l=ae(e.scaleName(Jt)),u=ae(e.scaleName(Fn));let c=zl(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+Ff,f))),n.push({name:r+cU,on:[{events:c,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(f=>!!f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&MN(e,t,s,"width",n),a!==void 0&&MN(e,t,a,"height",n),n}};function MN(e,t,n,r,i){var o,s;const a=t.name,l=n.channel,u=Tl.defined(t),c=i.filter(x=>x.name===n.signals[u?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(l),h=d.get("type"),g=u?FS(e,l):c.name,p=a+fU,m=`${a}${cU}.${l}`,y=u?h==="log"?"zoomLog":h==="symlog"?"zoomSymlog":h==="pow"?"zoomPow":"zoomLinear":"zoomLinear",v=u?h==="pow"?`, ${(o=d.get("exponent"))!==null&&o!==void 0?o:1}`:h==="symlog"?`, ${(s=d.get("constant"))!==null&&s!==void 0?s:1}`:"":"",b=`${y}(${g}, ${m}, ${p}${v})`;c.on.push({events:{signal:p},update:u?b:`clampRange(${b}, 0, ${f})`})}const yc="_store",Fl="_tuple",Zbe="_modify",dU="vlSelectionResolve",ex=[Dbe,kbe,Cbe,sU,oU,Tl,aU,Xbe,Kbe,Jbe,iU];function Qbe(e){let t=e.parent;for(;t&&!vo(t);)t=t.parent;return t}function hd(e,{escape:t}={escape:!0}){let n=t?ae(e.name):e.name;const r=Qbe(e);if(r){const{facet:i}=r;for(const o of Fi)i[o]&&(n+=` + '__facet_${o}_' + (facet[${ae(r.vgField(o))}])`)}return n}function Uk(e){var t;return sr((t=e.component.selection)!==null&&t!==void 0?t:{}).reduce((n,r)=>n||r.project.hasSelectionId,!1)}function hU(e,t){(de(t.select)||!t.select.on)&&delete e.events,(de(t.select)||!t.select.clear)&&delete e.clear,(de(t.select)||!t.select.toggle)&&delete e.toggle}function $S(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...$S(e.object)),t.push(...$S(e.property))),t)}function gU(e){return e.object.type==="MemberExpression"?gU(e.object):e.object.name==="datum"}function pU(e){const t=oT(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&gU(r)&&n.add($S(r).slice(1).join("."))}),n}class Bd extends Dt{constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=zv(this.model,this.filter,this),this._dependentFields=pU(this.expr)}clone(){return new Bd(null,this.model,Xe(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function exe(e,t){var n;const r={},i=e.config.selection;if(!t||!t.length)return r;for(const o of t){const s=Vt(o.name),a=o.select,l=de(a)?a:a.type,u=me(a)?Xe(a):{type:l},c=i[l];for(const d in c)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]=Object.assign(Object.assign({},c[d]),u[d])),(u[d]===void 0||u[d]===!0)&&(u[d]=(n=c[d])!==null&&n!==void 0?n:u[d]));const f=r[s]=Object.assign(Object.assign({},u),{name:s,type:l,init:o.value,bind:o.bind,events:de(u.on)?zl(u.on,"scope"):pe(Xe(u.on))});for(const d of ex)d.defined(f)&&d.parse&&d.parse(e,f,o)}return r}function mU(e,t,n,r="datum"){const i=de(t)?t:t.param,o=Vt(i),s=ae(o+yc);let a;try{a=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(a.project.timeUnit){const d=n!=null?n:e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${ae(a.resolve)})`,c=`${l}${s}, ${r}${u}`,f=`length(data(${s}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function yU(e,t,n){const r=Vt(t),i=n.encoding;let o=n.field,s;try{s=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=s.project.items[0].field,s.project.items.length>1&&te(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ae(o)}.`);else if(i&&!o){const a=s.project.items.filter(l=>l.channel===i);!a.length||a.length>1?(o=s.project.items[0].field,te((a.length?"Multiple ":"No ")+`matching ${ae(i)} encoding found for selection ${ae(n.param)}. Using "field": ${ae(o)}.`)):o=a[0].field}return`${s.name}[${ae(Ii(o))}]`}function txe(e,t){var n;for(const[r,i]of _l((n=e.component.selection)!==null&&n!==void 0?n:{})){const o=e.getName(`lookup_${r}`);e.component.data.outputNodes[o]=i.materialized=new Sr(new Bd(t,e,{param:r}),o,It.Lookup,e.component.data.outputNodeRefCounts)}}function zv(e,t,n){return vg(t,r=>de(r)?r:Dye(r)?mU(e,r,n):Nz(r))}var n0=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function nxe(e,t){if(!!e)return X(e)&&!Fa(e)?e.map(n=>Ek(n,t)).join(", "):e}function I2(e,t,n,r){var i,o,s,a,l;(i=e.encode)!==null&&i!==void 0||(e.encode={}),(o=(a=e.encode)[t])!==null&&o!==void 0||(a[t]={}),(s=(l=e.encode[t]).update)!==null&&s!==void 0||(l.update={}),e.encode[t].update[n]=r}function Vh(e,t,n,r={header:!1}){var i,o;const s=e.combine(),{disable:a,orient:l,scale:u,labelExpr:c,title:f,zindex:d}=s,h=n0(s,["disable","orient","scale","labelExpr","title","zindex"]);if(!a){for(const g in h){const p=Nve[g],m=h[g];if(p&&p!==t&&p!=="both")delete h[g];else if(lm(m)){const{condition:y}=m,v=n0(m,["condition"]),b=pe(y),x=uN[g];if(x){const{vgProp:w,part:S}=x,E=[...b.map(O=>{const{test:A}=O,C=n0(O,["test"]);return Object.assign({test:zv(null,A)},C)}),v];I2(h,S,w,E),delete h[g]}else if(x===null){const w={signal:b.map(S=>{const{test:E}=S,O=n0(S,["test"]);return`${zv(null,E)} ? ${X3(O)} : `}).join("")+X3(v)};h[g]=w}}else if(_e(m)){const y=uN[g];if(y){const{vgProp:v,part:b}=y;I2(h,b,v,m),delete h[g]}}ct(["labelAlign","labelBaseline"],g)&&h[g]===null&&delete h[g]}if(t==="grid"){if(!h.grid)return;if(h.encode){const{grid:g}=h.encode;h.encode=Object.assign({},g?{grid:g}:{}),Tt(h.encode)&&delete h.encode}return Object.assign(Object.assign({scale:u,orient:l},h),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:fn(d,0)})}else{if(!r.header&&e.mainExtracted)return;if(c!==void 0){let p=c;((o=(i=h.encode)===null||i===void 0?void 0:i.labels)===null||o===void 0?void 0:o.update)&&_e(h.encode.labels.update.text)&&(p=cc(c,"datum.label",h.encode.labels.update.text.signal)),I2(h,"labels","text",{signal:p})}if(h.labelAlign===null&&delete h.labelAlign,h.encode){for(const p of fB)e.hasAxisPart(p)||delete h.encode[p];Tt(h.encode)&&delete h.encode}const g=nxe(f,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:u,orient:l,grid:!1},g?{title:g}:{}),h),n.aria===!1?{aria:!1}:{}),{zindex:fn(d,0)})}}}function vU(e){const{axes:t}=e.component,n=[];for(const r of Os)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}}return n}function rxe(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>Vh(i,"grid",t)),...r.map(i=>Vh(i,"grid",t)),...n.map(i=>Vh(i,"main",t)),...r.map(i=>Vh(i,"main",t))].filter(i=>i)}function $N(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...Z(s),...Z(a)]),u={};for(const c of l.values())u[c]={signal:`${r.signal} === "${o}" ? ${qs(s[c])} : ${qs(a[c])}`};return u}return t[i]})])}function ixe(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:jz(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",s=_e(n)?"axisOrient":`axis${Jp(n)}`,a=[...i,...i.map(u=>o+u.substr(4))],l=["axis",s,o];return{vlOnlyAxisConfig:$N(a,r,e,n),vgAxisConfig:$N(l,r,e,n),axisConfigStyle:oxe([...l,...a],r)}}function oxe(e,t){var n;const r=[{}];for(const i of e){let o=(n=t[i])===null||n===void 0?void 0:n.style;if(o){o=pe(o);for(const s of o)r.push(t.style[s])}}return Object.assign.apply(null,r)}function NS(e,t,n,r={}){var i;const o=mz(e,n,t);if(o!==void 0)return{configFrom:"style",configValue:o};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((i=r[s])===null||i===void 0?void 0:i[e])!==void 0)return{configFrom:s,configValue:r[s][e]};return{}}const NN={scale:({model:e,channel:t})=>e.scaleName(t),format:({fieldOrDatumDef:e,config:t,axis:n})=>{const{format:r,formatType:i}=n;return Kz(e,e.type,r,i,t,!0)},formatType:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return Jz(r,t,n)},grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>{var r;return(r=t.grid)!==null&&r!==void 0?r:sxe(n,e)},gridScale:({model:e,channel:t})=>axe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||xU(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||bU(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>{var r;return(r=e.labelFlush)!==null&&r!==void 0?r:uxe(t.type,n)},labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{var r;return(r=e.labelOverlap)!==null&&r!==void 0?r:cxe(t.type,n,se(t)&&!!t.timeUnit,se(t)?t.sort:void 0)},orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{var o;const s=e==="x"?"width":e==="y"?"height":void 0,a=s?t.getSizeSignalRef(s):void 0;return(o=n.tickCount)!==null&&o!==void 0?o:dxe({fieldOrDatumDef:r,scaleType:i,size:a,values:n.values})},title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=wU(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",s=t.fieldDef(o);return vz(i?[lN(i)]:[],se(s)?[lN(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>hxe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>{var r;return(r=e.zindex)!==null&&r!==void 0?r:gxe(n,t)}};function sxe(e,t){return!Mn(e)&&se(t)&&!Lt(t==null?void 0:t.bin)&&!br(t==null?void 0:t.bin)}function axe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function lxe(e,t,n,r,i){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return _e(o)?o:ip(o);{const{configValue:s}=NS("labelAngle",r,t==null?void 0:t.style,i);return s!==void 0?ip(s):n===Jt&&ct([fk,ck],e.type)&&!(se(e)&&e.timeUnit)?270:void 0}}function RS(e){return`(((${e.signal} % 360) + 360) % 360)`}function bU(e,t,n,r){if(e!==void 0)if(n==="x"){if(_e(e)){const i=RS(e),o=_e(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(_e(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(_e(e)){const i=RS(e),o=_e(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(_e(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function xU(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(_e(e)){const s=RS(e),a=_e(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${s} + 90)`:s} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${s} && ${s} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(_e(t)){const s=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${s} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function uxe(e,t){if(t==="x"&&ct(["quantitative","temporal"],e))return!0}function cxe(e,t,n,r){if(n&&!me(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function fxe(e){return e==="x"?"bottom":"left"}function dxe({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Mn(t)&&t!=="log"){if(se(e)){if(Lt(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&ct(["month","hours","day","quarter"],(i=ur(e.timeUnit))===null||i===void 0?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function wU(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,s=i?i.title:void 0;if(o&&s)return bz(o,s);if(o)return o;if(s)return s;if(o!==void 0)return o;if(s!==void 0)return s}function hxe(e,t){const n=e.values;if(X(n))return cB(t,n);if(_e(n))return n}function gxe(e,t){return e==="rect"&&Mv(t)?1:0}class gd extends Dt{constructor(t,n){super(t),this.transform=n,this._dependentFields=pU(this.transform.calculate)}clone(){return new gd(null,Xe(this.transform))}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(!!Ic(r)&&eB(r.sort)){const{field:o,timeUnit:s}=r,a=r.sort,l=a.map((u,c)=>`${Nz({field:o,timeUnit:s,equal:u})} ? ${c} : `).join("")+a.length;t=new gd(t,{calculate:l,as:pd(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${ut(this.transform)}`}}function pd(e,t,n){return ue(e,Object.assign({prefix:t,suffix:"sort_index"},n!=null?n:{}))}function tx(e,t){return ct(["top","bottom"],t)?"column":ct(["left","right"],t)||e==="row"?"row":"column"}function md(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return fn((t||{})[e],i[e],n.header[e])}function nx(e,t,n,r){const i={};for(const o of e){const s=md(o,t||{},n,r);s!==void 0&&(i[o]=s)}return i}const Hk=["row","column"],Wk=["header","footer"];function pxe(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=nx(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=tx(t,a),u=ip(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},t==="row"?{orient:"left"}:{}),{style:"guide-title"}),SU(u,l)),EU(l,u,o)),OU(r,i,t,r1e,TB))}}function EU(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=xU(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function SU(e,t){const n=bU(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function mxe(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Wk)if(n[i])for(const o of n[i]){const s=vxe(e,t,i,n,o);s!=null&&r.push(s)}return r}function yxe(e,t){var n;const{sort:r}=e;return Qo(r)?{field:ue(r,{expr:"datum"}),order:(n=r.order)!==null&&n!==void 0?n:"ascending"}:X(r)?{field:pd(e,t,{expr:"datum"}),order:"ascending"}:{field:ue(e,{expr:"datum"}),order:r!=null?r:"ascending"}}function PS(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:l}=nx(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=vk({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=tx(t,a);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:l?cc(cc(l,"datum.label",u),"datum.value",ue(e,{expr:"parent"})):u}},t==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),SU(o,c)),EU(c,o,s)),OU(n,e,t,i1e,kB))}function vxe(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:s}=r,a=e.config?e.config:void 0;if(s&&i.labels){const{labelOrient:f}=nx(["labelOrient"],s.header,a,t);(t==="row"&&!ct(["top","bottom"],f)||t==="column"&&!ct(["left","right"],f))&&(o=PS(s,t,a))}const l=vo(e)&&!om(e.facet),u=i.axes,c=(u==null?void 0:u.length)>0;if(o||c){const f=t==="row"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`},r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:yxe(s,t)}:{}),c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{}),o?{title:o}:{}),i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{}),c?{axes:u}:{})}}return null}const bxe={column:{start:0,end:1},row:{start:1,end:0}};function xxe(e,t){return bxe[t][e]}function wxe(e,t){const n={};for(const r of Fi){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:o,titleOrient:s}=nx(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=tx(r,s),l=xxe(o,a);l!==void 0&&(n[a]=l)}}return Tt(n)?void 0:n}function OU(e,t,n,r,i){const o={};for(const s of r){if(!i[s])continue;const a=md(s,t==null?void 0:t.header,e,n);a!==void 0&&(o[i[s]]=a)}return o}function Gk(e){return[...r0(e,"width"),...r0(e,"height"),...r0(e,"childWidth"),...r0(e,"childHeight")]}function r0(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if(Mn(s)&&Xl(a)){const l=e.scaleName(n);return vo(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[RN(l,a)]:[RN(l,a),{name:i,update:_U(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",a=AS(e.config.view,o?"width":"height"),l=`isFinite(${s}) ? ${s} : ${a}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function RN(e,t){const n=`${e}_step`;return _e(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function _U(e,t,n){const r=t.get("type"),i=t.get("padding"),o=fn(t.get("paddingOuter"),i);let s=t.get("paddingInner");return s=r==="band"?s!==void 0?s:i:1,`bandspace(${n}, ${qs(s)}, ${qs(o)}) * ${e}_step`}function AU(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function CU(e,t){return Z(e).reduce((n,r)=>{const i=e[r];return Object.assign(Object.assign({},n),zd(t,i,r,o=>Bt(o.value)))},{})}function TU(e,t){if(vo(t))return e==="theta"?"independent":"shared";if(Wd(t))return"shared";if(Zk(t))return Dn(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Vk(e,t){const n=e.scale[t],r=Dn(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&te(eye(t)),"independent"):e[r][t]||"shared"}const Exe=Object.assign(Object.assign({},a1e),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),kU=Z(Exe);class Sxe extends ha{}const PN={symbols:Oxe,gradient:_xe,labels:Axe,entries:Cxe};function Oxe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){var s,a,l,u,c,f,d,h;if(o!=="symbol")return;const{markDef:g,encoding:p,config:m,mark:y}=n,v=g.filled&&y!=="trail";let b=Object.assign(Object.assign({},c0e({},n,rve)),tU(n,{filled:v}));const x=(s=i.get("symbolOpacity"))!==null&&s!==void 0?s:m.legend.symbolOpacity,w=(a=i.get("symbolFillColor"))!==null&&a!==void 0?a:m.legend.symbolFillColor,S=(l=i.get("symbolStrokeColor"))!==null&&l!==void 0?l:m.legend.symbolStrokeColor,E=x===void 0?(u=FU(p.opacity))!==null&&u!==void 0?u:g.opacity:void 0;if(b.fill){if(r==="fill"||v&&r===Yr)delete b.fill;else if(b.fill.field)w?delete b.fill:(b.fill=Bt((c=m.legend.symbolBaseFillColor)!==null&&c!==void 0?c:"black"),b.fillOpacity=Bt(E!=null?E:1));else if(X(b.fill)){const O=(h=(d=IS((f=p.fill)!==null&&f!==void 0?f:p.color))!==null&&d!==void 0?d:g.fill)!==null&&h!==void 0?h:v&&g.color;O&&(b.fill=Bt(O))}}if(b.stroke){if(r==="stroke"||!v&&r===Yr)delete b.stroke;else if(b.stroke.field||S)delete b.stroke;else if(X(b.stroke)){const O=fn(IS(p.stroke||p.color),g.stroke,v?g.color:void 0);O&&(b.stroke={value:O})}}if(r!==ca){const O=se(t)&&MU(n,i,t);O?b.opacity=[Object.assign({test:O},Bt(E!=null?E:1)),Bt(m.legend.unselectedOpacity)]:E&&(b.opacity=Bt(E))}return b=Object.assign(Object.assign({},b),e),Tt(b)?void 0:b}function _xe(e,{model:t,legendType:n,legendCmpt:r}){var i;if(n!=="gradient")return;const{config:o,markDef:s,encoding:a}=t;let l={};const c=((i=r.get("gradientOpacity"))!==null&&i!==void 0?i:o.legend.gradientOpacity)===void 0?FU(a.opacity)||s.opacity:void 0;return c&&(l.opacity=Bt(c)),l=Object.assign(Object.assign({},l),e),Tt(l)?void 0:l}function Axe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},s=n.config,a=se(t)?MU(n,i,t):void 0,l=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=o;let f;pc(c)?f=ho({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:s}):u===void 0&&c===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?f=ho({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&se(t)&&t.timeUnit===void 0&&(f=ho({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const d=Object.assign(Object.assign(Object.assign({},l?{opacity:l}:{}),f?{text:f}:{}),e);return Tt(d)?void 0:d}function Cxe(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?Object.assign(Object.assign({},e),{fill:{value:"transparent"}}):e}function FU(e){return DU(e,(t,n)=>Math.max(t,n.value))}function IS(e){return DU(e,(t,n)=>fn(t,n.value))}function DU(e,t){if(Eve(e))return pe(e.condition).reduce(t,e.value);if(So(e))return e.value}function MU(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=ae(n.field);return r.map(o=>`(!length(data(${ae(Vt(o)+yc)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const IN={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return Kz(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return Jz(r,t,n)},gradientLength:e=>{var t,n;const{legend:r,legendConfig:i}=e;return(n=(t=r.gradientLength)!==null&&t!==void 0?t:i.gradientLength)!==null&&n!==void 0?n:Nxe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>{var r,i;return(i=(r=e.labelOverlap)!==null&&r!==void 0?r:t.labelOverlap)!==null&&i!==void 0?i:Rxe(n)},symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>{var i;return(i=e.symbolType)!==null&&i!==void 0?i:kxe(t.type,n,r.shape,t.shape)},title:({fieldOrDatumDef:e,config:t})=>kf(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Tf(n)&&fo(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Txe(t,e)};function Txe(e,t){const n=e.values;if(X(n))return cB(t,n);if(_e(n))return n}function kxe(e,t,n,r){var i;if(t!=="shape"){const o=(i=IS(n))!==null&&i!==void 0?i:r;if(o)return o}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Fxe(e){const{legend:t}=e;return fn(t.type,Dxe(e))}function Dxe({channel:e,timeUnit:t,scaleType:n}){if(Tf(e)){if(ct(["quarter","month","day"],t))return"symbol";if(fo(n))return"gradient"}return"symbol"}function Mxe({legendConfig:e,legendType:t,orient:n,legend:r}){var i,o;return(o=(i=r.direction)!==null&&i!==void 0?i:e[t?"gradientDirection":"symbolDirection"])!==null&&o!==void 0?o:$xe(n,t)}function $xe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Nxe({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(fo(i))return n==="horizontal"?r==="top"||r==="bottom"?jN(t,"width",s,o):s:jN(t,"height",l,a)}function jN(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Rxe(e){if(ct(["quantile","threshold","log","symlog"],e))return"greedy"}function $U(e){const t=un(e)?Pxe(e):zxe(e);return e.component.legends=t,t}function Pxe(e){const{encoding:t}=e,n={};for(const r of[Yr,...DB]){const i=vn(t[r]);!i||!e.getScaleComponent(r)||r===Xr&&se(i)&&i.type===Ld||(n[r]=Lxe(e,r))}return n}function Ixe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function jxe(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function Lxe(e,t){var n,r,i;let o=e.legend(t);const{markDef:s,encoding:a,config:l}=e,u=l.legend,c=new Sxe({},Ixe(e,t));qbe(e,t,c);const f=o!==void 0?!o:u.disable;if(c.set("disable",f,o!==void 0),f)return c;o=o||{};const d=e.getScaleComponent(t).get("type"),h=vn(a[t]),g=se(h)?(n=ur(h.timeUnit))===null||n===void 0?void 0:n.unit:void 0,p=o.orient||l.legend.orient||"right",m=Fxe({legend:o,channel:t,timeUnit:g,scaleType:d}),y=Mxe({legend:o,legendType:m,orient:p,legendConfig:u}),v={legend:o,channel:t,model:e,markDef:s,encoding:a,fieldOrDatumDef:h,legendConfig:u,config:l,scaleType:d,orient:p,legendType:m,direction:y};for(const E of kU){if(m==="gradient"&&E.startsWith("symbol")||m==="symbol"&&E.startsWith("gradient"))continue;const O=E in IN?IN[E](v):o[E];if(O!==void 0){const A=jxe(O,E,o,e.fieldDef(t));(A||l.legend[E]===void 0)&&c.set(E,O,A)}}const b=(r=o==null?void 0:o.encoding)!==null&&r!==void 0?r:{},x=c.get("selections"),w={},S={fieldOrDatumDef:h,model:e,channel:t,legendCmpt:c,legendType:m};for(const E of["labels","legend","title","symbols","gradient","entries"]){const O=CU((i=b[E])!==null&&i!==void 0?i:{},e),A=E in PN?PN[E](O,S):O;A!==void 0&&!Tt(A)&&(w[E]=Object.assign(Object.assign(Object.assign({},(x==null?void 0:x.length)&&se(h)?{name:`${Vt(h.field)}_legend_${E}`}:{}),x!=null&&x.length?{interactive:!!x}:{}),{update:A}))}return Tt(w)||c.set("encode",w,!!(o!=null&&o.encoding)),c}function zxe(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){$U(r);for(const i of Z(r.component.legends))n.legend[i]=Vk(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=NU(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Z(t))for(const i of e.children)!i.component.legends[r]||n.legend[r]==="shared"&&delete i.component.legends[r];return t}function NU(e,t){var n,r,i,o;if(!e)return t.clone();const s=e.getWithExplicit("orient"),a=t.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;let l=!1;for(const u of kU){const c=Cl(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(f,d)=>{switch(u){case"symbolType":return Bxe(f,d);case"title":return xz(f,d);case"type":return l=!0,Qr("symbol")}return Zb(f,d,u,"legend")});e.setWithExplicit(u,c)}return l&&(!((r=(n=e.implicit)===null||n===void 0?void 0:n.encode)===null||r===void 0)&&r.gradient&&Cv(e.implicit,["encode","gradient"]),!((o=(i=e.explicit)===null||i===void 0?void 0:i.encode)===null||o===void 0)&&o.gradient&&Cv(e.explicit,["encode","gradient"])),e}function Bxe(e,t){return t.value==="circle"?t:e}var Uxe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Hxe(e,t,n,r){var i,o,s,a,l;(i=e.encode)!==null&&i!==void 0||(e.encode={}),(o=(a=e.encode)[t])!==null&&o!==void 0||(a[t]={}),(s=(l=e.encode[t]).update)!==null&&s!==void 0||(l.update={}),e.encode[t].update[n]=r}function RU(e){const t=e.component.legends,n={};for(const i of Z(t)){const o=e.getScaleComponent(i),s=jt(o.get("domains"));if(n[s])for(const a of n[s])NU(a,t[i])||n[s].push(t[i]);else n[s]=[t[i].clone()]}return sr(n).flat().map(i=>Wxe(i,e.config)).filter(i=>i!==void 0)}function Wxe(e,t){var n,r,i;const o=e.combine(),{disable:s,labelExpr:a,selections:l}=o,u=Uxe(o,["disable","labelExpr","selections"]);if(!s){if(t.aria===!1&&u.aria==null&&(u.aria=!1),!((n=u.encode)===null||n===void 0)&&n.symbols){const c=u.encode.symbols.update;c.fill&&c.fill.value!=="transparent"&&!c.stroke&&!u.stroke&&(c.stroke={value:"transparent"});for(const f of DB)u[f]&&delete c[f]}if(u.title||delete u.title,a!==void 0){let c=a;((i=(r=u.encode)===null||r===void 0?void 0:r.labels)===null||i===void 0?void 0:i.update)&&_e(u.encode.labels.update.text)&&(c=cc(a,"datum.label",u.encode.labels.update.text.signal)),Hxe(u,"labels","text",{signal:c})}return u}}function Gxe(e){return Wd(e)||Zk(e)?Vxe(e):PU(e)}function Vxe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),PU(e))}function PU(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const l=_e(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return ct(s,l)||s.push(l),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]}},n)]}else return[Object.assign(Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}}),n)]}const Yxe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class IU extends ha{constructor(t,n,r,i){super(Object.assign({},n),{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function jU(e){e.component.projection=un(e)?Xxe(e):Jxe(e)}function Xxe(e){var t;if(e.hasProjection){const n=Rr(e.specifiedProjection),r=!(n&&(n.scale!=null||n.translate!=null)),i=r?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,o=r?qxe(e):void 0,s=new IU(e.projectionName(!0),Object.assign(Object.assign({},(t=Rr(e.config.projection))!==null&&t!==void 0?t:{}),n!=null?n:{}),i,o);return s.get("type")||s.set("type","equalEarth",!1),s}}function qxe(e){const t=[],{encoding:n}=e;for(const r of[[ws,xs],[ji,ko]])(vn(n[r[0]])||vn(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Xr)&&e.typedFieldDef(Xr).type===Ld&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(It.Main)),t}function Kxe(e,t){const n=IT(Yxe,i=>!!(!Ae(e.explicit,i)&&!Ae(t.explicit,i)||Ae(e.explicit,i)&&Ae(t.explicit,i)&&Wo(e.get(i),t.get(i))));if(Wo(e.size,t.size)){if(n)return e;if(Wo(e.explicit,{}))return t;if(Wo(t.explicit,{}))return e}return null}function Jxe(e){if(e.children.length===0)return;let t;for(const r of e.children)jU(r);const n=IT(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=Kxe(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new IU(r,t.specifiedProjection,t.size,Xe(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),r),s.merged=!0)}return i}}var Zxe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Qxe(e,t,n,r){var i,o;if(am(t,n)){const s=un(e)?(o=(i=e.axis(n))!==null&&i!==void 0?i:e.legend(n))!==null&&o!==void 0?o:{}:{},a=ue(t,{expr:"datum"}),l=ue(t,{expr:"datum",binSuffix:"end"});return{formulaAs:ue(t,{binSuffix:"range",forAs:!0}),formula:im(a,l,s.format,s.formatType,r)}}return{}}function LU(e,t){return`${dz(e)}_${t}`}function e2e(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Yk(e,t,n){var r;const i=(r=Vb(n,void 0))!==null&&r!==void 0?r:{},o=LU(i,t);return e.getName(`${o}_bins`)}function t2e(e){return"as"in e}function LN(e,t,n){let r,i;t2e(e)?r=de(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[ue(e,{forAs:!0}),ue(e,{binSuffix:"end",forAs:!0})];const o=Object.assign({},Vb(t,void 0)),s=LU(o,e.field),{signal:a,extentSignal:l}=e2e(n,s);if(Pb(o.extent)){const c=o.extent;i=yU(n,c.param,c),delete o.extent}const u=Object.assign(Object.assign(Object.assign({bin:o,field:e.field,as:[r]},a?{signal:a}:{}),l?{extentSignal:l}:{}),i?{span:i}:{});return{key:s,binComponent:u}}class ts extends Dt{constructor(t,n){super(t),this.bins=n}clone(){return new ts(null,Xe(this.bins))}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{if(Li(o)&&Lt(o.bin)){const{key:a,binComponent:l}=LN(o,o.bin,n);i[a]=Object.assign(Object.assign(Object.assign({},l),i[a]),Qxe(n,o,s,n.config))}return i},{});return Tt(r)?null:new ts(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:o}=LN(n,n.bin,r);return new ts(t,{[i]:o})}merge(t,n){for(const r of Z(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Go([...this.bins[r].as,...t.bins[r].as],ut)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(sr(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(sr(this.bins).map(t=>t.field))}hash(){return`Bin ${ut(this.bins)}`}assemble(){return sr(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,o=t.bin,{extent:s}=o,a=Zxe(o,["extent"]),l=Object.assign(Object.assign(Object.assign({type:"bin",field:Ii(t.field),as:r,signal:t.signal},Pb(s)?{extent:null}:{extent:s}),t.span?{span:{signal:`span(${t.span})`}}:{}),a);!s&&t.extentSignal&&(n.push({type:"extent",field:Ii(t.field),signal:t.extentSignal}),l.extent={signal:t.extentSignal}),n.push(l);for(const u of i)for(let c=0;c<2;c++)n.push({type:"formula",expr:ue({field:r[c]},{expr:"datum"}),as:u[c]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function n2e(e,t,n,r){var i;const o=un(r)?r.encoding[fa(t)]:void 0;if(Li(n)&&un(r)&&rB(n,o,r.markDef,r.config))e.add(ue(n,{})),e.add(ue(n,{suffix:"end"})),n.bin&&am(n,t)&&e.add(ue(n,{binSuffix:"range"}));else if(Nme(t)){const s=$me(t);e.add(r.getName(s))}else e.add(ue(n));return Ic(n)&&Gye((i=n.scale)===null||i===void 0?void 0:i.range)&&e.add(n.scale.range.field),e}function r2e(e,t){var n;for(const r of Z(t)){const i=t[r];for(const o of Z(i))r in e?e[r][o]=new Set([...(n=e[r][o])!==null&&n!==void 0?n:[],...i[o]]):e[r]={[o]:i[o]}}}class yo extends Dt{constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}clone(){return new yo(null,new Set(this.dimensions),Xe(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(s=>{s.aggregate&&(r=!0)});const i={},o=new Set;return!r||(n.forEachFieldDef((s,a)=>{var l,u,c,f;const{aggregate:d,field:h}=s;if(d)if(d==="count")(l=i["*"])!==null&&l!==void 0||(i["*"]={}),i["*"].count=new Set([ue(s,{forAs:!0})]);else{if(ta(d)||Yl(d)){const g=ta(d)?"argmin":"argmax",p=d[g];(u=i[p])!==null&&u!==void 0||(i[p]={}),i[p][g]=new Set([ue({op:g,field:p},{forAs:!0})])}else(c=i[h])!==null&&c!==void 0||(i[h]={}),i[h][d]=new Set([ue(s,{forAs:!0})]);Vl(a)&&n.scaleDomain(a)==="unaggregated"&&((f=i[h])!==null&&f!==void 0||(i[h]={}),i[h].min=new Set([ue({field:h,aggregate:"min"},{forAs:!0})]),i[h].max=new Set([ue({field:h,aggregate:"max"},{forAs:!0})]))}else n2e(o,a,s,n)}),o.size+Z(i).length===0)?null:new yo(t,o,i)}static makeFromTransform(t,n){var r,i,o;const s=new Set,a={};for(const l of n.aggregate){const{op:u,field:c,as:f}=l;u&&(u==="count"?((r=a["*"])!==null&&r!==void 0||(a["*"]={}),a["*"].count=new Set([f||ue(l,{forAs:!0})])):((i=a[c])!==null&&i!==void 0||(a[c]={}),a[c][u]=new Set([f||ue(l,{forAs:!0})])))}for(const l of(o=n.groupby)!==null&&o!==void 0?o:[])s.add(l);return s.size+Z(a).length===0?null:new yo(t,s,a)}merge(t){return X9(this.dimensions,t.dimensions)?(r2e(this.measures,t.measures),!0):(mye("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Z(this.measures)])}producedFields(){const t=new Set;for(const n of Z(this.measures))for(const r of Z(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${ut({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const o of Z(this.measures))for(const s of Z(this.measures[o]))for(const a of this.measures[o][s])r.push(a),t.push(s),n.push(o==="*"?null:Ii(o));return{type:"aggregate",groupby:[...this.dimensions].map(Ii),ops:t,fields:n,as:r}}}class Ud extends Dt{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const o of Fi){const s=n.facet[o];if(s){const{bin:a,sort:l}=s;this[o]=Object.assign({name:n.getName(`${o}_domain`),fields:[ue(s),...Lt(a)?[ue(s,{binSuffix:"end"})]:[]]},Qo(l)?{sortField:l}:X(l)?{sortIndexField:pd(s,o)}:{})}}this.childModel=n.child}hash(){let t="Facet";for(const n of Fi)this[n]&&(t+=` ${n.charAt(0)}:${ut(this[n])}`);return t}get fields(){var t;const n=[];for(const r of Fi)!((t=this[r])===null||t===void 0)&&t.fields&&n.push(...this[r].fields);return n}dependentFields(){const t=new Set(this.fields);for(const n of Fi)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Os){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),o=r.get("range");if(Mn(i)&&Xl(o)){const s=rx(this.childModel,n),a=Jk(s);a?t[n]=a:te(JT(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],o=[],s=[],a=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),s.push("max")):(o.push(r[i]),s.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:c=Ub,field:f}=l;o.push(f),s.push(c),a.push(ue(l,{forAs:!0}))}else u&&(o.push(u),s.push("max"),a.push(u));return{name:this[t].name,source:n!=null?n:this.data,transform:[Object.assign({type:"aggregate",groupby:this[t].fields},o.length?{fields:o,ops:s,as:a}:{})]}}assembleFacetHeaderData(t){var n,r;const{columns:i}=this.model.layout,{layoutHeaders:o}=this.model.component,s=[],a={};for(const c of Hk){for(const f of Wk){const d=(n=o[c]&&o[c][f])!==null&&n!==void 0?n:[];for(const h of d)if(((r=h.axes)===null||r===void 0?void 0:r.length)>0){a[c]=!0;break}}if(a[c]){const f=`length(data("${this.facet.name}"))`,d=c==="row"?i?{signal:`ceil(${f} / ${i})`}:1:i?{signal:`min(${f}, ${i})`}:{signal:f};s.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:l,column:u}=a;return(l||u)&&s.unshift(this.assembleRowColumnHeaderData("facet",null,t)),s}assemble(){var t,n;const r=[];let i=null;const o=this.getChildIndependentFieldsWithStep(),{column:s,row:a,facet:l}=this;if(s&&a&&(o.x||o.y)){i=`cross_${this.column.name}_${this.row.name}`;const u=[].concat((t=o.x)!==null&&t!==void 0?t:[],(n=o.y)!==null&&n!==void 0?n:[]),c=u.map(()=>"distinct");r.push({name:i,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:u,ops:c}]})}for(const u of[Xs,Ys])this[u]&&r.push(this.assembleRowColumnHeaderData(u,i,o));if(l){const u=this.assembleFacetHeaderData(o);u&&r.push(...u)}return r}}function zN(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function i2e(e,t){const n=zT(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=zN(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=zN(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return te(S0e(t)),null}function o2e(e){const t={};return Y0(e.filter,n=>{var r;if($z(n)){let i=null;nk(n)?i=ai(n.equal):ik(n)?i=ai(n.lte):rk(n)?i=ai(n.lt):ok(n)?i=ai(n.gt):sk(n)?i=ai(n.gte):ak(n)?i=n.range[0]:lk(n)&&(i=((r=n.oneOf)!==null&&r!==void 0?r:n.in)[0]),i&&(Pc(i)?t[n.field]="date":kt(i)?t[n.field]="number":de(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function s2e(e){const t={};function n(r){fd(r)?t[r.field]="date":r.type==="quantitative"&&e0e(r.aggregate)?t[r.field]="number":od(r.field)>1?r.field in t||(t[r.field]="flatten"):Ic(r)&&Qo(r.sort)&&od(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((un(e)||vo(e))&&e.forEachFieldDef((r,i)=>{if(Li(r))n(r);else{const o=Nc(i),s=e.fieldDef(o);n(Object.assign(Object.assign({},r),{type:s.type}))}}),un(e)){const{mark:r,markDef:i,encoding:o}=e;if(ql(r)&&!e.encoding.order){const s=i.orient==="horizontal"?"y":"x",a=o[s];se(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function a2e(e){const t={};if(un(e)&&e.component.selection)for(const n of Z(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&od(i.field)>1&&(t[i.field]="flatten")}return t}class er extends Dt{constructor(t,n){super(t),this._parse=n}clone(){return new er(null,Xe(this._parse))}hash(){return`Parse ${ut(this._parse)}`}static makeExplicit(t,n,r){var i;let o={};const s=n.data;return!rl(s)&&((i=s==null?void 0:s.format)===null||i===void 0?void 0:i.parse)&&(o=s.format.parse),this.makeWithAncestors(t,o,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Z(r)){const l=i.getWithExplicit(a);l.value!==void 0&&(l.explicit||l.value===r[a]||l.value==="derived"||r[a]==="flatten"?delete r[a]:te(eN(a,r[a],l.value)))}for(const a of Z(n)){const l=i.get(a);l!==void 0&&(l===n[a]?delete n[a]:te(eN(a,n[a],l)))}const o=new ha(n,r);i.copyAll(o);const s={};for(const a of Z(o.combine())){const l=o.get(a);l!==null&&(s[a]=l)}return Z(s).length===0||i.parseNothing?null:new er(t,s)}get parse(){return this._parse}merge(t){this._parse=Object.assign(Object.assign({},this._parse),t.parse),t.remove()}assembleFormatParse(){const t={};for(const n of Z(this._parse)){const r=this._parse[n];od(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Z(this._parse))}dependentFields(){return new Set(Z(this._parse))}assembleTransforms(t=!1){return Z(this._parse).filter(n=>t?od(n)>1:!0).map(n=>{const r=i2e(n,this._parse[n]);return r?{type:"formula",expr:r,as:BT(n)}:null}).filter(n=>n!==null)}}class Dl extends Dt{clone(){return new Dl(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([cs])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:cs}}}class cm extends Dt{constructor(t,n){super(t),this.params=n}clone(){return new cm(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${ut(this.params)}`}assemble(){return Object.assign({type:"graticule"},this.params===!0?{}:this.params)}}class fm extends Dt{constructor(t,n){super(t),this.params=n}clone(){return new fm(null,this.params)}dependentFields(){return new Set}producedFields(){var t;return new Set([(t=this.params.as)!==null&&t!==void 0?t:"data"])}hash(){return`Hash ${ut(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}}class vc extends Dt{constructor(t){super(null),t!=null||(t={name:"source"});let n;if(rl(t)||(n=t.format?Object.assign({},di(t.format,["parse"])):{}),sp(t))this._data={values:t.values};else if(dd(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];ct(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else KB(t)?this._data={values:[{type:"Sphere"}]}:(XB(t)||rl(t))&&(this._data={});this._generator=rl(t),t.name&&(this._name=t.name),n&&!Tt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}var BN=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},l2e=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Yh;function Xk(e){return e instanceof vc||e instanceof cm||e instanceof fm}class qk{constructor(){Yh.set(this,void 0),BN(this,Yh,!1,"f")}setModified(){BN(this,Yh,!0,"f")}get modifiedFlag(){return l2e(this,Yh,"f")}}Yh=new WeakMap;class jc extends qk{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Kk extends qk{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class u2e extends Kk{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Z(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class c2e extends Kk{constructor(t){super(),this.requiresSelectionId=t&&Uk(t)}run(t){t instanceof Dl&&(this.requiresSelectionId&&(Xk(t.parent)||t.parent instanceof yo||t.parent instanceof er)||(this.setModified(),t.remove()))}}class f2e extends qk{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof es&&(r=t.producedFields(),jT(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class d2e extends Kk{constructor(){super()}run(t){t instanceof Sr&&!t.isRequired()&&(this.setModified(),t.remove())}}class h2e extends jc{run(t){if(!Xk(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof er)if(t instanceof er)this.setModified(),t.merge(n);else{if(LT(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class g2e extends jc{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof er);if(t.numChildren()>1&&r.length>=1){const i={},o=new Set;for(const s of r){const a=s.parse;for(const l of Z(a))l in i?i[l]!==a[l]&&o.add(l):i[l]=a[l]}for(const s of o)delete i[s];if(!Tt(i)){this.setModified();const s=new er(t,i);for(const a of n){if(a instanceof er)for(const l of Z(i))delete a.parse[l];t.removeChild(a),a.parent=s,a instanceof er&&Z(a.parse).length===0&&a.remove()}}}}}class p2e extends jc{run(t){t instanceof Sr||t.numChildren()>0||t instanceof Ud||t instanceof vc||(this.setModified(),t.remove())}}class m2e extends jc{run(t){const n=t.children.filter(i=>i instanceof es),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class y2e extends jc{run(t){const n=t.children.filter(i=>i instanceof yo),r={};for(const i of n){const o=ut(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(const i of Z(r)){const o=r[i];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class v2e extends jc{constructor(t){super(),this.model=t}run(t){const n=!(Xk(t)||t instanceof Bd||t instanceof er||t instanceof Dl),r=[],i=[];for(const o of t.children)o instanceof ts&&(n&&!LT(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){const o=r.pop();for(const s of r)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof ts?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){const o=i.pop();for(const s of i)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class b2e extends jc{run(t){const n=[...t.children];if(!uc(n,s=>s instanceof Sr)||t.numChildren()<=1)return;const i=[];let o;for(const s of n)if(s instanceof Sr){let a=s;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof Sr)a=l;else break}i.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else i.push(s);if(i.length){this.setModified();for(const s of i)s.parent.removeChild(s),s.parent=o}}}class Lc extends Dt{constructor(t,n){super(t),this.transform=n}clone(){return new Lc(null,Xe(this.transform))}addDimensions(t){this.transform.groupby=Go(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){var n;return(n=t.as)!==null&&n!==void 0?n:ue(t)}hash(){return`JoinAggregateTransform ${ut(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);const i=this.transform.groupby;return Object.assign({type:"joinaggregate",as:r,ops:n,fields:t},i!==void 0?{groupby:i}:{})}}function x2e(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=ue(r);return i&&t.push(i),t},[])}function w2e(e){return X(e)&&e.every(t=>de(t))&&e.length>1}class Ks extends Dt{constructor(t,n){super(t),this._stack=n}clone(){return new Ks(null,Xe(this._stack))}static makeFromTransform(t,n){const{stack:r,groupby:i,as:o,offset:s="zero"}=n,a=[],l=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),l.push(fn(f.order,"ascending"));const u={field:a,order:l};let c;return w2e(o)?c=o:de(o)?c=[o,`${o}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Ks(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:s,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:o,fieldChannel:s,offset:a,impute:l}=r,u=o.map(h=>{const g=i[h];return us(g)}).filter(h=>!!h),c=x2e(n),f=n.encoding.order;let d;return X(f)||se(f)?d=yz(f):d=c.reduce((h,g)=>(h.field.push(g),h.order.push(s==="y"?"descending":"ascending"),h),{field:[],order:[]}),new Ks(t,{dimensionFieldDefs:u,stackField:n.vgField(s),facetby:[],stackby:c,sort:d,offset:a,impute:l,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${ut(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[ue(i,{binSuffix:"mid"})]:[ue(i,{}),ue(i,{binSuffix:"end"})]:[ue(i)]).flat():r!=null?r:[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:s,offset:a,impute:l,as:u}=this._stack;if(l)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=ue(c,{expr:"datum"}),g=ue(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${g}`,as:ue(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:ue(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:s,as:u,offset:a}),t}}class Hd extends Dt{constructor(t,n){super(t),this.transform=n}clone(){return new Hd(null,Xe(this.transform))}addDimensions(t){this.transform.groupby=Go(this.transform.groupby.concat(t),n=>n)}dependentFields(){var t,n;const r=new Set;return((t=this.transform.groupby)!==null&&t!==void 0?t:[]).forEach(r.add,r),((n=this.transform.sort)!==null&&n!==void 0?n:[]).forEach(i=>r.add(i.field)),this.transform.window.map(i=>i.field).filter(i=>i!==void 0).forEach(r.add,r),r}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){var n;return(n=t.as)!==null&&n!==void 0?n:ue(t)}hash(){return`WindowTransform ${ut(this.transform)}`}assemble(){var t;const n=[],r=[],i=[],o=[];for(const d of this.transform.window)r.push(d.op),i.push(this.getDefaultName(d)),o.push(d.param===void 0?null:d.param),n.push(d.field===void 0?null:d.field);const s=this.transform.frame,a=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&r.every(d=>XT(d)))return Object.assign({type:"joinaggregate",as:i,ops:r,fields:n},a!==void 0?{groupby:a}:{});const l=[],u=[];if(this.transform.sort!==void 0)for(const d of this.transform.sort)l.push(d.field),u.push((t=d.order)!==null&&t!==void 0?t:"ascending");const c={field:l,order:u},f=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:o,as:i,ops:r,fields:n,sort:c},f!==void 0?{ignorePeers:f}:{}),a!==void 0?{groupby:a}:{}),s!==void 0?{frame:s}:{})}}function E2e(e){function t(n){if(!(n instanceof Ud)){const r=n.clone();if(r instanceof Sr){const i=LS+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof yo||r instanceof Ks||r instanceof Hd||r instanceof Lc)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function jS(e){if(e instanceof Ud)if(e.numChildren()===1&&!(e.children[0]instanceof Sr)){const t=e.children[0];(t instanceof yo||t instanceof Ks||t instanceof Hd||t instanceof Lc)&&t.addDimensions(e.fields),t.swapWithParent(),jS(e)}else{const t=e.model.component.data.main;zU(t);const n=E2e(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(jS)}function zU(e){if(e instanceof Sr&&e.type===It.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Ud||(t.swapWithParent(),zU(e))}}const LS="scale_",i0=5;function zS(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!zS(t.children))return!1}return!0}function Wi(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function UN(e,t,n){let r=e.sources,i=!1;return i=Wi(new d2e,r)||i,i=Wi(new c2e(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=Wi(new p2e,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=Wi(new h2e,r)||i,i=Wi(new v2e(t),r)||i,i=Wi(new f2e,r)||i,i=Wi(new g2e,r)||i,i=Wi(new y2e,r)||i,i=Wi(new m2e,r)||i,i=Wi(new u2e,r)||i,i=Wi(new b2e,r)||i),e.sources=r,i}function S2e(e,t){zS(e.sources);let n=0,r=0;for(let i=0;i<i0&&UN(e,t,!0);i++)n++;e.sources.map(jS);for(let i=0;i<i0&&UN(e,t,!1);i++)r++;zS(e.sources),Math.max(n,r)===i0&&te(`Maximum optimization runs(${i0}) reached.`)}class Ur{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Ur(()=>t(n))}}var O2e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function BU(e){un(e)?_2e(e):A2e(e)}function _2e(e){const t=e.component.scales;for(const n of Z(t)){const r=T2e(e,n);if(t[n].setWithExplicit("domains",r),F2e(e,n),e.component.data.isFaceted){let o=e;for(;!vo(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const a of r.value)Ws(a)&&(a.data=LS+a.data.replace(LS,""))}}}function A2e(e){for(const n of e.children)BU(n);const t=e.component.scales;for(const n of Z(t)){let r,i=null;for(const o of e.children){const s=o.component.scales[n];if(s){r===void 0?r=s.getWithExplicit("domains"):r=Cl(r,s.getWithExplicit("domains"),"domains","scale",BS);const a=s.get("selectionExtent");i&&a&&i.param!==a.param&&te(b0e),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function C2e(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=HN(t,n);if(!i){te(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=HN(t,n);if(i)return"unaggregated"}return e}function T2e(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=C2e(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]=Object.assign(Object.assign({},e.specifiedScales[t]),{domain:i})),t==="x"&&vn(r.x2)?vn(r.x)?Cl(Sa(n,i,e,"x"),Sa(n,i,e,"x2"),"domain","scale",BS):Sa(n,i,e,"x2"):t==="y"&&vn(r.y2)?vn(r.y)?Cl(Sa(n,i,e,"y"),Sa(n,i,e,"y2"),"domain","scale",BS):Sa(n,i,e,"y2"):Sa(n,i,e,t)}function k2e(e,t,n){return e.map(r=>({signal:`{data: ${Yb(r,{timeUnit:n,type:t})}}`}))}function j2(e,t,n){var r;const i=(r=ur(n))===null||r===void 0?void 0:r.unit;return t==="temporal"||i?k2e(e,t,i):[e]}function Sa(e,t,n,r){const{encoding:i}=n,o=vn(i[r]),{type:s}=o,a=o.timeUnit;if(Wye(t)){const f=Sa(e,void 0,n,r),d=j2(t.unionWith,s,a);return Po([...f.value,...d])}else{if(_e(t))return Po([t]);if(t&&t!=="unaggregated"&&!zz(t))return Po(j2(t,s,a))}const l=n.stack;if(l&&r===l.fieldChannel){if(l.offset==="normalize")return Qr([[0,1]]);const f=n.requestDataName(It.Main);return Qr([{data:f,field:n.vgField(r,{suffix:"start"})},{data:f,field:n.vgField(r,{suffix:"end"})}])}const u=Vl(r)&&se(o)?D2e(n,r,e):void 0;if(_s(o)){const f=j2([o.datum],s,a);return Qr(f)}const c=o;if(t==="unaggregated"){const f=n.requestDataName(It.Main),{field:d}=o;return Qr([{data:f,field:ue({field:d,aggregate:"min"})},{data:f,field:ue({field:d,aggregate:"max"})}])}else if(Lt(c.bin)){if(Mn(e))return Qr(e==="bin-ordinal"?[]:[{data:rp(u)?n.requestDataName(It.Main):n.requestDataName(It.Raw),field:n.vgField(r,am(c,r)?{binSuffix:"range"}:{}),sort:u===!0||!me(u)?{field:n.vgField(r,{}),op:"min"}:u}]);{const{bin:f}=c;if(Lt(f)){const d=Yk(n,c.field,f);return Qr([new Ur(()=>{const h=n.getSignalName(d);return`[${h}.start, ${h}.stop]`})])}else return Qr([{data:n.requestDataName(It.Main),field:n.vgField(r,{})}])}}else if(c.timeUnit&&ct(["time","utc"],e)&&rB(c,un(n)?n.encoding[fa(r)]:void 0,n.markDef,n.config)){const f=n.requestDataName(It.Main);return Qr([{data:f,field:n.vgField(r)},{data:f,field:n.vgField(r,{suffix:"end"})}])}else return Qr(u?[{data:rp(u)?n.requestDataName(It.Main):n.requestDataName(It.Raw),field:n.vgField(r),sort:u}]:[{data:n.requestDataName(It.Main),field:n.vgField(r)}])}function L2(e,t){const{op:n,field:r,order:i}=e;return Object.assign(Object.assign({op:n!=null?n:t?"sum":Ub},r?{field:Ii(r)}:{}),i?{order:i}:{})}function F2e(e,t){var n;const r=e.component.scales[t],i=e.specifiedScales[t].domain,o=(n=e.fieldDef(t))===null||n===void 0?void 0:n.bin,s=zz(i)&&i,a=Rc(o)&&Pb(o.extent)&&o.extent;(s||a)&&r.set("selectionExtent",s!=null?s:a,!0)}function D2e(e,t,n){if(!Mn(n))return;const r=e.fieldDef(t),i=r.sort;if(eB(i))return{op:"min",field:pd(r,t),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Qo(i)){const a=o&&!s.has(i.field);return L2(i,a)}else if(Qz(i)){const{encoding:a,order:l}=i,u=e.fieldDef(a),{aggregate:c,field:f}=u,d=o&&!s.has(f);if(ta(c)||Yl(c))return L2({field:ue(u),order:l},d);if(XT(c)||!c)return L2({op:c,field:f,order:l},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(ct(["ascending",void 0],i))return!0}}function HN(e,t){const{aggregate:n,type:r}=e;return n?de(n)&&!n0e.has(n)?{valid:!1,reason:Y0e(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:X0e(e)}:{valid:!0}:{valid:!1,reason:V0e(e)}}function BS(e,t,n,r){return e.explicit&&t.explicit&&te(Q0e(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function M2e(e){const t=Go(e.map(s=>Ws(s)?O2e(s,["sort"]):s),ut),n=Go(e.map(s=>{if(Ws(s)){const a=s.sort;return a!==void 0&&!rp(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(s=>s!==void 0),ut);if(t.length===0)return;if(t.length===1){const s=e[0];if(Ws(s)&&n.length>0){let a=n[0];if(n.length>1)te(nN),a=!0;else if(me(a)&&"field"in a){const l=a.field;s.field===l&&(a=a.order?{order:a.order}:!0)}return Object.assign(Object.assign({},s),{sort:a})}return s}const r=Go(n.map(s=>rp(s)||!("op"in s)||de(s.op)&&s.op in Zme?s:(te(tye(s)),!0)),ut);let i;r.length===1?i=r[0]:r.length>1&&(te(nN),i=!0);const o=Go(e.map(s=>Ws(s)?s.data:null),s=>s);return o.length===1&&o[0]!==null?Object.assign({data:o[0],fields:t.map(a=>a.field)},i?{sort:i}:{}):Object.assign({fields:t},i?{sort:i}:{})}function Jk(e){if(Ws(e)&&de(e.field))return e.field;if(i0e(e)){let t;for(const n of e.fields)if(Ws(n)&&de(n.field)){if(!t)t=n.field;else if(t!==n.field)return te(nye),t}return te(rye),t}else if(o0e(e)){te(iye);const t=e.fields[0];return de(t)?t:void 0}}function rx(e,t){const r=e.component.scales[t].get("domains").map(i=>(Ws(i)&&(i.data=e.lookupDataSource(i.data)),i));return M2e(r)}var $2e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function UU(e){return Wd(e)||Zk(e)?e.children.reduce((t,n)=>t.concat(UU(n)),WN(e)):WN(e)}function WN(e){return Z(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:s,selectionExtent:a,domains:l,range:u,reverse:c}=i,f=$2e(i,["name","type","selectionExtent","domains","range","reverse"]),d=N2e(i.range,o,n,e),h=rx(e,n),g=a?Obe(e,a,r,h):null;return t.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:o,type:s},h?{domain:h}:{}),g?{domainRaw:g}:{}),{range:d}),c!==void 0?{reverse:c}:{}),f)),t},[])}function N2e(e,t,n,r){if(Dn(n)){if(Xl(e))return{step:{signal:`${t}_step`}}}else if(me(e)&&Ws(e))return Object.assign(Object.assign({},e),{data:r.lookupDataSource(e.data)});return e}class HU extends ha{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:uc(this.get("domains"),t=>X(t)&&t.length===2&&t[0]<=0&&t[1]>=0)}}const R2e=["range","scheme"];function P2e(e){const t=e.component.scales;for(const n of Rb){const r=t[n];if(!r)continue;const i=I2e(n,e);r.setWithExplicit("range",i)}}function GN(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,o=qr(t),s=e.getName(o);if(me(r)&&r.binned&&r.step!==void 0)return new Ur(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(s)} / (${l})`});if(Lt(r)){const a=Yk(e,i,r);return new Ur(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${u})`})}}}function I2e(e,t){const n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(const f of R2e)if(n[f]!==void 0){const d=xS(o,f),h=Bz(e,f);if(!d)te(Oz(o,f,e));else if(h)te(h);else switch(f){case"range":{const g=n.range;if(X(g)){if(Dn(e))return Po(g.map(p=>{if(p==="width"||p==="height"){const m=t.getName(p),y=t.getSignalName.bind(t);return Ur.fromName(y,m)}return p}))}else if(me(g))return Po({data:t.requestDataName(It.Main),field:g.field,sort:{op:"min",field:t.vgField(e)}});return Po(g)}case"scheme":return Po(j2e(n[f]))}}const s=e===Jt||e==="xOffset"?"width":"height",a=r[s];if(fs(a)){if(Dn(e))if(Mn(o)){const f=WU(a,t,e);if(f)return Po({step:f})}else te(_z(s));else if(jd(e)){const f=e===Bl?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const g=GU(a,o);if(g)return Po(g)}}}const{rangeMin:l,rangeMax:u}=n,c=L2e(e,t);return(l!==void 0||u!==void 0)&&xS(o,"rangeMin")&&X(c)&&c.length===2?Po([l!=null?l:c[0],u!=null?u:c[1]]):Qr(c)}function j2e(e){return Hye(e)?Object.assign({scheme:e.name},di(e,["name"])):{scheme:e}}function L2e(e,t){const{size:n,config:r,mark:i,encoding:o}=t,s=t.getSignalName.bind(t),{type:a}=vn(o[e]),u=t.getScaleComponent(e).get("type"),{domain:c,domainMid:f}=t.specifiedScales[e];switch(e){case Jt:case Fn:{if(ct(["point","band"],u)){const g=VU(e,n,r.view);if(fs(g))return{step:WU(g,t,e)}}const d=qr(e),h=t.getName(d);return e===Fn&&bi(u)?[Ur.fromName(s,h),0]:[0,Ur.fromName(s,h)]}case Bl:case Id:return z2e(e,t,u);case ua:{const d=t.component.scales[e].get("zero"),h=YU(i,d,r),g=H2e(i,n,t,r);return ld(u)?U2e(h,g,B2e(u,r,c,e)):[h,g]}case Ui:return[0,Math.PI*2];case $c:return[0,360];case To:return[0,new Ur(()=>{const d=t.getSignalName("width"),h=t.getSignalName("height");return`min(${d},${h})/2`})];case Wl:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Gl:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Xr:return"symbol";case Yr:case Es:case Ss:return u==="ordinal"?a==="nominal"?"category":"ordinal":f!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case ca:case Ul:case Hl:return[r.scale.minOpacity,r.scale.maxOpacity]}}function WU(e,t,n){var r,i,o,s,a;const{encoding:l}=t,u=t.getScaleComponent(n),c=oz(n),f=l[c];if($B({step:e,offsetIsDiscrete:Ve(f)&&Rz(f.type)})==="offset"&&gB(l,c)){const h=t.getScaleComponent(c);let p=`domain('${t.scaleName(c)}').length`;if(h.get("type")==="band"){const y=(i=(r=h.get("paddingInner"))!==null&&r!==void 0?r:h.get("padding"))!==null&&i!==void 0?i:0,v=(s=(o=h.get("paddingOuter"))!==null&&o!==void 0?o:h.get("padding"))!==null&&s!==void 0?s:0;p=`bandspace(${p}, ${y}, ${v})`}const m=(a=u.get("paddingInner"))!==null&&a!==void 0?a:u.get("padding");return{signal:`${e.step} * ${p} / (1-${u0e(m)})`}}else return e.step}function GU(e,t){if($B({step:e,offsetIsDiscrete:Mn(t)})==="offset")return{step:e.step}}function z2e(e,t,n){const r=e===Bl?"x":"y",o=t.getScaleComponent(r).get("type"),s=t.scaleName(r);if(o==="band"){const a=VU(r,t.size,t.config.view);if(fs(a)){const l=GU(a,n);if(l)return l}return[0,{signal:`bandwidth('${s}')`}]}else return V9(`Cannot use ${e} scale if ${r} scale is not discrete.`)}function VU(e,t,n){const r=e===Jt?"width":"height",i=t[r];return i||Iv(n,r)}function B2e(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&X(n)?n.length+1:(te(hye(r)),3)}}function U2e(e,t,n){const r=()=>{const i=qs(t),o=qs(e),s=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${s}, ${s})`};return _e(t)?new Ur(r):{signal:r()}}function YU(e,t,n){if(t)return _e(t)?{signal:`${t.signal} ? 0 : ${YU(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(Ib("size",e))}const VN=.95;function H2e(e,t,n,r){const i={x:GN(n,"x"),y:GN(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=YN(t,i,r.view);return kt(o)?o-1:new Ur(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=YN(t,i,r.view);return kt(o)?Math.pow(VN*o,2):new Ur(()=>`pow(${VN} * ${o.signal}, 2)`)}}throw new Error(Ib("size",e))}function YN(e,t,n){const r=fs(e.width)?e.width.step:Pv(n,"width"),i=fs(e.height)?e.height.step:Pv(n,"height");return t.x||t.y?new Ur(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function XU(e,t){un(e)?W2e(e,t):KU(e,t)}function W2e(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:s}=e;for(const a of Z(n)){const l=s[a],u=n[a],c=e.getScaleComponent(a),f=vn(i[a]),d=l[t],h=c.get("type"),g=c.get("padding"),p=c.get("paddingInner"),m=xS(h,t),y=Bz(a,t);if(d!==void 0&&(m?y&&te(y):te(Oz(h,t,a))),m&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":Pc(l[t])||b==="temporal"||v?u.set(t,{signal:Yb(l[t],{type:b,timeUnit:v})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const v=t in XN?XN[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:g,scalePaddingInner:p,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:r,hasNestedOffsetScale:OS(i,a)}):r.scale[t];v!==void 0&&u.set(t,v,!1)}}}const XN={bins:({model:e,fieldOrDatumDef:t})=>se(t)?G2e(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>V2e(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>Y2e(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>X2e(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>q2e(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>K2e(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=se(e)?e.sort:void 0;return J2e(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i})=>Z2e(e,t,n,r,i)};function qU(e){un(e)?P2e(e):KU(e,"range")}function KU(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?qU(r):XU(r,t);for(const r of Z(n)){let i;for(const o of e.children){const s=o.component.scales[r];if(s){const a=s.getWithExplicit(t);i=Cl(i,a,t,"scale",YB((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function G2e(e,t){const n=t.bin;if(Lt(n)){const r=Yk(e,t.field,n);return new Ur(()=>e.getSignalName(r))}else if(br(n)&&Rc(n)&&n.step!==void 0)return{step:n.step}}function V2e(e,t){if(ct([Yr,Es,Ss],e)&&t!=="nominal")return"hcl"}function Y2e(e,t,n,r,i,o){var s;if(!(((s=us(o))===null||s===void 0?void 0:s.bin)||X(n)||i!=null||r!=null||ct([Br.TIME,Br.UTC],e)))return Dn(t)?!0:void 0}function X2e(e,t,n,r,i,o){if(Dn(e)){if(fo(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:a}=i;if(s==="bar"&&!(se(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===Br.POINT)return n.pointPadding}}function q2e(e,t,n,r,i,o=!1){if(e===void 0){if(Dn(t)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:l,bandWithNestedOffsetPaddingInner:u}=i;return o?u:fn(s,n==="bar"?a:l)}else if(jd(t)&&r===Br.BAND)return i.offsetBandPaddingInner}}function K2e(e,t,n,r,i,o=!1){if(e===void 0){if(Dn(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=i;if(o)return a;if(n===Br.BAND)return fn(s,_e(r)?{signal:`${r.signal}/2`}:r/2)}else if(jd(t)){if(n===Br.POINT)return .5;if(n===Br.BAND)return i.offsetBandPaddingOuter}}}function J2e(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return bi(e)&&t==="descending"?_e(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(bi(e)&&t==="descending")return!0}function Z2e(e,t,n,r,i){if(!!n&&n!=="unaggregated"&&bi(i)){if(X(n)){const s=n[0],a=n[n.length-1];if(s<=0&&a>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!ld(i))return!0;if(!(se(t)&&t.bin)&&ct([...Os,...Wme],e)){const{orient:s,type:a}=r;return!(ct(["bar","area","line","trail"],a)&&(s==="horizontal"&&e==="y"||s==="vertical"&&e==="x"))}return!1}function Q2e(e,t,n,r,i=!1){const o=ewe(t,n,r,i),{type:s}=e;return Vl(t)?s!==void 0?Kye(t,s)?se(n)&&!qye(s,n.type)?(te(J0e(s,o)),o):s:(te(K0e(t,s,o)),o):o:null}function ewe(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(Tf(e)||D2(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&te(M2(e,"ordinal")),"ordinal";if(Dn(e)||jd(e)){if(ct(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in YT)return"band";const o=n[qr(e)];return gc(o)||cd(t)&&((i=t.axis)===null||i===void 0?void 0:i.tickBand)?"band":"point"}case"temporal":return Tf(e)?"time":D2(e)==="discrete"?(te(M2(e,"temporal")),"ordinal"):se(t)&&t.timeUnit&&ur(t.timeUnit).utc?"utc":"time";case"quantitative":return Tf(e)?se(t)&&Lt(t.bin)?"bin-ordinal":"linear":D2(e)==="discrete"?(te(M2(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(Ez(t.type))}function twe(e,{ignoreRange:t}={}){JU(e),BU(e);for(const n of Xye)XU(e,n);t||qU(e)}function JU(e){un(e)?e.component.scales=nwe(e):e.component.scales=iwe(e)}function nwe(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of Rb){const s=vn(t[o]);if(s&&n===Wz&&o===Xr&&s.type===Ld)continue;let a=s&&s.scale;if(jd(o)){const l=sz(o);if(!OS(t,l)){a&&te(P0e(o));continue}}if(s&&a!==null&&a!==!1){a!=null||(a={});const l=OS(t,o),u=Q2e(a,o,s,r,l);i[o]=new HU(e.scaleName(`${o}`,!0),{value:u,explicit:a.type===u})}}return i}const rwe=YB((e,t)=>iN(e)-iN(t));function iwe(e){var t,n;const r=e.component.scales={},i={},o=e.component.resolve;for(const s of e.children){JU(s);for(const a of Z(s.component.scales))if((t=(n=o.scale)[a])!==null&&t!==void 0||(n[a]=TU(a,e)),o.scale[a]==="shared"){const l=i[a],u=s.component.scales[a].getWithExplicit("type");l?jye(l.value,u.value)?i[a]=Cl(l,u,"type","scale",rwe):(o.scale[a]="independent",delete i[a]):i[a]=u}}for(const s of Z(i)){const a=e.scaleName(s,!0),l=i[s];r[s]=new HU(a,l);for(const u of e.children){const c=u.component.scales[s];c&&(u.renameScale(c.get("name"),a),c.merged=!0)}}return r}var z2=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class B2{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function un(e){return(e==null?void 0:e.type)==="unit"}function vo(e){return(e==null?void 0:e.type)==="facet"}function Zk(e){return(e==null?void 0:e.type)==="concat"}function Wd(e){return(e==null?void 0:e.type)==="layer"}class Qk{constructor(t,n,r,i,o,s,a){var l,u;this.type=n,this.parent=r,this.config=o,this.correctDataNames=c=>{var f,d,h;return!((f=c.from)===null||f===void 0)&&f.data&&(c.from.data=this.lookupDataSource(c.from.data)),!((h=(d=c.from)===null||d===void 0?void 0:d.facet)===null||h===void 0)&&h.data&&(c.from.facet.data=this.lookupDataSource(c.from.facet.data)),c},this.parent=r,this.config=o,this.view=Rr(a),this.name=(l=t.name)!==null&&l!==void 0?l:i,this.title=Fa(t.title)?{text:t.title}:t.title?Rr(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new B2,this.projectionNameMap=r?r.projectionNameMap:new B2,this.signalNameMap=r?r.signalNameMap:new B2,this.data=t.data,this.description=t.description,this.transforms=abe((u=t.transform)!==null&&u!==void 0?u:[]),this.layout=n==="layer"||n==="unit"?{}:h1e(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:Hb(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new ha,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},s?Xe(s):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){twe(this)}parseProjection(){jU(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){$U(this)}assembleEncodeFromView(t){const n=z2(t,["style"]),r={};for(const i of Z(n)){const o=n[i];o!==void 0&&(r[i]=Bt(o))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Bt(this.description)),this.type==="unit"||this.type==="layer")?Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},n!=null?n:{}):Tt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const t=this.layout,{spacing:n}=t,r=z2(t,["spacing"]),{component:i,config:o}=this,s=wxe(i.layoutHeaders,o);return Object.assign(Object.assign(Object.assign({padding:n},this.assembleDefaultLayout()),r),s?{titleBand:s}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Fi)t[r].title&&n.push(pxe(this,r));for(const r of Hk)n=n.concat(mxe(this,r));return n}assembleAxes(){return rxe(this.component.axes,this.config)}assembleLegends(){return RU(this)}assembleProjections(){return Gxe(this)}assembleTitle(){var t,n,r;const i=(t=this.title)!==null&&t!==void 0?t:{},{encoding:o}=i,s=z2(i,["encoding"]),a=Object.assign(Object.assign(Object.assign({},hz(this.config.title).nonMarkTitleProperties),s),o?{encode:{update:o}}:{});if(a.text)return ct(["unit","layer"],this.type)?ct(["middle",void 0],a.anchor)&&((n=a.frame)!==null&&n!==void 0||(a.frame="group")):(r=a.anchor)!==null&&r!==void 0||(a.anchor="start"),Tt(a)?void 0:a}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||vo(this.parent)?UU(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Vt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(It[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(vo(this.parent)){const n=AU(t),r=Nb(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(Mn(o)&&Xl(s)){const a=i.get("name"),l=rx(this,r),u=Jk(l);if(u){const c=ue({aggregate:"distinct",field:u},{expr:"datum"});return{signal:_U(a,i,c)}}else return te(JT(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(rz(t)&&Vl(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(g0e(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)===null||t===void 0?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)===null||n===void 0?void 0:n.some(r=>r.hasOrientSignalRef()))}}class ZU extends Qk{vgField(t,n={}){const r=this.fieldDef(t);if(!!r)return ue(r,n)}reduceFieldDef(t,n){return Bve(this.getMapping(),(r,i,o)=>{const s=us(i);return s?t(r,s,o):r},n)}forEachFieldDef(t,n){_k(this.getMapping(),(r,i)=>{const o=us(r);o&&t(o,i)},n)}}var owe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class ix extends Dt{constructor(t,n){var r,i,o;super(t),this.transform=n,this.transform=Xe(n);const s=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=s[0])!==null&&i!==void 0?i:"value",(o=s[1])!==null&&o!==void 0?o:"density"],n.groupby&&n.minsteps==null&&n.maxsteps==null&&n.steps==null&&(this.transform.steps=200)}clone(){return new ix(null,Xe(this.transform))}dependentFields(){var t;return new Set([this.transform.density,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${ut(this.transform)}`}assemble(){const t=this.transform,{density:n}=t,r=owe(t,["density"]);return Object.assign({type:"kde",field:n},r)}}class lp extends Dt{constructor(t,n){super(t),this.filter=n}clone(){return new lp(null,Object.assign({},this.filter))}static make(t,n){const{config:r,mark:i,markDef:o}=n;if(_t("invalid",o,r)!=="filter")return null;const a=n.reduceFieldDef((l,u,c)=>{const f=Vl(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");bi(d)&&u.aggregate!=="count"&&!ql(i)&&(l[u.field]=u)}return l},{});return Z(a).length?new lp(t,a):null}dependentFields(){return new Set(Z(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${ut(this.filter)}`}assemble(){const t=Z(this.filter).reduce((n,r)=>{const i=this.filter[r],o=ue(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (isValid(${o}) && isFinite(+${o})))`):i.type==="quantitative"&&(n.push(`isValid(${o})`),n.push(`isFinite(+${o})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class ox extends Dt{constructor(t,n){super(t),this.transform=n,this.transform=Xe(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,s)=>{var a;return(a=i[s])!==null&&a!==void 0?a:o})}clone(){return new ox(this.parent,Xe(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${ut(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class sx extends Dt{constructor(t,n){var r,i,o;super(t),this.transform=n,this.transform=Xe(n);const s=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=s[0])!==null&&i!==void 0?i:"key",(o=s[1])!==null&&o!==void 0?o:"value"]}clone(){return new sx(null,Xe(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${ut(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Df extends Dt{constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}clone(){return new Df(null,Xe(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[ws,xs],[ji,ko]]){const o=i.map(s=>{const a=vn(n.encoding[s]);return se(a)?a.field:_s(a)?{expr:`${a.datum}`}:So(a)?{expr:`${a.value}`}:void 0});(o[0]||o[1])&&(t=new Df(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Xr)){const i=n.typedFieldDef(Xr);i.type===Ld&&(t=new Df(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}dependentFields(){var t;const n=((t=this.fields)!==null&&t!==void 0?t:[]).filter(de);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${ut(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})]}}class up extends Dt{constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}clone(){return new up(null,this.projection,Xe(this.fields),Xe(this.as))}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[ws,xs],[ji,ko]]){const i=r.map(s=>{const a=vn(n.encoding[s]);return se(a)?a.field:_s(a)?{expr:`${a.datum}`}:So(a)?{expr:`${a.value}`}:void 0}),o=r[0]===ji?"2":"";(i[0]||i[1])&&(t=new up(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(de))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${ut(this.fields)} ${ut(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Gu extends Dt{constructor(t,n){super(t),this.transform=n}clone(){return new Gu(null,Xe(this.transform))}dependentFields(){var t;return new Set([this.transform.impute,this.transform.key,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Gu(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,o=r.y;if(se(i)&&se(o)){const s=i.impute?i:o.impute?o:void 0;if(s===void 0)return;const a=i.impute?o:o.impute?i:void 0,{method:l,value:u,frame:c,keyvals:f}=s.impute,d=mB(n.mark,r);return new Gu(t,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:s.field,key:a.field},l?{method:l}:{}),u!==void 0?{value:u}:{}),c?{frame:c}:{}),f!==void 0?{keyvals:f}:{}),d.length?{groupby:d}:{}))}return null}hash(){return`Impute ${ut(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:o,value:s,frame:a=[null,null]}=this.transform,l=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:t,key:n},r?{keyvals:H1e(r)?this.processSequence(r):r}:{}),{method:"value"}),o?{groupby:o}:{}),{value:!i||i==="value"?s:null});if(i&&i!=="value"){const u=Object.assign({type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1},o?{groupby:o}:{}),c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,c]}else return[l]}}var swe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class ax extends Dt{constructor(t,n){var r,i,o;super(t),this.transform=n,this.transform=Xe(n);const s=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=s[0])!==null&&i!==void 0?i:n.on,(o=s[1])!==null&&o!==void 0?o:n.loess]}clone(){return new ax(null,Xe(this.transform))}dependentFields(){var t;return new Set([this.transform.loess,this.transform.on,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${ut(this.transform)}`}assemble(){const t=this.transform,{loess:n,on:r}=t,i=swe(t,["loess","on"]);return Object.assign({type:"loess",x:r,y:n},i)}}class cp extends Dt{constructor(t,n,r){super(t),this.transform=n,this.secondary=r}clone(){return new cp(null,Xe(this.transform),this.secondary)}static make(t,n,r,i){const o=n.component.data.sources,{from:s}=r;let a=null;if(W1e(s)){let l=tH(s.data,o);l||(l=new vc(s.data),o.push(l));const u=n.getName(`lookup_${i}`);a=new Sr(l,u,It.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a}else if(G1e(s)){const l=s.param;r=Object.assign({as:l},r);let u;try{u=n.getSelectionComponent(Vt(l),l)}catch{throw new Error(y0e(l))}if(a=u.materialized,!a)throw new Error(v0e(l))}return new cp(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?pe(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${ut({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t=Object.assign({values:this.transform.from.fields},this.transform.as?{as:pe(this.transform.as)}:{});else{let n=this.transform.as;de(n)||(te(A0e),n="_lookup"),t={as:[n]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}}var awe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class lx extends Dt{constructor(t,n){var r,i,o;super(t),this.transform=n,this.transform=Xe(n);const s=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=s[0])!==null&&i!==void 0?i:"prob",(o=s[1])!==null&&o!==void 0?o:"value"]}clone(){return new lx(null,Xe(this.transform))}dependentFields(){var t;return new Set([this.transform.quantile,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${ut(this.transform)}`}assemble(){const t=this.transform,{quantile:n}=t,r=awe(t,["quantile"]);return Object.assign({type:"quantile",field:n},r)}}var lwe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class ux extends Dt{constructor(t,n){var r,i,o;super(t),this.transform=n,this.transform=Xe(n);const s=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=s[0])!==null&&i!==void 0?i:n.on,(o=s[1])!==null&&o!==void 0?o:n.regression]}clone(){return new ux(null,Xe(this.transform))}dependentFields(){var t;return new Set([this.transform.regression,this.transform.on,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${ut(this.transform)}`}assemble(){const t=this.transform,{regression:n,on:r}=t,i=lwe(t,["regression","on"]);return Object.assign({type:"regression",x:r,y:n},i)}}class cx extends Dt{constructor(t,n){super(t),this.transform=n}clone(){return new cx(null,Xe(this.transform))}addDimensions(t){var n;this.transform.groupby=Go(((n=this.transform.groupby)!==null&&n!==void 0?n:[]).concat(t),r=>r)}producedFields(){}dependentFields(){var t;return new Set([this.transform.pivot,this.transform.value,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}hash(){return`PivotTransform ${ut(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:t,value:n},i!==void 0?{limit:i}:{}),o!==void 0?{op:o}:{}),r!==void 0?{groupby:r}:{})}}class fx extends Dt{constructor(t,n){super(t),this.transform=n}clone(){return new fx(null,Xe(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${ut(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function QU(e){let t=0;function n(r,i){var o;if(r instanceof vc&&!r.isGenerator&&!dd(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof er&&(r.parent instanceof vc&&!i.source?(i.format=Object.assign(Object.assign({},(o=i.format)!==null&&o!==void 0?o:{}),{parse:r.assembleFormatParse()}),i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof Ud){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof cm||r instanceof fm||r instanceof lp||r instanceof Bd||r instanceof gd||r instanceof up||r instanceof yo||r instanceof cp||r instanceof Hd||r instanceof Lc||r instanceof sx||r instanceof ox||r instanceof ix||r instanceof ax||r instanceof lx||r instanceof ux||r instanceof Dl||r instanceof fx||r instanceof cx)&&i.transform.push(r.assemble()),(r instanceof ts||r instanceof es||r instanceof Gu||r instanceof Ks||r instanceof Df)&&i.transform.push(...r.assemble()),r instanceof Sr&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Sr?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Sr&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const a of r.children)n(a,{name:null,source:s,transform:[]});break}}}return n}function uwe(e){const t=[],n=QU(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function cwe(e,t){var n,r;const i=[],o=QU(i);let s=0;for(const l of e.sources){l.hasName()||(l.dataName=`source_${s++}`);const u=l.assemble();o(l,u)}for(const l of i)l.transform.length===0&&delete l.transform;let a=0;for(const[l,u]of i.entries())((n=u.transform)!==null&&n!==void 0?n:[]).length===0&&!u.source&&i.splice(a++,0,i.splice(l,1)[0]);for(const l of i)for(const u of(r=l.transform)!==null&&r!==void 0?r:[])u.type==="lookup"&&(u.from=e.outputNodes[u.from].getSource());for(const l of i)l.name in t&&(l.values=t[l.name]);return i}function fwe(e){return e==="top"||e==="left"||_e(e)?"header":"footer"}function dwe(e){for(const t of Fi)hwe(e,t);qN(e,"x"),qN(e,"y")}function hwe(e,t){var n;const{facet:r,config:i,child:o,component:s}=e;if(e.channelHasField(t)){const a=r[t],l=md("title",null,i,t);let u=kf(a,i,{allowDisabling:!0,includeDefault:l===void 0||!!l});o.component.layoutHeaders[t].title&&(u=X(u)?u.join(", "):u,u+=` / ${o.component.layoutHeaders[t].title}`,o.component.layoutHeaders[t].title=null);const c=md("labelOrient",a.header,i,t),f=a.header!==null?fn((n=a.header)===null||n===void 0?void 0:n.labels,i.header.labels,!0):!1,d=ct(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?u:null,facetFieldDef:a,[d]:t==="facet"?[]:[eH(e,t,f)]}}}function eH(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function qN(e,t){var n;const{child:r}=e;if(r.component.axes[t]){const{layoutHeaders:i,resolve:o}=e.component;if(o.axis[t]=Vk(o,t),o.axis[t]==="shared"){const s=t==="x"?"column":"row",a=i[s];for(const l of r.component.axes[t]){const u=fwe(l.get("orient"));(n=a[u])!==null&&n!==void 0||(a[u]=[eH(e,s,!1)]);const c=Vh(l,"main",e.config,{header:!0});c&&a[u][0].axes.push(c),l.mainExtracted=!0}}}}function gwe(e){eF(e),Bv(e,"width"),Bv(e,"height")}function pwe(e){eF(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";Bv(e,t),Bv(e,n)}function eF(e){for(const t of e.children)t.parseLayoutSize()}function Bv(e,t){var n;const r=AU(t),i=Nb(r),o=e.component.resolve,s=e.component.layoutSize;let a;for(const l of e.children){const u=l.component.layoutSize.getWithExplicit(r),c=(n=o.scale[i])!==null&&n!==void 0?n:TU(i,e);if(c==="independent"&&u.value==="step"){a=void 0;break}if(a){if(c==="independent"&&a.value!==u.value){a=void 0;break}a=Cl(a,u,r,"")}else a=u}if(a){for(const l of e.children)e.renameSignal(l.getName(r),e.getName(t)),l.component.layoutSize.set(r,"merged",!1);s.setWithExplicit(t,a)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function mwe(e){const{size:t,component:n}=e;for(const r of Os){const i=qr(r);if(t[i]){const o=t[i];n.layoutSize.set(i,fs(o)?"step":o,!0)}else{const o=ywe(e,i);n.layoutSize.set(i,o,!1)}}}function ywe(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),s=i.get("range");if(Mn(o)){const a=Iv(r.view,t);return Xl(s)||fs(a)?"step":a}else return AS(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return AS(r.view,t);{const o=Iv(r.view,t);return fs(o)?o.step:o}}}function US(e,t,n){return ue(t,Object.assign({suffix:`by_${ue(e)}`},n!=null?n:{}))}class xg extends ZU{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=oF(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!om(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Z(t),r={};for(const i of n){if(![Ys,Xs].includes(i)){te(Ib(i,"facet"));break}const o=t[i];if(o.field===void 0){te(vS(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){const r=Sk(t,n);return r.header?r.header=Rr(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=dx(this),this.child.parseData()}parseLayoutSize(){eF(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),dwe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){var t,n,r;const i={};for(const o of Fi)for(const s of Wk){const a=this.component.layoutHeaders[o],l=a[s],{facetFieldDef:u}=a;if(u){const c=md("titleOrient",u.header,this.config,o);if(["right","bottom"].includes(c)){const f=tx(o,c);(t=i.titleAnchor)!==null&&t!==void 0||(i.titleAnchor={}),i.titleAnchor[f]="end"}}if(l!=null&&l[0]){const c=o==="row"?"height":"width",f=s==="header"?"headerBand":"footerBand";o!=="facet"&&!this.child.component.layoutSize.get(c)&&((n=i[f])!==null&&n!==void 0||(i[f]={}),i[f][o]=.5),a.title&&((r=i.offset)!==null&&r!==void 0||(i.offset={}),i.offset[o==="row"?"rowTitle":"columnTitle"]=10)}}return i}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),r?{columns:r}:{}),{bounds:"full",align:i})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof xg))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof xg?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:ue(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(t)):super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof xg){if(this.child.channelHasField("column")){const i=ue(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Os){const o=this.child.component.scales[i];if(o&&!o.merged){const s=o.get("type"),a=o.get("range");if(Mn(s)&&Xl(a)){const l=rx(this.child,i),u=Jk(l);u?(t.push(u),n.push("distinct"),r.push(`distinct_${u}`)):te(JT(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:s,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const c of Fi){const f=this.facet[c];if(f){l.push(ue(f));const{bin:d,sort:h}=f;if(Lt(d)&&l.push(ue(f,{binSuffix:"end"})),Qo(h)){const{field:g,op:p=Ub}=h,m=US(f,h);r&&i?(o.push(m),s.push("max"),a.push(m)):(o.push(g),s.push(p),a.push(m))}else if(X(h)){const g=pd(f,c);o.push(g),s.push("max"),a.push(g)}}}const u=!!r&&!!i;return Object.assign({name:t,data:n,groupby:l},u||o.length>0?{aggregate:Object.assign(Object.assign({},u?{cross:u}:{}),o.length?{fields:o,ops:s,as:a}:{})}:{})}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Qo(r.sort)?[US(r,r.sort,{expr:"datum"})]:X(r.sort)?[pd(r,t,{expr:"datum"})]:[ue(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Qo(i)?i.order:!X(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var t;const{facet:n,config:r}=this;if(n.facet)return PS(n.facet,"facet",r);const i={row:["top","bottom"],column:["left","right"]};for(const o of Hk)if(n[o]){const s=md("labelOrient",(t=n[o])===null||t===void 0?void 0:t.header,r,o);if(i[o].includes(s))return PS(n[o],o,r)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=uwe(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},o?{title:o}:{}),s?{style:s}:{}),{from:{facet:this.assembleFacet()},sort:{field:Fi.map(l=>this.facetSortFields(l)).flat(),order:Fi.map(l=>this.facetSortOrder(l)).flat()}}),r.length>0?{data:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup(xbe(this,[])))]}getMapping(){return this.facet}}function vwe(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(Qo(o.sort)){const{field:s,op:a=Ub}=o.sort;e=i=new Lc(e,{joinaggregate:[{op:a,field:s,as:US(o,o.sort,{forAs:!0})}],groupby:[ue(o)]})}return i}return null}function tH(e,t){var n,r,i,o;for(const s of t){const a=s.data;if(e.name&&s.hasName()&&e.name!==s.dataName)continue;const l=(n=e.format)===null||n===void 0?void 0:n.mesh,u=(r=a.format)===null||r===void 0?void 0:r.feature;if(l&&u)continue;const c=(i=e.format)===null||i===void 0?void 0:i.feature;if((c||u)&&c!==u)continue;const f=(o=a.format)===null||o===void 0?void 0:o.mesh;if(!((l||f)&&l!==f)){if(sp(e)&&sp(a)){if(Wo(e.values,a.values))return s}else if(dd(e)&&dd(a)){if(e.url===a.url)return s}else if(XB(e)&&e.name===s.dataName)return s}}return null}function bwe(e,t){if(e.data||!e.parent){if(e.data===null){const r=new vc({values:[]});return t.push(r),r}const n=tH(e.data,t);if(n)return rl(e.data)||(n.data.format=Y9({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new vc(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function xwe(e,t,n){var r,i;let o=0;for(const s of t.transforms){let a,l;if(tbe(s))l=e=new gd(e,s),a="derived";else if(Pk(s)){const u=o2e(s);l=e=(r=er.makeWithAncestors(e,{},u,n))!==null&&r!==void 0?r:e,e=new Bd(e,t,s.filter)}else if(UB(s))l=e=ts.makeFromTransform(e,s,t),a="number";else if(rbe(s))a="date",n.getWithExplicit(s.field).value===void 0&&(e=new er(e,{[s.field]:a}),n.set(s.field,a,!1)),l=e=es.makeFromTransform(e,s);else if(ibe(s))l=e=yo.makeFromTransform(e,s),a="number",Uk(t)&&(e=new Dl(e));else if(BB(s))l=e=cp.make(e,t,s,o++),a="derived";else if(Z1e(s))l=e=new Hd(e,s),a="number";else if(Q1e(s))l=e=new Lc(e,s),a="number";else if(obe(s))l=e=Ks.makeFromTransform(e,s),a="derived";else if(sbe(s))l=e=new sx(e,s),a="derived";else if(ebe(s))l=e=new ox(e,s),a="derived";else if(V1e(s))l=e=new cx(e,s),a="derived";else if(J1e(s))e=new fx(e,s);else if(nbe(s))l=e=Gu.makeFromTransform(e,s),a="derived";else if(Y1e(s))l=e=new ix(e,s),a="derived";else if(X1e(s))l=e=new lx(e,s),a="derived";else if(q1e(s))l=e=new ux(e,s),a="derived";else if(K1e(s))l=e=new ax(e,s),a="derived";else{te(_0e(s));continue}if(l&&a!==void 0)for(const u of(i=l.producedFields())!==null&&i!==void 0?i:[])n.set(u,a,!1)}return e}function dx(e){var t,n,r,i,o,s,a,l,u,c;let f=bwe(e,e.component.data.sources);const{outputNodes:d,outputNodeRefCounts:h}=e.component.data,g=e.data,m=!(g&&(rl(g)||dd(g)||sp(g)))&&e.parent?e.parent.component.data.ancestorParse.clone():new ybe;rl(g)?(qB(g)?f=new fm(f,g.sequence):Ik(g)&&(f=new cm(f,g.graticule)),m.parseNothing=!0):((t=g==null?void 0:g.format)===null||t===void 0?void 0:t.parse)===null&&(m.parseNothing=!0),f=(n=er.makeExplicit(f,e,m))!==null&&n!==void 0?n:f,f=new Dl(f);const y=e.parent&&Wd(e.parent);(un(e)||vo(e))&&y&&(f=(r=ts.makeFromEncoding(f,e))!==null&&r!==void 0?r:f),e.transforms.length>0&&(f=xwe(f,e,m));const v=a2e(e),b=s2e(e);f=(i=er.makeWithAncestors(f,{},Object.assign(Object.assign({},v),b),m))!==null&&i!==void 0?i:f,un(e)&&(f=Df.parseAll(f,e),f=up.parseAll(f,e)),(un(e)||vo(e))&&(y||(f=(o=ts.makeFromEncoding(f,e))!==null&&o!==void 0?o:f),f=(s=es.makeFromEncoding(f,e))!==null&&s!==void 0?s:f,f=gd.parseAllForSortIndex(f,e));const x=e.getDataName(It.Raw),w=new Sr(f,x,It.Raw,h);if(d[x]=w,f=w,un(e)){const A=yo.makeFromEncoding(f,e);A&&(f=A,Uk(e)&&(f=new Dl(f))),f=(a=Gu.makeFromEncoding(f,e))!==null&&a!==void 0?a:f,f=(l=Ks.makeFromEncoding(f,e))!==null&&l!==void 0?l:f}un(e)&&(f=(u=lp.make(f,e))!==null&&u!==void 0?u:f);const S=e.getDataName(It.Main),E=new Sr(f,S,It.Main,h);d[S]=E,f=E,un(e)&&txe(e,E);let O=null;if(vo(e)){const A=e.getName("facet");f=(c=vwe(f,e.facet))!==null&&c!==void 0?c:f,O=new Ud(f,e,A,E.getSource()),d[A]=O}return Object.assign(Object.assign({},e.component.data),{outputNodes:d,outputNodeRefCounts:h,raw:w,main:E,facetRoot:O,ancestorParse:m})}class wwe extends Qk{constructor(t,n,r,i){var o,s,a,l;super(t,"concat",n,r,i,t.resolve),(((s=(o=t.resolve)===null||o===void 0?void 0:o.axis)===null||s===void 0?void 0:s.x)==="shared"||((l=(a=t.resolve)===null||a===void 0?void 0:a.axis)===null||l===void 0?void 0:l.y)==="shared")&&te(E0e),this.children=this.getChildren(t).map((u,c)=>oF(u,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=dx(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Z(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return Kb(t)?t.vconcat:Nk(t)?t.hconcat:t.concat}parseLayoutSize(){pwe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Gk(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:t.getName("group")},n?{title:n}:{}),r?{style:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup())})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return Object.assign(Object.assign({},t!=null?{columns:t}:{}),{bounds:"full",align:"each"})}}function Ewe(e){return e===!1||e===null}const Swe=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},dB),{labelExpr:1,encode:1}),nH=Z(Swe);class tF extends ha{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new tF(Xe(this.explicit),Xe(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Ewe(this.get(t))}hasOrientSignalRef(){return _e(this.explicit.orient)}}function Owe(e,t,n){var r;const{encoding:i,config:o}=e,s=(r=vn(i[t]))!==null&&r!==void 0?r:vn(i[fa(t)]),a=e.axis(t)||{},{format:l,formatType:u}=a;if(pc(u))return Object.assign({text:ho({fieldOrDatumDef:s,field:"datum.value",format:l,formatType:u,config:o})},n);if(l===void 0&&u===void 0&&o.customFormatTypes){if(ud(s)==="quantitative"){if(cd(s)&&s.stack==="normalize"&&o.normalizedNumberFormatType)return Object.assign({text:ho({fieldOrDatumDef:s,field:"datum.value",format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,config:o})},n);if(o.numberFormatType)return Object.assign({text:ho({fieldOrDatumDef:s,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o})},n)}if(ud(s)==="temporal"&&o.timeFormatType&&se(s)&&!s.timeUnit)return Object.assign({text:ho({fieldOrDatumDef:s,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})},n)}return n}function _we(e){return Os.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Mwe(n,e)]),t),{})}const Awe={bottom:"top",top:"bottom",left:"right",right:"left"};function Cwe(e){var t;const{axes:n,resolve:r}=e.component,i={top:0,bottom:0,right:0,left:0};for(const o of e.children){o.parseAxesAndHeaders();for(const s of Z(o.component.axes))r.axis[s]=Vk(e.component.resolve,s),r.axis[s]==="shared"&&(n[s]=Twe(n[s],o.component.axes[s]),n[s]||(r.axis[s]="independent",delete n[s]))}for(const o of Os){for(const s of e.children)if(!!s.component.axes[o]){if(r.axis[o]==="independent"){n[o]=((t=n[o])!==null&&t!==void 0?t:[]).concat(s.component.axes[o]);for(const a of s.component.axes[o]){const{value:l,explicit:u}=a.getWithExplicit("orient");if(!_e(l)){if(i[l]>0&&!u){const c=Awe[l];i[l]>i[c]&&a.set("orient",c,!1)}i[l]++}}}delete s.component.axes[o]}if(r.axis[o]==="independent"&&n[o]&&n[o].length>1)for(const s of n[o])!!s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function Twe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const s=i.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[r]=kwe(i,o)}}}else return t.map(n=>n.clone());return e}function kwe(e,t){for(const n of nH){const r=Cl(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return xz(i,o);case"gridScale":return{explicit:i.explicit,value:fn(i.value,o.value)}}return Zb(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function Fwe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(_e(n.labelAngle)?n.labelAngle:ip(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===wU(r,i))return!0}return e===n[t]}const Dwe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Mwe(e,t){var n,r,i;let o=t.axis(e);const s=new tF,a=vn(t.encoding[e]),{mark:l,config:u}=t,c=(o==null?void 0:o.orient)||((n=u[e==="x"?"axisX":"axisY"])===null||n===void 0?void 0:n.orient)||((r=u.axis)===null||r===void 0?void 0:r.orient)||fxe(e),f=t.getScaleComponent(e).get("type"),d=ixe(e,f,c,t.config),h=o!==void 0?!o:NS("disable",u.style,o==null?void 0:o.style,d).configValue;if(s.set("disable",h,o!==void 0),h)return s;o=o||{};const g=lxe(a,o,e,u.style,d),p={fieldOrDatumDef:a,axis:o,channel:e,model:t,scaleType:f,orient:c,labelAngle:g,mark:l,config:u};for(const v of nH){const b=v in NN?NN[v](p):cN(v)?o[v]:void 0,x=b!==void 0,w=Fwe(b,v,o,t,e);if(x&&w)s.set(v,b,w);else{const{configValue:S=void 0,configFrom:E=void 0}=cN(v)&&v!=="values"?NS(v,u.style,o.style,d):{},O=S!==void 0;x&&!O?s.set(v,b,w):(E!=="vgAxisConfig"||Dwe.has(v)&&O||lm(S)||_e(S))&&s.set(v,S,!1)}}const m=(i=o.encoding)!==null&&i!==void 0?i:{},y=fB.reduce((v,b)=>{var x;if(!s.hasAxisPart(b))return v;const w=CU((x=m[b])!==null&&x!==void 0?x:{},t),S=b==="labels"?Owe(t,e,w):w;return S!==void 0&&!Tt(S)&&(v[b]={update:S}),v},{});return Tt(y)||s.set("encode",y,!!o.encoding||o.labelAngle!==void 0),s}function $we({encoding:e,size:t}){for(const n of Os){const r=qr(n);fs(t[r])&&Vo(e[n])&&(delete t[r],te(_z(r)))}return t}function Nwe(e,t,n){const r=Rr(e),i=_t("orient",r,n);if(r.orient=jwe(r.type,t,i),i!==void 0&&i!==r.orient&&te(H0e(r.orient,i)),r.type==="bar"&&r.orient){const a=_t("cornerRadiusEnd",r,n);if(a!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:lve[r.orient];for(const u of l)r[u]=a;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}return _t("opacity",r,n)===void 0&&(r.opacity=Pwe(r.type,t)),_t("cursor",r,n)===void 0&&(r.cursor=Rwe(r,t,n)),r}function Rwe(e,t,n){return t.href||e.href||_t("href",e,n)?"pointer":e.cursor}function Pwe(e,t){if(ct([Bb,dk,hk,gk],e)&&!Ok(t))return .7}function Iwe(e,t,{graticule:n}){if(n)return!1;const r=dc("filled",e,t),i=e.type;return fn(r,i!==Bb&&i!==zb&&i!==Fv)}function jwe(e,t,n){switch(e){case Bb:case hk:case gk:case Hz:case Zye:case Jye:return}const{x:r,y:i,x2:o,y2:s}=t;switch(e){case Lb:if(se(r)&&(br(r.bin)||se(i)&&i.aggregate&&!r.aggregate))return"vertical";if(se(i)&&(br(i.bin)||se(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o&&(se(r)&&r.type===hc&&!Lt(r.bin)||SS(r)))return"horizontal";if(!s&&(se(i)&&i.type===hc&&!Lt(i.bin)||SS(i)))return"vertical"}case Fv:if(o&&!(se(r)&&br(r.bin))&&s&&!(se(i)&&br(i.bin)))return;case jb:if(s)return se(i)&&br(i.bin)?"horizontal":"vertical";if(o)return se(r)&&br(r.bin)?"vertical":"horizontal";if(e===Fv){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case zb:case dk:{const a=Vo(r),l=Vo(i);if(n)return n;if(a&&!l)return e!=="tick"?"horizontal":"vertical";if(!a&&l)return e!=="tick"?"vertical":"horizontal";if(a&&l){const u=r,c=i,f=u.type===ad,d=c.type===ad;return f&&!d?e!=="tick"?"vertical":"horizontal":!f&&d?e!=="tick"?"horizontal":"vertical":!u.aggregate&&c.aggregate?e!=="tick"?"vertical":"horizontal":u.aggregate&&!c.aggregate&&e!=="tick"?"horizontal":"vertical"}else return}}return"vertical"}const Lwe={vgMark:"arc",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Hi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Qn("x",e,{defaultPos:"mid"})),Qn("y",e,{defaultPos:"mid"})),kl(e,"radius")),kl(e,"theta"))},zwe={vgMark:"area",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},Hi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),jv("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"})),jv("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"})),Bk(e))},Bwe={vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},Hi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),kl(e,"x")),kl(e,"y"))},Uwe={vgMark:"shape",encodeEntry:e=>Object.assign({},Hi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[Object.assign({type:"geoshape",projection:e.projectionName()},n&&se(n)&&n.type===Ld?{field:ue(n,{expr:"datum"})}:{})]}},Hwe={vgMark:"image",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},Hi(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),kl(e,"x")),kl(e,"y")),Lk(e,"url"))},Wwe={vgMark:"line",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Hi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Qn("x",e,{defaultPos:"mid"})),Qn("y",e,{defaultPos:"mid"})),On("size",e,{vgChannel:"strokeWidth"})),Bk(e))},Gwe={vgMark:"trail",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Hi(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Qn("x",e,{defaultPos:"mid"})),Qn("y",e,{defaultPos:"mid"})),On("size",e)),Bk(e))};function nF(e,t){const{config:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Hi(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Qn("x",e,{defaultPos:"mid"})),Qn("y",e,{defaultPos:"mid"})),On("size",e)),On("angle",e)),Vwe(e,n,t))}function Vwe(e,t,n){return n?{shape:{value:n}}:On("shape",e)}const Ywe={vgMark:"symbol",encodeEntry:e=>nF(e)},Xwe={vgMark:"symbol",encodeEntry:e=>nF(e,"circle")},qwe={vgMark:"symbol",encodeEntry:e=>nF(e,"square")},Kwe={vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},Hi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),kl(e,"x")),kl(e,"y"))},Jwe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:Object.assign(Object.assign(Object.assign(Object.assign({},Hi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),jv("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"})),jv("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"})),On("size",e,{vgChannel:"strokeWidth"}))}},Zwe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Hi(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),Qn("x",e,{defaultPos:"mid"})),Qn("y",e,{defaultPos:"mid"})),Lk(e)),On("size",e,{vgChannel:"fontSize"})),On("angle",e)),FN("align",Qwe(e.markDef,n,t))),FN("baseline",eEe(e.markDef,n,t))),Qn("radius",e,{defaultPos:null})),Qn("theta",e,{defaultPos:null}))}};function Qwe(e,t,n){if(_t("align",e,n)===void 0)return"center"}function eEe(e,t,n){if(_t("baseline",e,n)===void 0)return"middle"}const tEe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",o=r==="horizontal"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Hi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Qn("x",e,{defaultPos:"mid",vgChannel:"xc"})),Qn("y",e,{defaultPos:"mid",vgChannel:"yc"})),On("size",e,{defaultValue:nEe(e),vgChannel:i})),{[o]:Bt(_t("thickness",n,t))})}};function nEe(e){var t;const{config:n,markDef:r}=e,{orient:i}=r,o=i==="horizontal"?"width":"height",s=e.getScaleComponent(i==="horizontal"?"x":"y"),a=(t=_t("size",r,n,{vgChannel:o}))!==null&&t!==void 0?t:n.tick.bandSize;if(a!==void 0)return a;{const l=s?s.get("range"):void 0;return l&&Xl(l)&&kt(l.step)?l.step*3/4:Pv(n.view,o)*3/4}}const o0={arc:Lwe,area:zwe,bar:Bwe,circle:Xwe,geoshape:Uwe,image:Hwe,line:Wwe,point:Ywe,rect:Kwe,rule:Jwe,square:qwe,text:Zwe,tick:tEe,trail:Gwe};function rEe(e){if(ct([zb,jb,Qye],e.mark)){const t=mB(e.mark,e.encoding);if(t.length>0)return iEe(e,t)}else if(e.mark===Lb){const t=yS.some(n=>_t(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return oEe(e)}return rF(e)}const KN="faceted_path_";function iEe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:KN+e.requestDataName(It.Main),data:e.requestDataName(It.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:rF(e,{fromPrefix:KN})}]}const JN="stack_group_";function oEe(e){var t;const[n]=rF(e,{fromPrefix:JN}),r=e.scaleName(e.stack.fieldChannel),i=(c={})=>e.vgField(e.stack.fieldChannel,c),o=(c,f)=>{const d=[i({prefix:"min",suffix:"start",expr:f}),i({prefix:"max",suffix:"start",expr:f}),i({prefix:"min",suffix:"end",expr:f}),i({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${r}',${h})`).join(",")})`};let s,a;e.stack.fieldChannel==="x"?(s=Object.assign(Object.assign({},id(n.encode.update,["y","yc","y2","height",...yS])),{x:{signal:o("min","datum")},x2:{signal:o("max","datum")},clip:{value:!0}}),a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},n.encode.update=Object.assign(Object.assign({},di(n.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(s=Object.assign(Object.assign({},id(n.encode.update,["x","xc","x2","width"])),{y:{signal:o("min","datum")},y2:{signal:o("max","datum")},clip:{value:!0}}),a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},n.encode.update=Object.assign(Object.assign({},di(n.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(const c of yS){const f=dc(c,e.markDef,e.config);n.encode.update[c]?(s[c]=n.encode.update[c],delete n.encode.update[c]):f&&(s[c]=Bt(f)),f&&(n.encode.update[c]={value:0})}const l=[];if(((t=e.stack.groupbyChannels)===null||t===void 0?void 0:t.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=ue(f);d&&l.push(d),((f==null?void 0:f.bin)||(f==null?void 0:f.timeUnit))&&l.push(ue(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(n.encode.update[f])return Object.assign(Object.assign({},c),{[f]:n.encode.update[f]});{const d=dc(f,e.markDef,e.config);return d!==void 0?Object.assign(Object.assign({},c),{[f]:Bt(d)}):c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(It.Main),name:JN+e.requestDataName(It.Main),groupby:l,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:a},marks:[n]}]}]}function sEe(e){var t;const{encoding:n,stack:r,mark:i,markDef:o,config:s}=e,a=n.order;if(!(!X(a)&&So(a)&&pS(a.value)||!a&&pS(_t("order",o,s)))){if((X(a)||se(a))&&!r)return yz(a,{expr:"datum"});if(ql(i)){const l=o.orient==="horizontal"?"y":"x",u=n[l];if(se(u)){const c=u.sort;if(X(c))return{field:ue(u,{prefix:l,suffix:"sort_index",expr:"datum"})};if(Qo(c))return{field:ue({aggregate:Ok(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(Qz(c)){const f=e.fieldDef(c.encoding);return{field:ue(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:ue(u,{binSuffix:!((t=e.stack)===null||t===void 0)&&t.impute?"mid":void 0,expr:"datum"})}}return}}}function rF(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,s=fn(r.clip,aEe(e),lEe(e)),a=pz(r),l=i.key,u=sEe(e),c=uEe(e),f=_t("aria",r,o),d=o0[n].postEncodingTransform?o0[n].postEncodingTransform(e):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName("marks"),type:o0[n].vgMark},s?{clip:!0}:{}),a?{style:a}:{}),l?{key:l.field}:{}),u?{sort:u}:{}),c||{}),f===!1?{aria:f}:{}),{from:{data:t.fromPrefix+e.requestDataName(It.Main)},encode:{update:o0[n].encodeEntry(e)}}),d?{transform:d}:{})]}function aEe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return(t==null?void 0:t.get("selectionExtent"))||(n==null?void 0:n.get("selectionExtent"))?!0:void 0}function lEe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function uEe(e){if(!e.component.selection)return null;const t=Z(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Z(r.component.selection).length,r=r.parent;return n?{interactive:t>0||!!e.encoding.tooltip}:null}class rH extends ZU{constructor(t,n,r,i={},o){var s;super(t,"unit",n,r,o,void 0,hN(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const a=ls(t.mark)?Object.assign({},t.mark):{type:t.mark},l=a.type;a.filled===void 0&&(a.filled=Iwe(a,o,{graticule:t.data&&Ik(t.data)}));const u=this.encoding=Lve(t.encoding||{},l,a.filled,o);this.markDef=Nwe(a,u,o),this.size=$we({encoding:u,size:hN(t)?Object.assign(Object.assign(Object.assign({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):i}),this.stack=IB(l,u),this.specifiedScales=this.initScales(l,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=((s=t.params)!==null&&s!==void 0?s:[]).filter(c=>Mk(c))}get hasProjection(){const{encoding:t}=this,n=this.mark===Wz,r=t&&Rme.some(i=>Ve(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return Rb.reduce((r,i)=>{var o;const s=vn(n[i]);return s&&(r[i]=this.initScale((o=s.scale)!==null&&o!==void 0?o:{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Rr(t);return X(n)&&(i.domain=n.map(ai)),X(r)&&(i.range=r.map(ai)),i}initAxes(t){return Os.reduce((n,r)=>{const i=t[r];if(Ve(i)||r===Jt&&Ve(t.x2)||r===Fn&&Ve(t.y2)){const o=Ve(i)?i.axis:void 0;n[r]=o&&this.initAxis(Object.assign({},o))}return n},{})}initAxis(t){const n=Z(t),r={};for(const i of n){const o=t[i];r[i]=lm(o)?gz(o):ai(o)}return r}initLegends(t){return Gme.reduce((n,r)=>{const i=vn(t[r]);if(i&&Yme(r)){const o=i.legend;n[r]=o&&Rr(o)}return n},{})}parseData(){this.component.data=dx(this)}parseLayoutSize(){mwe(this)}parseSelections(){this.component.selection=exe(this,this.selection)}parseMarkGroup(){this.component.mark=rEe(this)}parseAxesAndHeaders(){this.component.axes=_we(this)}assembleSelectionTopLevelSignals(t){return wbe(this,t)}assembleSignals(){return[...vU(this),...bbe(this,[])]}assembleSelectionData(t){return Ebe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Gk(this)}assembleMarks(){var t;let n=(t=this.component.mark)!==null&&t!==void 0?t:[];return(!this.parent||!Wd(this.parent))&&(n=JB(this,n)),n.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};if(t!==void 0)return t;if(this.encoding.x||this.encoding.y)return"cell"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Wu(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return us(n)}typedFieldDef(t){const n=this.fieldDef(t);return Li(n)?n:null}}class iF extends Qk{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);const s=Object.assign(Object.assign(Object.assign({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});this.children=t.layer.map((a,l)=>{if(Jb(a))return new iF(a,this,this.getName(`layer_${l}`),s,o);if(da(a))return new rH(a,this,this.getName(`layer_${l}`),s,o);throw new Error(KT(a))})}parseData(){this.component.data=dx(this);for(const t of this.children)t.parseData()}parseLayoutSize(){gwe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Z(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Cwe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),vU(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Gk(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of pe(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Sbe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),RU(this))}}function oF(e,t,n,r,i){if(Hb(e))return new xg(e,t,n,i);if(Jb(e))return new iF(e,t,n,r,i);if(da(e))return new rH(e,t,n,r,i);if(c1e(e))return new wwe(e,t,n,i);throw new Error(KT(e))}var cEe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function fEe(e,t={}){t.logger&&gye(t.logger),t.fieldTitle&&lB(t.fieldTitle);try{const n=PB(Ed(t.config,e.config)),r=VB(e,n),i=oF(r,null,"",void 0,n);return i.parse(),S2e(i.component.data,i),{spec:hEe(i,dEe(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&pye(),t.fieldTitle&&kve()}}function dEe(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):de(t)&&(t={type:t}),i&&o&&gbe(t.type)){if(i==="step"&&o==="step")te(J3()),t.type="pad";else if(i==="step"||o==="step"){const s=i==="step"?"width":"height";te(J3(Nb(s)));const a=s==="width"?"height":"width";t.type=pbe(a)}}return Object.assign(Object.assign(Object.assign({},Z(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t}),_N(n,!1)),_N(e,!0))}function hEe(e,t,n={},r){const i=e.config?_1e(e.config):void 0,o=[].concat(e.assembleSelectionData([]),cwe(e.component.data,n)),s=e.assembleProjections(),a=e.assembleTitle(),l=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f}=t,d=cEe(t,["params"]);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),d),a?{title:a}:{}),l?{style:l}:{}),u?{encode:{update:u}}:{}),{data:o}),s.length>0?{projections:s}:{}),e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...MB(f)])),i?{config:i}:{}),r?{usermeta:r}:{})}const gEe=_me.version,pEe=Object.freeze(Object.defineProperty({__proto__:null,version:gEe,compile:fEe,normalize:VB,deepEqual:Wo,duplicate:Xe,never:V9,pick:id,omit:di,stringify:jt,hash:ut,isNullOrFalse:pS,contains:ct,some:uc,every:IT,mergeDeep:Y9,unique:Go,isEqual:kme,setEqual:X9,hasIntersection:jT,prefixGenerator:mS,fieldIntersection:LT,isEmpty:Tt,keys:Z,vals:sr,entries:_l,isBoolean:rp,varName:Vt,logicalExpr:vg,deleteNestedProperty:Cv,titleCase:Jp,accessPathWithDatum:zT,flatAccessWithDatum:q9,replacePathInField:Ii,replaceAll:cc,removePathFromField:BT,accessPathDepth:od,getFirstDefined:fn,uniqueId:J9,resetIdCounter:Dme,internalField:Z9,isInternalField:Q9,normalizeAngle:ip,isNumeric:Tb},Symbol.toStringTag,{value:"Module"}));function iH(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var mEe="vega-themes",yEe="2.10.0",vEe="Themes for stylized Vega and Vega-Lite visualizations.",bEe=["vega","vega-lite","themes","style"],xEe="BSD-3-Clause",wEe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},EEe=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],SEe="build/vega-themes.js",sF="build/vega-themes.module.js",OEe="build/vega-themes.min.js",_Ee="build/vega-themes.min.js",AEe="build/vega-themes.module.d.ts",CEe={type:"git",url:"https://github.com/vega/vega-themes.git"},TEe=["src","build"],kEe={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",prepare:"beemo create-config",eslintbase:"beemo eslint .",format:"yarn eslintbase --fix",lint:"yarn eslintbase",release:"auto shipit"},FEe={"@auto-it/conventional-commits":"^10.32.2","@auto-it/first-time-contributor":"^10.32.2","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^13.0.6","rollup-plugin-ts":"^1.4.7",auto:"^10.32.2","browser-sync":"^2.27.7",concurrently:"^6.4.0","gh-pages":"^3.2.3",rollup:"^2.60.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-terser":"^7.0.2",typescript:"^4.4.4",vega:"^5.19.1","vega-lite":"^5.0.0","vega-lite-dev-config":"^0.20.0"},DEe={vega:"*","vega-lite":"*"},MEe={name:mEe,version:yEe,description:vEe,keywords:bEe,license:xEe,author:wEe,contributors:EEe,main:SEe,module:sF,unpkg:OEe,jsdelivr:_Ee,types:AEe,repository:CEe,files:TEe,scripts:kEe,devDependencies:FEe,peerDependencies:DEe};const Jc="#fff",$Ee="#888",NEe={background:"#333",title:{color:Jc,subtitleColor:Jc},style:{"guide-label":{fill:Jc},"guide-title":{fill:Jc}},axis:{domainColor:Jc,gridColor:$Ee,tickColor:Jc}},nu="#4572a7",REe={background:"#fff",arc:{fill:nu},area:{fill:nu},line:{stroke:nu,strokeWidth:2},path:{stroke:nu},rect:{fill:nu},shape:{stroke:nu},symbol:{fill:nu,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},ru="#30a2da",U2="#cbcbcb",PEe="#999",IEe="#333",ZN="#f0f0f0",QN="#333",jEe={arc:{fill:ru},area:{fill:ru},axis:{domainColor:U2,grid:!0,gridColor:U2,gridWidth:1,labelColor:PEe,labelFontSize:10,titleColor:IEe,tickColor:U2,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:ZN,group:{fill:ZN},legend:{labelColor:QN,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:QN,titleFontSize:14,titlePadding:10},line:{stroke:ru,strokeWidth:2},path:{stroke:ru,strokeWidth:.5},rect:{fill:ru},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:ru},bar:{binSpacing:2,fill:ru,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},iu="#000",LEe={group:{fill:"#e5e5e5"},arc:{fill:iu},area:{fill:iu},line:{stroke:iu},path:{stroke:iu},rect:{fill:iu},shape:{stroke:iu},symbol:{fill:iu,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},zEe=22,BEe="normal",eR="Benton Gothic, sans-serif",tR=11.5,UEe="normal",ou="#82c6df",H2="Benton Gothic Bold, sans-serif",nR="normal",rR=13,mh={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},HEe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:H2,fontSize:zEe,fontWeight:BEe},arc:{fill:ou},area:{fill:ou},line:{stroke:ou,strokeWidth:2},path:{stroke:ou},rect:{fill:ou},shape:{stroke:ou},symbol:{fill:ou,size:30},axis:{labelFont:eR,labelFontSize:tR,labelFontWeight:UEe,titleFont:H2,titleFontSize:rR,titleFontWeight:nR},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:eR,labelFontSize:tR,symbolType:"square",titleFont:H2,titleFontSize:rR,titleFontWeight:nR},range:{category:mh["category-6"],diverging:mh["fireandice-6"],heatmap:mh["fire-7"],ordinal:mh["fire-7"],ramp:mh["fire-7"]}},su="#ab5787",s0="#979797",WEe={background:"#f9f9f9",arc:{fill:su},area:{fill:su},line:{stroke:su},path:{stroke:su},rect:{fill:su},shape:{stroke:su},symbol:{fill:su,size:30},axis:{domainColor:s0,domainWidth:.5,gridWidth:.2,labelColor:s0,tickColor:s0,tickWidth:.2,titleColor:s0},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},au="#3e5c69",GEe={background:"#fff",arc:{fill:au},area:{fill:au},line:{stroke:au},path:{stroke:au},rect:{fill:au},shape:{stroke:au},symbol:{fill:au},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Ei="#1696d2",iR="#000000",VEe="#FFFFFF",a0="Lato",W2="Lato",YEe="Lato",XEe="#DEDDDD",qEe=18,yh={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},KEe={background:VEe,title:{anchor:"start",fontSize:qEe,font:a0},axisX:{domain:!0,domainColor:iR,domainWidth:1,grid:!1,labelFontSize:12,labelFont:W2,labelAngle:0,tickColor:iR,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:a0},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:XEe,gridWidth:1,labelFontSize:12,labelFont:W2,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:a0,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:W2,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:a0,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:yh["six-groups-cat-1"],diverging:yh["diverging-colors"],heatmap:yh["diverging-colors"],ordinal:yh["six-groups-seq"],ramp:yh["shades-blue"]},area:{fill:Ei},rect:{fill:Ei},line:{color:Ei,stroke:Ei,strokeWidth:5},trail:{color:Ei,stroke:Ei,strokeWidth:0,size:1},path:{stroke:Ei,strokeWidth:.5},point:{filled:!0},text:{font:YEe,color:Ei,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Ei,stroke:null}},arc:{fill:Ei},shape:{stroke:Ei},symbol:{fill:Ei,size:30}},lu="#3366CC",oR="#ccc",l0="Arial, sans-serif",JEe={arc:{fill:lu},area:{fill:lu},path:{stroke:lu},rect:{fill:lu},shape:{stroke:lu},symbol:{stroke:lu},circle:{fill:lu},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:l0,fontSize:12},"guide-title":{font:l0,fontSize:12},"group-title":{font:l0,fontSize:12}},title:{font:l0,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:oR,tickColor:oR,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},aF=e=>e*(1/3+1),sR=aF(9),aR=aF(10),lR=aF(12),vh="Segoe UI",uR="wf_standard-font, helvetica, arial, sans-serif",cR="#252423",bh="#605E5C",fR="transparent",ZEe="#C8C6C4",qi="#118DFF",QEe="#12239E",eSe="#E66C37",tSe="#6B007B",nSe="#E044A7",rSe="#744EC2",iSe="#D9B300",oSe="#D64550",oH=qi,sH="#DEEFFF",dR=[sH,oH],sSe=[sH,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",oH],aSe={view:{stroke:fR},background:fR,font:vh,header:{titleFont:uR,titleFontSize:lR,titleColor:cR,labelFont:vh,labelFontSize:aR,labelColor:bh},axis:{ticks:!1,grid:!1,domain:!1,labelColor:bh,labelFontSize:sR,titleFont:uR,titleColor:cR,titleFontSize:lR,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:ZEe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:qi},line:{stroke:qi,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:vh,fontSize:sR,fill:bh},arc:{fill:qi},area:{fill:qi,line:!0,opacity:.6},path:{stroke:qi},rect:{fill:qi},point:{fill:qi,filled:!0,size:75},shape:{stroke:qi},symbol:{fill:qi,strokeWidth:1.5,size:50},legend:{titleFont:vh,titleFontWeight:"bold",titleColor:bh,labelFont:vh,labelFontSize:aR,labelColor:bh,symbolType:"circle",symbolSize:75},range:{category:[qi,QEe,eSe,tSe,nSe,rSe,iSe,oSe],diverging:dR,heatmap:dR,ordinal:sSe}},lSe=MEe.version,uSe=Object.freeze(Object.defineProperty({__proto__:null,dark:NEe,excel:REe,fivethirtyeight:jEe,ggplot2:LEe,googlecharts:JEe,latimes:HEe,powerbi:aSe,quartz:WEe,urbaninstitute:KEe,version:lSe,vox:GEe},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function cSe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function fSe(e,t,n){if(X(e))return`[${e.map(r=>t(de(r)?r:hR(r,n))).join(", ")}]`;if(me(e)){let r="";const i=e,{title:o,image:s}=i,a=cSe(i,["title","image"]);o&&(r+=`<h2>${t(o)}</h2>`),s&&(r+=`<img src="${t(s)}">`);const l=Object.keys(a);if(l.length>0){r+="<table>";for(const u of l){let c=a[u];c!==void 0&&(me(c)&&(c=hR(c,n)),r+=`<tr><td class="key">${t(u)}:</td><td class="value">${t(c)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function dSe(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function hR(e,t){return JSON.stringify(e,dSe(t))}var hSe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element img {
  max-width: 200px;
  max-height: 200px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const aH="vg-tooltip-element",gSe={offsetX:10,offsetY:10,id:aH,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:pSe,maxDepth:2,formatTooltip:fSe};function pSe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function mSe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return hSe.toString().replace(aH,e)}function ySe(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}class vSe{constructor(t){this.options=Object.assign(Object.assign({},gSe),t);const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=mSe(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){var o;if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),((o=document.fullscreenElement)!==null&&o!==void 0?o:document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:a}=ySe(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${a}px; left: ${s}px`)}}function bSe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gR(e,t,n,r,i,o,s){try{var a=e[o](s),l=a.value}catch(u){n(u);return}a.done?t(l):Promise.resolve(l).then(r,i)}function Uv(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(l){gR(o,r,i,s,a,"next",l)}function a(l){gR(o,r,i,s,a,"throw",l)}s(void 0)})}}var lH=Object.prototype,Du=lH.hasOwnProperty,Ho,lF=typeof Symbol=="function"?Symbol:{},hx=lF.iterator||"@@iterator",xSe=lF.asyncIterator||"@@asyncIterator",Hv=lF.toStringTag||"@@toStringTag";function uH(e,t,n,r){var i=t&&t.prototype instanceof HS?t:HS,o=Object.create(i.prototype),s=new WS(r||[]);return o._invoke=_Se(e,n,s),o}function uF(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}var pR="suspendedStart",wSe="suspendedYield",mR="executing",u0="completed",ao={};function HS(){}function gx(){}function yd(){}var cF={};cF[hx]=function(){return this};var G2=Object.getPrototypeOf,c0=G2&&G2(G2(fF([])));c0&&c0!==lH&&Du.call(c0,hx)&&(cF=c0);var Gd=yd.prototype=HS.prototype=Object.create(cF);gx.prototype=Gd.constructor=yd;yd.constructor=gx;yd[Hv]=gx.displayName="GeneratorFunction";function cH(e){["next","throw","return"].forEach(function(t){e[t]=function(n){return this._invoke(t,n)}})}function fH(e){var t=typeof e=="function"&&e.constructor;return t?t===gx||(t.displayName||t.name)==="GeneratorFunction":!1}function ESe(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,yd):(e.__proto__=yd,Hv in e||(e[Hv]="GeneratorFunction")),e.prototype=Object.create(Gd),e}function SSe(e){return{__await:e}}function px(e,t){function n(o,s,a,l){var u=uF(e[o],e,s);if(u.type==="throw")l(u.arg);else{var c=u.arg,f=c.value;return f&&typeof f=="object"&&Du.call(f,"__await")?t.resolve(f.__await).then(function(d){n("next",d,a,l)},function(d){n("throw",d,a,l)}):t.resolve(f).then(function(d){c.value=d,a(c)},function(d){return n("throw",d,a,l)})}}var r;function i(o,s){function a(){return new t(function(l,u){n(o,s,l,u)})}return r=r?r.then(a,a):a()}this._invoke=i}cH(px.prototype);px.prototype[xSe]=function(){return this};function OSe(e,t,n,r,i){i===void 0&&(i=Promise);var o=new px(uH(e,t,n,r),i);return fH(t)?o:o.next().then(function(s){return s.done?s.value:o.next()})}function _Se(e,t,n){var r=pR;return function(o,s){if(r===mR)throw new Error("Generator is already running");if(r===u0){if(o==="throw")throw s;return hH()}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var l=dH(a,n);if(l){if(l===ao)continue;return l}}if(n.method==="next")n.sent=n._sent=n.arg;else if(n.method==="throw"){if(r===pR)throw r=u0,n.arg;n.dispatchException(n.arg)}else n.method==="return"&&n.abrupt("return",n.arg);r=mR;var u=uF(e,t,n);if(u.type==="normal"){if(r=n.done?u0:wSe,u.arg===ao)continue;return{value:u.arg,done:n.done}}else u.type==="throw"&&(r=u0,n.method="throw",n.arg=u.arg)}}}function dH(e,t){var n=e.iterator[t.method];if(n===Ho){if(t.delegate=null,t.method==="throw"){if(e.iterator.return&&(t.method="return",t.arg=Ho,dH(e,t),t.method==="throw"))return ao;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return ao}var r=uF(n,e.iterator,t.arg);if(r.type==="throw")return t.method="throw",t.arg=r.arg,t.delegate=null,ao;var i=r.arg;if(!i)return t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,ao;if(i.done)t[e.resultName]=i.value,t.next=e.nextLoc,t.method!=="return"&&(t.method="next",t.arg=Ho);else return i;return t.delegate=null,ao}cH(Gd);Gd[Hv]="Generator";Gd[hx]=function(){return this};Gd.toString=function(){return"[object Generator]"};function ASe(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function V2(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function WS(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(ASe,this),this.reset(!0)}function CSe(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function r(){for(;t.length;){var i=t.pop();if(i in e)return r.value=i,r.done=!1,r}return r.done=!0,r}}function fF(e){if(e){var t=e[hx];if(t)return t.call(e);if(typeof e.next=="function")return e;if(!isNaN(e.length)){var n=-1,r=function i(){for(;++n<e.length;)if(Du.call(e,n))return i.value=e[n],i.done=!1,i;return i.value=Ho,i.done=!0,i};return r.next=r}}return{next:hH}}function hH(){return{value:Ho,done:!0}}WS.prototype={constructor:WS,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=Ho,this.done=!1,this.delegate=null,this.method="next",this.arg=Ho,this.tryEntries.forEach(V2),!t)for(var n in this)n.charAt(0)==="t"&&Du.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=Ho)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if(n.type==="throw")throw n.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(u,c){return s.type="throw",s.arg=t,n.next=u,c&&(n.method="next",n.arg=Ho),!!c}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if(o.tryLoc==="root")return r("end");if(o.tryLoc<=this.prev){var a=Du.call(o,"catchLoc"),l=Du.call(o,"finallyLoc");if(a&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else if(l){if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&Du.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&(t==="break"||t==="continue")&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=n,o?(this.method="next",this.next=o.finallyLoc,ao):this.complete(s)},complete:function(t,n){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&n&&(this.next=n),ao},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),V2(r),ao}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var i=r.completion;if(i.type==="throw"){var o=i.arg;V2(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:fF(t),resultName:n,nextLoc:r},this.method==="next"&&(this.arg=Ho),ao}};var Yo={wrap:uH,isGeneratorFunction:fH,AsyncIterator:px,mark:ESe,awrap:SSe,async:OSe,keys:CSe,values:fF},TSe=wt;wt.Node=bc;wt.create=wt;function wt(e){var t=this;if(t instanceof wt||(t=new wt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}wt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};wt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};wt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};wt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)FSe(this,arguments[e]);return this.length};wt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)DSe(this,arguments[e]);return this.length};wt.prototype.pop=function(){if(!!this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};wt.prototype.shift=function(){if(!!this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};wt.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};wt.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};wt.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};wt.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};wt.prototype.map=function(e,t){t=t||this;for(var n=new wt,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};wt.prototype.mapReverse=function(e,t){t=t||this;for(var n=new wt,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};wt.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};wt.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};wt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};wt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};wt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new wt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};wt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new wt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};wt.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,r=this.head;r!==null&&n<e;n++)r=r.next;for(var i=[],n=0;r&&n<t;n++)i.push(r.value),r=this.removeNode(r);r===null&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(var n=0;n<(arguments.length<=2?0:arguments.length-2);n++)r=kSe(this,r,n+2<2||arguments.length<=n+2?void 0:arguments[n+2]);return i};wt.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function kSe(e,t,n){var r=t===e.head?new bc(n,null,t,e):new bc(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function FSe(e,t){e.tail=new bc(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function DSe(e,t){e.head=new bc(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function bc(e,t,n,r){if(!(this instanceof bc))return new bc(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{wt.prototype[Symbol.iterator]=Yo.mark(function e(){var t;return Yo.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:t=this.head;case 1:if(!t){r.next=7;break}return r.next=4,t.value;case 4:t=t.next,r.next=1;break;case 7:case"end":return r.stop()}},e,this)})}catch{}var MSe=TSe,Su=Symbol("max"),Is=Symbol("length"),Zc=Symbol("lengthCalculator"),wg=Symbol("allowStale"),Mu=Symbol("maxAge"),$s=Symbol("dispose"),yR=Symbol("noDisposeOnSet"),wn=Symbol("lruList"),Ki=Symbol("cache"),gH=Symbol("updateAgeOnGet"),Y2=()=>1;class $Se{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Su]=t.max||1/0;var n=t.length||Y2;if(this[Zc]=typeof n!="function"?Y2:n,this[wg]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Mu]=t.maxAge||0,this[$s]=t.dispose,this[yR]=t.noDisposeOnSet||!1,this[gH]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Su]=t||1/0,xh(this)}get max(){return this[Su]}set allowStale(t){this[wg]=!!t}get allowStale(){return this[wg]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Mu]=t,xh(this)}get maxAge(){return this[Mu]}set lengthCalculator(t){typeof t!="function"&&(t=Y2),t!==this[Zc]&&(this[Zc]=t,this[Is]=0,this[wn].forEach(n=>{n.length=this[Zc](n.value,n.key),this[Is]+=n.length})),xh(this)}get lengthCalculator(){return this[Zc]}get length(){return this[Is]}get itemCount(){return this[wn].length}rforEach(t,n){n=n||this;for(var r=this[wn].tail;r!==null;){var i=r.prev;vR(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(var r=this[wn].head;r!==null;){var i=r.next;vR(this,t,r,n),r=i}}keys(){return this[wn].toArray().map(t=>t.key)}values(){return this[wn].toArray().map(t=>t.value)}reset(){this[$s]&&this[wn]&&this[wn].length&&this[wn].forEach(t=>this[$s](t.key,t.value)),this[Ki]=new Map,this[wn]=new MSe,this[Is]=0}dump(){return this[wn].map(t=>Wv(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[wn]}set(t,n,r){if(r=r||this[Mu],r&&typeof r!="number")throw new TypeError("maxAge must be a number");var i=r?Date.now():0,o=this[Zc](n,t);if(this[Ki].has(t)){if(o>this[Su])return Mf(this,this[Ki].get(t)),!1;var s=this[Ki].get(t),a=s.value;return this[$s]&&(this[yR]||this[$s](t,a.value)),a.now=i,a.maxAge=r,a.value=n,this[Is]+=o-a.length,a.length=o,this.get(t),xh(this),!0}var l=new NSe(t,n,o,i,r);return l.length>this[Su]?(this[$s]&&this[$s](t,n),!1):(this[Is]+=l.length,this[wn].unshift(l),this[Ki].set(t,this[wn].head),xh(this),!0)}has(t){if(!this[Ki].has(t))return!1;var n=this[Ki].get(t).value;return!Wv(this,n)}get(t){return X2(this,t,!0)}peek(t){return X2(this,t,!1)}pop(){var t=this[wn].tail;return t?(Mf(this,t),t.value):null}del(t){Mf(this,this[Ki].get(t))}load(t){this.reset();for(var n=Date.now(),r=t.length-1;r>=0;r--){var i=t[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{var s=o-n;s>0&&this.set(i.k,i.v,s)}}}prune(){this[Ki].forEach((t,n)=>X2(this,n,!1))}}var X2=(e,t,n)=>{var r=e[Ki].get(t);if(r){var i=r.value;if(Wv(e,i)){if(Mf(e,r),!e[wg])return}else n&&(e[gH]&&(r.value.now=Date.now()),e[wn].unshiftNode(r));return i.value}},Wv=(e,t)=>{if(!t||!t.maxAge&&!e[Mu])return!1;var n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Mu]&&n>e[Mu]},xh=e=>{if(e[Is]>e[Su])for(var t=e[wn].tail;e[Is]>e[Su]&&t!==null;){var n=t.prev;Mf(e,t),t=n}},Mf=(e,t)=>{if(t){var n=t.value;e[$s]&&e[$s](n.key,n.value),e[Is]-=n.length,e[Ki].delete(n.key),e[wn].removeNode(t)}};class NSe{constructor(t,n,r,i,o){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=o||0}}var vR=(e,t,n,r)=>{var i=n.value;Wv(e,i)&&(Mf(e,n),e[wg]||(i=void 0)),i&&t.call(r,i.value,i.key,e)},RSe=$Se,PSe=["includePrerelease","loose","rtl"],ISe=e=>e?typeof e!="object"?{loose:!0}:PSe.filter(t=>e[t]).reduce((t,n)=>(t[n]=!0,t),{}):{},dF=ISe,lo={exports:{}},jSe="2.0.0",LSe=256,zSe=Number.MAX_SAFE_INTEGER||9007199254740991,BSe=16,hF={SEMVER_SPEC_VERSION:jSe,MAX_LENGTH:LSe,MAX_SAFE_INTEGER:zSe,MAX_SAFE_COMPONENT_LENGTH:BSe},USe=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return console.error("SEMVER",...t)}:()=>{},mx=USe;(function(e,t){var n=hF.MAX_SAFE_COMPONENT_LENGTH,r=mx;t=e.exports={};var i=t.re=[],o=t.src=[],s=t.t={},a=0,l=(u,c,f)=>{var d=a++;r(u,d,c),s[u]=d,o[d]=c,i[d]=new RegExp(c,f?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION","(".concat(o[s.NUMERICIDENTIFIER],")\\.")+"(".concat(o[s.NUMERICIDENTIFIER],")\\.")+"(".concat(o[s.NUMERICIDENTIFIER],")")),l("MAINVERSIONLOOSE","(".concat(o[s.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(o[s.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(o[s.NUMERICIDENTIFIERLOOSE],")")),l("PRERELEASEIDENTIFIER","(?:".concat(o[s.NUMERICIDENTIFIER],"|").concat(o[s.NONNUMERICIDENTIFIER],")")),l("PRERELEASEIDENTIFIERLOOSE","(?:".concat(o[s.NUMERICIDENTIFIERLOOSE],"|").concat(o[s.NONNUMERICIDENTIFIER],")")),l("PRERELEASE","(?:-(".concat(o[s.PRERELEASEIDENTIFIER],"(?:\\.").concat(o[s.PRERELEASEIDENTIFIER],")*))")),l("PRERELEASELOOSE","(?:-?(".concat(o[s.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(o[s.PRERELEASEIDENTIFIERLOOSE],")*))")),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD","(?:\\+(".concat(o[s.BUILDIDENTIFIER],"(?:\\.").concat(o[s.BUILDIDENTIFIER],")*))")),l("FULLPLAIN","v?".concat(o[s.MAINVERSION]).concat(o[s.PRERELEASE],"?").concat(o[s.BUILD],"?")),l("FULL","^".concat(o[s.FULLPLAIN],"$")),l("LOOSEPLAIN","[v=\\s]*".concat(o[s.MAINVERSIONLOOSE]).concat(o[s.PRERELEASELOOSE],"?").concat(o[s.BUILD],"?")),l("LOOSE","^".concat(o[s.LOOSEPLAIN],"$")),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE","".concat(o[s.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),l("XRANGEIDENTIFIER","".concat(o[s.NUMERICIDENTIFIER],"|x|X|\\*")),l("XRANGEPLAIN","[v=\\s]*(".concat(o[s.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(o[s.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(o[s.XRANGEIDENTIFIER],")")+"(?:".concat(o[s.PRERELEASE],")?").concat(o[s.BUILD],"?")+")?)?"),l("XRANGEPLAINLOOSE","[v=\\s]*(".concat(o[s.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(o[s.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(o[s.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(o[s.PRERELEASELOOSE],")?").concat(o[s.BUILD],"?")+")?)?"),l("XRANGE","^".concat(o[s.GTLT],"\\s*").concat(o[s.XRANGEPLAIN],"$")),l("XRANGELOOSE","^".concat(o[s.GTLT],"\\s*").concat(o[s.XRANGEPLAINLOOSE],"$")),l("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(n,"})")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:$|[^\\d])"),l("COERCERTL",o[s.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM","(\\s*)".concat(o[s.LONETILDE],"\\s+"),!0),t.tildeTrimReplace="$1~",l("TILDE","^".concat(o[s.LONETILDE]).concat(o[s.XRANGEPLAIN],"$")),l("TILDELOOSE","^".concat(o[s.LONETILDE]).concat(o[s.XRANGEPLAINLOOSE],"$")),l("LONECARET","(?:\\^)"),l("CARETTRIM","(\\s*)".concat(o[s.LONECARET],"\\s+"),!0),t.caretTrimReplace="$1^",l("CARET","^".concat(o[s.LONECARET]).concat(o[s.XRANGEPLAIN],"$")),l("CARETLOOSE","^".concat(o[s.LONECARET]).concat(o[s.XRANGEPLAINLOOSE],"$")),l("COMPARATORLOOSE","^".concat(o[s.GTLT],"\\s*(").concat(o[s.LOOSEPLAIN],")$|^$")),l("COMPARATOR","^".concat(o[s.GTLT],"\\s*(").concat(o[s.FULLPLAIN],")$|^$")),l("COMPARATORTRIM","(\\s*)".concat(o[s.GTLT],"\\s*(").concat(o[s.LOOSEPLAIN],"|").concat(o[s.XRANGEPLAIN],")"),!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE","^\\s*(".concat(o[s.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(o[s.XRANGEPLAIN],")")+"\\s*$"),l("HYPHENRANGELOOSE","^\\s*(".concat(o[s.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(o[s.XRANGEPLAINLOOSE],")")+"\\s*$"),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(lo,lo.exports);var bR=/^[0-9]+$/,pH=(e,t)=>{var n=bR.test(e),r=bR.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},HSe=(e,t)=>pH(t,e),WSe={compareIdentifiers:pH,rcompareIdentifiers:HSe},f0=mx,xR=hF.MAX_LENGTH,d0=hF.MAX_SAFE_INTEGER,wR=lo.exports.re,ER=lo.exports.t,GSe=dF,Qc=WSe.compareIdentifiers;class Ji{constructor(t,n){if(n=GSe(n),t instanceof Ji){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: ".concat(t));if(t.length>xR)throw new TypeError("version is longer than ".concat(xR," characters"));f0("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;var r=t.trim().match(n.loose?wR[ER.LOOSE]:wR[ER.FULL]);if(!r)throw new TypeError("Invalid Version: ".concat(t));if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>d0||this.major<0)throw new TypeError("Invalid major version");if(this.minor>d0||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>d0||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){var o=+i;if(o>=0&&o<d0)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}toString(){return this.version}compare(t){if(f0("SemVer.compare",this.version,this.options,t),!(t instanceof Ji)){if(typeof t=="string"&&t===this.version)return 0;t=new Ji(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Ji||(t=new Ji(t,this.options)),Qc(this.major,t.major)||Qc(this.minor,t.minor)||Qc(this.patch,t.patch)}comparePre(t){if(t instanceof Ji||(t=new Ji(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var n=0;do{var r=this.prerelease[n],i=t.prerelease[n];if(f0("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Qc(r,i)}while(++n)}compareBuild(t){t instanceof Ji||(t=new Ji(t,this.options));var n=0;do{var r=this.build[n],i=t.build[n];if(f0("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Qc(r,i)}while(++n)}inc(t,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n),this.inc("pre",n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n),this.inc("pre",n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}n&&(Qc(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw new Error("invalid increment argument: ".concat(t))}return this.format(),this.raw=this.version,this}}var gF=Ji,SR=gF,VSe=(e,t,n)=>new SR(e,n).compare(new SR(t,n)),Vd=VSe,YSe=Vd,XSe=(e,t,n)=>YSe(e,t,n)===0,qSe=XSe,KSe=Vd,JSe=(e,t,n)=>KSe(e,t,n)!==0,ZSe=JSe,QSe=Vd,eOe=(e,t,n)=>QSe(e,t,n)>0,tOe=eOe,nOe=Vd,rOe=(e,t,n)=>nOe(e,t,n)>=0,iOe=rOe,oOe=Vd,sOe=(e,t,n)=>oOe(e,t,n)<0,aOe=sOe,lOe=Vd,uOe=(e,t,n)=>lOe(e,t,n)<=0,cOe=uOe,fOe=qSe,dOe=ZSe,hOe=tOe,gOe=iOe,pOe=aOe,mOe=cOe,yOe=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return fOe(e,n,r);case"!=":return dOe(e,n,r);case">":return hOe(e,n,r);case">=":return gOe(e,n,r);case"<":return pOe(e,n,r);case"<=":return mOe(e,n,r);default:throw new TypeError("Invalid operator: ".concat(t))}},vOe=yOe,q2,OR;function bOe(){if(OR)return q2;OR=1;var e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}s("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(c){var f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError("Invalid comparator: ".concat(c));this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(s("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");if((!f||typeof f!="object")&&(f={loose:!!f,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new l(c.value,f).test(this.value);if(c.operator==="")return c.value===""?!0:new l(this.value,f).test(c.semver);var d=(this.operator===">="||this.operator===">")&&(c.operator===">="||c.operator===">"),h=(this.operator==="<="||this.operator==="<")&&(c.operator==="<="||c.operator==="<"),g=this.semver.version===c.semver.version,p=(this.operator===">="||this.operator==="<=")&&(c.operator===">="||c.operator==="<="),m=o(this.semver,"<",c.semver,f)&&(this.operator===">="||this.operator===">")&&(c.operator==="<="||c.operator==="<"),y=o(this.semver,">",c.semver,f)&&(this.operator==="<="||this.operator==="<")&&(c.operator===">="||c.operator===">");return d||h||g&&p||m||y}}q2=t;var n=dF,r=lo.exports.re,i=lo.exports.t,o=vOe,s=mx,a=gF,l=mH();return q2}function _R(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=xOe(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(s)throw a}}}}function xOe(e,t){if(!!e){if(typeof e=="string")return AR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AR(e,t)}}function AR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var K2,CR;function mH(){if(CR)return K2;CR=1;class e{constructor(T,k){if(k=r(k),T instanceof e)return T.loose===!!k.loose&&T.includePrerelease===!!k.includePrerelease?T:new e(T.raw,k);if(T instanceof i)return this.raw=T.value,this.set=[[T]],this.format(),this;if(this.options=k,this.loose=!!k.loose,this.includePrerelease=!!k.includePrerelease,this.raw=T,this.set=T.split("||").map(P=>this.parseRange(P.trim())).filter(P=>P.length),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(T));if(this.set.length>1){var D=this.set[0];if(this.set=this.set.filter(P=>!d(P[0])),this.set.length===0)this.set=[D];else if(this.set.length>1){var M=_R(this.set),$;try{for(M.s();!($=M.n()).done;){var N=$.value;if(N.length===1&&h(N[0])){this.set=[N];break}}}catch(P){M.e(P)}finally{M.f()}}}this.format()}format(){return this.range=this.set.map(T=>T.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(T){T=T.trim();var k=Object.keys(this.options).join(","),D="parseRange:".concat(k,":").concat(T),M=n.get(D);if(M)return M;var $=this.options.loose,N=$?a[l.HYPHENRANGELOOSE]:a[l.HYPHENRANGE];T=T.replace(N,A(this.options.includePrerelease)),o("hyphen replace",T),T=T.replace(a[l.COMPARATORTRIM],u),o("comparator trim",T),T=T.replace(a[l.TILDETRIM],c),T=T.replace(a[l.CARETTRIM],f),T=T.split(/\s+/).join(" ");var P=T.split(" ").map(De=>p(De,this.options)).join(" ").split(/\s+/).map(De=>O(De,this.options));$&&(P=P.filter(De=>(o("loose invalid filter",De,this.options),!!De.match(a[l.COMPARATORLOOSE])))),o("range list",P);var H=new Map,ie=P.map(De=>new i(De,this.options)),ge=_R(ie),be;try{for(ge.s();!(be=ge.n()).done;){var Fe=be.value;if(d(Fe))return[Fe];H.set(Fe.value,Fe)}}catch(De){ge.e(De)}finally{ge.f()}H.size>1&&H.has("")&&H.delete("");var Be=[...H.values()];return n.set(D,Be),Be}intersects(T,k){if(!(T instanceof e))throw new TypeError("a Range is required");return this.set.some(D=>g(D,k)&&T.set.some(M=>g(M,k)&&D.every($=>M.every(N=>$.intersects(N,k)))))}test(T){if(!T)return!1;if(typeof T=="string")try{T=new s(T,this.options)}catch{return!1}for(var k=0;k<this.set.length;k++)if(C(this.set[k],T,this.options))return!0;return!1}}K2=e;var t=RSe,n=new t({max:1e3}),r=dF,i=bOe(),o=mx,s=gF,a=lo.exports.re,l=lo.exports.t,u=lo.exports.comparatorTrimReplace,c=lo.exports.tildeTrimReplace,f=lo.exports.caretTrimReplace,d=_=>_.value==="<0.0.0-0",h=_=>_.value==="",g=(_,T)=>{for(var k=!0,D=_.slice(),M=D.pop();k&&D.length;)k=D.every($=>M.intersects($,T)),M=D.pop();return k},p=(_,T)=>(o("comp",_,T),_=b(_,T),o("caret",_),_=y(_,T),o("tildes",_),_=w(_,T),o("xrange",_),_=E(_,T),o("stars",_),_),m=_=>!_||_.toLowerCase()==="x"||_==="*",y=(_,T)=>_.trim().split(/\s+/).map(k=>v(k,T)).join(" "),v=(_,T)=>{var k=T.loose?a[l.TILDELOOSE]:a[l.TILDE];return _.replace(k,(D,M,$,N,P)=>{o("tilde",_,D,M,$,N,P);var H;return m(M)?H="":m($)?H=">=".concat(M,".0.0 <").concat(+M+1,".0.0-0"):m(N)?H=">=".concat(M,".").concat($,".0 <").concat(M,".").concat(+$+1,".0-0"):P?(o("replaceTilde pr",P),H=">=".concat(M,".").concat($,".").concat(N,"-").concat(P," <").concat(M,".").concat(+$+1,".0-0")):H=">=".concat(M,".").concat($,".").concat(N," <").concat(M,".").concat(+$+1,".0-0"),o("tilde return",H),H})},b=(_,T)=>_.trim().split(/\s+/).map(k=>x(k,T)).join(" "),x=(_,T)=>{o("caret",_,T);var k=T.loose?a[l.CARETLOOSE]:a[l.CARET],D=T.includePrerelease?"-0":"";return _.replace(k,(M,$,N,P,H)=>{o("caret",_,M,$,N,P,H);var ie;return m($)?ie="":m(N)?ie=">=".concat($,".0.0").concat(D," <").concat(+$+1,".0.0-0"):m(P)?$==="0"?ie=">=".concat($,".").concat(N,".0").concat(D," <").concat($,".").concat(+N+1,".0-0"):ie=">=".concat($,".").concat(N,".0").concat(D," <").concat(+$+1,".0.0-0"):H?(o("replaceCaret pr",H),$==="0"?N==="0"?ie=">=".concat($,".").concat(N,".").concat(P,"-").concat(H," <").concat($,".").concat(N,".").concat(+P+1,"-0"):ie=">=".concat($,".").concat(N,".").concat(P,"-").concat(H," <").concat($,".").concat(+N+1,".0-0"):ie=">=".concat($,".").concat(N,".").concat(P,"-").concat(H," <").concat(+$+1,".0.0-0")):(o("no pr"),$==="0"?N==="0"?ie=">=".concat($,".").concat(N,".").concat(P).concat(D," <").concat($,".").concat(N,".").concat(+P+1,"-0"):ie=">=".concat($,".").concat(N,".").concat(P).concat(D," <").concat($,".").concat(+N+1,".0-0"):ie=">=".concat($,".").concat(N,".").concat(P," <").concat(+$+1,".0.0-0")),o("caret return",ie),ie})},w=(_,T)=>(o("replaceXRanges",_,T),_.split(/\s+/).map(k=>S(k,T)).join(" ")),S=(_,T)=>{_=_.trim();var k=T.loose?a[l.XRANGELOOSE]:a[l.XRANGE];return _.replace(k,(D,M,$,N,P,H)=>{o("xRange",_,D,M,$,N,P,H);var ie=m($),ge=ie||m(N),be=ge||m(P),Fe=be;return M==="="&&Fe&&(M=""),H=T.includePrerelease?"-0":"",ie?M===">"||M==="<"?D="<0.0.0-0":D="*":M&&Fe?(ge&&(N=0),P=0,M===">"?(M=">=",ge?($=+$+1,N=0,P=0):(N=+N+1,P=0)):M==="<="&&(M="<",ge?$=+$+1:N=+N+1),M==="<"&&(H="-0"),D="".concat(M+$,".").concat(N,".").concat(P).concat(H)):ge?D=">=".concat($,".0.0").concat(H," <").concat(+$+1,".0.0-0"):be&&(D=">=".concat($,".").concat(N,".0").concat(H," <").concat($,".").concat(+N+1,".0-0")),o("xRange return",D),D})},E=(_,T)=>(o("replaceStars",_,T),_.trim().replace(a[l.STAR],"")),O=(_,T)=>(o("replaceGTE0",_,T),_.trim().replace(a[T.includePrerelease?l.GTE0PRE:l.GTE0],"")),A=_=>(T,k,D,M,$,N,P,H,ie,ge,be,Fe,Be)=>(m(D)?k="":m(M)?k=">=".concat(D,".0.0").concat(_?"-0":""):m($)?k=">=".concat(D,".").concat(M,".0").concat(_?"-0":""):N?k=">=".concat(k):k=">=".concat(k).concat(_?"-0":""),m(ie)?H="":m(ge)?H="<".concat(+ie+1,".0.0-0"):m(be)?H="<".concat(ie,".").concat(+ge+1,".0-0"):Fe?H="<=".concat(ie,".").concat(ge,".").concat(be,"-").concat(Fe):_?H="<".concat(ie,".").concat(ge,".").concat(+be+1,"-0"):H="<=".concat(H),"".concat(k," ").concat(H).trim()),C=(_,T,k)=>{for(var D=0;D<_.length;D++)if(!_[D].test(T))return!1;if(T.prerelease.length&&!k.includePrerelease){for(var M=0;M<_.length;M++)if(o(_[M].semver),_[M].semver!==i.ANY&&_[M].semver.prerelease.length>0){var $=_[M].semver;if($.major===T.major&&$.minor===T.minor&&$.patch===T.patch)return!0}return!1}return!0};return K2}var wOe=mH(),EOe=(e,t,n)=>{try{t=new wOe(t,n)}catch{return!1}return t.test(e)},yH=EOe;function SOe(e,t,n){var r=e.open(t),i=1e4,o=250,s=new URL(t),a=s.origin,l=~~(i/o);function u(f){f.source===r&&(l=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function c(){l<=0||(r.postMessage(n,a),setTimeout(c,o),l-=1)}setTimeout(c,o)}var OOe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});function vH(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var s=o[i];_Oe(e,s)}return e}function _Oe(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Sd(e,i,t[i],!0)}}var J2;function AOe(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=COe(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(s)throw a}}}}function COe(e,t){if(!!e){if(typeof e=="string")return TR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TR(e,t)}}function TR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function il(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kR(Object(n),!0).forEach(function(r){bSe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var $o=Vpe,fp=pEe,h0=typeof window<"u"?window:void 0;fp===void 0&&h0!==null&&h0!==void 0&&(J2=h0.vl)!==null&&J2!==void 0&&J2.compile&&(fp=h0.vl);var TOe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},kOe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Xh={vega:"Vega","vega-lite":"Vega-Lite"},Gv={vega:$o.version,"vega-lite":fp?fp.version:"not available"},FOe={vega:e=>e,"vega-lite":(e,t)=>fp.compile(e,{config:t}).spec},DOe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,MOe="chart-wrapper";function $Oe(e){return typeof e=="function"}function FR(e,t,n,r){var i="<html><head>".concat(t,'</head><body><pre><code class="json">'),o="</code></pre>".concat(n,"</body></html>"),s=window.open("");s.document.write(i+e+o),s.document.title="".concat(Xh[r]," JSON Source")}function NOe(e,t){if(e.$schema){var n=iH(e.$schema);if(t&&t!==n.library){var r;console.warn("The given visualization spec is written in ".concat(Xh[n.library],", but mode argument sets ").concat((r=Xh[t])!==null&&r!==void 0?r:t,"."))}var i=n.library;return yH(Gv[i],"^".concat(n.version.slice(1)))||console.warn("The input spec uses ".concat(Xh[i]," ").concat(n.version,", but the current version of ").concat(Xh[i]," is v").concat(Gv[i],".")),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t!=null?t:"vega"}function ROe(e){return!!(e&&"load"in e)}function DR(e){return ROe(e)?e:$o.loader(e)}function POe(e){var t,n,r=(t=(n=e.usermeta)===null||n===void 0?void 0:n.embedOptions)!==null&&t!==void 0?t:{};return de(r.defaultStyle)&&(r.defaultStyle=!1),r}function bH(e,t){return GS.apply(this,arguments)}function GS(){return GS=Uv(Yo.mark(function e(t,n){var r,i,o,s,a,l,u,c,f,d,h,g=arguments;return Yo.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(o=g.length>2&&g[2]!==void 0?g[2]:{},!de(n)){m.next=10;break}return a=DR(o.loader),m.t0=JSON,m.next=6,a.load(n);case 6:m.t1=m.sent,s=m.t0.parse.call(m.t0,m.t1),m.next=11;break;case 10:s=n;case 11:return l=POe(s),u=l.loader,(!a||u)&&(a=DR((c=o.loader)!==null&&c!==void 0?c:u)),m.next=16,MR(l,a);case 16:return f=m.sent,m.next=19,MR(o,a);case 19:return d=m.sent,h=il(il({},vH(d,f)),{},{config:Ed((r=d.config)!==null&&r!==void 0?r:{},(i=f.config)!==null&&i!==void 0?i:{})}),m.next=23,jOe(t,s,h,a);case 23:return m.abrupt("return",m.sent);case 24:case"end":return m.stop()}},e)})),GS.apply(this,arguments)}function MR(e,t){return VS.apply(this,arguments)}function VS(){return VS=Uv(Yo.mark(function e(t,n){var r,i,o;return Yo.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!de(t.config)){a.next=8;break}return a.t1=JSON,a.next=4,n.load(t.config);case 4:a.t2=a.sent,a.t0=a.t1.parse.call(a.t1,a.t2),a.next=9;break;case 8:a.t0=(r=t.config)!==null&&r!==void 0?r:{};case 9:if(i=a.t0,!de(t.patch)){a.next=18;break}return a.t4=JSON,a.next=14,n.load(t.patch);case 14:a.t5=a.sent,a.t3=a.t4.parse.call(a.t4,a.t5),a.next=19;break;case 18:a.t3=t.patch;case 19:return o=a.t3,a.abrupt("return",il(il(il({},t),o?{patch:o}:{}),i?{config:i}:{}));case 21:case"end":return a.stop()}},e)})),VS.apply(this,arguments)}function IOe(e){var t,n=e.getRootNode?e.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:(t=document.head)!==null&&t!==void 0?t:document.body}}function jOe(e,t){return YS.apply(this,arguments)}function YS(){return YS=Uv(Yo.mark(function e(t,n){var r,i,o,s,a,l,u,c,f,d,h,g,p,m,y,v,b,x,w,S,E,O,A,C,_,T,k,D,M,$,N,P,H,ie,ge,be,Fe,Be,De,Ie,Qe,yt,Q,Oe,je,F,R,I,G,W,J,le=arguments;return Yo.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(J=function(){Be&&document.removeEventListener("click",Be),P.finalize()},c=le.length>2&&le[2]!==void 0?le[2]:{},f=le.length>3?le[3]:void 0,d=c.theme?Ed(uSe[c.theme],(r=c.config)!==null&&r!==void 0?r:{}):c.config,h=$l(c.actions)?c.actions:vH({},TOe,(i=c.actions)!==null&&i!==void 0?i:{}),g=il(il({},kOe),c.i18n),p=(o=c.renderer)!==null&&o!==void 0?o:"canvas",m=(s=c.logLevel)!==null&&s!==void 0?s:$o.Warn,y=(a=c.downloadFileName)!==null&&a!==void 0?a:"visualization",v=typeof t=="string"?document.querySelector(t):t,v){ne.next=12;break}throw new Error("".concat(t," does not exist"));case 12:if(c.defaultStyle!==!1&&(b="vega-embed-style",x=IOe(v),w=x.root,S=x.rootContainer,w.getElementById(b)||(E=document.createElement("style"),E.id=b,E.innerHTML=c.defaultStyle===void 0||c.defaultStyle===!0?OOe.toString():c.defaultStyle,S.appendChild(E))),O=NOe(n,c.mode),A=FOe[O](n,d),O==="vega-lite"&&A.$schema&&(C=iH(A.$schema),yH(Gv.vega,"^".concat(C.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(C.version,", but current version is v").concat(Gv.vega,"."))),v.classList.add("vega-embed"),h&&v.classList.add("has-actions"),v.innerHTML="",_=v,h&&(T=document.createElement("div"),T.classList.add(MOe),v.appendChild(T),_=T),k=c.patch,k&&(A=k instanceof Function?k(A):b1(A,k,!0,!1).newDocument),c.formatLocale&&$o.formatLocale(c.formatLocale),c.timeFormatLocale&&$o.timeFormatLocale(c.timeFormatLocale),c.expressionFunctions)for(D in c.expressionFunctions)M=c.expressionFunctions[D],"fn"in M?$o.expressionFunction(D,M.fn,M.visitor):M instanceof Function&&$o.expressionFunction(D,M);return $=c.ast,N=$o.parse(A,O==="vega-lite"?{}:d,{ast:$}),P=new(c.viewClass||$o.View)(N,il({loader:f,logLevel:m,renderer:p},$?{expr:(l=(u=$o.expressionInterpreter)!==null&&u!==void 0?u:c.expr)!==null&&l!==void 0?l:nme}:{})),P.addSignalListener("autosize",(q,he)=>{var fe=he.type;fe=="fit-x"?(_.classList.add("fit-x"),_.classList.remove("fit-y")):fe=="fit-y"?(_.classList.remove("fit-x"),_.classList.add("fit-y")):fe=="fit"?_.classList.add("fit-x","fit-y"):_.classList.remove("fit-x","fit-y")}),c.tooltip!==!1&&(H=$Oe(c.tooltip)?c.tooltip:new vSe(c.tooltip===!0?{}:c.tooltip).call,P.tooltip(H)),ie=c.hover,ie===void 0&&(ie=O==="vega"),ie&&(ge=typeof ie=="boolean"?{}:ie,be=ge.hoverSet,Fe=ge.updateSet,P.hover(be,Fe)),c&&(c.width!=null&&P.width(c.width),c.height!=null&&P.height(c.height),c.padding!=null&&P.padding(c.padding)),ne.next=37,P.initialize(_,c.bind).runAsync();case 37:if(h!==!1){if(De=v,c.defaultStyle!==!1&&(Ie=document.createElement("details"),Ie.title=g.CLICK_TO_VIEW_ACTIONS,v.append(Ie),De=Ie,Qe=document.createElement("summary"),Qe.innerHTML=DOe,Ie.append(Qe),Be=q=>{Ie.contains(q.target)||Ie.removeAttribute("open")},document.addEventListener("click",Be)),yt=document.createElement("div"),De.append(yt),yt.classList.add("vega-actions"),h===!0||h.export!==!1){Q=AOe(["svg","png"]);try{for(je=function(){var he=Oe.value;if(h===!0||h.export===!0||h.export[he]){var fe=g["".concat(he.toUpperCase(),"_ACTION")],ve=document.createElement("a");ve.text=fe,ve.href="#",ve.target="_blank",ve.download="".concat(y,".").concat(he),ve.addEventListener("mousedown",function(){var Re=Uv(Yo.mark(function Ge(ft){var rt;return Yo.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return ft.preventDefault(),L.next=3,P.toImageURL(he,c.scaleFactor);case 3:rt=L.sent,this.href=rt;case 5:case"end":return L.stop()}},Ge,this)}));return function(Ge){return Re.apply(this,arguments)}}()),yt.append(ve)}},Q.s();!(Oe=Q.n()).done;)je()}catch(q){Q.e(q)}finally{Q.f()}}(h===!0||h.source!==!1)&&(F=document.createElement("a"),F.text=g.SOURCE_ACTION,F.href="#",F.addEventListener("click",function(q){var he,fe;FR(_x(n),(he=c.sourceHeader)!==null&&he!==void 0?he:"",(fe=c.sourceFooter)!==null&&fe!==void 0?fe:"",O),q.preventDefault()}),yt.append(F)),O==="vega-lite"&&(h===!0||h.compiled!==!1)&&(R=document.createElement("a"),R.text=g.COMPILED_ACTION,R.href="#",R.addEventListener("click",function(q){var he,fe;FR(_x(A),(he=c.sourceHeader)!==null&&he!==void 0?he:"",(fe=c.sourceFooter)!==null&&fe!==void 0?fe:"","vega"),q.preventDefault()}),yt.append(R)),(h===!0||h.editor!==!1)&&(G=(I=c.editorUrl)!==null&&I!==void 0?I:"https://vega.github.io/editor/",W=document.createElement("a"),W.text=g.EDITOR_ACTION,W.href="#",W.addEventListener("click",function(q){SOe(window,G,{config:d,mode:O,renderer:p,spec:_x(n)}),q.preventDefault()}),yt.append(W))}return ne.abrupt("return",{view:P,spec:n,vgSpec:A,finalize:J,embedOptions:c});case 39:case"end":return ne.stop()}},e)})),YS.apply(this,arguments)}const ri=60,Oa=80,ol=300,Eg=10,LOe=ri*.2,$R=.3,zOe=10,Vv=12,g0=4,NR=20,RR=10,PR=10,IR=800,jR=800;var En={global_time:!0,global_value:!0,rect_opacity:.8,line_opacity:1,persistent:0,filter:{}},Pe={line1:{width:"width",y:"none",strokeWidth:"none",strokeDash:"none",stroke:"none"},line2:{height:"none",strokeWidth:"none",stroke:"none"},rect:{x:"top",width:"area",height:"none",fill:"none"}};const Gi={line1:{width:ol,y:ri/2,strokeWidth:2,strokeDash:[Vv/2,Vv/2],stroke:"black"},line2:{y:ri/4,y2:ri*3/4,height:ri/2,strokeWidth:2,stroke:"black"},rect:{x:ol/2,width:.8,height:ri,fill:"black"}};class BOe{constructor(t,n,r,i,o){this.left=t,this.right=r,this.top=n,this.min_value=o,this.max_value=i,this.persistent=-1,this.sum=0}setPersistent(t){this.persistent=this.max_value-t}}class UOe{constructor(t,n,r){this.name=t,this.start=n,this.end=r,this.max=-1/0,this.min=1/0,this.top_hill_idx=-1,this.hill_list=[]}set1Hill(t,n,r,i,o){this.hill_list.push(new BOe(t,n,r,i,o)),i>this.max&&(this.max=i,this.top_hill_idx=this.hill_list.length-1),o<this.min&&(this.min=o)}getStartTime(){return At(this.start)}getEndTime(){return At(this.end-1)}makePersistent(t){t.sort(function(n,r){return Sn(r)-Sn(n)});for(let n=0;n<t.length;n++){let r=-1,i=-1;for(let s=0;s<this.hill_list.length;s++)if(this.hill_list[s].persistent===-1)if(At(this.hill_list[s].top)<At(t[n]))r=s;else{i=s;break}let o=-1;r!==-1?i!==-1?Sn(this.hill_list[r].top)<Sn(this.hill_list[i].top)?o=r:o=i:o=r:i!==-1&&(o=i),o!==-1&&this.hill_list[o].setPersistent(Sn(t[n]))}}checkHill(){for(let t=0;t<this.hill_list.length;t++)this.hill_list[t].persistent<0&&this.hill_list[t].setPersistent(this.min)}caculateAreaSum(){for(let t=0;t<this.hill_list.length;t++){let n=this.hill_list[t].left,r=this.hill_list[t].right;for(n+=1;n<=r;n++)this.hill_list[t].sum+=Au[n]}}chooseDataDomain(){this.total_width=ol,this.start_width=0,En.global_time?(this.start_time=Mt.min_x,this.total_time=Mt.max_x-this.start_time,this.start_width=ol*(At(this.start)-this.start_time)/this.total_time,this.total_width=ol*(At(this.end-1)-At(this.start))/this.total_time):(this.start_time=At(this.start),this.total_time=At(this.end-1)-this.start_time),En.global_value?(this.min_range=Mt.min_y,this.value_range=Mt.max_y-this.min_range):(this.min_range=this.min,this.value_range=this.max-this.min)}getJsonValueAs1Hill(t,n){let r={end_idx:this.hill_list[t[t.length-1]].right};for(let i in Pe.line1)Pe.line1[i]!=="none"&&(r[Pe.line1[i]]=0);for(let i in Pe.line2)Pe.line2[i]!=="none"&&(r[Pe.line2[i]]=0);for(let i in Pe.rect)Pe.rect[i]!=="none"&&(r[Pe.rect[i]]=0);for(let i in r)switch(i){case"left":r[i]=(At(this.hill_list[t[0]].left)-this.start_time)/this.total_time;break;case"right":r[i]=(At(this.hill_list[t[t.length-1]].right)-this.start_time)/this.total_time;break;case"top":r[i]=(At(this.hill_list[n].top)-At(this.hill_list[t[0]].left))/(At(this.hill_list[t[t.length-1]].right)-At(this.hill_list[t[0]].left));break;case"area":case"avg":let o=0;for(let a=0;a<t.length;a++)o+=this.hill_list[t[a]].sum;r[i]=(o/(At(this.hill_list[t[t.length-1]].right)-At(this.hill_list[t[0]].left))-this.min_range)/this.value_range;break;case"width":r[i]=(At(this.hill_list[t[t.length-1]].right)-At(this.hill_list[t[0]].left))/this.total_time;break;case"max":r[i]=(this.hill_list[n].max_value-this.min_range)/this.value_range;break;case"min":let s=1/0;for(let a=0;a<t.length;a++)s>this.hill_list[t[a]].min_value&&(s=this.hill_list[t[a]].min_value);r[i]=(s-this.min_range)/this.value_range;break;case"persistent":r[i]=this.hill_list[n].persistent/this.value_range;break}return r}getDataForDraw(t=0){var n=[];let r=[],i=[],o=0,s=0;for(let a=0;a<this.hill_list.length;a++)if(this.hill_list[a].persistent<t){i.push(a);let l=Sn(this.hill_list[a].right);l<=o&&(o=l,s=i.length)}else if(r.length>0){let l=r[r.length-1];for(let u=0;u<s;u++)r.push(i[u]);n.push(this.getJsonValueAs1Hill(r,l)),r.splice(0,r.length);for(let u=s;u<i.length;u++)r.push(i[u]);r.push(a),i.splice(0,i.length),o=Sn(this.hill_list[a].right),s=0}else{for(let l=0;l<i.length;l++)r.push(i[l]);r.push(a),i.splice(0,i.length),o=Sn(this.hill_list[a].right),s=0}if(r.length<1)n.push(this.getJsonValueAs1Hill(i,this.top_hill_idx));else{let a=r[r.length-1];n.push(this.getJsonValueAs1Hill(r.concat(i),a))}return n}}function HOe(){if(st.length<1)return 0;let e=st[0].max-st[0].min;for(let t=1;t<st.length;t++){let n=st[t].max-st[t].min;e>n&&(e=n)}return e*.8}function LR(e,t,n){if(n-t<=1){e!==""&&console.log("data",e,"is too short to draw");for(let p=0;p<n-t;p++)Au.push(0);return}var r=new UOe(e,t,n);let i=t,o=t,s=t,a=Sn(t),l=a,u=a,c,f=Sn(t+1),d=[],h=0,g=At(t);Au.push(0);for(let p=t+1;p<n-1;p++)c=a,a=f,f=Sn(p+1),a>=f&&a>c?(o=p,u=a):a<f&&a<=c&&(s=p,l>a&&(l=a),d.push(p),r.set1Hill(i,o,s,u,l),i=p,o=p,u=a,l=a),h=g,g=At(p),Au.push((a+c)*(g-h)/2);c=a,a=f,a>c?r.set1Hill(i,n-1,n-1,a,l):(l>a&&(l=a),r.set1Hill(i,o,n-1,u,l)),h=g,g=At(n-1),Au.push((a+c)*(g-h)/2),r.makePersistent(d),r.checkHill(),r.caculateAreaSum(),st.push(r)}function WOe(e,t,n=ol,r=0){var i={name:"hill"+e,values:[]};for(let g=0;g<t.length;g++)i.values.push({});var o=[];let s=e*Oa+Eg,a=n/t.length;var l={type:"rule",from:{data:"hill"+e},encode:{enter:{}}};let u=Eg+r,c=u;if(Pe.line1.width==="none")for(let g=0;g<t.length;g++)c+=a,i.values[g].l1x_draw=u,i.values[g].l1x2_draw=c,u=c;else{let g=0,p=a*.2,m=Pe.line1.width;for(let y=0;y<t.length;y++)g+=t[y][m];if(g<1e-6)for(let y=0;y<t.length;y++)c+=a,i.values[y].l1x_draw=u,i.values[y].l1x2_draw=c,u=c;else{let y=n*.8/g;for(let v=0;v<t.length;v++){let b=t[v][m]*y+p;c+=b,i.values[v].l1x_draw=u,i.values[v].l1x2_draw=c,b<a&&(a=b),u=c}}}l.encode.enter.x={field:"l1x_draw"},l.encode.enter.x2={field:"l1x2_draw"};let f=0;if(Pe.line1.strokeWidth==="none")l.encode.enter.strokeWidth={value:Gi.line1.strokeWidth};else{let g=Pe.line1.strokeWidth;for(let p=0;p<t.length;p++){let m=t[p][g]*LOe+$R;m>f&&(f=m),i.values[p].l1sw_draw=m}l.encode.enter.strokeWidth={field:"l1sw_draw"}}if(Pe.line1.strokeDash==="none")l.encode.enter.strokeDash={value:Gi.line1.strokeDash};else{let g=Pe.line1.strokeDash;for(let p=0;p<t.length;p++){let m=Vv*t[p][g];if(m<g0){let y=g0*(1-t[p][g])/t[p][g];y>NR?i.values[p].l1sd_draw=[g0,NR]:i.values[p].l1sd_draw=[g0,y]}else i.values[p].l1sd_draw=[m,Vv-m]}l.encode.enter.strokeDash={field:"l1sd_draw"}}if(Pe.line1.y==="none")l.encode.enter.y={value:Gi.line1.y+s};else{let g=s+f/2,p=ri-f,m=Pe.line1.y;for(let y=0;y<t.length;y++)i.values[y].l1y_draw=(1-t[y][m])*p+g;l.encode.enter.y={field:"l1y_draw"}}l.encode.enter.y2=l.encode.enter.y,l.encode.enter.stroke={value:Gi.line1.stroke},l.encode.enter.opacity={value:En.line_opacity},o.push(l);var d={type:"rule",from:{data:"hill"+e},encode:{enter:{}}};if(d.encode.enter.x=l.encode.enter.x2,d.encode.enter.x2=l.encode.enter.x2,Pe.line2.height==="none")d.encode.enter.y={value:Gi.line2.y+s},d.encode.enter.y2={value:Gi.line2.y2+s};else{let g=Pe.line2.height,p=RR/2;for(let m=0;m<t.length;m++){let y=t[m][g]*(ri-RR)/2+p;i.values[m].l2y_draw=s+ri/2-y,i.values[m].l2y2_draw=s+ri/2+y}d.encode.enter.y={field:"l2y_draw"},d.encode.enter.y2={field:"l2y2_draw"}}if(Pe.line2.strokeWidth==="none")d.encode.enter.strokeWidth={value:Gi.line2.strokeWidth};else{let g=Pe.line2.strokeWidth;for(let p=0;p<t.length;p++)i.values[p].l2sw_draw=t[p][g]*zOe+$R;d.encode.enter.strokeWidth={field:"l2sw_draw"}}d.encode.enter.stroke={value:Gi.line2.stroke},d.encode.enter.opacity={value:En.line_opacity},o.push(d);var h={type:"rect",from:{data:"hill"+e},encode:{enter:{}}};if(Pe.rect.width==="none"){let g=a*Gi.rect.width;for(let p=0;p<t.length;p++)i.values[p].rwidth_draw=g}else{let g=Pe.rect.width,p=a*.2;if(Pe.rect.width==="area")for(let m=0;m<t.length;m++){let y=t[m][g]*(i.values[m].l1x2_draw-i.values[m].l1x_draw);y<p?i.values[m].rwidth_draw=p:i.values[m].rwidth_draw=y}else{let m=a*.8;for(let y=0;y<t.length;y++)i.values[y].rwidth_draw=p+m*t[y][g]}}if(h.encode.enter.width={field:"rwidth_draw"},Pe.rect.height==="none")h.encode.enter.y={value:s},h.encode.enter.y2={value:s+Gi.rect.height};else{let g=Pe.rect.height,p=PR/2;for(let m=0;m<t.length;m++){let y=t[m][g]*(ri-PR)/2+p;i.values[m].ry_draw=s+ri/2-y,i.values[m].ry2_draw=s+ri/2+y}h.encode.enter.y={field:"ry_draw"},h.encode.enter.y2={field:"ry2_draw"}}if(Pe.rect.x==="none")for(let g=0;g<i.values.length;g++)i.values[g].rx_draw=i.values[g].l1x_draw+.5*(i.values[g].l1x2_draw-i.values[g].l1x_draw-i.values[g].rwidth_draw);else{let g=Pe.rect.x;for(let p=0;p<i.values.length;p++)i.values[p].rx_draw=i.values[p].l1x_draw+t[p][g]*(i.values[p].l1x2_draw-i.values[p].l1x_draw-i.values[p].rwidth_draw)}return h.encode.enter.x={field:"rx_draw"},h.encode.enter.fill={value:Gi.rect.fill},h.encode.enter.opacity={value:En.rect_opacity},o.push(h),[i,o]}var st=[],Ga=[],_i={};const zR=["#1f77b4","#ff7e0e","#2c9f2c","#d52728","#9367bc","#8b554a","#e277c2","#7e7e7e","#bbbc21","#16bdcf","#adc6e8","#ffba78","#97df89","#ff9795","#c5afd4","#c49c93","#f7b6d2","#c6c6c6","#dbdb8d","#9edae4"];function GOe(){for(let e=0;e<zR.length;e++){let t=!0;for(let n in _i)if(_i[n][1]===e){t=!1;break}if(t)return[zR[e],e]}return["#"+Math.floor(Math.random()*16777215).toString(16),-1]}const XS=["hills number","data width","start position","max value","data name"];var Vu=[0,2,1],q0=[0,2,1];function VOe(){let e=new Array(Vu.length).fill(0);for(let t=0;t<Vu.length;t++)e[Vu[t]]=t;q0=e}function xH(e=null){e===null&&(e=XS.map((r,i)=>({name:r,index:i,ban:!1,reverse:!1})));let t=[];for(let r=0;r<st.length;r++)t.push(r);function n(r,i){for(let o=0;o<e.length;o++){if(e[o].ban)continue;let s;switch(e[o].index){case 0:s=Ga[r].length-Ga[i].length;break;case 1:s=st[r].getEndTime()-st[r].getStartTime()-st[i].getEndTime()+st[i].getStartTime();break;case 2:s=st[r].getStartTime()-st[i].getStartTime();break;case 3:s=st[r].max-st[i].max;break;case 4:s=st[r].name>st[i].name;break;default:s=r-i}if(s!==0)return e[o].reverse?s:-s}return r-i}t.sort(n),Vu=t,VOe()}const YOe={data(){return{name:" ",is_hover:!1,float_position:{top:"0px",left:"0px"},scroll_y:0,interactive_list:[],newcode:{$schema:"https://vega.github.io/schema/vega/v5.json",width:ol+40,height:800,data:[],marks:[{}]}}},methods:{chart(){this.canvas&&(this.canvas.remove(),this.canvas=void 0),bH("#code",this.newcode)},drawHighLightRect(){this.canvas||(this.canvas=document.querySelectorAll("canvas")[1],this.context=this.canvas.getContext("2d"));for(let e=0;e<this.interactive_list.length;e++){let n=q0[this.interactive_list[e]]*Oa+2;this.context.strokeStyle=_i[this.interactive_list[e]][0],this.context.lineWidth=2,this.context.strokeRect(2,n,316,76)}},updateHighlightList(e){let t=Math.floor((this.scroll_y+e.y-40-Eg)/Oa);if(t>=st.length)return;let n=t*Oa+2,r=!0;this.canvas||(this.canvas=document.querySelectorAll("canvas")[1],this.context=this.canvas.getContext("2d"));let i=Vu[t];for(let o=0;o<this.interactive_list.length;o++)if(i===this.interactive_list[o]){r=!1,this.interactive_list.splice(o,1),this.context.strokeStyle="white",this.context.lineWidth=3,this.context.strokeRect(2,n,316,76),delete _i[i];break}r&&(this.interactive_list.push(i),_i[i]=GOe(),this.context.strokeStyle=_i[i][0],this.context.lineWidth=2,this.context.strokeRect(2,n,316,76),console.log(this.newcode.data[t])),Pt.emit("clickForLine",this.interactive_list)},handleScroll(){this.scroll_y=this.$refs.code.scrollTop;let e=Math.floor((this.scroll_y+this.y-40-Eg)/Oa);e<st.length?this.name=st[Vu[e]].name:this.name=" "},updateNewCodeData(){st.splice(0,st.length),this.interactive_list.splice(0,this.interactive_list.length);for(let r in _i)delete _i[r];Au.splice(0,Au.length);let e="",t=0,n=0;for(let r=0;r<oi.length;r++)oD(r)!==e&&(n=r,LR(e,t,n),t=r,e=oD(r));return LR(e,t,oi.length),st.length},getNewCodeJson(){this.newcode.data.splice(0,this.newcode.data.length),this.newcode.marks.splice(0,this.newcode.marks.length);for(let e=0;e<st.length;e++){let t=st[e].total_width,n=st[e].start_width,r=WOe(q0[e],Ga[e],t,n);this.newcode.data.push(r[0]);for(let i=0;i<r[1].length;i++)this.newcode.marks.push(r[1][i])}this.newcode.marks.push({type:"rect",encode:{enter:{x:{value:0},width:{value:ol},y:{value:Oa*st.length},height:{value:10},fill:{value:"white"}}}}),this.interactive_list.length>0&&Pt.emit("clickForLine",this.interactive_list)},updateDataForDraw(e=0,t=!1){Ga.splice(0,Ga.length);for(let n=0;n<st.length;n++)st[n].chooseDataDomain(),Ga.push(st[n].getDataForDraw(e));t&&xH(),this.getNewCodeJson()},enter(){this.is_hover=!0},leave(){this.is_hover=!1},move(e){let t=e.pageX+15+"px",n=e.pageY+10+"px";this.float_position={top:n,left:t},this.y=e.pageY;let r=Math.floor((this.scroll_y+this.y-40-Eg)/Oa);r<st.length&&r>=0?(this.is_hover=!0,this.name=st[Vu[r]].name):this.is_hover=!1}},created(){window.onload=function(e){var t=e;return function(){var n=0,r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,i=document.querySelector("#code"),o={childList:!0},s=new r(function(a){a.forEach(function(l){l.type==="childList"&&n++,n%3===0&&t()})});s.observe(i,o)}}(this.drawHighLightRect),Pt.on("updateNewCode",e=>{this.updateDataForDraw(En.persistent,e),this.chart()}),Pt.on("changeRectOpacity",e=>{for(let t=0;t<this.newcode.marks.length-1;t++)this.newcode.marks[t].type==="rect"&&(this.newcode.marks[t].encode.enter.opacity={value:e});this.chart()}),Pt.on("changeLineOpacity",e=>{for(let t=0;t<this.newcode.marks.length-1;t++)this.newcode.marks[t].type==="rule"&&(this.newcode.marks[t].encode.enter.opacity={value:e});this.chart()}),Pt.on("clearHighline",e=>{for(let t=0;t<this.interactive_list.length;t++){let r=q0[this.interactive_list[t]]*Oa+2;this.context.strokeStyle="white",this.context.lineWidth=3,this.context.strokeRect(2,r,316,76)}this.interactive_list.splice(0,this.interactive_list.length);for(let t in _i)delete _i[t];Pt.emit("clickForLine",[])}),Pt.on("getHillAndDraw",e=>{console.log("start coding."),this.updateNewCodeData(),console.log("finish coding and start drawing."),En.persistent=HOe(),Pt.emit("showPersistent",En.persistent),this.updateDataForDraw(En.persistent,!0),this.chart(),console.log("finish drawing")}),Pt.on("updateDataOrder",e=>{this.getNewCodeJson(),this.chart()}),this.updateNewCodeData(),this.updateDataForDraw()},mounted(){window.addEventListener("scroll",this.handleScroll,!0),this.chart()}};function XOe(e,t,n,r,i,o){return bo(),ul(hn,null,[z("div",{id:"code",ref:"code",onClick:t[0]||(t[0]=s=>o.updateHighlightList(s)),onMouseenter:t[1]||(t[1]=(...s)=>o.enter&&o.enter(...s)),onMouseleave:t[2]||(t[2]=(...s)=>o.leave&&o.leave(...s)),onMousemove:t[3]||(t[3]=(...s)=>o.move&&o.move(...s))},null,544),Oi(z("div",{id:"float",style:bd(i.float_position)},mf(i.name),5),[[Ns,i.is_hover]])],64)}const qOe=xd(YOe,[["render",XOe],["__scopeId","data-v-883671b0"]]),KOe={data(){return{linechart:{$schema:"https://vega.github.io/schema/vega-lite/v5.json",width:IR,height:jR,data:{values:[]},mark:"line",encoding:{x:{field:"a",type:"quantitative",scale:{domain:[0,100]},axis:{formatType:"number"}},y:{field:"b",type:"quantitative",scale:{domain:[0,100]}},color:{field:"c",type:"nominal",scale:{range:["#00ffff","#7fffd4","#fedd00"]}},opacity:{value:.3}}}}},methods:{chart(){bH("#chart",this.linechart)},updateData(){this.linechart.data.values=oi,this.linechart.encoding.color.field=Ai[0],this.linechart.encoding.x.field=Ai[1],this.linechart.encoding.x.scale.domain=[this.x_min_domain,this.x_max_domain],this.linechart.encoding.y.field=Ai[2],this.linechart.encoding.y.scale.domain=[this.y_min_domain,this.y_max_domain],Mt.x_is_date?this.linechart.encoding.x.axis.labelExpr="toString(year(datum.value))+ '.' +toString(month(datum.value))":this.linechart.encoding.x.axis.labelExpr="datum.value"},getDrawGridStep(e){let t=1;if(e>=1){let n=0;for(;e>1;)n%3===1?(e/=2.5,t*=2.5):(e/=2,t*=2),n++}else{let n=0;for(;e<1;)n%3===1?(e*=2.5,t/=2.5):(e*=2,t/=2),n++;n%3===2?t*=2.5:t*=2}return t},updateFieldValue(){let e=(Mt.max_y-Mt.min_y)/20;this.y_draw_step=this.getDrawGridStep(e),this.y_min_domain=Math.floor(Mt.min_y/this.y_draw_step)*this.y_draw_step,this.y_max_domain=Math.ceil(Mt.max_y/this.y_draw_step)*this.y_draw_step,this.y_range_to_draw=jR/(this.y_max_domain-this.y_min_domain);let t=(Mt.max_x-Mt.min_x)/20;this.x_draw_step=this.getDrawGridStep(t),this.x_min_domain=Math.floor(Mt.min_x/this.x_draw_step)*this.x_draw_step,this.x_max_domain=Math.ceil(Mt.max_x/this.x_draw_step)*this.x_draw_step,this.x_range_to_draw=IR/(this.x_max_domain-this.x_min_domain),Pt.emit("updatePersistentRange",[this.y_max_domain-this.y_min_domain,this.y_draw_step])}},created(){Pt.on("updateDataset",e=>{this.canvas=void 0,sD(),this.updateFieldValue(),this.updateData(),this.chart(),console.log("finish drawing linechart.")}),Pt.on("clickForLine",e=>{this.canvas?this.context.putImageData(this.original_canvas,0,0):(this.canvas=document.querySelectorAll("canvas")[0],this.context=this.canvas.getContext("2d"),this.original_canvas=this.context.getImageData(0,0,this.canvas.width,this.canvas.height));for(let t=0;t<e.length;t++){let n=st[e[t]].start,r=st[e[t]].end;this.context.lineWidth=3,this.context.beginPath();let i=(At(n)-this.x_min_domain)*this.x_range_to_draw,o=(this.y_max_domain-Sn(n))*this.y_range_to_draw;this.context.moveTo(i,o);for(let s=n+1;s<r;s++)i=(At(s)-this.x_min_domain)*this.x_range_to_draw,o=(this.y_max_domain-Sn(s))*this.y_range_to_draw,this.context.lineTo(i,o);this.context.strokeStyle=_i[e[t]][0],this.context.stroke(),this.context.closePath()}for(let t=0;t<e.length;t++)for(let n=0;n<Ga[e[t]].length-1;n++){this.context.beginPath();let r=Ga[e[t]][n].end_idx,i=(At(r)-this.x_min_domain)*this.x_range_to_draw,o=(this.y_max_domain-Sn(r))*this.y_range_to_draw;this.context.arc(i,o,5,0,2*Math.PI),this.context.strokeStyle=_i[e[t]][0],this.context.stroke(),this.context.closePath()}}),sD(),this.updateFieldValue(),this.updateData()},mounted(){this.chart()}},JOe={id:"chart"};function ZOe(e,t,n,r,i,o){return bo(),ul("div",JOe)}const QOe=xd(KOe,[["render",ZOe]]);var wH={exports:{}};const e_e=jI(nY);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function BR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ds(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BR(Object(n),!0).forEach(function(r){t_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function K0(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?K0=function(t){return typeof t}:K0=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K0(e)}function t_e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zi(){return zi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zi.apply(this,arguments)}function n_e(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function r_e(e,t){if(e==null)return{};var n=n_e(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(n[r]=e[r]))}return n}function i_e(e){return o_e(e)||s_e(e)||a_e(e)||l_e()}function o_e(e){if(Array.isArray(e))return qS(e)}function s_e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function a_e(e,t){if(!!e){if(typeof e=="string")return qS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qS(e,t)}}function qS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u_e="1.14.0";function Js(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var ga=Js(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),dm=Js(/Edge/i),UR=Js(/firefox/i),Sg=Js(/safari/i)&&!Js(/chrome/i)&&!Js(/android/i),EH=Js(/iP(ad|od|hone)/i),c_e=Js(/chrome/i)&&Js(/android/i),SH={capture:!1,passive:!1};function it(e,t,n){e.addEventListener(t,n,!ga&&SH)}function nt(e,t,n){e.removeEventListener(t,n,!ga&&SH)}function Yv(e,t){if(!!t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function f_e(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Qi(e,t,n,r){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Yv(e,t):Yv(e,t))||r&&e===n)return e;if(e===n)break}while(e=f_e(e))}return null}var HR=/\s+/g;function qt(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(HR," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(HR," ")}}function we(e,t,n){var r=e&&e.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=n+(typeof n=="string"?"":"px")}}function Yu(e,t){var n="";if(typeof e=="string")n=e;else do{var r=we(e,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function OH(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function ns(){var e=document.scrollingElement;return e||document.documentElement}function Gt(e,t,n,r,i){if(!(!e.getBoundingClientRect&&e!==window)){var o,s,a,l,u,c,f;if(e!==window&&e.parentNode&&e!==ns()?(o=e.getBoundingClientRect(),s=o.top,a=o.left,l=o.bottom,u=o.right,c=o.height,f=o.width):(s=0,a=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!ga))do if(i&&i.getBoundingClientRect&&(we(i,"transform")!=="none"||n&&we(i,"position")!=="static")){var d=i.getBoundingClientRect();s-=d.top+parseInt(we(i,"border-top-width")),a-=d.left+parseInt(we(i,"border-left-width")),l=s+o.height,u=a+o.width;break}while(i=i.parentNode);if(r&&e!==window){var h=Yu(i||e),g=h&&h.a,p=h&&h.d;h&&(s/=p,a/=g,f/=g,c/=p,l=s+c,u=a+f)}return{top:s,left:a,bottom:l,right:u,width:f,height:c}}}function WR(e,t,n){for(var r=Va(e,!0),i=Gt(e)[t];r;){var o=Gt(r)[n],s=void 0;if(n==="top"||n==="left"?s=i>=o:s=i<=o,!s)return r;if(r===ns())break;r=Va(r,!1)}return!1}function vd(e,t,n,r){for(var i=0,o=0,s=e.children;o<s.length;){if(s[o].style.display!=="none"&&s[o]!==Ue.ghost&&(r||s[o]!==Ue.dragged)&&Qi(s[o],n.draggable,e,!1)){if(i===t)return s[o];i++}o++}return null}function pF(e,t){for(var n=e.lastElementChild;n&&(n===Ue.ghost||we(n,"display")==="none"||t&&!Yv(n,t));)n=n.previousElementSibling;return n||null}function nn(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==Ue.clone&&(!t||Yv(e,t))&&n++;return n}function GR(e){var t=0,n=0,r=ns();if(e)do{var i=Yu(e),o=i.a,s=i.d;t+=e.scrollLeft*o,n+=e.scrollTop*s}while(e!==r&&(e=e.parentNode));return[t,n]}function d_e(e,t){for(var n in e)if(!!e.hasOwnProperty(n)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n)}return-1}function Va(e,t){if(!e||!e.getBoundingClientRect)return ns();var n=e,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=we(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return ns();if(r||t)return n;r=!0}}while(n=n.parentNode);return ns()}function h_e(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Z2(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Og;function _H(e,t){return function(){if(!Og){var n=arguments,r=this;n.length===1?e.call(r,n[0]):e.apply(r,n),Og=setTimeout(function(){Og=void 0},t)}}}function g_e(){clearTimeout(Og),Og=void 0}function AH(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function mF(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function VR(e,t){we(e,"position","absolute"),we(e,"top",t.top),we(e,"left",t.left),we(e,"width",t.width),we(e,"height",t.height)}function Q2(e){we(e,"position",""),we(e,"top",""),we(e,"left",""),we(e,"width",""),we(e,"height","")}var Kn="Sortable"+new Date().getTime();function p_e(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(we(i,"display")==="none"||i===Ue.ghost)){e.push({target:i,rect:Gt(i)});var o=ds({},e[e.length-1].rect);if(i.thisAnimationDuration){var s=Yu(i,!0);s&&(o.top-=s.f,o.left-=s.e)}i.fromRect=o}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(d_e(e,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(t),typeof r=="function"&&r();return}var o=!1,s=0;e.forEach(function(a){var l=0,u=a.target,c=u.fromRect,f=Gt(u),d=u.prevFromRect,h=u.prevToRect,g=a.rect,p=Yu(u,!0);p&&(f.top-=p.f,f.left-=p.e),u.toRect=f,u.thisAnimationDuration&&Z2(d,f)&&!Z2(c,f)&&(g.top-f.top)/(g.left-f.left)===(c.top-f.top)/(c.left-f.left)&&(l=y_e(g,d,h,i.options)),Z2(f,c)||(u.prevFromRect=c,u.prevToRect=f,l||(l=i.options.animation),i.animate(u,g,f,l)),l&&(o=!0,s=Math.max(s,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(t),o?t=setTimeout(function(){typeof r=="function"&&r()},s):typeof r=="function"&&r(),e=[]},animate:function(r,i,o,s){if(s){we(r,"transition",""),we(r,"transform","");var a=Yu(this.el),l=a&&a.a,u=a&&a.d,c=(i.left-o.left)/(l||1),f=(i.top-o.top)/(u||1);r.animatingX=!!c,r.animatingY=!!f,we(r,"transform","translate3d("+c+"px,"+f+"px,0)"),this.forRepaintDummy=m_e(r),we(r,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),we(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){we(r,"transition",""),we(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},s)}}}}function m_e(e){return e.offsetWidth}function y_e(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}var ef=[],ew={initializeByDefault:!0},hm={mount:function(t){for(var n in ew)ew.hasOwnProperty(n)&&!(n in t)&&(t[n]=ew[n]);ef.forEach(function(r){if(r.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),ef.push(t)},pluginEvent:function(t,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var o=t+"Global";ef.forEach(function(s){!n[s.pluginName]||(n[s.pluginName][o]&&n[s.pluginName][o](ds({sortable:n},r)),n.options[s.pluginName]&&n[s.pluginName][t]&&n[s.pluginName][t](ds({sortable:n},r)))})},initializePlugins:function(t,n,r,i){ef.forEach(function(a){var l=a.pluginName;if(!(!t.options[l]&&!a.initializeByDefault)){var u=new a(t,n,t.options);u.sortable=t,u.options=t.options,t[l]=u,zi(r,u.defaults)}});for(var o in t.options)if(!!t.options.hasOwnProperty(o)){var s=this.modifyOption(t,o,t.options[o]);typeof s<"u"&&(t.options[o]=s)}},getEventProperties:function(t,n){var r={};return ef.forEach(function(i){typeof i.eventProperties=="function"&&zi(r,i.eventProperties.call(n[i.pluginName],t))}),r},modifyOption:function(t,n,r){var i;return ef.forEach(function(o){!t[o.pluginName]||o.optionListeners&&typeof o.optionListeners[n]=="function"&&(i=o.optionListeners[n].call(t[o.pluginName],r))}),i}};function qh(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,o=e.cloneEl,s=e.toEl,a=e.fromEl,l=e.oldIndex,u=e.newIndex,c=e.oldDraggableIndex,f=e.newDraggableIndex,d=e.originalEvent,h=e.putSortable,g=e.extraEventProperties;if(t=t||n&&n[Kn],!!t){var p,m=t.options,y="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!ga&&!dm?p=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(p=document.createEvent("Event"),p.initEvent(r,!0,!0)),p.to=s||n,p.from=a||n,p.item=i||n,p.clone=o,p.oldIndex=l,p.newIndex=u,p.oldDraggableIndex=c,p.newDraggableIndex=f,p.originalEvent=d,p.pullMode=h?h.lastPutMode:void 0;var v=ds(ds({},g),hm.getEventProperties(r,t));for(var b in v)p[b]=v[b];n&&n.dispatchEvent(p),m[y]&&m[y].call(t,p)}}var v_e=["evt"],kr=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,o=r_e(r,v_e);hm.pluginEvent.bind(Ue)(t,n,ds({dragEl:ce,parentEl:Zt,ghostEl:Ke,rootEl:Ht,nextEl:pu,lastDownEl:J0,cloneEl:Qt,cloneHidden:Na,dragStarted:Kh,putSortable:Rn,activeSortable:Ue.active,originalEvent:i,oldIndex:pf,oldDraggableIndex:_g,newIndex:ei,newDraggableIndex:Da,hideGhostForTarget:FH,unhideGhostForTarget:DH,cloneNowHidden:function(){Na=!0},cloneNowShown:function(){Na=!1},dispatchSortableEvent:function(a){hr({sortable:n,name:a,originalEvent:i})}},o))};function hr(e){qh(ds({putSortable:Rn,cloneEl:Qt,targetEl:ce,rootEl:Ht,oldIndex:pf,oldDraggableIndex:_g,newIndex:ei,newDraggableIndex:Da},e))}var ce,Zt,Ke,Ht,pu,J0,Qt,Na,pf,ei,_g,Da,p0,Rn,af=!1,Xv=!1,qv=[],uu,Vi,tw,nw,YR,XR,Kh,tf,Ag,Cg=!1,m0=!1,Z0,Wn,rw=[],KS=!1,Kv=[],yx=typeof document<"u",y0=EH,qR=dm||ga?"cssFloat":"float",b_e=yx&&!c_e&&!EH&&"draggable"in document.createElement("div"),CH=function(){if(!!yx){if(ga)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),TH=function(t,n){var r=we(t),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),o=vd(t,0,n),s=vd(t,1,n),a=o&&we(o),l=s&&we(s),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Gt(o).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Gt(s).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&a.float!=="none"){var f=a.float==="left"?"left":"right";return s&&(l.clear==="both"||l.clear===f)?"vertical":"horizontal"}return o&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=i&&r[qR]==="none"||s&&r[qR]==="none"&&u+c>i)?"vertical":"horizontal"},x_e=function(t,n,r){var i=r?t.left:t.top,o=r?t.right:t.bottom,s=r?t.width:t.height,a=r?n.left:n.top,l=r?n.right:n.bottom,u=r?n.width:n.height;return i===a||o===l||i+s/2===a+u/2},w_e=function(t,n){var r;return qv.some(function(i){var o=i[Kn].options.emptyInsertThreshold;if(!(!o||pF(i))){var s=Gt(i),a=t>=s.left-o&&t<=s.right+o,l=n>=s.top-o&&n<=s.bottom+o;if(a&&l)return r=i}}),r},kH=function(t){function n(o,s){return function(a,l,u,c){var f=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(o==null&&(s||f))return!0;if(o==null||o===!1)return!1;if(s&&o==="clone")return o;if(typeof o=="function")return n(o(a,l,u,c),s)(a,l,u,c);var d=(s?a:l).options.group.name;return o===!0||typeof o=="string"&&o===d||o.join&&o.indexOf(d)>-1}}var r={},i=t.group;(!i||K0(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,t.group=r},FH=function(){!CH&&Ke&&we(Ke,"display","none")},DH=function(){!CH&&Ke&&we(Ke,"display","")};yx&&document.addEventListener("click",function(e){if(Xv)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Xv=!1,!1},!0);var cu=function(t){if(ce){t=t.touches?t.touches[0]:t;var n=w_e(t.clientX,t.clientY);if(n){var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[Kn]._onDragOver(r)}}},E_e=function(t){ce&&ce.parentNode[Kn]._isOutsideThisEl(t.target)};function Ue(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=zi({},t),e[Kn]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return TH(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,a){s.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ue.supportPointer!==!1&&"PointerEvent"in window&&!Sg,emptyInsertThreshold:5};hm.initializePlugins(this,e,n);for(var r in n)!(r in t)&&(t[r]=n[r]);kH(t);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=t.forceFallback?!1:b_e,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?it(e,"pointerdown",this._onTapStart):(it(e,"mousedown",this._onTapStart),it(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(it(e,"dragover",this),it(e,"dragenter",this)),qv.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),zi(this,p_e())}Ue.prototype={constructor:Ue,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(tf=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,ce):this.options.direction},_onTapStart:function(t){if(!!t.cancelable){var n=this,r=this.el,i=this.options,o=i.preventOnFilter,s=t.type,a=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(a||t).target,u=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,c=i.filter;if(F_e(r),!ce&&!(/mousedown|pointerdown/.test(s)&&t.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Sg&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Qi(l,i.draggable,r,!1),!(l&&l.animated)&&J0!==l)){if(pf=nn(l),_g=nn(l,i.draggable),typeof c=="function"){if(c.call(this,t,l,this)){hr({sortable:n,rootEl:u,name:"filter",targetEl:l,toEl:r,fromEl:r}),kr("filter",n,{evt:t}),o&&t.cancelable&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(f){if(f=Qi(u,f.trim(),r,!1),f)return hr({sortable:n,rootEl:f,name:"filter",targetEl:l,fromEl:r,toEl:r}),kr("filter",n,{evt:t}),!0}),c)){o&&t.cancelable&&t.preventDefault();return}i.handle&&!Qi(u,i.handle,r,!1)||this._prepareDragStart(t,a,l)}}},_prepareDragStart:function(t,n,r){var i=this,o=i.el,s=i.options,a=o.ownerDocument,l;if(r&&!ce&&r.parentNode===o){var u=Gt(r);if(Ht=o,ce=r,Zt=ce.parentNode,pu=ce.nextSibling,J0=r,p0=s.group,Ue.dragged=ce,uu={target:ce,clientX:(n||t).clientX,clientY:(n||t).clientY},YR=uu.clientX-u.left,XR=uu.clientY-u.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,ce.style["will-change"]="all",l=function(){if(kr("delayEnded",i,{evt:t}),Ue.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!UR&&i.nativeDraggable&&(ce.draggable=!0),i._triggerDragStart(t,n),hr({sortable:i,name:"choose",originalEvent:t}),qt(ce,s.chosenClass,!0)},s.ignore.split(",").forEach(function(c){OH(ce,c.trim(),iw)}),it(a,"dragover",cu),it(a,"mousemove",cu),it(a,"touchmove",cu),it(a,"mouseup",i._onDrop),it(a,"touchend",i._onDrop),it(a,"touchcancel",i._onDrop),UR&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ce.draggable=!0),kr("delayStart",this,{evt:t}),s.delay&&(!s.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(dm||ga))){if(Ue.eventCanceled){this._onDrop();return}it(a,"mouseup",i._disableDelayedDrag),it(a,"touchend",i._disableDelayedDrag),it(a,"touchcancel",i._disableDelayedDrag),it(a,"mousemove",i._delayedDragTouchMoveHandler),it(a,"touchmove",i._delayedDragTouchMoveHandler),s.supportPointer&&it(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,s.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ce&&iw(ce),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;nt(t,"mouseup",this._disableDelayedDrag),nt(t,"touchend",this._disableDelayedDrag),nt(t,"touchcancel",this._disableDelayedDrag),nt(t,"mousemove",this._delayedDragTouchMoveHandler),nt(t,"touchmove",this._delayedDragTouchMoveHandler),nt(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?it(document,"pointermove",this._onTouchMove):n?it(document,"touchmove",this._onTouchMove):it(document,"mousemove",this._onTouchMove):(it(ce,"dragend",this),it(Ht,"dragstart",this._onDragStart));try{document.selection?Q0(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(af=!1,Ht&&ce){kr("dragStarted",this,{evt:n}),this.nativeDraggable&&it(document,"dragover",E_e);var r=this.options;!t&&qt(ce,r.dragClass,!1),qt(ce,r.ghostClass,!0),Ue.active=this,t&&this._appendGhost(),hr({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Vi){this._lastX=Vi.clientX,this._lastY=Vi.clientY,FH();for(var t=document.elementFromPoint(Vi.clientX,Vi.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Vi.clientX,Vi.clientY),t!==n);)n=t;if(ce.parentNode[Kn]._isOutsideThisEl(t),n)do{if(n[Kn]){var r=void 0;if(r=n[Kn]._onDragOver({clientX:Vi.clientX,clientY:Vi.clientY,target:t,rootEl:n}),r&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);DH()}},_onTouchMove:function(t){if(uu){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,o=t.touches?t.touches[0]:t,s=Ke&&Yu(Ke,!0),a=Ke&&s&&s.a,l=Ke&&s&&s.d,u=y0&&Wn&&GR(Wn),c=(o.clientX-uu.clientX+i.x)/(a||1)+(u?u[0]-rw[0]:0)/(a||1),f=(o.clientY-uu.clientY+i.y)/(l||1)+(u?u[1]-rw[1]:0)/(l||1);if(!Ue.active&&!af){if(r&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if(Ke){s?(s.e+=c-(tw||0),s.f+=f-(nw||0)):s={a:1,b:0,c:0,d:1,e:c,f};var d="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");we(Ke,"webkitTransform",d),we(Ke,"mozTransform",d),we(Ke,"msTransform",d),we(Ke,"transform",d),tw=c,nw=f,Vi=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Ke){var t=this.options.fallbackOnBody?document.body:Ht,n=Gt(ce,!0,y0,!0,t),r=this.options;if(y0){for(Wn=t;we(Wn,"position")==="static"&&we(Wn,"transform")==="none"&&Wn!==document;)Wn=Wn.parentNode;Wn!==document.body&&Wn!==document.documentElement?(Wn===document&&(Wn=ns()),n.top+=Wn.scrollTop,n.left+=Wn.scrollLeft):Wn=ns(),rw=GR(Wn)}Ke=ce.cloneNode(!0),qt(Ke,r.ghostClass,!1),qt(Ke,r.fallbackClass,!0),qt(Ke,r.dragClass,!0),we(Ke,"transition",""),we(Ke,"transform",""),we(Ke,"box-sizing","border-box"),we(Ke,"margin",0),we(Ke,"top",n.top),we(Ke,"left",n.left),we(Ke,"width",n.width),we(Ke,"height",n.height),we(Ke,"opacity","0.8"),we(Ke,"position",y0?"absolute":"fixed"),we(Ke,"zIndex","100000"),we(Ke,"pointerEvents","none"),Ue.ghost=Ke,t.appendChild(Ke),we(Ke,"transform-origin",YR/parseInt(Ke.style.width)*100+"% "+XR/parseInt(Ke.style.height)*100+"%")}},_onDragStart:function(t,n){var r=this,i=t.dataTransfer,o=r.options;if(kr("dragStart",this,{evt:t}),Ue.eventCanceled){this._onDrop();return}kr("setupClone",this),Ue.eventCanceled||(Qt=mF(ce),Qt.draggable=!1,Qt.style["will-change"]="",this._hideClone(),qt(Qt,this.options.chosenClass,!1),Ue.clone=Qt),r.cloneId=Q0(function(){kr("clone",r),!Ue.eventCanceled&&(r.options.removeCloneOnHide||Ht.insertBefore(Qt,ce),r._hideClone(),hr({sortable:r,name:"clone"}))}),!n&&qt(ce,o.dragClass,!0),n?(Xv=!0,r._loopId=setInterval(r._emulateDragOver,50)):(nt(document,"mouseup",r._onDrop),nt(document,"touchend",r._onDrop),nt(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",o.setData&&o.setData.call(r,i,ce)),it(document,"drop",r),we(ce,"transform","translateZ(0)")),af=!0,r._dragStartId=Q0(r._dragStarted.bind(r,n,t)),it(document,"selectstart",r),Kh=!0,Sg&&we(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,r=t.target,i,o,s,a=this.options,l=a.group,u=Ue.active,c=p0===l,f=a.sort,d=Rn||u,h,g=this,p=!1;if(KS)return;function m(P,H){kr(P,g,ds({evt:t,isOwner:c,axis:h?"vertical":"horizontal",revert:s,dragRect:i,targetRect:o,canSort:f,fromSortable:d,target:r,completed:v,onMove:function(ge,be){return v0(Ht,n,ce,i,ge,Gt(ge),t,be)},changed:b},H))}function y(){m("dragOverAnimationCapture"),g.captureAnimationState(),g!==d&&d.captureAnimationState()}function v(P){return m("dragOverCompleted",{insertion:P}),P&&(c?u._hideClone():u._showClone(g),g!==d&&(qt(ce,Rn?Rn.options.ghostClass:u.options.ghostClass,!1),qt(ce,a.ghostClass,!0)),Rn!==g&&g!==Ue.active?Rn=g:g===Ue.active&&Rn&&(Rn=null),d===g&&(g._ignoreWhileAnimating=r),g.animateAll(function(){m("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(r===ce&&!ce.animated||r===n&&!r.animated)&&(tf=null),!a.dragoverBubble&&!t.rootEl&&r!==document&&(ce.parentNode[Kn]._isOutsideThisEl(t.target),!P&&cu(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),p=!0}function b(){ei=nn(ce),Da=nn(ce,a.draggable),hr({sortable:g,name:"change",toEl:n,newIndex:ei,newDraggableIndex:Da,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),r=Qi(r,a.draggable,n,!0),m("dragOver"),Ue.eventCanceled)return p;if(ce.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||g._ignoreWhileAnimating===r)return v(!1);if(Xv=!1,u&&!a.disabled&&(c?f||(s=Zt!==Ht):Rn===this||(this.lastPutMode=p0.checkPull(this,u,ce,t))&&l.checkPut(this,u,ce,t))){if(h=this._getDirection(t,r)==="vertical",i=Gt(ce),m("dragOverValid"),Ue.eventCanceled)return p;if(s)return Zt=Ht,y(),this._hideClone(),m("revert"),Ue.eventCanceled||(pu?Ht.insertBefore(ce,pu):Ht.appendChild(ce)),v(!0);var x=pF(n,a.draggable);if(!x||A_e(t,h,this)&&!x.animated){if(x===ce)return v(!1);if(x&&n===t.target&&(r=x),r&&(o=Gt(r)),v0(Ht,n,ce,i,r,o,t,!!r)!==!1)return y(),n.appendChild(ce),Zt=n,b(),v(!0)}else if(x&&__e(t,h,this)){var w=vd(n,0,a,!0);if(w===ce)return v(!1);if(r=w,o=Gt(r),v0(Ht,n,ce,i,r,o,t,!1)!==!1)return y(),n.insertBefore(ce,w),Zt=n,b(),v(!0)}else if(r.parentNode===n){o=Gt(r);var S=0,E,O=ce.parentNode!==n,A=!x_e(ce.animated&&ce.toRect||i,r.animated&&r.toRect||o,h),C=h?"top":"left",_=WR(r,"top","top")||WR(ce,"top","top"),T=_?_.scrollTop:void 0;tf!==r&&(E=o[C],Cg=!1,m0=!A&&a.invertSwap||O),S=C_e(t,r,o,h,A?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,m0,tf===r);var k;if(S!==0){var D=nn(ce);do D-=S,k=Zt.children[D];while(k&&(we(k,"display")==="none"||k===Ke))}if(S===0||k===r)return v(!1);tf=r,Ag=S;var M=r.nextElementSibling,$=!1;$=S===1;var N=v0(Ht,n,ce,i,r,o,t,$);if(N!==!1)return(N===1||N===-1)&&($=N===1),KS=!0,setTimeout(O_e,30),y(),$&&!M?n.appendChild(ce):r.parentNode.insertBefore(ce,$?M:r),_&&AH(_,0,T-_.scrollTop),Zt=ce.parentNode,E!==void 0&&!m0&&(Z0=Math.abs(E-Gt(r)[C])),b(),v(!0)}if(n.contains(ce))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){nt(document,"mousemove",this._onTouchMove),nt(document,"touchmove",this._onTouchMove),nt(document,"pointermove",this._onTouchMove),nt(document,"dragover",cu),nt(document,"mousemove",cu),nt(document,"touchmove",cu)},_offUpEvents:function(){var t=this.el.ownerDocument;nt(t,"mouseup",this._onDrop),nt(t,"touchend",this._onDrop),nt(t,"pointerup",this._onDrop),nt(t,"touchcancel",this._onDrop),nt(document,"selectstart",this)},_onDrop:function(t){var n=this.el,r=this.options;if(ei=nn(ce),Da=nn(ce,r.draggable),kr("drop",this,{evt:t}),Zt=ce&&ce.parentNode,ei=nn(ce),Da=nn(ce,r.draggable),Ue.eventCanceled){this._nulling();return}af=!1,m0=!1,Cg=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),JS(this.cloneId),JS(this._dragStartId),this.nativeDraggable&&(nt(document,"drop",this),nt(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Sg&&we(document.body,"user-select",""),we(ce,"transform",""),t&&(Kh&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),Ke&&Ke.parentNode&&Ke.parentNode.removeChild(Ke),(Ht===Zt||Rn&&Rn.lastPutMode!=="clone")&&Qt&&Qt.parentNode&&Qt.parentNode.removeChild(Qt),ce&&(this.nativeDraggable&&nt(ce,"dragend",this),iw(ce),ce.style["will-change"]="",Kh&&!af&&qt(ce,Rn?Rn.options.ghostClass:this.options.ghostClass,!1),qt(ce,this.options.chosenClass,!1),hr({sortable:this,name:"unchoose",toEl:Zt,newIndex:null,newDraggableIndex:null,originalEvent:t}),Ht!==Zt?(ei>=0&&(hr({rootEl:Zt,name:"add",toEl:Zt,fromEl:Ht,originalEvent:t}),hr({sortable:this,name:"remove",toEl:Zt,originalEvent:t}),hr({rootEl:Zt,name:"sort",toEl:Zt,fromEl:Ht,originalEvent:t}),hr({sortable:this,name:"sort",toEl:Zt,originalEvent:t})),Rn&&Rn.save()):ei!==pf&&ei>=0&&(hr({sortable:this,name:"update",toEl:Zt,originalEvent:t}),hr({sortable:this,name:"sort",toEl:Zt,originalEvent:t})),Ue.active&&((ei==null||ei===-1)&&(ei=pf,Da=_g),hr({sortable:this,name:"end",toEl:Zt,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){kr("nulling",this),Ht=ce=Zt=Ke=pu=Qt=J0=Na=uu=Vi=Kh=ei=Da=pf=_g=tf=Ag=Rn=p0=Ue.dragged=Ue.ghost=Ue.clone=Ue.active=null,Kv.forEach(function(t){t.checked=!0}),Kv.length=tw=nw=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":ce&&(this._onDragOver(t),S_e(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,r=this.el.children,i=0,o=r.length,s=this.options;i<o;i++)n=r[i],Qi(n,s.draggable,this.el,!1)&&t.push(n.getAttribute(s.dataIdAttr)||k_e(n));return t},sort:function(t,n){var r={},i=this.el;this.toArray().forEach(function(o,s){var a=i.children[s];Qi(a,this.options.draggable,i,!1)&&(r[o]=a)},this),n&&this.captureAnimationState(),t.forEach(function(o){r[o]&&(i.removeChild(r[o]),i.appendChild(r[o]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return Qi(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var r=this.options;if(n===void 0)return r[t];var i=hm.modifyOption(this,t,n);typeof i<"u"?r[t]=i:r[t]=n,t==="group"&&kH(r)},destroy:function(){kr("destroy",this);var t=this.el;t[Kn]=null,nt(t,"mousedown",this._onTapStart),nt(t,"touchstart",this._onTapStart),nt(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(nt(t,"dragover",this),nt(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),qv.splice(qv.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Na){if(kr("hideClone",this),Ue.eventCanceled)return;we(Qt,"display","none"),this.options.removeCloneOnHide&&Qt.parentNode&&Qt.parentNode.removeChild(Qt),Na=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Na){if(kr("showClone",this),Ue.eventCanceled)return;ce.parentNode==Ht&&!this.options.group.revertClone?Ht.insertBefore(Qt,ce):pu?Ht.insertBefore(Qt,pu):Ht.appendChild(Qt),this.options.group.revertClone&&this.animate(ce,Qt),we(Qt,"display",""),Na=!1}}};function S_e(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function v0(e,t,n,r,i,o,s,a){var l,u=e[Kn],c=u.options.onMove,f;return window.CustomEvent&&!ga&&!dm?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=e,l.dragged=n,l.draggedRect=r,l.related=i||t,l.relatedRect=o||Gt(t),l.willInsertAfter=a,l.originalEvent=s,e.dispatchEvent(l),c&&(f=c.call(u,l,s)),f}function iw(e){e.draggable=!1}function O_e(){KS=!1}function __e(e,t,n){var r=Gt(vd(n.el,0,n.options,!0)),i=10;return t?e.clientX<r.left-i||e.clientY<r.top&&e.clientX<r.right:e.clientY<r.top-i||e.clientY<r.bottom&&e.clientX<r.left}function A_e(e,t,n){var r=Gt(pF(n.el,n.options.draggable)),i=10;return t?e.clientX>r.right+i||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+i}function C_e(e,t,n,r,i,o,s,a){var l=r?e.clientY:e.clientX,u=r?n.height:n.width,c=r?n.top:n.left,f=r?n.bottom:n.right,d=!1;if(!s){if(a&&Z0<u*i){if(!Cg&&(Ag===1?l>c+u*o/2:l<f-u*o/2)&&(Cg=!0),Cg)d=!0;else if(Ag===1?l<c+Z0:l>f-Z0)return-Ag}else if(l>c+u*(1-i)/2&&l<f-u*(1-i)/2)return T_e(t)}return d=d||s,d&&(l<c+u*o/2||l>f-u*o/2)?l>c+u/2?1:-1:0}function T_e(e){return nn(ce)<nn(e)?1:-1}function k_e(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function F_e(e){Kv.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var r=t[n];r.checked&&Kv.push(r)}}function Q0(e){return setTimeout(e,0)}function JS(e){return clearTimeout(e)}yx&&it(document,"touchmove",function(e){(Ue.active||af)&&e.cancelable&&e.preventDefault()});Ue.utils={on:it,off:nt,css:we,find:OH,is:function(t,n){return!!Qi(t,n,t,!1)},extend:h_e,throttle:_H,closest:Qi,toggleClass:qt,clone:mF,index:nn,nextTick:Q0,cancelNextTick:JS,detectDirection:TH,getChild:vd};Ue.get=function(e){return e[Kn]};Ue.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Ue.utils=ds(ds({},Ue.utils),r.utils)),hm.mount(r)})};Ue.create=function(e,t){return new Ue(e,t)};Ue.version=u_e;var ln=[],Jh,ZS,QS=!1,ow,sw,Jv,Zh;function D_e(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?it(document,"dragover",this._handleAutoScroll):this.options.supportPointer?it(document,"pointermove",this._handleFallbackAutoScroll):r.touches?it(document,"touchmove",this._handleFallbackAutoScroll):it(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?nt(document,"dragover",this._handleAutoScroll):(nt(document,"pointermove",this._handleFallbackAutoScroll),nt(document,"touchmove",this._handleFallbackAutoScroll),nt(document,"mousemove",this._handleFallbackAutoScroll)),KR(),ey(),g_e()},nulling:function(){Jv=ZS=Jh=QS=Zh=ow=sw=null,ln.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,o=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(o,s);if(Jv=n,r||this.options.forceAutoScrollFallback||dm||ga||Sg){aw(n,this.options,a,r);var l=Va(a,!0);QS&&(!Zh||o!==ow||s!==sw)&&(Zh&&KR(),Zh=setInterval(function(){var u=Va(document.elementFromPoint(o,s),!0);u!==l&&(l=u,ey()),aw(n,i.options,u,r)},10),ow=o,sw=s)}else{if(!this.options.bubbleScroll||Va(a,!0)===ns()){ey();return}aw(n,this.options,Va(a,!1),!1)}}},zi(e,{pluginName:"scroll",initializeByDefault:!0})}function ey(){ln.forEach(function(e){clearInterval(e.pid)}),ln=[]}function KR(){clearInterval(Zh)}var aw=_H(function(e,t,n,r){if(!!t.scroll){var i=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,a=t.scrollSpeed,l=ns(),u=!1,c;ZS!==n&&(ZS=n,ey(),Jh=t.scroll,c=t.scrollFn,Jh===!0&&(Jh=Va(n,!0)));var f=0,d=Jh;do{var h=d,g=Gt(h),p=g.top,m=g.bottom,y=g.left,v=g.right,b=g.width,x=g.height,w=void 0,S=void 0,E=h.scrollWidth,O=h.scrollHeight,A=we(h),C=h.scrollLeft,_=h.scrollTop;h===l?(w=b<E&&(A.overflowX==="auto"||A.overflowX==="scroll"||A.overflowX==="visible"),S=x<O&&(A.overflowY==="auto"||A.overflowY==="scroll"||A.overflowY==="visible")):(w=b<E&&(A.overflowX==="auto"||A.overflowX==="scroll"),S=x<O&&(A.overflowY==="auto"||A.overflowY==="scroll"));var T=w&&(Math.abs(v-i)<=s&&C+b<E)-(Math.abs(y-i)<=s&&!!C),k=S&&(Math.abs(m-o)<=s&&_+x<O)-(Math.abs(p-o)<=s&&!!_);if(!ln[f])for(var D=0;D<=f;D++)ln[D]||(ln[D]={});(ln[f].vx!=T||ln[f].vy!=k||ln[f].el!==h)&&(ln[f].el=h,ln[f].vx=T,ln[f].vy=k,clearInterval(ln[f].pid),(T!=0||k!=0)&&(u=!0,ln[f].pid=setInterval(function(){r&&this.layer===0&&Ue.active._onTouchMove(Jv);var M=ln[this.layer].vy?ln[this.layer].vy*a:0,$=ln[this.layer].vx?ln[this.layer].vx*a:0;typeof c=="function"&&c.call(Ue.dragged.parentNode[Kn],$,M,e,Jv,ln[this.layer].el)!=="continue"||AH(ln[this.layer].el,$,M)}.bind({layer:f}),24))),f++}while(t.bubbleScroll&&d!==l&&(d=Va(d,!1)));QS=u}},30),MH=function(t){var n=t.originalEvent,r=t.putSortable,i=t.dragEl,o=t.activeSortable,s=t.dispatchSortableEvent,a=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(!!n){var u=r||o;a();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(c.clientX,c.clientY);l(),u&&!u.el.contains(f)&&(s("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function yF(){}yF.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=vd(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:MH};zi(yF,{pluginName:"revertOnSpill"});function vF(){}vF.prototype={onSpill:function(t){var n=t.dragEl,r=t.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:MH};zi(vF,{pluginName:"removeOnSpill"});var Si;function M_e(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(n){var r=n.dragEl;Si=r},dragOverValid:function(n){var r=n.completed,i=n.target,o=n.onMove,s=n.activeSortable,a=n.changed,l=n.cancel;if(!!s.options.swap){var u=this.sortable.el,c=this.options;if(i&&i!==u){var f=Si;o(i)!==!1?(qt(i,c.swapClass,!0),Si=i):Si=null,f&&f!==Si&&qt(f,c.swapClass,!1)}a(),r(!0),l()}},drop:function(n){var r=n.activeSortable,i=n.putSortable,o=n.dragEl,s=i||this.sortable,a=this.options;Si&&qt(Si,a.swapClass,!1),Si&&(a.swap||i&&i.options.swap)&&o!==Si&&(s.captureAnimationState(),s!==r&&r.captureAnimationState(),$_e(o,Si),s.animateAll(),s!==r&&r.animateAll())},nulling:function(){Si=null}},zi(e,{pluginName:"swap",eventProperties:function(){return{swapItem:Si}}})}function $_e(e,t){var n=e.parentNode,r=t.parentNode,i,o;!n||!r||n.isEqualNode(t)||r.isEqualNode(e)||(i=nn(e),o=nn(t),n.isEqualNode(r)&&i<o&&o++,n.insertBefore(t,n.children[i]),r.insertBefore(e,r.children[o]))}var Ye=[],Zr=[],wh,Yi,Eh=!1,Fr=!1,nf=!1,Rt,Sh,b0;function N_e(){function e(t){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));t.options.supportPointer?it(document,"pointerup",this._deselectMultiDrag):(it(document,"mouseup",this._deselectMultiDrag),it(document,"touchend",this._deselectMultiDrag)),it(document,"keydown",this._checkKeyDown),it(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,o){var s="";Ye.length&&Yi===t?Ye.forEach(function(a,l){s+=(l?", ":"")+a.textContent}):s=o.textContent,i.setData("Text",s)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var r=n.dragEl;Rt=r},delayEnded:function(){this.isMultiDrag=~Ye.indexOf(Rt)},setupClone:function(n){var r=n.sortable,i=n.cancel;if(!!this.isMultiDrag){for(var o=0;o<Ye.length;o++)Zr.push(mF(Ye[o])),Zr[o].sortableIndex=Ye[o].sortableIndex,Zr[o].draggable=!1,Zr[o].style["will-change"]="",qt(Zr[o],this.options.selectedClass,!1),Ye[o]===Rt&&qt(Zr[o],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(n){var r=n.sortable,i=n.rootEl,o=n.dispatchSortableEvent,s=n.cancel;!this.isMultiDrag||this.options.removeCloneOnHide||Ye.length&&Yi===r&&(JR(!0,i),o("clone"),s())},showClone:function(n){var r=n.cloneNowShown,i=n.rootEl,o=n.cancel;!this.isMultiDrag||(JR(!1,i),Zr.forEach(function(s){we(s,"display","")}),r(),b0=!1,o())},hideClone:function(n){var r=this;n.sortable;var i=n.cloneNowHidden,o=n.cancel;!this.isMultiDrag||(Zr.forEach(function(s){we(s,"display","none"),r.options.removeCloneOnHide&&s.parentNode&&s.parentNode.removeChild(s)}),i(),b0=!0,o())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&Yi&&Yi.multiDrag._deselectMultiDrag(),Ye.forEach(function(r){r.sortableIndex=nn(r)}),Ye=Ye.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),nf=!0},dragStarted:function(n){var r=this,i=n.sortable;if(!!this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Ye.forEach(function(s){s!==Rt&&we(s,"position","absolute")});var o=Gt(Rt,!1,!0,!0);Ye.forEach(function(s){s!==Rt&&VR(s,o)}),Fr=!0,Eh=!0}i.animateAll(function(){Fr=!1,Eh=!1,r.options.animation&&Ye.forEach(function(s){Q2(s)}),r.options.sort&&x0()})}},dragOver:function(n){var r=n.target,i=n.completed,o=n.cancel;Fr&&~Ye.indexOf(r)&&(i(!1),o())},revert:function(n){var r=n.fromSortable,i=n.rootEl,o=n.sortable,s=n.dragRect;Ye.length>1&&(Ye.forEach(function(a){o.addAnimationState({target:a,rect:Fr?Gt(a):s}),Q2(a),a.fromRect=s,r.removeAnimationState(a)}),Fr=!1,R_e(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(n){var r=n.sortable,i=n.isOwner,o=n.insertion,s=n.activeSortable,a=n.parentEl,l=n.putSortable,u=this.options;if(o){if(i&&s._hideClone(),Eh=!1,u.animation&&Ye.length>1&&(Fr||!i&&!s.options.sort&&!l)){var c=Gt(Rt,!1,!0,!0);Ye.forEach(function(d){d!==Rt&&(VR(d,c),a.appendChild(d))}),Fr=!0}if(!i)if(Fr||x0(),Ye.length>1){var f=b0;s._showClone(r),s.options.animation&&!b0&&f&&Zr.forEach(function(d){s.addAnimationState({target:d,rect:Sh}),d.fromRect=Sh,d.thisAnimationDuration=null})}else s._showClone(r)}},dragOverAnimationCapture:function(n){var r=n.dragRect,i=n.isOwner,o=n.activeSortable;if(Ye.forEach(function(a){a.thisAnimationDuration=null}),o.options.animation&&!i&&o.multiDrag.isMultiDrag){Sh=zi({},r);var s=Yu(Rt,!0);Sh.top-=s.f,Sh.left-=s.e}},dragOverAnimationComplete:function(){Fr&&(Fr=!1,x0())},drop:function(n){var r=n.originalEvent,i=n.rootEl,o=n.parentEl,s=n.sortable,a=n.dispatchSortableEvent,l=n.oldIndex,u=n.putSortable,c=u||this.sortable;if(!!r){var f=this.options,d=o.children;if(!nf)if(f.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),qt(Rt,f.selectedClass,!~Ye.indexOf(Rt)),~Ye.indexOf(Rt))Ye.splice(Ye.indexOf(Rt),1),wh=null,qh({sortable:s,rootEl:i,name:"deselect",targetEl:Rt,originalEvt:r});else{if(Ye.push(Rt),qh({sortable:s,rootEl:i,name:"select",targetEl:Rt,originalEvt:r}),r.shiftKey&&wh&&s.el.contains(wh)){var h=nn(wh),g=nn(Rt);if(~h&&~g&&h!==g){var p,m;for(g>h?(m=h,p=g):(m=g,p=h+1);m<p;m++)~Ye.indexOf(d[m])||(qt(d[m],f.selectedClass,!0),Ye.push(d[m]),qh({sortable:s,rootEl:i,name:"select",targetEl:d[m],originalEvt:r}))}}else wh=Rt;Yi=c}if(nf&&this.isMultiDrag){if(Fr=!1,(o[Kn].options.sort||o!==i)&&Ye.length>1){var y=Gt(Rt),v=nn(Rt,":not(."+this.options.selectedClass+")");if(!Eh&&f.animation&&(Rt.thisAnimationDuration=null),c.captureAnimationState(),!Eh&&(f.animation&&(Rt.fromRect=y,Ye.forEach(function(x){if(x.thisAnimationDuration=null,x!==Rt){var w=Fr?Gt(x):y;x.fromRect=w,c.addAnimationState({target:x,rect:w})}})),x0(),Ye.forEach(function(x){d[v]?o.insertBefore(x,d[v]):o.appendChild(x),v++}),l===nn(Rt))){var b=!1;Ye.forEach(function(x){if(x.sortableIndex!==nn(x)){b=!0;return}}),b&&a("update")}Ye.forEach(function(x){Q2(x)}),c.animateAll()}Yi=c}(i===o||u&&u.lastPutMode!=="clone")&&Zr.forEach(function(x){x.parentNode&&x.parentNode.removeChild(x)})}},nullingGlobal:function(){this.isMultiDrag=nf=!1,Zr.length=0},destroyGlobal:function(){this._deselectMultiDrag(),nt(document,"pointerup",this._deselectMultiDrag),nt(document,"mouseup",this._deselectMultiDrag),nt(document,"touchend",this._deselectMultiDrag),nt(document,"keydown",this._checkKeyDown),nt(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof nf<"u"&&nf)&&Yi===this.sortable&&!(n&&Qi(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;Ye.length;){var r=Ye[0];qt(r,this.options.selectedClass,!1),Ye.shift(),qh({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r,originalEvt:n})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},zi(e,{pluginName:"multiDrag",utils:{select:function(n){var r=n.parentNode[Kn];!r||!r.options.multiDrag||~Ye.indexOf(n)||(Yi&&Yi!==r&&(Yi.multiDrag._deselectMultiDrag(),Yi=r),qt(n,r.options.selectedClass,!0),Ye.push(n))},deselect:function(n){var r=n.parentNode[Kn],i=Ye.indexOf(n);!r||!r.options.multiDrag||!~i||(qt(n,r.options.selectedClass,!1),Ye.splice(i,1))}},eventProperties:function(){var n=this,r=[],i=[];return Ye.forEach(function(o){r.push({multiDragElement:o,index:o.sortableIndex});var s;Fr&&o!==Rt?s=-1:Fr?s=nn(o,":not(."+n.options.selectedClass+")"):s=nn(o),i.push({multiDragElement:o,index:s})}),{items:i_e(Ye),clones:[].concat(Zr),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function R_e(e,t){Ye.forEach(function(n,r){var i=t.children[n.sortableIndex+(e?Number(r):0)];i?t.insertBefore(n,i):t.appendChild(n)})}function JR(e,t){Zr.forEach(function(n,r){var i=t.children[n.sortableIndex+(e?Number(r):0)];i?t.insertBefore(n,i):t.appendChild(n)})}function x0(){Ye.forEach(function(e){e!==Rt&&e.parentNode&&e.parentNode.removeChild(e)})}Ue.mount(new D_e);Ue.mount(vF,yF);const P_e=Object.freeze(Object.defineProperty({__proto__:null,default:Ue,MultiDrag:N_e,Sortable:Ue,Swap:M_e},Symbol.toStringTag,{value:"Module"})),I_e=jI(P_e);(function(e,t){(function(r,i){e.exports=i(e_e,I_e)})(typeof self<"u"?self:NY,function(n,r){return function(i){var o={};function s(a){if(o[a])return o[a].exports;var l=o[a]={i:a,l:!1,exports:{}};return i[a].call(l.exports,l,l.exports,s),l.l=!0,l.exports}return s.m=i,s.c=o,s.d=function(a,l,u){s.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:u})},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},s.t=function(a,l){if(l&1&&(a=s(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var u=Object.create(null);if(s.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var c in a)s.d(u,c,function(f){return a[f]}.bind(null,c));return u},s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,"a",l),l},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.p="",s(s.s="fb15")}({"00ee":function(i,o,s){var a=s("b622"),l=a("toStringTag"),u={};u[l]="z",i.exports=String(u)==="[object z]"},"0366":function(i,o,s){var a=s("1c0b");i.exports=function(l,u,c){if(a(l),u===void 0)return l;switch(c){case 0:return function(){return l.call(u)};case 1:return function(f){return l.call(u,f)};case 2:return function(f,d){return l.call(u,f,d)};case 3:return function(f,d,h){return l.call(u,f,d,h)}}return function(){return l.apply(u,arguments)}}},"057f":function(i,o,s){var a=s("fc6a"),l=s("241c").f,u={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],f=function(d){try{return l(d)}catch{return c.slice()}};i.exports.f=function(h){return c&&u.call(h)=="[object Window]"?f(h):l(a(h))}},"06cf":function(i,o,s){var a=s("83ab"),l=s("d1e7"),u=s("5c6c"),c=s("fc6a"),f=s("c04e"),d=s("5135"),h=s("0cfb"),g=Object.getOwnPropertyDescriptor;o.f=a?g:function(m,y){if(m=c(m),y=f(y,!0),h)try{return g(m,y)}catch{}if(d(m,y))return u(!l.f.call(m,y),m[y])}},"0cfb":function(i,o,s){var a=s("83ab"),l=s("d039"),u=s("cc12");i.exports=!a&&!l(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,o,s){var a=s("23e7"),l=s("d58f").left,u=s("a640"),c=s("ae40"),f=u("reduce"),d=c("reduce",{1:0});a({target:"Array",proto:!0,forced:!f||!d},{reduce:function(g){return l(this,g,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,o,s){var a=s("c6b6"),l=s("9263");i.exports=function(u,c){var f=u.exec;if(typeof f=="function"){var d=f.call(u,c);if(typeof d!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return d}if(a(u)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(u,c)}},"159b":function(i,o,s){var a=s("da84"),l=s("fdbc"),u=s("17c2"),c=s("9112");for(var f in l){var d=a[f],h=d&&d.prototype;if(h&&h.forEach!==u)try{c(h,"forEach",u)}catch{h.forEach=u}}},"17c2":function(i,o,s){var a=s("b727").forEach,l=s("a640"),u=s("ae40"),c=l("forEach"),f=u("forEach");i.exports=!c||!f?function(h){return a(this,h,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,o,s){var a=s("d066");i.exports=a("document","documentElement")},"1c0b":function(i,o){i.exports=function(s){if(typeof s!="function")throw TypeError(String(s)+" is not a function");return s}},"1c7e":function(i,o,s){var a=s("b622"),l=a("iterator"),u=!1;try{var c=0,f={next:function(){return{done:!!c++}},return:function(){u=!0}};f[l]=function(){return this},Array.from(f,function(){throw 2})}catch{}i.exports=function(d,h){if(!h&&!u)return!1;var g=!1;try{var p={};p[l]=function(){return{next:function(){return{done:g=!0}}}},d(p)}catch{}return g}},"1d80":function(i,o){i.exports=function(s){if(s==null)throw TypeError("Can't call method on "+s);return s}},"1dde":function(i,o,s){var a=s("d039"),l=s("b622"),u=s("2d00"),c=l("species");i.exports=function(f){return u>=51||!a(function(){var d=[],h=d.constructor={};return h[c]=function(){return{foo:1}},d[f](Boolean).foo!==1})}},"23cb":function(i,o,s){var a=s("a691"),l=Math.max,u=Math.min;i.exports=function(c,f){var d=a(c);return d<0?l(d+f,0):u(d,f)}},"23e7":function(i,o,s){var a=s("da84"),l=s("06cf").f,u=s("9112"),c=s("6eeb"),f=s("ce4e"),d=s("e893"),h=s("94ca");i.exports=function(g,p){var m=g.target,y=g.global,v=g.stat,b,x,w,S,E,O;if(y?x=a:v?x=a[m]||f(m,{}):x=(a[m]||{}).prototype,x)for(w in p){if(E=p[w],g.noTargetGet?(O=l(x,w),S=O&&O.value):S=x[w],b=h(y?w:m+(v?".":"#")+w,g.forced),!b&&S!==void 0){if(typeof E==typeof S)continue;d(E,S)}(g.sham||S&&S.sham)&&u(E,"sham",!0),c(x,w,E,g)}}},"241c":function(i,o,s){var a=s("ca84"),l=s("7839"),u=l.concat("length","prototype");o.f=Object.getOwnPropertyNames||function(f){return a(f,u)}},"25f0":function(i,o,s){var a=s("6eeb"),l=s("825a"),u=s("d039"),c=s("ad6d"),f="toString",d=RegExp.prototype,h=d[f],g=u(function(){return h.call({source:"a",flags:"b"})!="/a/b"}),p=h.name!=f;(g||p)&&a(RegExp.prototype,f,function(){var y=l(this),v=String(y.source),b=y.flags,x=String(b===void 0&&y instanceof RegExp&&!("flags"in d)?c.call(y):b);return"/"+v+"/"+x},{unsafe:!0})},"2ca0":function(i,o,s){var a=s("23e7"),l=s("06cf").f,u=s("50c4"),c=s("5a34"),f=s("1d80"),d=s("ab13"),h=s("c430"),g="".startsWith,p=Math.min,m=d("startsWith"),y=!h&&!m&&!!function(){var v=l(String.prototype,"startsWith");return v&&!v.writable}();a({target:"String",proto:!0,forced:!y&&!m},{startsWith:function(b){var x=String(f(this));c(b);var w=u(p(arguments.length>1?arguments[1]:void 0,x.length)),S=String(b);return g?g.call(x,S,w):x.slice(w,w+S.length)===S}})},"2d00":function(i,o,s){var a=s("da84"),l=s("342f"),u=a.process,c=u&&u.versions,f=c&&c.v8,d,h;f?(d=f.split("."),h=d[0]+d[1]):l&&(d=l.match(/Edge\/(\d+)/),(!d||d[1]>=74)&&(d=l.match(/Chrome\/(\d+)/),d&&(h=d[1]))),i.exports=h&&+h},"342f":function(i,o,s){var a=s("d066");i.exports=a("navigator","userAgent")||""},"35a1":function(i,o,s){var a=s("f5df"),l=s("3f8c"),u=s("b622"),c=u("iterator");i.exports=function(f){if(f!=null)return f[c]||f["@@iterator"]||l[a(f)]}},"37e8":function(i,o,s){var a=s("83ab"),l=s("9bf2"),u=s("825a"),c=s("df75");i.exports=a?Object.defineProperties:function(d,h){u(d);for(var g=c(h),p=g.length,m=0,y;p>m;)l.f(d,y=g[m++],h[y]);return d}},"3bbe":function(i,o,s){var a=s("861d");i.exports=function(l){if(!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(i,o,s){var a=s("6547").charAt,l=s("69f3"),u=s("7dd0"),c="String Iterator",f=l.set,d=l.getterFor(c);u(String,"String",function(h){f(this,{type:c,string:String(h),index:0})},function(){var g=d(this),p=g.string,m=g.index,y;return m>=p.length?{value:void 0,done:!0}:(y=a(p,m),g.index+=y.length,{value:y,done:!1})})},"3f8c":function(i,o){i.exports={}},4160:function(i,o,s){var a=s("23e7"),l=s("17c2");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(i,o,s){var a=s("da84");i.exports=a},"44ad":function(i,o,s){var a=s("d039"),l=s("c6b6"),u="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return l(c)=="String"?u.call(c,""):Object(c)}:Object},"44d2":function(i,o,s){var a=s("b622"),l=s("7c73"),u=s("9bf2"),c=a("unscopables"),f=Array.prototype;f[c]==null&&u.f(f,c,{configurable:!0,value:l(null)}),i.exports=function(d){f[c][d]=!0}},"44e7":function(i,o,s){var a=s("861d"),l=s("c6b6"),u=s("b622"),c=u("match");i.exports=function(f){var d;return a(f)&&((d=f[c])!==void 0?!!d:l(f)=="RegExp")}},4930:function(i,o,s){var a=s("d039");i.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"4d64":function(i,o,s){var a=s("fc6a"),l=s("50c4"),u=s("23cb"),c=function(f){return function(d,h,g){var p=a(d),m=l(p.length),y=u(g,m),v;if(f&&h!=h){for(;m>y;)if(v=p[y++],v!=v)return!0}else for(;m>y;y++)if((f||y in p)&&p[y]===h)return f||y||0;return!f&&-1}};i.exports={includes:c(!0),indexOf:c(!1)}},"4de4":function(i,o,s){var a=s("23e7"),l=s("b727").filter,u=s("1dde"),c=s("ae40"),f=u("filter"),d=c("filter");a({target:"Array",proto:!0,forced:!f||!d},{filter:function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,o,s){var a=s("0366"),l=s("7b0b"),u=s("9bdd"),c=s("e95a"),f=s("50c4"),d=s("8418"),h=s("35a1");i.exports=function(p){var m=l(p),y=typeof this=="function"?this:Array,v=arguments.length,b=v>1?arguments[1]:void 0,x=b!==void 0,w=h(m),S=0,E,O,A,C,_,T;if(x&&(b=a(b,v>2?arguments[2]:void 0,2)),w!=null&&!(y==Array&&c(w)))for(C=w.call(m),_=C.next,O=new y;!(A=_.call(C)).done;S++)T=x?u(C,b,[A.value,S],!0):A.value,d(O,S,T);else for(E=f(m.length),O=new y(E);E>S;S++)T=x?b(m[S],S):m[S],d(O,S,T);return O.length=S,O}},"4fad":function(i,o,s){var a=s("23e7"),l=s("6f53").entries;a({target:"Object",stat:!0},{entries:function(c){return l(c)}})},"50c4":function(i,o,s){var a=s("a691"),l=Math.min;i.exports=function(u){return u>0?l(a(u),9007199254740991):0}},5135:function(i,o){var s={}.hasOwnProperty;i.exports=function(a,l){return s.call(a,l)}},5319:function(i,o,s){var a=s("d784"),l=s("825a"),u=s("7b0b"),c=s("50c4"),f=s("a691"),d=s("1d80"),h=s("8aa5"),g=s("14c3"),p=Math.max,m=Math.min,y=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,b=/\$([$&'`]|\d\d?)/g,x=function(w){return w===void 0?w:String(w)};a("replace",2,function(w,S,E,O){var A=O.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,C=O.REPLACE_KEEPS_$0,_=A?"$":"$0";return[function(D,M){var $=d(this),N=D==null?void 0:D[w];return N!==void 0?N.call(D,$,M):S.call(String($),D,M)},function(k,D){if(!A&&C||typeof D=="string"&&D.indexOf(_)===-1){var M=E(S,k,this,D);if(M.done)return M.value}var $=l(k),N=String(this),P=typeof D=="function";P||(D=String(D));var H=$.global;if(H){var ie=$.unicode;$.lastIndex=0}for(var ge=[];;){var be=g($,N);if(be===null||(ge.push(be),!H))break;var Fe=String(be[0]);Fe===""&&($.lastIndex=h(N,c($.lastIndex),ie))}for(var Be="",De=0,Ie=0;Ie<ge.length;Ie++){be=ge[Ie];for(var Qe=String(be[0]),yt=p(m(f(be.index),N.length),0),Q=[],Oe=1;Oe<be.length;Oe++)Q.push(x(be[Oe]));var je=be.groups;if(P){var F=[Qe].concat(Q,yt,N);je!==void 0&&F.push(je);var R=String(D.apply(void 0,F))}else R=T(Qe,N,yt,Q,je,D);yt>=De&&(Be+=N.slice(De,yt)+R,De=yt+Qe.length)}return Be+N.slice(De)}];function T(k,D,M,$,N,P){var H=M+k.length,ie=$.length,ge=b;return N!==void 0&&(N=u(N),ge=v),S.call(P,ge,function(be,Fe){var Be;switch(Fe.charAt(0)){case"$":return"$";case"&":return k;case"`":return D.slice(0,M);case"'":return D.slice(H);case"<":Be=N[Fe.slice(1,-1)];break;default:var De=+Fe;if(De===0)return be;if(De>ie){var Ie=y(De/10);return Ie===0?be:Ie<=ie?$[Ie-1]===void 0?Fe.charAt(1):$[Ie-1]+Fe.charAt(1):be}Be=$[De-1]}return Be===void 0?"":Be})}})},5692:function(i,o,s){var a=s("c430"),l=s("c6cd");(i.exports=function(u,c){return l[u]||(l[u]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,o,s){var a=s("d066"),l=s("241c"),u=s("7418"),c=s("825a");i.exports=a("Reflect","ownKeys")||function(d){var h=l.f(c(d)),g=u.f;return g?h.concat(g(d)):h}},"5a34":function(i,o,s){var a=s("44e7");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(i,o){i.exports=function(s,a){return{enumerable:!(s&1),configurable:!(s&2),writable:!(s&4),value:a}}},"5db7":function(i,o,s){var a=s("23e7"),l=s("a2bf"),u=s("7b0b"),c=s("50c4"),f=s("1c0b"),d=s("65f0");a({target:"Array",proto:!0},{flatMap:function(g){var p=u(this),m=c(p.length),y;return f(g),y=d(p,0),y.length=l(y,p,p,m,0,1,g,arguments.length>1?arguments[1]:void 0),y}})},6547:function(i,o,s){var a=s("a691"),l=s("1d80"),u=function(c){return function(f,d){var h=String(l(f)),g=a(d),p=h.length,m,y;return g<0||g>=p?c?"":void 0:(m=h.charCodeAt(g),m<55296||m>56319||g+1===p||(y=h.charCodeAt(g+1))<56320||y>57343?c?h.charAt(g):m:c?h.slice(g,g+2):(m-55296<<10)+(y-56320)+65536)}};i.exports={codeAt:u(!1),charAt:u(!0)}},"65f0":function(i,o,s){var a=s("861d"),l=s("e8b5"),u=s("b622"),c=u("species");i.exports=function(f,d){var h;return l(f)&&(h=f.constructor,typeof h=="function"&&(h===Array||l(h.prototype))?h=void 0:a(h)&&(h=h[c],h===null&&(h=void 0))),new(h===void 0?Array:h)(d===0?0:d)}},"69f3":function(i,o,s){var a=s("7f9a"),l=s("da84"),u=s("861d"),c=s("9112"),f=s("5135"),d=s("f772"),h=s("d012"),g=l.WeakMap,p,m,y,v=function(A){return y(A)?m(A):p(A,{})},b=function(A){return function(C){var _;if(!u(C)||(_=m(C)).type!==A)throw TypeError("Incompatible receiver, "+A+" required");return _}};if(a){var x=new g,w=x.get,S=x.has,E=x.set;p=function(A,C){return E.call(x,A,C),C},m=function(A){return w.call(x,A)||{}},y=function(A){return S.call(x,A)}}else{var O=d("state");h[O]=!0,p=function(A,C){return c(A,O,C),C},m=function(A){return f(A,O)?A[O]:{}},y=function(A){return f(A,O)}}i.exports={set:p,get:m,has:y,enforce:v,getterFor:b}},"6eeb":function(i,o,s){var a=s("da84"),l=s("9112"),u=s("5135"),c=s("ce4e"),f=s("8925"),d=s("69f3"),h=d.get,g=d.enforce,p=String(String).split("String");(i.exports=function(m,y,v,b){var x=b?!!b.unsafe:!1,w=b?!!b.enumerable:!1,S=b?!!b.noTargetGet:!1;if(typeof v=="function"&&(typeof y=="string"&&!u(v,"name")&&l(v,"name",y),g(v).source=p.join(typeof y=="string"?y:"")),m===a){w?m[y]=v:c(y,v);return}else x?!S&&m[y]&&(w=!0):delete m[y];w?m[y]=v:l(m,y,v)})(Function.prototype,"toString",function(){return typeof this=="function"&&h(this).source||f(this)})},"6f53":function(i,o,s){var a=s("83ab"),l=s("df75"),u=s("fc6a"),c=s("d1e7").f,f=function(d){return function(h){for(var g=u(h),p=l(g),m=p.length,y=0,v=[],b;m>y;)b=p[y++],(!a||c.call(g,b))&&v.push(d?[b,g[b]]:g[b]);return v}};i.exports={entries:f(!0),values:f(!1)}},"73d9":function(i,o,s){var a=s("44d2");a("flatMap")},7418:function(i,o){o.f=Object.getOwnPropertySymbols},"746f":function(i,o,s){var a=s("428f"),l=s("5135"),u=s("e538"),c=s("9bf2").f;i.exports=function(f){var d=a.Symbol||(a.Symbol={});l(d,f)||c(d,f,{value:u.f(f)})}},7839:function(i,o){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,o,s){var a=s("1d80");i.exports=function(l){return Object(a(l))}},"7c73":function(i,o,s){var a=s("825a"),l=s("37e8"),u=s("7839"),c=s("d012"),f=s("1be4"),d=s("cc12"),h=s("f772"),g=">",p="<",m="prototype",y="script",v=h("IE_PROTO"),b=function(){},x=function(A){return p+y+g+A+p+"/"+y+g},w=function(A){A.write(x("")),A.close();var C=A.parentWindow.Object;return A=null,C},S=function(){var A=d("iframe"),C="java"+y+":",_;return A.style.display="none",f.appendChild(A),A.src=String(C),_=A.contentWindow.document,_.open(),_.write(x("document.F=Object")),_.close(),_.F},E,O=function(){try{E=document.domain&&new ActiveXObject("htmlfile")}catch{}O=E?w(E):S();for(var A=u.length;A--;)delete O[m][u[A]];return O()};c[v]=!0,i.exports=Object.create||function(C,_){var T;return C!==null?(b[m]=a(C),T=new b,b[m]=null,T[v]=C):T=O(),_===void 0?T:l(T,_)}},"7dd0":function(i,o,s){var a=s("23e7"),l=s("9ed3"),u=s("e163"),c=s("d2bb"),f=s("d44e"),d=s("9112"),h=s("6eeb"),g=s("b622"),p=s("c430"),m=s("3f8c"),y=s("ae93"),v=y.IteratorPrototype,b=y.BUGGY_SAFARI_ITERATORS,x=g("iterator"),w="keys",S="values",E="entries",O=function(){return this};i.exports=function(A,C,_,T,k,D,M){l(_,C,T);var $=function(Ie){if(Ie===k&&ge)return ge;if(!b&&Ie in H)return H[Ie];switch(Ie){case w:return function(){return new _(this,Ie)};case S:return function(){return new _(this,Ie)};case E:return function(){return new _(this,Ie)}}return function(){return new _(this)}},N=C+" Iterator",P=!1,H=A.prototype,ie=H[x]||H["@@iterator"]||k&&H[k],ge=!b&&ie||$(k),be=C=="Array"&&H.entries||ie,Fe,Be,De;if(be&&(Fe=u(be.call(new A)),v!==Object.prototype&&Fe.next&&(!p&&u(Fe)!==v&&(c?c(Fe,v):typeof Fe[x]!="function"&&d(Fe,x,O)),f(Fe,N,!0,!0),p&&(m[N]=O))),k==S&&ie&&ie.name!==S&&(P=!0,ge=function(){return ie.call(this)}),(!p||M)&&H[x]!==ge&&d(H,x,ge),m[C]=ge,k)if(Be={values:$(S),keys:D?ge:$(w),entries:$(E)},M)for(De in Be)(b||P||!(De in H))&&h(H,De,Be[De]);else a({target:C,proto:!0,forced:b||P},Be);return Be}},"7f9a":function(i,o,s){var a=s("da84"),l=s("8925"),u=a.WeakMap;i.exports=typeof u=="function"&&/native code/.test(l(u))},"825a":function(i,o,s){var a=s("861d");i.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(i,o,s){var a=s("d039");i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,o,s){var a=s("c04e"),l=s("9bf2"),u=s("5c6c");i.exports=function(c,f,d){var h=a(f);h in c?l.f(c,h,u(0,d)):c[h]=d}},"861d":function(i,o){i.exports=function(s){return typeof s=="object"?s!==null:typeof s=="function"}},8875:function(i,o,s){var a,l,u;(function(c,f){l=[],a=f,u=typeof a=="function"?a.apply(o,l):a,u!==void 0&&(i.exports=u)})(typeof self<"u"?self:this,function(){function c(){var f=Object.getOwnPropertyDescriptor(document,"currentScript");if(!f&&"currentScript"in document&&document.currentScript||f&&f.get!==c&&document.currentScript)return document.currentScript;try{throw new Error}catch(E){var d=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,h=/@([^@]*):(\d+):(\d+)\s*$/ig,g=d.exec(E.stack)||h.exec(E.stack),p=g&&g[1]||!1,m=g&&g[2]||!1,y=document.location.href.replace(document.location.hash,""),v,b,x,w=document.getElementsByTagName("script");p===y&&(v=document.documentElement.outerHTML,b=new RegExp("(?:[^\\n]+?\\n){0,"+(m-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),x=v.replace(b,"$1").trim());for(var S=0;S<w.length;S++)if(w[S].readyState==="interactive"||w[S].src===p||p===y&&w[S].innerHTML&&w[S].innerHTML.trim()===x)return w[S];return null}}return c})},8925:function(i,o,s){var a=s("c6cd"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(u){return l.call(u)}),i.exports=a.inspectSource},"8aa5":function(i,o,s){var a=s("6547").charAt;i.exports=function(l,u,c){return u+(c?a(l,u).length:1)}},"8bbf":function(i,o){i.exports=n},"90e3":function(i,o){var s=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++s+a).toString(36)}},9112:function(i,o,s){var a=s("83ab"),l=s("9bf2"),u=s("5c6c");i.exports=a?function(c,f,d){return l.f(c,f,u(1,d))}:function(c,f,d){return c[f]=d,c}},9263:function(i,o,s){var a=s("ad6d"),l=s("9f7f"),u=RegExp.prototype.exec,c=String.prototype.replace,f=u,d=function(){var m=/a/,y=/b*/g;return u.call(m,"a"),u.call(y,"a"),m.lastIndex!==0||y.lastIndex!==0}(),h=l.UNSUPPORTED_Y||l.BROKEN_CARET,g=/()??/.exec("")[1]!==void 0,p=d||g||h;p&&(f=function(y){var v=this,b,x,w,S,E=h&&v.sticky,O=a.call(v),A=v.source,C=0,_=y;return E&&(O=O.replace("y",""),O.indexOf("g")===-1&&(O+="g"),_=String(y).slice(v.lastIndex),v.lastIndex>0&&(!v.multiline||v.multiline&&y[v.lastIndex-1]!==`
`)&&(A="(?: "+A+")",_=" "+_,C++),x=new RegExp("^(?:"+A+")",O)),g&&(x=new RegExp("^"+A+"$(?!\\s)",O)),d&&(b=v.lastIndex),w=u.call(E?x:v,_),E?w?(w.input=w.input.slice(C),w[0]=w[0].slice(C),w.index=v.lastIndex,v.lastIndex+=w[0].length):v.lastIndex=0:d&&w&&(v.lastIndex=v.global?w.index+w[0].length:b),g&&w&&w.length>1&&c.call(w[0],x,function(){for(S=1;S<arguments.length-2;S++)arguments[S]===void 0&&(w[S]=void 0)}),w}),i.exports=f},"94ca":function(i,o,s){var a=s("d039"),l=/#|\.prototype\./,u=function(g,p){var m=f[c(g)];return m==h?!0:m==d?!1:typeof p=="function"?a(p):!!p},c=u.normalize=function(g){return String(g).replace(l,".").toLowerCase()},f=u.data={},d=u.NATIVE="N",h=u.POLYFILL="P";i.exports=u},"99af":function(i,o,s){var a=s("23e7"),l=s("d039"),u=s("e8b5"),c=s("861d"),f=s("7b0b"),d=s("50c4"),h=s("8418"),g=s("65f0"),p=s("1dde"),m=s("b622"),y=s("2d00"),v=m("isConcatSpreadable"),b=9007199254740991,x="Maximum allowed index exceeded",w=y>=51||!l(function(){var A=[];return A[v]=!1,A.concat()[0]!==A}),S=p("concat"),E=function(A){if(!c(A))return!1;var C=A[v];return C!==void 0?!!C:u(A)},O=!w||!S;a({target:"Array",proto:!0,forced:O},{concat:function(C){var _=f(this),T=g(_,0),k=0,D,M,$,N,P;for(D=-1,$=arguments.length;D<$;D++)if(P=D===-1?_:arguments[D],E(P)){if(N=d(P.length),k+N>b)throw TypeError(x);for(M=0;M<N;M++,k++)M in P&&h(T,k,P[M])}else{if(k>=b)throw TypeError(x);h(T,k++,P)}return T.length=k,T}})},"9bdd":function(i,o,s){var a=s("825a");i.exports=function(l,u,c,f){try{return f?u(a(c)[0],c[1]):u(c)}catch(h){var d=l.return;throw d!==void 0&&a(d.call(l)),h}}},"9bf2":function(i,o,s){var a=s("83ab"),l=s("0cfb"),u=s("825a"),c=s("c04e"),f=Object.defineProperty;o.f=a?f:function(h,g,p){if(u(h),g=c(g,!0),u(p),l)try{return f(h,g,p)}catch{}if("get"in p||"set"in p)throw TypeError("Accessors not supported");return"value"in p&&(h[g]=p.value),h}},"9ed3":function(i,o,s){var a=s("ae93").IteratorPrototype,l=s("7c73"),u=s("5c6c"),c=s("d44e"),f=s("3f8c"),d=function(){return this};i.exports=function(h,g,p){var m=g+" Iterator";return h.prototype=l(a,{next:u(1,p)}),c(h,m,!1,!0),f[m]=d,h}},"9f7f":function(i,o,s){var a=s("d039");function l(u,c){return RegExp(u,c)}o.UNSUPPORTED_Y=a(function(){var u=l("a","y");return u.lastIndex=2,u.exec("abcd")!=null}),o.BROKEN_CARET=a(function(){var u=l("^r","gy");return u.lastIndex=2,u.exec("str")!=null})},a2bf:function(i,o,s){var a=s("e8b5"),l=s("50c4"),u=s("0366"),c=function(f,d,h,g,p,m,y,v){for(var b=p,x=0,w=y?u(y,v,3):!1,S;x<g;){if(x in h){if(S=w?w(h[x],x,d):h[x],m>0&&a(S))b=c(f,d,S,l(S.length),b,m-1)-1;else{if(b>=9007199254740991)throw TypeError("Exceed the acceptable array length");f[b]=S}b++}x++}return b};i.exports=c},a352:function(i,o){i.exports=r},a434:function(i,o,s){var a=s("23e7"),l=s("23cb"),u=s("a691"),c=s("50c4"),f=s("7b0b"),d=s("65f0"),h=s("8418"),g=s("1dde"),p=s("ae40"),m=g("splice"),y=p("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,b=Math.min,x=9007199254740991,w="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!m||!y},{splice:function(E,O){var A=f(this),C=c(A.length),_=l(E,C),T=arguments.length,k,D,M,$,N,P;if(T===0?k=D=0:T===1?(k=0,D=C-_):(k=T-2,D=b(v(u(O),0),C-_)),C+k-D>x)throw TypeError(w);for(M=d(A,D),$=0;$<D;$++)N=_+$,N in A&&h(M,$,A[N]);if(M.length=D,k<D){for($=_;$<C-D;$++)N=$+D,P=$+k,N in A?A[P]=A[N]:delete A[P];for($=C;$>C-D+k;$--)delete A[$-1]}else if(k>D)for($=C-D;$>_;$--)N=$+D-1,P=$+k-1,N in A?A[P]=A[N]:delete A[P];for($=0;$<k;$++)A[$+_]=arguments[$+2];return A.length=C-D+k,M}})},a4d3:function(i,o,s){var a=s("23e7"),l=s("da84"),u=s("d066"),c=s("c430"),f=s("83ab"),d=s("4930"),h=s("fdbf"),g=s("d039"),p=s("5135"),m=s("e8b5"),y=s("861d"),v=s("825a"),b=s("7b0b"),x=s("fc6a"),w=s("c04e"),S=s("5c6c"),E=s("7c73"),O=s("df75"),A=s("241c"),C=s("057f"),_=s("7418"),T=s("06cf"),k=s("9bf2"),D=s("d1e7"),M=s("9112"),$=s("6eeb"),N=s("5692"),P=s("f772"),H=s("d012"),ie=s("90e3"),ge=s("b622"),be=s("e538"),Fe=s("746f"),Be=s("d44e"),De=s("69f3"),Ie=s("b727").forEach,Qe=P("hidden"),yt="Symbol",Q="prototype",Oe=ge("toPrimitive"),je=De.set,F=De.getterFor(yt),R=Object[Q],I=l.Symbol,G=u("JSON","stringify"),W=T.f,J=k.f,le=C.f,oe=D.f,ne=N("symbols"),q=N("op-symbols"),he=N("string-to-symbol-registry"),fe=N("symbol-to-string-registry"),ve=N("wks"),Re=l.QObject,Ge=!Re||!Re[Q]||!Re[Q].findChild,ft=f&&g(function(){return E(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a!=7})?function(He,Se,ze){var ot=W(R,Se);ot&&delete R[Se],J(He,Se,ze),ot&&He!==R&&J(R,Se,ot)}:J,rt=function(He,Se){var ze=ne[He]=E(I[Q]);return je(ze,{type:yt,tag:He,description:Se}),f||(ze.description=Se),ze},j=h?function(He){return typeof He=="symbol"}:function(He){return Object(He)instanceof I},L=function(Se,ze,ot){Se===R&&L(q,ze,ot),v(Se);var pt=w(ze,!0);return v(ot),p(ne,pt)?(ot.enumerable?(p(Se,Qe)&&Se[Qe][pt]&&(Se[Qe][pt]=!1),ot=E(ot,{enumerable:S(0,!1)})):(p(Se,Qe)||J(Se,Qe,S(1,{})),Se[Qe][pt]=!0),ft(Se,pt,ot)):J(Se,pt,ot)},B=function(Se,ze){v(Se);var ot=x(ze),pt=O(ot).concat(qe(ot));return Ie(pt,function(Tr){(!f||ye.call(ot,Tr))&&L(Se,Tr,ot[Tr])}),Se},ee=function(Se,ze){return ze===void 0?E(Se):B(E(Se),ze)},ye=function(Se){var ze=w(Se,!0),ot=oe.call(this,ze);return this===R&&p(ne,ze)&&!p(q,ze)?!1:ot||!p(this,ze)||!p(ne,ze)||p(this,Qe)&&this[Qe][ze]?ot:!0},Le=function(Se,ze){var ot=x(Se),pt=w(ze,!0);if(!(ot===R&&p(ne,pt)&&!p(q,pt))){var Tr=W(ot,pt);return Tr&&p(ne,pt)&&!(p(ot,Qe)&&ot[Qe][pt])&&(Tr.enumerable=!0),Tr}},Me=function(Se){var ze=le(x(Se)),ot=[];return Ie(ze,function(pt){!p(ne,pt)&&!p(H,pt)&&ot.push(pt)}),ot},qe=function(Se){var ze=Se===R,ot=le(ze?q:x(Se)),pt=[];return Ie(ot,function(Tr){p(ne,Tr)&&(!ze||p(R,Tr))&&pt.push(ne[Tr])}),pt};if(d||(I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor");var Se=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),ze=ie(Se),ot=function(pt){this===R&&ot.call(q,pt),p(this,Qe)&&p(this[Qe],ze)&&(this[Qe][ze]=!1),ft(this,ze,S(1,pt))};return f&&Ge&&ft(R,ze,{configurable:!0,set:ot}),rt(ze,Se)},$(I[Q],"toString",function(){return F(this).tag}),$(I,"withoutSetter",function(He){return rt(ie(He),He)}),D.f=ye,k.f=L,T.f=Le,A.f=C.f=Me,_.f=qe,be.f=function(He){return rt(ge(He),He)},f&&(J(I[Q],"description",{configurable:!0,get:function(){return F(this).description}}),c||$(R,"propertyIsEnumerable",ye,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:I}),Ie(O(ve),function(He){Fe(He)}),a({target:yt,stat:!0,forced:!d},{for:function(He){var Se=String(He);if(p(he,Se))return he[Se];var ze=I(Se);return he[Se]=ze,fe[ze]=Se,ze},keyFor:function(Se){if(!j(Se))throw TypeError(Se+" is not a symbol");if(p(fe,Se))return fe[Se]},useSetter:function(){Ge=!0},useSimple:function(){Ge=!1}}),a({target:"Object",stat:!0,forced:!d,sham:!f},{create:ee,defineProperty:L,defineProperties:B,getOwnPropertyDescriptor:Le}),a({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:Me,getOwnPropertySymbols:qe}),a({target:"Object",stat:!0,forced:g(function(){_.f(1)})},{getOwnPropertySymbols:function(Se){return _.f(b(Se))}}),G){var Ut=!d||g(function(){var He=I();return G([He])!="[null]"||G({a:He})!="{}"||G(Object(He))!="{}"});a({target:"JSON",stat:!0,forced:Ut},{stringify:function(Se,ze,ot){for(var pt=[Se],Tr=1,vx;arguments.length>Tr;)pt.push(arguments[Tr++]);if(vx=ze,!(!y(ze)&&Se===void 0||j(Se)))return m(ze)||(ze=function($H,gm){if(typeof vx=="function"&&(gm=vx.call(this,$H,gm)),!j(gm))return gm}),pt[1]=ze,G.apply(null,pt)}})}I[Q][Oe]||M(I[Q],Oe,I[Q].valueOf),Be(I,yt),H[Qe]=!0},a630:function(i,o,s){var a=s("23e7"),l=s("4df4"),u=s("1c7e"),c=!u(function(f){Array.from(f)});a({target:"Array",stat:!0,forced:c},{from:l})},a640:function(i,o,s){var a=s("d039");i.exports=function(l,u){var c=[][l];return!!c&&a(function(){c.call(null,u||function(){throw 1},1)})}},a691:function(i,o){var s=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(l>0?a:s)(l)}},ab13:function(i,o,s){var a=s("b622"),l=a("match");i.exports=function(u){var c=/./;try{"/./"[u](c)}catch{try{return c[l]=!1,"/./"[u](c)}catch{}}return!1}},ac1f:function(i,o,s){var a=s("23e7"),l=s("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(i,o,s){var a=s("825a");i.exports=function(){var l=a(this),u="";return l.global&&(u+="g"),l.ignoreCase&&(u+="i"),l.multiline&&(u+="m"),l.dotAll&&(u+="s"),l.unicode&&(u+="u"),l.sticky&&(u+="y"),u}},ae40:function(i,o,s){var a=s("83ab"),l=s("d039"),u=s("5135"),c=Object.defineProperty,f={},d=function(h){throw h};i.exports=function(h,g){if(u(f,h))return f[h];g||(g={});var p=[][h],m=u(g,"ACCESSORS")?g.ACCESSORS:!1,y=u(g,0)?g[0]:d,v=u(g,1)?g[1]:void 0;return f[h]=!!p&&!l(function(){if(m&&!a)return!0;var b={length:-1};m?c(b,1,{enumerable:!0,get:d}):b[1]=1,p.call(b,y,v)})}},ae93:function(i,o,s){var a=s("e163"),l=s("9112"),u=s("5135"),c=s("b622"),f=s("c430"),d=c("iterator"),h=!1,g=function(){return this},p,m,y;[].keys&&(y=[].keys(),"next"in y?(m=a(a(y)),m!==Object.prototype&&(p=m)):h=!0),p==null&&(p={}),!f&&!u(p,d)&&l(p,d,g),i.exports={IteratorPrototype:p,BUGGY_SAFARI_ITERATORS:h}},b041:function(i,o,s){var a=s("00ee"),l=s("f5df");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(i,o,s){var a=s("83ab"),l=s("9bf2").f,u=Function.prototype,c=u.toString,f=/^\s*function ([^ (]*)/,d="name";a&&!(d in u)&&l(u,d,{configurable:!0,get:function(){try{return c.call(this).match(f)[1]}catch{return""}}})},b622:function(i,o,s){var a=s("da84"),l=s("5692"),u=s("5135"),c=s("90e3"),f=s("4930"),d=s("fdbf"),h=l("wks"),g=a.Symbol,p=d?g:g&&g.withoutSetter||c;i.exports=function(m){return u(h,m)||(f&&u(g,m)?h[m]=g[m]:h[m]=p("Symbol."+m)),h[m]}},b64b:function(i,o,s){var a=s("23e7"),l=s("7b0b"),u=s("df75"),c=s("d039"),f=c(function(){u(1)});a({target:"Object",stat:!0,forced:f},{keys:function(h){return u(l(h))}})},b727:function(i,o,s){var a=s("0366"),l=s("44ad"),u=s("7b0b"),c=s("50c4"),f=s("65f0"),d=[].push,h=function(g){var p=g==1,m=g==2,y=g==3,v=g==4,b=g==6,x=g==5||b;return function(w,S,E,O){for(var A=u(w),C=l(A),_=a(S,E,3),T=c(C.length),k=0,D=O||f,M=p?D(w,T):m?D(w,0):void 0,$,N;T>k;k++)if((x||k in C)&&($=C[k],N=_($,k,A),g)){if(p)M[k]=N;else if(N)switch(g){case 3:return!0;case 5:return $;case 6:return k;case 2:d.call(M,$)}else if(v)return!1}return b?-1:y||v?v:M}};i.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6)}},c04e:function(i,o,s){var a=s("861d");i.exports=function(l,u){if(!a(l))return l;var c,f;if(u&&typeof(c=l.toString)=="function"&&!a(f=c.call(l))||typeof(c=l.valueOf)=="function"&&!a(f=c.call(l))||!u&&typeof(c=l.toString)=="function"&&!a(f=c.call(l)))return f;throw TypeError("Can't convert object to primitive value")}},c430:function(i,o){i.exports=!1},c6b6:function(i,o){var s={}.toString;i.exports=function(a){return s.call(a).slice(8,-1)}},c6cd:function(i,o,s){var a=s("da84"),l=s("ce4e"),u="__core-js_shared__",c=a[u]||l(u,{});i.exports=c},c740:function(i,o,s){var a=s("23e7"),l=s("b727").findIndex,u=s("44d2"),c=s("ae40"),f="findIndex",d=!0,h=c(f);f in[]&&Array(1)[f](function(){d=!1}),a({target:"Array",proto:!0,forced:d||!h},{findIndex:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}}),u(f)},c8ba:function(i,o){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch{typeof window=="object"&&(s=window)}i.exports=s},c975:function(i,o,s){var a=s("23e7"),l=s("4d64").indexOf,u=s("a640"),c=s("ae40"),f=[].indexOf,d=!!f&&1/[1].indexOf(1,-0)<0,h=u("indexOf"),g=c("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:d||!h||!g},{indexOf:function(m){return d?f.apply(this,arguments)||0:l(this,m,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,o,s){var a=s("5135"),l=s("fc6a"),u=s("4d64").indexOf,c=s("d012");i.exports=function(f,d){var h=l(f),g=0,p=[],m;for(m in h)!a(c,m)&&a(h,m)&&p.push(m);for(;d.length>g;)a(h,m=d[g++])&&(~u(p,m)||p.push(m));return p}},caad:function(i,o,s){var a=s("23e7"),l=s("4d64").includes,u=s("44d2"),c=s("ae40"),f=c("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!f},{includes:function(h){return l(this,h,arguments.length>1?arguments[1]:void 0)}}),u("includes")},cc12:function(i,o,s){var a=s("da84"),l=s("861d"),u=a.document,c=l(u)&&l(u.createElement);i.exports=function(f){return c?u.createElement(f):{}}},ce4e:function(i,o,s){var a=s("da84"),l=s("9112");i.exports=function(u,c){try{l(a,u,c)}catch{a[u]=c}return c}},d012:function(i,o){i.exports={}},d039:function(i,o){i.exports=function(s){try{return!!s()}catch{return!0}}},d066:function(i,o,s){var a=s("428f"),l=s("da84"),u=function(c){return typeof c=="function"?c:void 0};i.exports=function(c,f){return arguments.length<2?u(a[c])||u(l[c]):a[c]&&a[c][f]||l[c]&&l[c][f]}},d1e7:function(i,o,s){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,u=l&&!a.call({1:2},1);o.f=u?function(f){var d=l(this,f);return!!d&&d.enumerable}:a},d28b:function(i,o,s){var a=s("746f");a("iterator")},d2bb:function(i,o,s){var a=s("825a"),l=s("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u=!1,c={},f;try{f=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,f.call(c,[]),u=c instanceof Array}catch{}return function(h,g){return a(h),l(g),u?f.call(h,g):h.__proto__=g,h}}():void 0)},d3b7:function(i,o,s){var a=s("00ee"),l=s("6eeb"),u=s("b041");a||l(Object.prototype,"toString",u,{unsafe:!0})},d44e:function(i,o,s){var a=s("9bf2").f,l=s("5135"),u=s("b622"),c=u("toStringTag");i.exports=function(f,d,h){f&&!l(f=h?f:f.prototype,c)&&a(f,c,{configurable:!0,value:d})}},d58f:function(i,o,s){var a=s("1c0b"),l=s("7b0b"),u=s("44ad"),c=s("50c4"),f=function(d){return function(h,g,p,m){a(g);var y=l(h),v=u(y),b=c(y.length),x=d?b-1:0,w=d?-1:1;if(p<2)for(;;){if(x in v){m=v[x],x+=w;break}if(x+=w,d?x<0:b<=x)throw TypeError("Reduce of empty array with no initial value")}for(;d?x>=0:b>x;x+=w)x in v&&(m=g(m,v[x],x,y));return m}};i.exports={left:f(!1),right:f(!0)}},d784:function(i,o,s){s("ac1f");var a=s("6eeb"),l=s("d039"),u=s("b622"),c=s("9263"),f=s("9112"),d=u("species"),h=!l(function(){var v=/./;return v.exec=function(){var b=[];return b.groups={a:"7"},b},"".replace(v,"$<a>")!=="7"}),g=function(){return"a".replace(/./,"$0")==="$0"}(),p=u("replace"),m=function(){return/./[p]?/./[p]("a","$0")==="":!1}(),y=!l(function(){var v=/(?:)/,b=v.exec;v.exec=function(){return b.apply(this,arguments)};var x="ab".split(v);return x.length!==2||x[0]!=="a"||x[1]!=="b"});i.exports=function(v,b,x,w){var S=u(v),E=!l(function(){var k={};return k[S]=function(){return 7},""[v](k)!=7}),O=E&&!l(function(){var k=!1,D=/a/;return v==="split"&&(D={},D.constructor={},D.constructor[d]=function(){return D},D.flags="",D[S]=/./[S]),D.exec=function(){return k=!0,null},D[S](""),!k});if(!E||!O||v==="replace"&&!(h&&g&&!m)||v==="split"&&!y){var A=/./[S],C=x(S,""[v],function(k,D,M,$,N){return D.exec===c?E&&!N?{done:!0,value:A.call(D,M,$)}:{done:!0,value:k.call(M,D,$)}:{done:!1}},{REPLACE_KEEPS_$0:g,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:m}),_=C[0],T=C[1];a(String.prototype,v,_),a(RegExp.prototype,S,b==2?function(k,D){return T.call(k,this,D)}:function(k){return T.call(k,this)})}w&&f(RegExp.prototype[S],"sham",!0)}},d81d:function(i,o,s){var a=s("23e7"),l=s("b727").map,u=s("1dde"),c=s("ae40"),f=u("map"),d=c("map");a({target:"Array",proto:!0,forced:!f||!d},{map:function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,o,s){(function(a){var l=function(u){return u&&u.Math==Math&&u};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,s("c8ba"))},dbb4:function(i,o,s){var a=s("23e7"),l=s("83ab"),u=s("56ef"),c=s("fc6a"),f=s("06cf"),d=s("8418");a({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(g){for(var p=c(g),m=f.f,y=u(p),v={},b=0,x,w;y.length>b;)w=m(p,x=y[b++]),w!==void 0&&d(v,x,w);return v}})},dbf1:function(i,o,s){(function(a){s.d(o,"a",function(){return u});function l(){return typeof window<"u"?window.console:a.console}var u=l()}).call(this,s("c8ba"))},ddb0:function(i,o,s){var a=s("da84"),l=s("fdbc"),u=s("e260"),c=s("9112"),f=s("b622"),d=f("iterator"),h=f("toStringTag"),g=u.values;for(var p in l){var m=a[p],y=m&&m.prototype;if(y){if(y[d]!==g)try{c(y,d,g)}catch{y[d]=g}if(y[h]||c(y,h,p),l[p]){for(var v in u)if(y[v]!==u[v])try{c(y,v,u[v])}catch{y[v]=u[v]}}}}},df75:function(i,o,s){var a=s("ca84"),l=s("7839");i.exports=Object.keys||function(c){return a(c,l)}},e01a:function(i,o,s){var a=s("23e7"),l=s("83ab"),u=s("da84"),c=s("5135"),f=s("861d"),d=s("9bf2").f,h=s("e893"),g=u.Symbol;if(l&&typeof g=="function"&&(!("description"in g.prototype)||g().description!==void 0)){var p={},m=function(){var S=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),E=this instanceof m?new g(S):S===void 0?g():g(S);return S===""&&(p[E]=!0),E};h(m,g);var y=m.prototype=g.prototype;y.constructor=m;var v=y.toString,b=String(g("test"))=="Symbol(test)",x=/^Symbol\((.*)\)[^)]+$/;d(y,"description",{configurable:!0,get:function(){var S=f(this)?this.valueOf():this,E=v.call(S);if(c(p,S))return"";var O=b?E.slice(7,-1):E.replace(x,"$1");return O===""?void 0:O}}),a({global:!0,forced:!0},{Symbol:m})}},e163:function(i,o,s){var a=s("5135"),l=s("7b0b"),u=s("f772"),c=s("e177"),f=u("IE_PROTO"),d=Object.prototype;i.exports=c?Object.getPrototypeOf:function(h){return h=l(h),a(h,f)?h[f]:typeof h.constructor=="function"&&h instanceof h.constructor?h.constructor.prototype:h instanceof Object?d:null}},e177:function(i,o,s){var a=s("d039");i.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(i,o,s){var a=s("fc6a"),l=s("44d2"),u=s("3f8c"),c=s("69f3"),f=s("7dd0"),d="Array Iterator",h=c.set,g=c.getterFor(d);i.exports=f(Array,"Array",function(p,m){h(this,{type:d,target:a(p),index:0,kind:m})},function(){var p=g(this),m=p.target,y=p.kind,v=p.index++;return!m||v>=m.length?(p.target=void 0,{value:void 0,done:!0}):y=="keys"?{value:v,done:!1}:y=="values"?{value:m[v],done:!1}:{value:[v,m[v]],done:!1}},"values"),u.Arguments=u.Array,l("keys"),l("values"),l("entries")},e439:function(i,o,s){var a=s("23e7"),l=s("d039"),u=s("fc6a"),c=s("06cf").f,f=s("83ab"),d=l(function(){c(1)}),h=!f||d;a({target:"Object",stat:!0,forced:h,sham:!f},{getOwnPropertyDescriptor:function(p,m){return c(u(p),m)}})},e538:function(i,o,s){var a=s("b622");o.f=a},e893:function(i,o,s){var a=s("5135"),l=s("56ef"),u=s("06cf"),c=s("9bf2");i.exports=function(f,d){for(var h=l(d),g=c.f,p=u.f,m=0;m<h.length;m++){var y=h[m];a(f,y)||g(f,y,p(d,y))}}},e8b5:function(i,o,s){var a=s("c6b6");i.exports=Array.isArray||function(u){return a(u)=="Array"}},e95a:function(i,o,s){var a=s("b622"),l=s("3f8c"),u=a("iterator"),c=Array.prototype;i.exports=function(f){return f!==void 0&&(l.Array===f||c[u]===f)}},f5df:function(i,o,s){var a=s("00ee"),l=s("c6b6"),u=s("b622"),c=u("toStringTag"),f=l(function(){return arguments}())=="Arguments",d=function(h,g){try{return h[g]}catch{}};i.exports=a?l:function(h){var g,p,m;return h===void 0?"Undefined":h===null?"Null":typeof(p=d(g=Object(h),c))=="string"?p:f?l(g):(m=l(g))=="Object"&&typeof g.callee=="function"?"Arguments":m}},f772:function(i,o,s){var a=s("5692"),l=s("90e3"),u=a("keys");i.exports=function(c){return u[c]||(u[c]=l(c))}},fb15:function(i,o,s){if(s.r(o),typeof window<"u"){var a=window.document.currentScript;{var l=s("8875");a=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var u=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);u&&(s.p=u[1])}s("99af"),s("4de4"),s("4160"),s("c975"),s("d81d"),s("a434"),s("159b"),s("a4d3"),s("e439"),s("dbb4"),s("b64b");function c(j,L,B){return L in j?Object.defineProperty(j,L,{value:B,enumerable:!0,configurable:!0,writable:!0}):j[L]=B,j}function f(j,L){var B=Object.keys(j);if(Object.getOwnPropertySymbols){var ee=Object.getOwnPropertySymbols(j);L&&(ee=ee.filter(function(ye){return Object.getOwnPropertyDescriptor(j,ye).enumerable})),B.push.apply(B,ee)}return B}function d(j){for(var L=1;L<arguments.length;L++){var B=arguments[L]!=null?arguments[L]:{};L%2?f(Object(B),!0).forEach(function(ee){c(j,ee,B[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(B)):f(Object(B)).forEach(function(ee){Object.defineProperty(j,ee,Object.getOwnPropertyDescriptor(B,ee))})}return j}function h(j){if(Array.isArray(j))return j}s("e01a"),s("d28b"),s("e260"),s("d3b7"),s("3ca3"),s("ddb0");function g(j,L){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(j)))){var B=[],ee=!0,ye=!1,Le=void 0;try{for(var Me=j[Symbol.iterator](),qe;!(ee=(qe=Me.next()).done)&&(B.push(qe.value),!(L&&B.length===L));ee=!0);}catch(Ut){ye=!0,Le=Ut}finally{try{!ee&&Me.return!=null&&Me.return()}finally{if(ye)throw Le}}return B}}s("a630"),s("fb6a"),s("b0c0"),s("25f0");function p(j,L){(L==null||L>j.length)&&(L=j.length);for(var B=0,ee=new Array(L);B<L;B++)ee[B]=j[B];return ee}function m(j,L){if(!!j){if(typeof j=="string")return p(j,L);var B=Object.prototype.toString.call(j).slice(8,-1);if(B==="Object"&&j.constructor&&(B=j.constructor.name),B==="Map"||B==="Set")return Array.from(j);if(B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B))return p(j,L)}}function y(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v(j,L){return h(j)||g(j,L)||m(j,L)||y()}function b(j){if(Array.isArray(j))return p(j)}function x(j){if(typeof Symbol<"u"&&Symbol.iterator in Object(j))return Array.from(j)}function w(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S(j){return b(j)||x(j)||m(j)||w()}var E=s("a352"),O=s.n(E);function A(j){j.parentElement!==null&&j.parentElement.removeChild(j)}function C(j,L,B){var ee=B===0?j.children[0]:j.children[B-1].nextSibling;j.insertBefore(L,ee)}var _=s("dbf1");s("13d5"),s("4fad"),s("ac1f"),s("5319");function T(j){var L=Object.create(null);return function(ee){var ye=L[ee];return ye||(L[ee]=j(ee))}}var k=/-(\w)/g,D=T(function(j){return j.replace(k,function(L,B){return B.toUpperCase()})});s("5db7"),s("73d9");var M=["Start","Add","Remove","Update","End"],$=["Choose","Unchoose","Sort","Filter","Clone"],N=["Move"],P=[N,M,$].flatMap(function(j){return j}).map(function(j){return"on".concat(j)}),H={manage:N,manageAndEmit:M,emit:$};function ie(j){return P.indexOf(j)!==-1}s("caad"),s("2ca0");var ge=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function be(j){return ge.includes(j)}function Fe(j){return["transition-group","TransitionGroup"].includes(j)}function Be(j){return["id","class","role","style"].includes(j)||j.startsWith("data-")||j.startsWith("aria-")||j.startsWith("on")}function De(j){return j.reduce(function(L,B){var ee=v(B,2),ye=ee[0],Le=ee[1];return L[ye]=Le,L},{})}function Ie(j){var L=j.$attrs,B=j.componentData,ee=B===void 0?{}:B,ye=De(Object.entries(L).filter(function(Le){var Me=v(Le,2),qe=Me[0];return Me[1],Be(qe)}));return d(d({},ye),ee)}function Qe(j){var L=j.$attrs,B=j.callBackBuilder,ee=De(yt(L));Object.entries(B).forEach(function(Le){var Me=v(Le,2),qe=Me[0],Ut=Me[1];H[qe].forEach(function(He){ee["on".concat(He)]=Ut(He)})});var ye="[data-draggable]".concat(ee.draggable||"");return d(d({},ee),{},{draggable:ye})}function yt(j){return Object.entries(j).filter(function(L){var B=v(L,2),ee=B[0];return B[1],!Be(ee)}).map(function(L){var B=v(L,2),ee=B[0],ye=B[1];return[D(ee),ye]}).filter(function(L){var B=v(L,2),ee=B[0];return B[1],!ie(ee)})}s("c740");function Q(j,L){if(!(j instanceof L))throw new TypeError("Cannot call a class as a function")}function Oe(j,L){for(var B=0;B<L.length;B++){var ee=L[B];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(j,ee.key,ee)}}function je(j,L,B){return L&&Oe(j.prototype,L),B&&Oe(j,B),j}var F=function(L){var B=L.el;return B},R=function(L,B){return L.__draggable_context=B},I=function(L){return L.__draggable_context},G=function(){function j(L){var B=L.nodes,ee=B.header,ye=B.default,Le=B.footer,Me=L.root,qe=L.realList;Q(this,j),this.defaultNodes=ye,this.children=[].concat(S(ee),S(ye),S(Le)),this.externalComponent=Me.externalComponent,this.rootTransition=Me.transition,this.tag=Me.tag,this.realList=qe}return je(j,[{key:"render",value:function(B,ee){var ye=this.tag,Le=this.children,Me=this._isRootComponent,qe=Me?{default:function(){return Le}}:Le;return B(ye,ee,qe)}},{key:"updated",value:function(){var B=this.defaultNodes,ee=this.realList;B.forEach(function(ye,Le){R(F(ye),{element:ee[Le],index:Le})})}},{key:"getUnderlyingVm",value:function(B){return I(B)}},{key:"getVmIndexFromDomIndex",value:function(B,ee){var ye=this.defaultNodes,Le=ye.length,Me=ee.children,qe=Me.item(B);if(qe===null)return Le;var Ut=I(qe);if(Ut)return Ut.index;if(Le===0)return 0;var He=F(ye[0]),Se=S(Me).findIndex(function(ze){return ze===He});return B<Se?0:Le}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),j}(),W=s("8bbf");function J(j,L){var B=j[L];return B?B():[]}function le(j){var L=j.$slots,B=j.realList,ee=j.getKey,ye=B||[],Le=["header","footer"].map(function(ze){return J(L,ze)}),Me=v(Le,2),qe=Me[0],Ut=Me[1],He=L.item;if(!He)throw new Error("draggable element must have an item slot");var Se=ye.flatMap(function(ze,ot){return He({element:ze,index:ot}).map(function(pt){return pt.key=ee(ze),pt.props=d(d({},pt.props||{}),{},{"data-draggable":!0}),pt})});if(Se.length!==ye.length)throw new Error("Item slot must have only one child");return{header:qe,footer:Ut,default:Se}}function oe(j){var L=Fe(j),B=!be(j)&&!L;return{transition:L,externalComponent:B,tag:B?Object(W.resolveComponent)(j):L?W.TransitionGroup:j}}function ne(j){var L=j.$slots,B=j.tag,ee=j.realList,ye=j.getKey,Le=le({$slots:L,realList:ee,getKey:ye}),Me=oe(B);return new G({nodes:Le,root:Me,realList:ee})}function q(j,L){var B=this;Object(W.nextTick)(function(){return B.$emit(j.toLowerCase(),L)})}function he(j){var L=this;return function(B,ee){if(L.realList!==null)return L["onDrag".concat(j)](B,ee)}}function fe(j){var L=this,B=he.call(this,j);return function(ee,ye){B.call(L,ee,ye),q.call(L,j,ee)}}var ve=null,Re={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(L){return L}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Ge=["update:modelValue","change"].concat(S([].concat(S(H.manageAndEmit),S(H.emit)).map(function(j){return j.toLowerCase()}))),ft=Object(W.defineComponent)({name:"draggable",inheritAttrs:!1,props:Re,emits:Ge,data:function(){return{error:!1}},render:function(){try{this.error=!1;var L=this.$slots,B=this.$attrs,ee=this.tag,ye=this.componentData,Le=this.realList,Me=this.getKey,qe=ne({$slots:L,tag:ee,realList:Le,getKey:Me});this.componentStructure=qe;var Ut=Ie({$attrs:B,componentData:ye});return qe.render(W.h,Ut)}catch(He){return this.error=!0,Object(W.h)("pre",{style:{color:"red"}},He.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&_.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var L=this;if(!this.error){var B=this.$attrs,ee=this.$el,ye=this.componentStructure;ye.updated();var Le=Qe({$attrs:B,callBackBuilder:{manageAndEmit:function(Ut){return fe.call(L,Ut)},emit:function(Ut){return q.bind(L,Ut)},manage:function(Ut){return he.call(L,Ut)}}}),Me=ee.nodeType===1?ee:ee.parentElement;this._sortable=new O.a(Me,Le),this.targetDomElement=Me,Me.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var L=this.list;return L||this.modelValue},getKey:function(){var L=this.itemKey;return typeof L=="function"?L:function(B){return B[L]}}},watch:{$attrs:{handler:function(L){var B=this._sortable;!B||yt(L).forEach(function(ee){var ye=v(ee,2),Le=ye[0],Me=ye[1];B.option(Le,Me)})},deep:!0}},methods:{getUnderlyingVm:function(L){return this.componentStructure.getUnderlyingVm(L)||null},getUnderlyingPotencialDraggableComponent:function(L){return L.__draggable_component__},emitChanges:function(L){var B=this;Object(W.nextTick)(function(){return B.$emit("change",L)})},alterList:function(L){if(this.list){L(this.list);return}var B=S(this.modelValue);L(B),this.$emit("update:modelValue",B)},spliceList:function(){var L=arguments,B=function(ye){return ye.splice.apply(ye,S(L))};this.alterList(B)},updatePosition:function(L,B){var ee=function(Le){return Le.splice(B,0,Le.splice(L,1)[0])};this.alterList(ee)},getRelatedContextFromMoveEvent:function(L){var B=L.to,ee=L.related,ye=this.getUnderlyingPotencialDraggableComponent(B);if(!ye)return{component:ye};var Le=ye.realList,Me={list:Le,component:ye};if(B!==ee&&Le){var qe=ye.getUnderlyingVm(ee)||{};return d(d({},qe),Me)}return Me},getVmIndexFromDomIndex:function(L){return this.componentStructure.getVmIndexFromDomIndex(L,this.targetDomElement)},onDragStart:function(L){this.context=this.getUnderlyingVm(L.item),L.item._underlying_vm_=this.clone(this.context.element),ve=L.item},onDragAdd:function(L){var B=L.item._underlying_vm_;if(B!==void 0){A(L.item);var ee=this.getVmIndexFromDomIndex(L.newIndex);this.spliceList(ee,0,B);var ye={element:B,newIndex:ee};this.emitChanges({added:ye})}},onDragRemove:function(L){if(C(this.$el,L.item,L.oldIndex),L.pullMode==="clone"){A(L.clone);return}var B=this.context,ee=B.index,ye=B.element;this.spliceList(ee,1);var Le={element:ye,oldIndex:ee};this.emitChanges({removed:Le})},onDragUpdate:function(L){A(L.item),C(L.from,L.item,L.oldIndex);var B=this.context.index,ee=this.getVmIndexFromDomIndex(L.newIndex);this.updatePosition(B,ee);var ye={element:this.context.element,oldIndex:B,newIndex:ee};this.emitChanges({moved:ye})},computeFutureIndex:function(L,B){if(!L.element)return 0;var ee=S(B.to.children).filter(function(qe){return qe.style.display!=="none"}),ye=ee.indexOf(B.related),Le=L.component.getVmIndexFromDomIndex(ye),Me=ee.indexOf(ve)!==-1;return Me||!B.willInsertAfter?Le:Le+1},onDragMove:function(L,B){var ee=this.move,ye=this.realList;if(!ee||!ye)return!0;var Le=this.getRelatedContextFromMoveEvent(L),Me=this.computeFutureIndex(Le,L),qe=d(d({},this.context),{},{futureIndex:Me}),Ut=d(d({},L),{},{relatedContext:Le,draggedContext:qe});return ee(Ut,B)},onDragEnd:function(){ve=null}}}),rt=ft;o.default=rt},fb6a:function(i,o,s){var a=s("23e7"),l=s("861d"),u=s("e8b5"),c=s("23cb"),f=s("50c4"),d=s("fc6a"),h=s("8418"),g=s("b622"),p=s("1dde"),m=s("ae40"),y=p("slice"),v=m("slice",{ACCESSORS:!0,0:0,1:2}),b=g("species"),x=[].slice,w=Math.max;a({target:"Array",proto:!0,forced:!y||!v},{slice:function(E,O){var A=d(this),C=f(A.length),_=c(E,C),T=c(O===void 0?C:O,C),k,D,M;if(u(A)&&(k=A.constructor,typeof k=="function"&&(k===Array||u(k.prototype))?k=void 0:l(k)&&(k=k[b],k===null&&(k=void 0)),k===Array||k===void 0))return x.call(A,_,T);for(D=new(k===void 0?Array:k)(w(T-_,0)),M=0;_<T;_++,M++)_ in A&&h(D,M,A[_]);return D.length=M,D}})},fc6a:function(i,o,s){var a=s("44ad"),l=s("1d80");i.exports=function(u){return a(l(u))}},fdbc:function(i,o){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,o,s){var a=s("4930");i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(wH);const j_e=RY(wH.exports),L_e={name:"MySwitch",props:{modelValue:{type:Boolean,default:!1},checkedInfo:{type:[Number,String],default:null},uncheckedInfo:{type:[Number,String],default:null},disabled:{type:Boolean,default:!1}},data(){return{checked:this.value}},watch:{modelValue(e,t){this.checked=e}},methods:{onSwitch(){this.checked=!this.checked,this.$emit("update:modelValue",this.checked)}}},z_e={class:"m-switch-wrap"};function B_e(e,t,n,r,i,o){return bo(),ul("div",z_e,[z("div",{onClick:t[0]||(t[0]=s=>n.disabled?a=>a.preventDefault():o.onSwitch()),class:Ya(["m-switch",{"switch-checked":i.checked,disabled:n.disabled}])},[z("div",{class:Ya(["u-switch-inner",i.checked?"inner-checked":"inner-unchecked"])},mf(i.checked?n.checkedInfo:n.uncheckedInfo),3),z("div",{class:Ya(["u-node",{"node-checked":i.checked}])},null,2)],2)])}const U_e=xd(L_e,[["render",B_e],["__scopeId","data-v-2c581c17"]]),H_e={components:{Draggable:j_e,MySwitch:U_e},data(){return{encode_fold:!1,sort_fold:!1,coarse_max:1.2,coarse_step:.05,coarse_per:0,fine_max:.1,fine_step:.005,fine_per:0,rect_opacity:En.rect_opacity,line_opacity:En.line_opacity,on_line_order:!1,sort_list:XS.map((e,t)=>({name:e,index:t,ban:!1,reverse:!1}))}},methods:{newSort(){xH(this.sort_list),Pt.emit("updateDataOrder",null)},makeEncodeFold(){this.encode_fold=!this.encode_fold,this.encode_fold?document.querySelector("#encode-allow").style.transform="rotateZ(90deg)":document.querySelector("#encode-allow").style.transform="rotateZ(0deg)"},makeSortFold(){this.sort_fold=!this.sort_fold,this.sort_fold?document.querySelector("#sort-allow").style.transform="rotateZ(90deg)":document.querySelector("#sort-allow").style.transform="rotateZ(0deg)"},resetEncoding(e=!0){this.rect_width.value=this.rect_width.options[0].value,Pe.rect.width=this.rect_width.value,this.rect_height.value=this.rect_height.options[0].value,Pe.rect.height=this.rect_height.value,this.rect_pos.value=this.rect_pos.options[0].value,Pe.rect.x=this.rect_pos.value,this.rect_color.value=this.rect_color.options[0].value,Pe.rect.fill=this.rect_color.value,this.line1_width.value=this.line1_width.options[0].value,Pe.line1.width=this.line1_width.value,this.line1_y.value=this.line1_y.options[0].value,Pe.line1.y=this.line1_y.value,this.line1_strokeWidth.value=this.line1_strokeWidth.options[0].value,Pe.line1.strokeWidth=this.line1_strokeWidth.value,this.line1_strokeDash.value=this.line1_strokeDash.options[0].value,Pe.line1.strokeDash=this.line1_strokeDash.value,this.line1_color.value=this.line1_color.options[0].value,Pe.line1.stroke=this.line1_color.value,this.line2_height.value=this.line2_height.options[0].value,Pe.line2.height=this.line2_height.value,this.line2_strokeWidth.value=this.line2_strokeWidth.options[0].value,Pe.line2.strokeWidth=this.line2_strokeWidth.value,this.line2_color.value=this.line2_color.options[0].value,Pe.line2.stroke=this.line2_color.value,e&&this.startUpdateNewCode()},startUpdateNewCode(){Pt.emit("updateNewCode",!1)},setRectWidth(){Pe.rect.width=this.rect_width.value},setRectHeight(){Pe.rect.height=this.rect_height.value},setRectPos(){Pe.rect.x=this.rect_pos.value},setRectColor(){Pe.rect.fill=this.rect_color.value},setLine1Width(){Pe.line1.width=this.line1_width.value},setLine1Pos(){Pe.line1.y=this.line1_y.value},setLine1StrokeWidth(){Pe.line1.strokeWidth=this.line1_strokeWidth.value},setLine1StrokeDash(){Pe.line1.strokeDash=this.line1_strokeDash.value},setLine1Color(){Pe.line1.stroke=this.line1_color.value},setLine2Height(){Pe.line2.height=this.line2_height.value},setLine2Stroke(){Pe.line2.strokeWidth=this.line2_strokeWidth.value},setLine2Color(){Pe.line2.stroke=this.line2_color.value},changePersistent(){En.persistent=Number(this.coarse_per)+Number(this.fine_per),Pt.emit("updateNewCode",this.on_line_order)},changeRectOpacity(){En.rect_opacity=this.rect_opacity,Pt.emit("changeRectOpacity",this.rect_opacity)},changeLineOpacity(){En.line_opacity=this.line_opacity,Pt.emit("changeLineOpacity",this.line_opacity)},setHighlineEmpty(){Pt.emit("clearHighline",null)},changeGlobalX(){En.global_time=!En.global_time,Pt.emit("updateNewCode",!1)},changeGlobalY(){En.global_value=!En.global_value,Pt.emit("updateNewCode",!1)}},created(){Pt.on("updateDataset",e=>{this.resetEncoding(!1),this.sort_list=XS.map((t,n)=>({name:t,index:n,ban:!1,reverse:!1})),Pt.emit("getHillAndDraw",null)}),Pt.on("updatePersistentRange",e=>{this.coarse_max=e[0],this.coarse_step=this.coarse_max/100,this.fine_max=e[1]/2,this.fine_step=this.fine_max/100}),Pt.on("showPersistent",e=>{this.coarse_per=Math.floor(e/this.fine_max)*this.fine_max,this.fine_per=Math.floor((e-this.coarse_per)/this.fine_step)*this.fine_step})},mounted(){this.rect_width=document.querySelector(".rect-width"),this.rect_height=document.querySelector(".rect-height"),this.rect_pos=document.querySelector(".rect-pos"),this.rect_color=document.querySelector(".rect-color"),this.line1_width=document.querySelector(".line1-width"),this.line1_y=document.querySelector(".line1-height"),this.line1_strokeWidth=document.querySelector(".line1-stroke"),this.line1_strokeDash=document.querySelector(".line1-strokeDash"),this.line1_color=document.querySelector(".line1-color"),this.line2_height=document.querySelector(".line2-height"),this.line2_strokeWidth=document.querySelector(".line2-stroke"),this.line2_color=document.querySelector(".line2-color")}},K=e=>(mO("data-v-dc27932f"),e=e(),yO(),e),W_e={class:"encode"},G_e={class:"rect"},V_e=K(()=>z("div",{style:{"font-weight":"bold"}},"rectangle",-1)),Y_e=K(()=>z("option",null,"area",-1)),X_e=K(()=>z("option",null,"width",-1)),q_e=K(()=>z("option",null,"top",-1)),K_e=K(()=>z("option",null,"max",-1)),J_e=K(()=>z("option",null,"min",-1)),Z_e=K(()=>z("option",null,"persistent",-1)),Q_e=K(()=>z("option",null,"none",-1)),eAe=[Y_e,X_e,q_e,K_e,J_e,Z_e,Q_e],tAe=K(()=>z("br",null,null,-1)),nAe=K(()=>z("option",null,"none",-1)),rAe=K(()=>z("option",null,"area",-1)),iAe=K(()=>z("option",null,"width",-1)),oAe=K(()=>z("option",null,"top",-1)),sAe=K(()=>z("option",null,"max",-1)),aAe=K(()=>z("option",null,"min",-1)),lAe=K(()=>z("option",null,"persistent",-1)),uAe=[nAe,rAe,iAe,oAe,sAe,aAe,lAe],cAe=K(()=>z("br",null,null,-1)),fAe=K(()=>z("option",null,"top",-1)),dAe=K(()=>z("option",null,"width",-1)),hAe=K(()=>z("option",null,"area",-1)),gAe=K(()=>z("option",null,"max",-1)),pAe=K(()=>z("option",null,"min",-1)),mAe=K(()=>z("option",null,"persistent",-1)),yAe=K(()=>z("option",null,"none",-1)),vAe=[fAe,dAe,hAe,gAe,pAe,mAe,yAe],bAe=K(()=>z("br",null,null,-1)),xAe=K(()=>z("option",null,"none",-1)),wAe=K(()=>z("option",null,"width",-1)),EAe=K(()=>z("option",null,"top",-1)),SAe=K(()=>z("option",null,"max",-1)),OAe=K(()=>z("option",null,"min",-1)),_Ae=K(()=>z("option",null,"persistent",-1)),AAe=K(()=>z("option",null,"area",-1)),CAe=[xAe,wAe,EAe,SAe,OAe,_Ae,AAe],TAe={class:"line"},kAe=K(()=>z("div",{style:{"font-weight":"bold"}},"horizontal line",-1)),FAe=K(()=>z("option",null,"width",-1)),DAe=K(()=>z("option",null,"top",-1)),MAe=K(()=>z("option",null,"area",-1)),$Ae=K(()=>z("option",null,"max",-1)),NAe=K(()=>z("option",null,"min",-1)),RAe=K(()=>z("option",null,"persistent",-1)),PAe=K(()=>z("option",null,"none",-1)),IAe=[FAe,DAe,MAe,$Ae,NAe,RAe,PAe],jAe=K(()=>z("br",null,null,-1)),LAe=K(()=>z("option",null,"none",-1)),zAe=K(()=>z("option",null,"width",-1)),BAe=K(()=>z("option",null,"top",-1)),UAe=K(()=>z("option",null,"max",-1)),HAe=K(()=>z("option",null,"min",-1)),WAe=K(()=>z("option",null,"persistent",-1)),GAe=K(()=>z("option",null,"area",-1)),VAe=[LAe,zAe,BAe,UAe,HAe,WAe,GAe],YAe=K(()=>z("br",null,null,-1)),XAe=K(()=>z("option",null,"none",-1)),qAe=K(()=>z("option",null,"width",-1)),KAe=K(()=>z("option",null,"top",-1)),JAe=K(()=>z("option",null,"max",-1)),ZAe=K(()=>z("option",null,"min",-1)),QAe=K(()=>z("option",null,"persistent",-1)),eCe=K(()=>z("option",null,"area",-1)),tCe=[XAe,qAe,KAe,JAe,ZAe,QAe,eCe],nCe=K(()=>z("br",null,null,-1)),rCe=K(()=>z("option",null,"none",-1)),iCe=K(()=>z("option",null,"width",-1)),oCe=K(()=>z("option",null,"top",-1)),sCe=K(()=>z("option",null,"max",-1)),aCe=K(()=>z("option",null,"min",-1)),lCe=K(()=>z("option",null,"persistent",-1)),uCe=K(()=>z("option",null,"area",-1)),cCe=[rCe,iCe,oCe,sCe,aCe,lCe,uCe],fCe=K(()=>z("br",null,null,-1)),dCe=K(()=>z("option",null,"none",-1)),hCe=K(()=>z("option",null,"width",-1)),gCe=K(()=>z("option",null,"top",-1)),pCe=K(()=>z("option",null,"max",-1)),mCe=K(()=>z("option",null,"min",-1)),yCe=K(()=>z("option",null,"persistent",-1)),vCe=K(()=>z("option",null,"area",-1)),bCe=[dCe,hCe,gCe,pCe,mCe,yCe,vCe],xCe={class:"line"},wCe=K(()=>z("div",{style:{"font-weight":"bold"}},"vertical line",-1)),ECe=K(()=>z("option",null,"none",-1)),SCe=K(()=>z("option",null,"width",-1)),OCe=K(()=>z("option",null,"top",-1)),_Ce=K(()=>z("option",null,"max",-1)),ACe=K(()=>z("option",null,"min",-1)),CCe=K(()=>z("option",null,"persistent",-1)),TCe=K(()=>z("option",null,"area",-1)),kCe=[ECe,SCe,OCe,_Ce,ACe,CCe,TCe],FCe=K(()=>z("br",null,null,-1)),DCe=K(()=>z("option",null,"none",-1)),MCe=K(()=>z("option",null,"width",-1)),$Ce=K(()=>z("option",null,"top",-1)),NCe=K(()=>z("option",null,"max",-1)),RCe=K(()=>z("option",null,"min",-1)),PCe=K(()=>z("option",null,"persistent",-1)),ICe=K(()=>z("option",null,"area",-1)),jCe=[DCe,MCe,$Ce,NCe,RCe,PCe,ICe],LCe=K(()=>z("br",null,null,-1)),zCe=K(()=>z("option",null,"none",-1)),BCe=K(()=>z("option",null,"width",-1)),UCe=K(()=>z("option",null,"top",-1)),HCe=K(()=>z("option",null,"max",-1)),WCe=K(()=>z("option",null,"min",-1)),GCe=K(()=>z("option",null,"persistent",-1)),VCe=K(()=>z("option",null,"area",-1)),YCe=[zCe,BCe,UCe,HCe,WCe,GCe,VCe],XCe={class:"sort"},qCe={style:{display:"inline-block"}},KCe={style:{display:"inline-block"},position:"relative"},JCe={class:"param"},ZCe=K(()=>z("h4",null," parameters ",-1)),QCe={id:"pers_val"},eTe=K(()=>z("br",null,null,-1)),tTe=["max","step"],nTe=K(()=>z("br",null,null,-1)),rTe={id:"pers_val"},iTe=K(()=>z("br",null,null,-1)),oTe=["max","step"],sTe=K(()=>z("br",null,null,-1)),aTe=K(()=>z("br",null,null,-1)),lTe=K(()=>z("br",null,null,-1)),uTe=K(()=>z("br",null,null,-1)),cTe=K(()=>z("br",null,null,-1));function fTe(e,t,n,r,i,o){const s=_u("MySwitch"),a=_u("draggable");return bo(),ul(hn,null,[z("div",W_e,[z("div",{class:"fold-allow",id:"encode-allow",onClick:t[0]||(t[0]=(...l)=>o.makeEncodeFold&&o.makeEncodeFold(...l))}),z("h4",{style:{display:"inline-block"},onClick:t[1]||(t[1]=(...l)=>o.makeEncodeFold&&o.makeEncodeFold(...l))}," encode "),z("input",{type:"button",id:"reset",value:"reset",onClick:t[2]||(t[2]=(...l)=>o.resetEncoding&&o.resetEncoding(...l))}),z("input",{type:"button",id:"update",value:"update",onClick:t[3]||(t[3]=(...l)=>o.startUpdateNewCode&&o.startUpdateNewCode(...l))}),Oi(z("div",G_e,[V_e,Yt(" width: "),z("select",{class:"rect-width",onChange:t[4]||(t[4]=(...l)=>o.setRectWidth&&o.setRectWidth(...l))},eAe,32),tAe,Yt(" height: "),z("select",{class:"rect-height",onChange:t[5]||(t[5]=(...l)=>o.setRectHeight&&o.setRectHeight(...l))},uAe,32),cAe,Yt(" position: "),z("select",{class:"rect-pos",onChange:t[6]||(t[6]=(...l)=>o.setRectPos&&o.setRectPos(...l))},vAe,32),bAe,Yt(" color: "),z("select",{class:"rect-color",onChange:t[7]||(t[7]=(...l)=>o.setRectColor&&o.setRectColor(...l))},CAe,32)],512),[[Ns,i.encode_fold]]),Oi(z("div",TAe,[kAe,Yt(" width: "),z("select",{class:"line1-width",onChange:t[8]||(t[8]=(...l)=>o.setLine1Width&&o.setLine1Width(...l))},IAe,32),jAe,Yt(" y-position: "),z("select",{class:"line1-height",onChange:t[9]||(t[9]=(...l)=>o.setLine1Pos&&o.setLine1Pos(...l))},VAe,32),YAe,Yt(" stroke-width: "),z("select",{class:"line1-stroke",onChange:t[10]||(t[10]=(...l)=>o.setLine1StrokeWidth&&o.setLine1StrokeWidth(...l))},tCe,32),nCe,Yt(" stroke-dash: "),z("select",{class:"line1-strokeDash",onChange:t[11]||(t[11]=(...l)=>o.setLine1StrokeDash&&o.setLine1StrokeDash(...l))},cCe,32),fCe,Yt(" color: "),z("select",{class:"line1-color",onChange:t[12]||(t[12]=(...l)=>o.setLine1Color&&o.setLine1Color(...l))},bCe,32)],512),[[Ns,i.encode_fold]]),Oi(z("div",xCe,[wCe,Yt(" height: "),z("select",{class:"line2-height",onChange:t[13]||(t[13]=(...l)=>o.setLine2Height&&o.setLine2Height(...l))},kCe,32),FCe,Yt(" stroke-width: "),z("select",{class:"line2-stroke",onChange:t[14]||(t[14]=(...l)=>o.setLine2Stroke&&o.setLine2Stroke(...l))},jCe,32),LCe,Yt(" color: "),z("select",{class:"line2-color",onChange:t[15]||(t[15]=(...l)=>o.setLine2Color&&o.setLine2Color(...l))},YCe,32)],512),[[Ns,i.encode_fold]])]),z("div",XCe,[z("div",{class:"fold-allow",id:"sort-allow",onClick:t[16]||(t[16]=(...l)=>o.makeSortFold&&o.makeSortFold(...l))}),z("h4",{style:{display:"inline-block"},onClick:t[17]||(t[17]=(...l)=>o.makeSortFold&&o.makeSortFold(...l))}," sort rule \xA0\xA0 "),Oi(z("div",qCe," drag for priority",512),[[Ns,i.sort_fold]]),Oi(mt(s,{modelValue:i.on_line_order,"onUpdate:modelValue":t[18]||(t[18]=l=>i.on_line_order=l),"checked-info":"on-line","unchecked-info":"off-line"},null,8,["modelValue"]),[[Ns,!i.sort_fold]]),Oi(mt(a,{modelValue:i.sort_list,"onUpdate:modelValue":t[19]||(t[19]=l=>i.sort_list=l),"item-key":"index",onChange:o.newSort},{item:c1(({element:l})=>[(bo(),ul("li",{key:l.index},[z("div",KCe,[Yt(mf(l.name)+" ",1),mt(s,{class:"ban",modelValue:l.ban,"onUpdate:modelValue":u=>l.ban=u,"checked-info":"ban",onClick:o.newSort},null,8,["modelValue","onUpdate:modelValue","onClick"]),mt(s,{class:"reverse",modelValue:l.reverse,"onUpdate:modelValue":u=>l.reverse=u,"checked-info":"reverse",onClick:o.newSort,disabled:l.ban},null,8,["modelValue","onUpdate:modelValue","onClick","disabled"])])]))]),_:1},8,["modelValue","onChange"]),[[Ns,i.sort_fold]])]),z("div",JCe,[ZCe,Yt(" coarse persistent: "),z("div",QCe,mf(i.coarse_per),1),eTe,Oi(z("input",{type:"range",class:"persistent",id:"coarse",min:"0",max:i.coarse_max,step:i.coarse_step,"onUpdate:modelValue":t[20]||(t[20]=l=>i.coarse_per=l),onInput:t[21]||(t[21]=(...l)=>o.changePersistent&&o.changePersistent(...l))},null,40,tTe),[[Ra,i.coarse_per]]),nTe,Yt(" fine persistent: "),z("div",rTe,mf(i.fine_per),1),iTe,Oi(z("input",{type:"range",class:"persistent",id:"fine",min:"0",max:i.fine_max,step:i.fine_step,"onUpdate:modelValue":t[22]||(t[22]=l=>i.fine_per=l),onInput:t[23]||(t[23]=(...l)=>o.changePersistent&&o.changePersistent(...l))},null,40,oTe),[[Ra,i.fine_per]]),sTe,Yt(" rect-opacity: "),Oi(z("input",{type:"range",class:"opacity",id:"rect",min:"0",max:"1",step:"0.01","onUpdate:modelValue":t[24]||(t[24]=l=>i.rect_opacity=l),onInput:t[25]||(t[25]=(...l)=>o.changeRectOpacity&&o.changeRectOpacity(...l))},null,544),[[Ra,i.rect_opacity]]),aTe,Yt(" line-opacity: "),Oi(z("input",{type:"range",class:"opacity",id:"line",min:"0",max:"1",step:"0.01","onUpdate:modelValue":t[26]||(t[26]=l=>i.line_opacity=l),onInput:t[27]||(t[27]=(...l)=>o.changeLineOpacity&&o.changeLineOpacity(...l))},null,544),[[Ra,i.line_opacity]]),lTe,z("button",{onClick:t[28]||(t[28]=(...l)=>o.setHighlineEmpty&&o.setHighlineEmpty(...l))},"clear canvas"),uTe,Yt(" global time: "),z("input",{type:"checkbox",class:"globalx",onChange:t[29]||(t[29]=(...l)=>o.changeGlobalX&&o.changeGlobalX(...l)),checked:""},null,32),cTe,Yt(" global value: "),z("input",{type:"checkbox",class:"globaly",onChange:t[30]||(t[30]=(...l)=>o.changeGlobalY&&o.changeGlobalY(...l)),checked:""},null,32)])],64)}const dTe=xd(H_e,[["render",fTe],["__scopeId","data-v-dc27932f"]]),hTe={data(){return{}},methods:{},mounted(){},components:{FileReader:vY,NewCode:qOe,LineChart:QOe,ToolBar:dTe}},gTe={class:"file-reader"},pTe={class:"linechart"},mTe={class:"toolbar"},yTe={class:"newcode"};function vTe(e,t,n,r,i,o){const s=_u("FileReader"),a=_u("LineChart"),l=_u("ToolBar"),u=_u("NewCode");return bo(),ul("main",null,[z("div",gTe,[mt(s)]),z("div",pTe,[mt(a)]),z("div",mTe,[mt(l)]),z("div",yTe,[mt(u)])])}const bTe=xd(hTe,[["render",vTe],["__scopeId","data-v-9251f4f1"]]);$I(bTe).mount("#app")});export default xTe();
